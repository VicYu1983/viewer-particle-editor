{"version":3,"file":"Geolocation/Geolocation.js","sources":["webpack://Autodesk.Extensions.[name]/webpack/bootstrap","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/Ellipsoid.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/GlobeMath.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/LocalCS.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/Maps.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/index.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/ui/canvas.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/ui/canvasPoint.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/ui/geo_template.html","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/ui/panel.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/ui/point_template.html","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/ui/tool.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/ui/uiController.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./extensions/Geolocation/index.js\");\n","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}\n\n// from InfraWorks' Ellipsoid.h\nvar _a = 6378137.0; // meters\nvar _f = 298.257223563;\nvar _f_inv = 1.0 / _f;\nvar _b = _a * (1.0 - _f_inv);\nvar _e2 = (2.0 - _f_inv) * _f_inv;\n\n/**\n                                    * Ellipsoid values for WGS84\n                                    */\nexport var Ellipsoid = /*#__PURE__*/function () {function Ellipsoid() {_classCallCheck(this, Ellipsoid);}_createClass(Ellipsoid, null, [{ key: \"a\", value: function a()\n\n    {return _a;} }, { key: \"MajorRadius\", value: function MajorRadius()\n    {return _a;} }, { key: \"f\", value: function f()\n\n    {return _f_inv;} }, { key: \"InverseFlattening\", value: function InverseFlattening()\n    {return _f_inv;} }, { key: \"b\", value: function b()\n\n    {return _b;} }, { key: \"MinorRadius\", value: function MinorRadius()\n    {return _b;} }, { key: \"e2\", value: function e2()\n\n    {return _e2;} }, { key: \"EccentricitySquared\", value: function EccentricitySquared()\n    {return _e2;} }]);return Ellipsoid;}();","import { Ellipsoid } from './Ellipsoid';\n\n\nvar _pi = Math.PI; // 3.14159265358979; // Same as Revit\nvar _degToRadFactor = _pi / 180;\nvar _radToDegFactor = 180 / _pi;\n\nvar avp = Autodesk.Viewing.Private;\n\nexport function degToRad(degrees) {\n  return degrees * _degToRadFactor;\n}\n\nexport function radToDeg(radians) {\n  return radians * _radToDegFactor;\n}\n\n/**\n   * Converts a WGS84-coordinate (longitude, latitude, height) \n   * into a 3D-coordinate in geocentric ECEF format.\n   * \n   * @param {LmvVector3} wgsCoord \n   * @param {number} wgsCoord.x - in as Longitude\n   * @param {number} wgsCoord.y - in as Latitude\n   * @param {number} wgsCoord.z - in as Height in meters\n   * \n   * @returns {lmvVector3} coordinate in ECEF, meters.\n   */\nexport function ll2Geocentric(wgsCoord) {\n\n  var lambda = degToRad(wgsCoord.x); // longitude\n  var phi = degToRad(wgsCoord.y); // latitude\n  var h = wgsCoord.z;\n\n  var sinPhi = Math.sin(phi);\n  var cosPhi = Math.cos(phi);\n  var sinL = Math.sin(lambda);\n  var cosL = Math.cos(lambda);\n\n  var v = Ellipsoid.a() / Math.sqrt(1.0 - Ellipsoid.e2() * (sinPhi * sinPhi));\n  var tmp = (v + h) * cosPhi;\n\n  var x = tmp * cosL;\n  var y = tmp * sinL;\n  var z = ((1.0 - Ellipsoid.e2()) * v + h) * sinPhi;\n  return new avp.LmvVector3(x, y, z);\n}\n\n/**\n   * Converts a 3D-coordinate in geocentric ECEF format\n   * into a WGS84-coordinate (longitude, latitude, height)\n   * \n   * @param {LmvVector3} geoPoint - ECEF position in meters.\n   * @returns {lmvVector3} WGS84-coordinate (longitude, latitude, height).\n   */\nexport function geocentric2LL(geoPoint) {\n\n  var x = geoPoint.x;\n  var y = geoPoint.y;\n  var z = geoPoint.z;\n\n  var b = Ellipsoid.b();\n  var epsilon = Ellipsoid.e2() / (1.0 - Ellipsoid.e2());\n\n  var p = Math.sqrt(x * x + y * y);\n  var q = Math.atan2(z * Ellipsoid.a(), p * b);\n\n  // sin^3(q) and cos^3(q)\n  var sin3q = Math.sin(q);\n  var cos3q = Math.cos(q);\n  sin3q = sin3q * sin3q * sin3q;\n  cos3q = cos3q * cos3q * cos3q;\n\n  var phi = Math.atan2(z + epsilon * b * sin3q, p - Ellipsoid.e2() * Ellipsoid.a() * cos3q);\n  var lambda = Math.atan2(y, x);\n\n  var sin2phi = Math.sin(phi);\n  sin2phi = sin2phi * sin2phi;\n\n  var v = Ellipsoid.a() / Math.sqrt(1.0 - Ellipsoid.e2() * sin2phi);\n  var h = p / Math.cos(phi) - v;\n\n  var xx = radToDeg(lambda); // longitude\n  var yy = radToDeg(phi); // latitude\n  var zz = h; // height(m)\n  return new avp.LmvVector3(xx, yy, zz);\n}","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}import { degToRad, ll2Geocentric, geocentric2LL } from './GlobeMath';\n\nvar avp = Autodesk.Viewing.Private;\n\n// from InfraWorks' LocalCS.h\nexport var LocalCS = /*#__PURE__*/function () {\n\n  /**\n                                                * Initializes a transformation context that can convert from LMV space to Latitude Longitude,\n                                                * based on georeference attributes of a specific SVF model.\n                                                * @param {LmvVector3} originLL84 - WGS84 world position expressed in { x: longitude, y: latutude, z: 0 }\n                                                */\n  function LocalCS(originLL84, geoRefTransform, unitToMeter, modelToLmv) {_classCallCheck(this, LocalCS);\n\n    this.m_originLL84 = originLL84.clone();\n\n    var worldOrigin = ll2Geocentric(originLL84);\n\n    //Converts model coordinates to meters\n    var unitScale = new avp.LmvMatrix4(true);\n    unitScale.elements[0] = unitScale.elements[5] = unitScale.elements[10] = unitToMeter || 1.0;\n\n    //Adds geocentric origin offset of the local ENU origin\n    var translation = new avp.LmvMatrix4(true);\n    translation.elements[12] = worldOrigin.x;\n    translation.elements[13] = worldOrigin.y;\n    translation.elements[14] = worldOrigin.z;\n\n    //Rotates from ENU to geocentric basis\n    var enu2ecefOrientation = LocalCS.createEnu2Ecef({ x: originLL84.x, y: originLL84.y });\n\n    if (!geoRefTransform)\n    geoRefTransform = new avp.LmvMatrix4(true);\n\n    if (!modelToLmv)\n    modelToLmv = new avp.LmvMatrix4(true);\n\n    var lmvToModel = new avp.LmvMatrix4(true);\n    lmvToModel.getInverse(modelToLmv);\n\n    this.m_model2ecef = translation //add geocentric origin\n    .multiply(enu2ecefOrientation) //geocentric orientation\n    .multiply(unitScale) //scale refpoint space to meters\n    .multiply(geoRefTransform) //from model local to refPoint (ENU) space\n    .multiply(lmvToModel); //from LMV scene to model local\n\n    this.m_ecef2model = new avp.LmvMatrix4(true);\n    this.m_ecef2model.getInverse(this.m_model2ecef);\n  }_createClass(LocalCS, [{ key: \"getLL84\", value: function getLL84()\n\n    {\n      return this.m_originLL84;\n    }\n\n    /**\n       * Conversion from global geocentric coords to ENU coords (= local)\n       * @param {LmvVector3} point - in global geocentric coords\n       * @returns {LmvVector3} - point in ENU coords\n       */ }, { key: \"LL842LmvPoint\", value: function LL842LmvPoint(\n    point) {\n      var localPoint = ll2Geocentric(point);\n      localPoint = this.m_ecef2model.transformPoint(localPoint);\n      return localPoint;\n    }\n\n    /**\n       * Conversion from ENU coords (= local) to global geocentric coords\n       * @param {LmvVector3} point - in ENU coords\n       * @returns {LmvVector3} - point in global geocentric coords\n       */ }, { key: \"lmv2LL84Point\", value: function lmv2LL84Point(\n    point) {\n      var worldPoint = this.m_model2ecef.transformPoint(point.clone());\n      return geocentric2LL(worldPoint);\n    }\n\n    /**\n       * Computes the orientation matrix M for a local ENU system.\n       * A point p in geocentric space can be converted to the ENU system point p' \n       * by p' = M*(p-anchor), where anchor is the origin in geocentric space.\n       * \n       * ECEF = Earth-Centered, Earth-Fixed\n       * ENU = East/North/Up\n       * \n       * @param {LmvVector3} originLL84\n       * @returns {LmvMatrix4}\n       */ }], [{ key: \"createEnu2Ecef\", value: function createEnu2Ecef(\n    originLL84) {\n\n      var lambda = degToRad(originLL84.x);\n      var phi = degToRad(originLL84.y);\n\n      var sinLambda = Math.sin(lambda);\n      var cosLambda = Math.cos(lambda);\n      var sinPhi = Math.sin(phi);\n      var cosPhi = Math.cos(phi);\n\n      var ret = new avp.LmvMatrix4(true);\n      ret.set(\n      -sinLambda, -sinPhi * cosLambda, cosPhi * cosLambda, 0,\n      cosLambda, -sinPhi * sinLambda, cosPhi * sinLambda, 0,\n      0, cosPhi, sinPhi, 0,\n      0, 0, 0, 1);\n\n      return ret;\n    } }, { key: \"createFromModel\", value: function createFromModel(\n\n    model) {\n\n      var metadata = model.getData().metadata || {};\n      var geoRef = metadata.georeference || {};\n      if (!Array.isArray(geoRef.positionLL84)) {\n        return null;\n      }\n\n      //NOTE: [TS] The elevation of the LL84 point comes in as 0. However,\n      //I suspect that the LMV reference point is not always given at sea level,\n      //so we need to use a more appropriate elevation for the LL84 point. Otherwise\n      //the elevation values will be incorrect (by some fixed but unknown offset).\n      var ll84 = geoRef.positionLL84;\n      var originLL84 = new avp.LmvVector3(ll84[0], ll84[1], ll84[2]);\n\n      var localCS = new LocalCS(originLL84, model.getData().refPointTransform, model.getUnitScale(), model.getData().placementWithOffset);\n\n      return localCS;\n    } }]);return LocalCS;}();","\n\nexport function getGoogleMapsUrl(pointLL84) {\n\n  if (!pointLL84)\n  return null;\n\n  var longitude = pointLL84.x;\n  var latitude = pointLL84.y;\n\n  var URL = \"https://www.google.com/maps/search/?api=1&query=\".concat(latitude, \",\").concat(longitude);\n  return URL;\n}","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _inherits(subClass, superClass) {if (typeof superClass !== \"function\" && superClass !== null) {throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === \"function\") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}\nimport { PointTool } from './ui/tool';\nimport { UiController } from './ui/uiController';\nimport { LocalCS } from './LocalCS';\nimport { getGoogleMapsUrl as _getGoogleMapsUrl } from './Maps';\nimport * as GlobeMath from './GlobeMath';\n\nvar av = Autodesk.Viewing;\nvar avp = Autodesk.Viewing.Private;\n\nexport * from './LocalCS';\n\n/**\n                            * Provides functions for converting GPS coordinates in WGS-84 format { x: Longitude, y: Latitude, z: Height(m) } into\n                            * Viewer scene coordinates, and back. Supports a single model loaded into the scene.\n                            * \n                            * The extension id is: `Autodesk.Geolocation`\n                            * \n                            * @example\n                            *   viewer.loadExtension('Autodesk.Geolocation')\n                            * \n                            * @memberof Autodesk.Viewing.Extensions\n                            * @alias Autodesk.Viewing.Extensions.GeolocationExtension\n                            * @see {@link Autodesk.Viewing.Extension} for common inherited methods.\n                            */\nexport var GeolocationExtension = /*#__PURE__*/function (_av$Extension) {_inherits(GeolocationExtension, _av$Extension);var _super = _createSuper(GeolocationExtension);\n\n  /**\n                                                                                                                                                                          * @param {Autodesk.Viewing.Viewer3D} viewer - The Viewer instance\n                                                                                                                                                                          * @param {object} [options] - Not used\n                                                                                                                                                                          */\n  function GeolocationExtension(viewer, options) {var _this;_classCallCheck(this, GeolocationExtension);\n    _this = _super.call(this, viewer, options);\n    _this.nextPointId = 0;return _this;\n  }_createClass(GeolocationExtension, [{ key: \"load\", value: function load()\n\n\n\n\n\n    {\n\n      this.ui = new UiController(this),\n      this.tool = new PointTool(this);\n      this.viewer.toolController.registerTool(this.tool);\n\n      return true;\n    } }, { key: \"unload\", value: function unload()\n\n    {\n\n      this.deactivate();\n\n      if (this.tool) {\n        this.viewer.toolController.deregisterTool(this.tool);\n        this.tool.destroy();\n        this.tool = null;\n      }\n\n      if (this.ui) {\n        this.ui.destroy();\n        this.ui = null;\n      }\n\n      this.viewer = null;\n\n      return true;\n    }\n\n    /**\n       * When active, the extension will detect clicks on the model and will\n       * place a marker on the model. A panel will be displayed containing vertices clicked\n       * on the model. Each point-entry will also contain GPS its associated GPS position.\n       * \n       * @alias Autodesk.Viewing.Extensions.GeolocationExtension#activate\n       */ }, { key: \"activate\", value: function activate()\n    {\n      if (!this.viewer.model)\n      return false;\n      if (this.isActive())\n      return true;\n      this.ui.activate();\n      this.viewer.toolController.activateTool(this.tool.getName());\n      if (this.viewer.model.is3d()) {\n        this.viewer.getExtension('Autodesk.ViewCubeUi', function (ext) {\n          ext.showTriad(true);\n        });\n      }\n      return true;\n    }\n\n    /**\n       * Stops detecting click events on the canvas and closes the Panel.\n       * \n       * @alias Autodesk.Viewing.Extensions.GeolocationExtension#deactivate\n       */ }, { key: \"deactivate\", value: function deactivate()\n    {\n      if (!this.isActive())\n      return true;\n      this.ui.deactivate();\n      this.viewer.toolController.deactivateTool(this.tool.getName());\n      if (this.viewer.model && this.viewer.model.is3d()) {\n        this.viewer.getExtension('Autodesk.ViewCubeUi', function (ext) {\n          ext.showTriad(false);\n        });\n      }\n      return true;\n    }\n\n    /**\n       * Whether the extension is active.\n       * When the extension is active, click events will be processed and added\n       * into a Panel.\n       * \n       * @returns {boolean} True if the extension is active.\n       * \n       * @alias Autodesk.Viewing.Extensions.GeolocationExtension#isActive\n       */ }, { key: \"isActive\", value: function isActive()\n    {\n      var toolActive = this.viewer.toolController.isToolActivated(this.tool.getName());\n      return toolActive;\n    }\n\n    /**\n       * User has clicked on the canvas and a new point is to be added.\n       *\n       * @param {object} pointData \n       * @private\n       */ }, { key: \"pushPoint\", value: function pushPoint(\n    pointData) {\n      pointData.__id = this.nextPointId++;\n      pointData.__viewerState = this.viewer.getState({ viewport: true });\n      this.ui.pushPoint(pointData);\n    }\n\n    /**\n       * Invoked by Panel UI; removes a point from the canvas.\n       *\n       * @param pointData\n       * @private\n       */ }, { key: \"removePoint\", value: function removePoint(\n    pointData) {\n      this.ui.removePoint(pointData);\n    }\n\n    /**\n       * @private\n       */ }, { key: \"getLocalCS\", value: function getLocalCS()\n    {\n      if (!this._localCS) {\n        this._localCS = LocalCS.createFromModel(this.viewer.model);\n      }\n      return this._localCS;\n    }\n\n    /**\n       * @returns {boolean} true when the model contains geolocation data.\n       * \n       * @alias Autodesk.Viewing.Extensions.GeolocationExtension#hasGeolocationData\n       */ }, { key: \"hasGeolocationData\", value: function hasGeolocationData()\n    {\n      var localCs = this.getLocalCS();\n      return !!localCs;\n    }\n\n    /**\n       * Converts viewer coordinates (obtained with something like `viewer.clientToWorld()`)\n       * into { x: Longitude, y: Latitude, z: Height (meters) } in WGS-84 format.\n       * \n       * @param {THREE.Vector3} lmvPoint - 3D point in the scene\n       * @returns {THREE.Vector3} GPS coordinate in WGS-84 format: { x: Longitude, y: Latitude, z: Height }\n       * \n       * @alias Autodesk.Viewing.Extensions.GeolocationExtension#lmvToLonLat\n       */ }, { key: \"lmvToLonLat\", value: function lmvToLonLat(\n    lmvPoint) {\n      var thePoint = new avp.LmvVector3(lmvPoint.x, lmvPoint.y, lmvPoint.z);\n      var localCS = this.getLocalCS();\n      var lonLat = localCS.lmv2LL84Point(thePoint);\n      return lonLat;\n    }\n\n    /**\n       * Converts coordinates from { x: Longitude, y: Latitude, z: Height (meters) } in WGS-84 format\n       * into viewer scene coordinates.\n       * \n       * @param {THREE.Vector3} lonLat - GPS coordinate in WGS-84 format: { x: Longitude, y: Latitude, z: Height }\n       * @returns {THREE.Vector3} 3D point in the scene\n       * \n       * @alias Autodesk.Viewing.Extensions.GeolocationExtension#lonLatToLmv\n       */ }, { key: \"lonLatToLmv\", value: function lonLatToLmv(\n    lonLat) {\n      var lonLatPoint = new avp.LmvVector3(lonLat.x, lonLat.y, lonLat.z || 0);\n      var localCS = this.getLocalCS();\n      var lmvPoint = localCS.LL842LmvPoint(lonLatPoint);\n      return lmvPoint;\n    }\n\n    /**\n       * Returns a Google Maps URL with a PIN on the specified GPS location.\n       * When no argument is provided, the URL will use the Model's geolocation if available.\n       * \n       * @param {THREE.Vector3} [pointLL84] - GPS location in WGS-84 format: { x: Longitude, y: Latitude }. Height is ignored.\n       * \n       * @alias Autodesk.Viewing.Extensions.GeolocationExtension#openGoogleMaps\n       */ }, { key: \"getGoogleMapsUrl\", value: function getGoogleMapsUrl(\n    pointLL84) {\n\n      var localCS = this.getLocalCS();\n      if (!pointLL84 && !localCS) {\n        console.warn(\"Model doesn't contain geolocation data.\");\n        return;\n      }\n\n      var wgs84 = pointLL84 || localCS.getLL84();\n      return _getGoogleMapsUrl(wgs84);\n    }\n\n    /**\n       * Returns a Promise that resolves with a position in Viewer-space coordinates based on the\n       * device's real world GPS position.\n       * \n       * @returns {Promise} that resolves with a THREE.Vector3 containing Viewer-space coordinates. It rejects if device's real world GPS position is not available.\n       *\n       * @alias Autodesk.Viewing.Extensions.GeolocationExtension#getCurrentPositionLmv\n       */ }, { key: \"getCurrentPositionLmv\", value: function getCurrentPositionLmv()\n    {var _this2 = this;\n\n      if (!this.hasGeolocationData()) {\n        return Promise.reject(\"Model doesn't contain geolocation data.\");\n      }\n\n      return new Promise(function (resolve, reject) {\n        if (\"geolocation\" in navigator) {\n          navigator.geolocation.getCurrentPosition(function (position) {\n            var lmvPos = _this2.lonLatToLmv({ x: position.coords.longitude, y: position.coords.latitude, z: 0 });\n            resolve(lmvPos);\n          });\n        } else {\n          reject('geolocation API not available on this device.');\n        }\n      });\n    } }], [{ key: \"getGlobeMath\", value: function getGlobeMath() {return GlobeMath;} }]);return GeolocationExtension;}(av.Extension);\n\n\n\n\nav.theExtensionManager.registerExtension('Autodesk.Geolocation', GeolocationExtension);","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}import { CanvasPoint } from './canvasPoint';\n\nvar av = Autodesk.Viewing;\n\n/**\n                            * Maintains a list of 3D points on screen.\n                            */\nexport var CanvasPoints = /*#__PURE__*/function () {\n\n  function CanvasPoints(extension) {_classCallCheck(this, CanvasPoints);\n    this.extension = extension;\n    this.viewer = extension.viewer;\n    this.setGlobalManager(this.viewer.globalManager);\n    this._points = [];\n\n    this.onCameraChange = this.onCameraChange.bind(this);\n  }_createClass(CanvasPoints, [{ key: \"pushPoint\", value: function pushPoint(\n\n    pointData) {\n\n      if (!this.divContainer) {\n        var _document = this.getDocument();\n        this.divContainer = _document.createElement('div');\n        this.divContainer.style.position = 'absolute';\n        this.divContainer.style.top = \"0\";\n        this.divContainer.style.left = \"0\";\n        this.divContainer.style.width = \"100%\";\n        this.divContainer.style.height = \"100%\";\n        this.divContainer.style['pointer-events'] = \"none\";\n        this.viewer.container.appendChild(this.divContainer);\n\n        this.viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\n      }\n\n      var canvasPoint = new CanvasPoint(this.viewer, pointData, this.divContainer);\n      this._points.push(canvasPoint);\n    } }, { key: \"removePoint\", value: function removePoint(\n\n    pointData) {\n      var index = -1;\n      for (var i = 0; i < this._points.length; ++i) {\n        if (this._points[i].hasData(pointData)) {\n          index = i;\n          break;\n        }\n      }\n      if (index === -1)\n      return;\n      var canvasPoint = this._points[index];\n      canvasPoint.destroy();\n      this._points.splice(index, 1);\n    } }, { key: \"destroy\", value: function destroy()\n\n    {\n      if (this._points) {\n        this._points.forEach(function (canvasPoint) {\n          canvasPoint.destroy();\n        });\n        this._points = null;\n      }\n      if (this.divContainer) {\n        this.divContainer.parentElement.removeChild(this.divContainer);\n        this.divContainer = null;\n      }\n\n      this.extension = null;\n\n      this.viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\n      this.viewer = null;\n    } }, { key: \"onCameraChange\", value: function onCameraChange(\n\n    event) {\n      this._points.forEach(function (canvasPoint) {\n        canvasPoint.onCameraChange(event);\n      });\n    } }]);return CanvasPoints;}();\n\n\nav.GlobalManagerMixin.call(CanvasPoints.prototype);","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}\nvar av = Autodesk.Viewing;\n\nexport var CanvasPoint = /*#__PURE__*/function () {\n\n  function CanvasPoint(viewer, data, parentDiv) {_classCallCheck(this, CanvasPoint);\n    this.viewer = viewer;\n    this.setGlobalManager(this.viewer.globalManager);\n    this.data = data;\n\n    var _document = this.getDocument();\n    this.div = _document.createElement('div');\n    this.div.style.position = 'absolute';\n    this.div.style.background = 'rgb(14, 14, 14)';\n    this.div.textContent = data.__id;\n    this.onCameraChange();\n\n    parentDiv.appendChild(this.div);\n  }_createClass(CanvasPoint, [{ key: \"hasData\", value: function hasData(\n\n    data) {\n      return this.data === data;\n    } }, { key: \"onCameraChange\", value: function onCameraChange()\n\n    {\n      var clientPos = this.viewer.worldToClient(this.data.point);\n      this.div.style.left = clientPos.x + \"px\";\n      this.div.style.top = clientPos.y + \"px\";\n    } }, { key: \"destroy\", value: function destroy()\n\n    {\n      if (this.div) {\n        this.div.parentElement.removeChild(this.div);\n        this.div = null;\n      }\n      this.viewer = null;\n      this.data = null;\n    } }]);return CanvasPoint;}();\n\n\n\n\nav.GlobalManagerMixin.call(CanvasPoint.prototype);","module.exports = \"\\n<table style=\\\"width:100%;\\\">\\n    <tr user-data=\\\"row-positionLL84\\\" style=\\\"color: #2cd86a;\\\">\\n        <td>GPS (positionLL84)</td>\\n        <td style=\\\"border: 1px solid black\\\">_latitude_</td>\\n        <td style=\\\"border: 1px solid black;\\\">_longitude_</td>\\n        <td style=\\\"border: 1px solid black;\\\">_height_meters_</td>\\n    </tr>\\n    <tr user-data=\\\"row-refPointLMV\\\">\\n        <td>Viewer (refPointLMV)</td>\\n        <td style=\\\"border: 1px solid black\\\">_x_</td>\\n        <td style=\\\"border: 1px solid black;\\\">_y_</td>\\n        <td style=\\\"border: 1px solid black;\\\">_z_</td>\\n    </tr>\\n    <tr user-data=\\\"row-angleToTrueNorth\\\">\\n        <td>angleToTrueNorth</td>\\n        <td style=\\\"border: 1px solid black\\\" colspan=\\\"3\\\">_angle_deg_</td>\\n    </tr>\\n    <tr user-data=\\\"row-scaleFactor\\\">\\n        <td>scaleFactor</td>\\n        <td style=\\\"border: 1px solid black\\\" colspan=\\\"3\\\">_scale_num_</td>\\n    </tr>\\n    <tr user-data=\\\"row-refPointTransform\\\">\\n        <td>refPointTransform</td>\\n        <td style=\\\"border: 1px solid black\\\" colspan=\\\"3\\\">_yes_or_no_</td>\\n    </tr>\\n    <tr user-data=\\\"row-distanceUnit\\\">\\n        <td>distanceUnit</td>\\n        <td style=\\\"border: 1px solid black\\\" colspan=\\\"3\\\">_meters_or_inches_or_etc_</td>\\n    </tr>\\n    <tr user-data=\\\"row-globalOffset\\\">\\n        <td>globalOffset</td>\\n        <td style=\\\"border: 1px solid black\\\">_x_</td>\\n        <td style=\\\"border: 1px solid black;\\\">_y_</td>\\n        <td style=\\\"border: 1px solid black;\\\">_z_</td>\\n    </tr>\\n    \\n</table>\\n\"","function _typeof(obj) {\"@babel/helpers - typeof\";if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {_typeof = function _typeof(obj) {return typeof obj;};} else {_typeof = function _typeof(obj) {return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;};}return _typeof(obj);}function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}function _get(target, property, receiver) {if (typeof Reflect !== \"undefined\" && Reflect.get) {_get = Reflect.get;} else {_get = function _get(target, property, receiver) {var base = _superPropBase(target, property);if (!base) return;var desc = Object.getOwnPropertyDescriptor(base, property);if (desc.get) {return desc.get.call(receiver);}return desc.value;};}return _get(target, property, receiver || target);}function _superPropBase(object, property) {while (!Object.prototype.hasOwnProperty.call(object, property)) {object = _getPrototypeOf(object);if (object === null) break;}return object;}function _inherits(subClass, superClass) {if (typeof superClass !== \"function\" && superClass !== null) {throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } });if (superClass) _setPrototypeOf(subClass, superClass);}function _setPrototypeOf(o, p) {_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {o.__proto__ = p;return o;};return _setPrototypeOf(o, p);}function _createSuper(Derived) {var hasNativeReflectConstruct = _isNativeReflectConstruct();return function _createSuperInternal() {var Super = _getPrototypeOf(Derived),result;if (hasNativeReflectConstruct) {var NewTarget = _getPrototypeOf(this).constructor;result = Reflect.construct(Super, arguments, NewTarget);} else {result = Super.apply(this, arguments);}return _possibleConstructorReturn(this, result);};}function _possibleConstructorReturn(self, call) {if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self) {if (self === void 0) {throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _isNativeReflectConstruct() {if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;if (Reflect.construct.sham) return false;if (typeof Proxy === \"function\") return true;try {Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));return true;} catch (e) {return false;}}function _getPrototypeOf(o) {_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {return o.__proto__ || Object.getPrototypeOf(o);};return _getPrototypeOf(o);}import POINT_HTML from './point_template.html';\nimport GEO_HTML from './geo_template.html';\n\nvar avu = Autodesk.Viewing.UI;\nvar HEIGHT_ADJUSTMENT = 80;\n\n/**\n                             * The panel is meant to be used during debugging only.\n                             */\nexport var Panel = /*#__PURE__*/function (_avu$DockingPanel) {_inherits(Panel, _avu$DockingPanel);var _super = _createSuper(Panel);\n\n  function Panel(extension) {var _this;_classCallCheck(this, Panel);\n    _this = _super.call(this, extension.viewer.container, 'lmv-points-extension', 'Points', {});\n    _this.setGlobalManager(extension.globalManager);\n\n    _this.title.classList.add(\"docking-panel-delimiter-shadow\");\n    _this.container.classList.add('property-panel');\n    _this.extension = extension;\n    _this.viewer = extension.viewer;\n    _this.nonScrollingContentHeight = 0;return _this;\n  }_createClass(Panel, [{ key: \"destroy\", value: function destroy()\n\n    {\n      if (this.myTree) {\n        this.myTree.destroy();\n        this.myTree = null;\n      }\n      if (this.container) {\n        this.container.parentElement.removeChild(this.container);\n        this.container = null;\n      }\n      this.extension = null;\n      this.viewer = null;\n    }\n\n    /**\n       * \n       * @param {Object} pointData - Containing a 3D position along with additional data \n       * @param {Autodesk.Viewing.Model} pointData.model - The model that has been intersected\n       * @param {number} pointData.dbId - The model's database id of the object intersected \n       * @param {number} pointData.fragId - The fragment id within the object\n       * @param {Object} pointData.point - Position { x, y, z } number values, which include globalOffset.\n       * @param {number} pointData.__id - identifier\n       * @param {Object} pointData.__viewerState - viewport state when the point was added.\n       */ }, { key: \"pushPoint\", value: function pushPoint(\n    pointData) {\n      var parent = this.myTree.myRootContainer;\n      this.myTree.createElement_(pointData, parent);\n    } }, { key: \"removePoint\", value: function removePoint(\n\n    pointData) {\n      var elem = this.myTree.getElementForNode(pointData);\n      this.myTree.myRootContainer.removeChild(elem);\n    } }, { key: \"setVisible\", value: function setVisible(\n\n    show) {\n      _get(_getPrototypeOf(Panel.prototype), \"setVisible\", this).call(this, show);\n      show && this._create();\n    }\n\n    /**\n       * Invoked by resizeToContent()\n       */ }, { key: \"getContentSize\", value: function getContentSize()\n    {\n      return {\n        height: this.scrollContainer.scrollHeight + HEIGHT_ADJUSTMENT + this.nonScrollingContentHeight,\n        width: this.scrollContainer.scrollWidth };\n\n    } }, { key: \"_create\", value: function _create()\n\n    {\n      if (this.myTree) return;\n\n      this.container.style.top = '20px';\n      this.container.style.width = '420px';\n      this.container.style.height = '480px';\n\n      var _document = this.getDocument();\n      // Present geolocation metadata\n      var geoDiv = _document.createElement('div');\n      geoDiv.className = 'docking-panel-container-solid-color-a';\n      geoDiv.style['font-size'] = '12px';\n      geoDiv.style['padding'] = '0px 6px';\n      geoDiv.style['border'] = 'solid 5px green';\n      geoDiv.innerHTML = GEO_HTML;\n      this.container.appendChild(geoDiv);\n\n\n      this._setGeolocationMetadata(geoDiv, this.viewer.model);\n\n      // Scrolling panel\n      this.nonScrollingContentHeight = geoDiv.clientHeight;\n      var extraHeight = HEIGHT_ADJUSTMENT + this.nonScrollingContentHeight;\n      this.createScrollContainer({ left: false, heightAdjustment: extraHeight, marginTop: 0 });\n\n      // which contains a tree view\n      var delegate = this._createDelegate();var options = {};\n      this.myTree = new Autodesk.Viewing.UI.Tree(delegate, null, this.scrollContainer, options);\n\n      // Bring footer forward\n      this.container.removeChild(this.footer);\n      this.container.appendChild(this.footer);\n\n      this.resizeToContent();\n    } }, { key: \"_createDelegate\", value: function _createDelegate()\n\n    {var _this2 = this;\n      var delegate = new Autodesk.Viewing.UI.TreeDelegate();\n      delegate.setGlobalManager(this.globalManager);\n      delegate.extension = this.extension;\n      delegate.viewer = this.viewer;\n      delegate.getTreeNodeId = function (node) {\n        return node.__id;\n      };\n      delegate.getTreeNodeLabel = function (node) {\n        return node.__id;\n      };\n      delegate.getTreeNodeClass = function (node) {\n        return null;\n      };\n      delegate.isTreeNodeGroup = function (node) {\n        return false;\n      };\n      delegate.shouldCreateTreeNode = function (node) {\n        return true;\n      };\n      // Adds additional HTML and styling to the created entry\n      delegate.createTreeNode = function (node, header, options, type, depth) {\n\n        header.innerHTML = POINT_HTML;\n\n        // Label for point identification\n        header.querySelector('label').textContent = node.__id;\n\n        // LMV { x, y, z } values\n        var row = header.querySelector('tr[user-data=\"lmv\"]');\n        var xyz = row.querySelectorAll('td');\n        setTextContent(xyz[1], node.point.x); // skip first cell\n        setTextContent(xyz[2], node.point.y);\n        setTextContent(xyz[3], node.point.z);\n\n        // LonLat/WGS84 values\n        row = header.querySelector('tr[user-data=\"wgs84\"]');\n        if (this.extension.hasGeolocationData()) {\n          var lonLat = this.extension.lmvToLonLat(node.point);\n          xyz = row.querySelectorAll('td');\n          setTextContent(xyz[1], lonLat.x); // skip first cell\n          setTextContent(xyz[2], lonLat.y);\n          setTextContent(xyz[3], lonLat.z);\n        } else {\n          // Hide\n          row.style.display = 'none';\n        }\n\n\n        // Hide \"Map\" button when there's no geolocation data for the model\n        if (!this.extension.hasGeolocationData()) {\n          header.querySelector('[user-data=map]').style.display = 'none';\n        }\n      };\n      delegate.onTreeNodeClick = function (tree, node, event) {\n\n        if (event.target.tagName === 'BUTTON') {\n\n          var action = event.target.getAttribute('user-data');\n          var _window = _this2.getWindow();\n          switch (action) {\n            case 'close':{\n                _this2.extension.removePoint(node);\n                return;\n              }\n\n            case 'map':{\n                var lonLat = _this2.extension.lmvToLonLat(node.point);\n                var mapsUrl = _this2.extension.getGoogleMapsUrl(lonLat);\n                console.log(mapsUrl);\n                _window.open(mapsUrl);\n                return;\n              }}\n\n\n          return;\n        }\n\n        // Restore camera position\n        _this2.viewer.restoreState(node.__viewerState);\n        //console.log(node.point);\n      };\n\n      return delegate;\n    }\n\n    /**\n       * @private\n       * Renders model's geolocation data onto an HTML div\n       * \n       * @param {HtmlDiv} geoDiv \n       * @param {Object} model\n       */ }, { key: \"_setGeolocationMetadata\", value: function _setGeolocationMetadata(\n    geoDiv, model) {\n      // Refer to geo_template.html\n      var row;\n      var metadata = model.getData().metadata || {};\n      var geoRef = metadata.georeference || {};\n      var otherVals = metadata['custom values'] || {};\n      var globalOffset = model.getData().globalOffset || { x: 0, y: 0, z: 0 };\n      var distanceUnit = model.getDisplayUnit();\n\n      // globalOffset\n      row = geoDiv.querySelector('[user-data=row-globalOffset]');\n      setTextContent(row.children[1], globalOffset.x);\n      setTextContent(row.children[2], globalOffset.y);\n      setTextContent(row.children[3], globalOffset.z);\n\n      // positionLL84\n      row = geoDiv.querySelector('[user-data=row-positionLL84]');\n      setTextContent(row.children[1], Array.isArray(geoRef.positionLL84) ? geoRef.positionLL84[0] : 'N/A');\n      setTextContent(row.children[2], Array.isArray(geoRef.positionLL84) ? geoRef.positionLL84[1] : 'N/A');\n      setTextContent(row.children[3], Array.isArray(geoRef.positionLL84) ? geoRef.positionLL84[2] : 'N/A');\n\n      // refPointLMV\n      row = geoDiv.querySelector('[user-data=row-refPointLMV]');\n      setTextContent(row.children[1], Array.isArray(geoRef.refPointLMV) ? geoRef.refPointLMV[0] : 'N/A');\n      setTextContent(row.children[2], Array.isArray(geoRef.refPointLMV) ? geoRef.refPointLMV[1] : 'N/A');\n      setTextContent(row.children[3], Array.isArray(geoRef.refPointLMV) ? geoRef.refPointLMV[2] : 'N/A');\n\n      // angleToTrueNorth\n      row = geoDiv.querySelector('[user-data=row-angleToTrueNorth]');\n      setTextContent(row.children[1], otherVals.angleToTrueNorth !== undefined ? otherVals.angleToTrueNorth : 'N/A');\n\n      // scaleFactor\n      row = geoDiv.querySelector('[user-data=row-scaleFactor]');\n      setTextContent(row.children[1], otherVals.scaleFactor !== undefined ? otherVals.scaleFactor : 'N/A');\n\n      // refPointTransform\n      row = geoDiv.querySelector('[user-data=row-refPointTransform]');\n      setTextContent(row.children[1], Array.isArray(otherVals.refPointTransform) ? 'Available' : 'N/A');\n\n      // distanceUnit\n      row = geoDiv.querySelector('[user-data=row-distanceUnit]');\n      setTextContent(row.children[1], distanceUnit || 'N/A');\n\n    } }]);return Panel;}(avu.DockingPanel);\n\n\nfunction setTextContent(div, value, decimals) {\n  decimals = decimals || 6;\n  div.textContent = typeof value === 'number' ? value.toFixed(decimals) : value;\n  div.setAttribute('title', value);\n}","module.exports = \"<label style=\\\"font-size:22px;\\\">id</label>\\n<div style=\\\"float:right; margin-top:6px; \\\">\\n    <button user-data=\\\"map\\\" style=\\\"margin-right:10px;\\\">Map</button> \\n    <button user-data=\\\"close\\\" style=\\\"margin-right:10px;\\\">X</button> \\n</div>\\n<table style=\\\"width:100%;\\\">\\n    <tr user-data=\\\"lmv\\\" title=\\\"Coordinates in LMV space, obtained via viewer.clientToWorld(mouseX, mouseY);\\\">\\n        <td style=\\\"border: 1px solid black;\\\">LMV</td>\\n        <td style=\\\"border: 1px solid #F44336;\\\">x</td>\\n        <td style=\\\"border: 1px solid #4CAF50;\\\">y</td>\\n        <td style=\\\"border: 1px solid #2196F3;\\\">z</td>\\n    </tr>\\n    <tr user-data=\\\"wgs84\\\" title=\\\"Longitude, Latitude, and Height in WGS84.\\\">\\n        <td style=\\\"border: 1px solid black;\\\">LonLat</td>\\n        <td style=\\\"border: 1px solid #F44336;\\\">lon</td>\\n        <td style=\\\"border: 1px solid #4CAF50;\\\">lat</td>\\n        <td style=\\\"border: 1px solid #2196F3;\\\">height</td>\\n    </tr>\\n</table>\"","\nvar av = Autodesk.Viewing;\n\nexport function PointTool(extension) {\n\n  av.ToolInterface.call(this);\n  this.names = ['pointTool'];\n  this.extension = extension;\n  this.viewer = extension.viewer;\n\n  this.handleSingleClick = function (event, button) {\n\n    // Process only primary button\n    if (button !== 0)\n    return false;\n\n    var canvasX = event.canvasX;\n    var canvasY = event.canvasY;\n    var res = this.viewer.clientToWorld(canvasX, canvasY);\n\n    if (!res)\n    return false;\n\n    this.extension.pushPoint(res);\n    return true;\n  };\n\n  this.activate = function (name, viewerApi) {\n    this.viewer.impl.pauseHighlight(true);\n    this.viewer.clearSelection();\n  };\n\n  this.deactivate = function () {\n    this.viewer.impl.pauseHighlight(false);\n  };\n\n  this.destroy = function () {\n    this.viewer = null;\n  };\n\n}","function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}function _createClass(Constructor, protoProps, staticProps) {if (protoProps) _defineProperties(Constructor.prototype, protoProps);if (staticProps) _defineProperties(Constructor, staticProps);return Constructor;}import { Panel } from './panel';\nimport { CanvasPoints } from './canvas';\n\nexport var UiController = /*#__PURE__*/function () {\n\n  function UiController(extension) {_classCallCheck(this, UiController);\n\n    this.extension = extension;\n    this.panel = new Panel(extension);\n    this.canvas = new CanvasPoints(extension);\n  }_createClass(UiController, [{ key: \"pushPoint\", value: function pushPoint(\n\n    pointData) {\n\n      if (!pointData)\n      return;\n\n      // Make sure the panel is visible\n      this.panel.setVisible(true);\n      this.panel.pushPoint(pointData);\n\n      this.canvas.pushPoint(pointData);\n    } }, { key: \"removePoint\", value: function removePoint(\n\n    pointData) {\n\n      if (!pointData)\n      return;\n\n      this.panel.removePoint(pointData);\n      this.canvas.removePoint(pointData);\n    } }, { key: \"activate\", value: function activate()\n\n    {\n      this.panel.setVisible(true);\n    } }, { key: \"deactivate\", value: function deactivate()\n\n    {\n      this.panel.setVisible(false);\n    } }, { key: \"destroy\", value: function destroy()\n\n    {\n      this.extension = null;\n      if (this.panel) {\n        this.panel.destroy();\n        this.panel = null;\n      }\n      if (this.canvas) {\n        this.canvas.destroy();\n        this.canvas = null;\n      }\n    } }]);return UiController;}();"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtFA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC5HA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtPA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC9EA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC1CA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACzPA;;;;;;;;;;;;ACAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxCA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}