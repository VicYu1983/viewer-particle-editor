{"version":3,"sources":["webpack://Autodesk.Extensions.[name]/webpack/bootstrap","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/ui/point_template.html","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/ui/geo_template.html","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/ui/tool.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/ui/panel.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/ui/canvasPoint.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/ui/canvas.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/ui/uiController.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/Ellipsoid.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/GlobeMath.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/LocalCS.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/index.js","webpack://Autodesk.Extensions.[name]/./extensions/Geolocation/Maps.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","av","Autodesk","Viewing","PointTool","extension","ToolInterface","this","names","viewer","handleSingleClick","event","button","canvasX","canvasY","res","clientToWorld","pushPoint","activate","viewerApi","impl","pauseHighlight","clearSelection","deactivate","destroy","avu","UI","Panel","container","setGlobalManager","globalManager","title","classList","add","nonScrollingContentHeight","myTree","parentElement","removeChild","pointData","parent","myRootContainer","createElement_","elem","getElementForNode","show","_create","height","scrollContainer","scrollHeight","width","scrollWidth","style","top","geoDiv","getDocument","createElement","className","innerHTML","GEO_HTML","appendChild","_setGeolocationMetadata","model","clientHeight","extraHeight","createScrollContainer","left","heightAdjustment","marginTop","delegate","_createDelegate","Tree","footer","resizeToContent","TreeDelegate","getTreeNodeId","node","__id","getTreeNodeLabel","getTreeNodeClass","isTreeNodeGroup","shouldCreateTreeNode","createTreeNode","header","options","type","depth","POINT_HTML","querySelector","textContent","row","xyz","querySelectorAll","setTextContent","point","x","y","z","hasGeolocationData","lonLat","lmvToLonLat","display","onTreeNodeClick","tree","target","tagName","restoreState","__viewerState","action","getAttribute","_window","getWindow","removePoint","mapsUrl","getGoogleMapsUrl","console","log","open","metadata","getData","geoRef","georeference","otherVals","globalOffset","distanceUnit","getDisplayUnit","children","Array","isArray","positionLL84","refPointLMV","undefined","angleToTrueNorth","scaleFactor","refPointTransform","DockingPanel","div","decimals","toFixed","setAttribute","CanvasPoint","data","parentDiv","_document","position","background","onCameraChange","clientPos","worldToClient","GlobalManagerMixin","CanvasPoints","_points","divContainer","addEventListener","CAMERA_CHANGE_EVENT","canvasPoint","push","index","length","hasData","splice","forEach","removeEventListener","UiController","panel","canvas","setVisible","_a","_f_inv","_b","_e2","Ellipsoid","_pi","Math","PI","_degToRadFactor","_radToDegFactor","avp","Private","degToRad","degrees","radToDeg","radians","ll2Geocentric","wgsCoord","lambda","phi","h","sinPhi","sin","cosPhi","cos","sinL","cosL","v","a","sqrt","e2","tmp","LmvVector3","geocentric2LL","geoPoint","b","epsilon","q","atan2","sin3q","cos3q","sin2phi","xx","yy","zz","LocalCS","originLL84","geoRefTransform","unitToMeter","modelToLmv","m_originLL84","clone","worldOrigin","unitScale","LmvMatrix4","elements","translation","enu2ecefOrientation","createEnu2Ecef","lmvToModel","getInverse","m_model2ecef","multiply","m_ecef2model","sinLambda","cosLambda","ret","set","ll84","getUnitScale","placementWithOffset","localPoint","transformPoint","GeolocationExtension","nextPointId","GlobeMath","ui","tool","toolController","registerTool","deregisterTool","isActive","activateTool","getName","is3d","getExtension","ext","showTriad","deactivateTool","isToolActivated","getState","viewport","_localCS","createFromModel","getLocalCS","lmvPoint","thePoint","lmv2LL84Point","lonLatPoint","LL842LmvPoint","pointLL84","localCS","longitude","latitude","getLL84","warn","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","lmvPos","lonLatToLmv","coords","Extension","theExtensionManager","registerExtension"],"mappings":"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","file":"Geolocation/Geolocation.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 838);\n","module.exports = \"<label style=\\\"font-size:22px;\\\">id</label>\\n<div style=\\\"float:right; margin-top:6px; \\\">\\n    <button user-data=\\\"map\\\" style=\\\"margin-right:10px;\\\">Map</button> \\n    <button user-data=\\\"close\\\" style=\\\"margin-right:10px;\\\">X</button> \\n</div>\\n<table style=\\\"width:100%;\\\">\\n    <tr user-data=\\\"lmv\\\" title=\\\"Coordinates in LMV space, obtained via viewer.clientToWorld(mouseX, mouseY);\\\">\\n        <td style=\\\"border: 1px solid black;\\\">LMV</td>\\n        <td style=\\\"border: 1px solid #F44336;\\\">x</td>\\n        <td style=\\\"border: 1px solid #4CAF50;\\\">y</td>\\n        <td style=\\\"border: 1px solid #2196F3;\\\">z</td>\\n    </tr>\\n    <tr user-data=\\\"wgs84\\\" title=\\\"Longitude, Latitude, and Height in WGS84.\\\">\\n        <td style=\\\"border: 1px solid black;\\\">LonLat</td>\\n        <td style=\\\"border: 1px solid #F44336;\\\">lon</td>\\n        <td style=\\\"border: 1px solid #4CAF50;\\\">lat</td>\\n        <td style=\\\"border: 1px solid #2196F3;\\\">height</td>\\n    </tr>\\n</table>\"","module.exports = \"\\n<table style=\\\"width:100%;\\\">\\n    <tr user-data=\\\"row-positionLL84\\\" style=\\\"color: #2cd86a;\\\">\\n        <td>GPS (positionLL84)</td>\\n        <td style=\\\"border: 1px solid black\\\">_latitude_</td>\\n        <td style=\\\"border: 1px solid black;\\\">_longitude_</td>\\n        <td style=\\\"border: 1px solid black;\\\">_height_meters_</td>\\n    </tr>\\n    <tr user-data=\\\"row-refPointLMV\\\">\\n        <td>Viewer (refPointLMV)</td>\\n        <td style=\\\"border: 1px solid black\\\">_x_</td>\\n        <td style=\\\"border: 1px solid black;\\\">_y_</td>\\n        <td style=\\\"border: 1px solid black;\\\">_z_</td>\\n    </tr>\\n    <tr user-data=\\\"row-angleToTrueNorth\\\">\\n        <td>angleToTrueNorth</td>\\n        <td style=\\\"border: 1px solid black\\\" colspan=\\\"3\\\">_angle_deg_</td>\\n    </tr>\\n    <tr user-data=\\\"row-scaleFactor\\\">\\n        <td>scaleFactor</td>\\n        <td style=\\\"border: 1px solid black\\\" colspan=\\\"3\\\">_scale_num_</td>\\n    </tr>\\n    <tr user-data=\\\"row-refPointTransform\\\">\\n        <td>refPointTransform</td>\\n        <td style=\\\"border: 1px solid black\\\" colspan=\\\"3\\\">_yes_or_no_</td>\\n    </tr>\\n    <tr user-data=\\\"row-distanceUnit\\\">\\n        <td>distanceUnit</td>\\n        <td style=\\\"border: 1px solid black\\\" colspan=\\\"3\\\">_meters_or_inches_or_etc_</td>\\n    </tr>\\n    <tr user-data=\\\"row-globalOffset\\\">\\n        <td>globalOffset</td>\\n        <td style=\\\"border: 1px solid black\\\">_x_</td>\\n        <td style=\\\"border: 1px solid black;\\\">_y_</td>\\n        <td style=\\\"border: 1px solid black;\\\">_z_</td>\\n    </tr>\\n    \\n</table>\\n\"","\nconst av = Autodesk.Viewing;\n\nexport function PointTool(extension) {\n\n    av.ToolInterface.call(this);\n    this.names = ['pointTool'];\n    this.extension = extension;\n    this.viewer = extension.viewer;\n\n    this.handleSingleClick = function(event, button) {\n\n        // Process only primary button\n        if (button !== 0)\n            return false;\n\n        var canvasX = event.canvasX;\n        var canvasY = event.canvasY;\n        var res = this.viewer.clientToWorld(canvasX, canvasY);\n        \n        if (!res)\n            return false;\n\n        this.extension.pushPoint(res);\n        return true;\n    };\n\n    this.activate = function(name, viewerApi) {\n        this.viewer.impl.pauseHighlight(true);\n        this.viewer.clearSelection();\n    };\n\n    this.deactivate = function() {\n        this.viewer.impl.pauseHighlight(false);\n    };\n\n    this.destroy = function() {\n        this.viewer = null;\n    };\n\n}","import POINT_HTML from './point_template.html';\nimport GEO_HTML from './geo_template.html';\n\nconst avu = Autodesk.Viewing.UI;\nconst HEIGHT_ADJUSTMENT = 80;\n\n/**\n * The panel is meant to be used during debugging only.\n */\nexport class Panel extends avu.DockingPanel {\n\n    constructor(extension) {\n        super(extension.viewer.container, 'lmv-points-extension', 'Points', {});\n        this.setGlobalManager(extension.globalManager);\n\n        this.title.classList.add(\"docking-panel-delimiter-shadow\");\n        this.container.classList.add('property-panel');\n        this.extension = extension;\n        this.viewer = extension.viewer;\n        this.nonScrollingContentHeight = 0;\n    }\n\n    destroy() {\n        if (this.myTree) {\n            this.myTree.destroy();\n            this.myTree = null;\n        }\n        if (this.container) {\n            this.container.parentElement.removeChild(this.container);\n            this.container = null;\n        }\n        this.extension = null;\n        this.viewer = null;\n    }\n\n    /**\n     * \n     * @param {Object} pointData - Containing a 3D position along with additional data \n     * @param {Autodesk.Viewing.Model} pointData.model - The model that has been intersected\n     * @param {number} pointData.dbId - The model's database id of the object intersected \n     * @param {number} pointData.fragId - The fragment id within the object\n     * @param {Object} pointData.point - Position { x, y, z } number values, which include globalOffset.\n     * @param {number} pointData.__id - identifier\n     * @param {Object} pointData.__viewerState - viewport state when the point was added.\n     */\n    pushPoint(pointData) {\n        var parent = this.myTree.myRootContainer;\n        this.myTree.createElement_(pointData, parent);\n    }\n\n    removePoint(pointData) {\n        var elem = this.myTree.getElementForNode(pointData);\n        this.myTree.myRootContainer.removeChild(elem);\n    }\n\n    setVisible(show) {\n        super.setVisible(show);\n        show && this._create();\n    }\n\n    /**\n     * Invoked by resizeToContent()\n     */\n    getContentSize() {\n        return {\n            height: this.scrollContainer.scrollHeight + HEIGHT_ADJUSTMENT + this.nonScrollingContentHeight, \n            width: this.scrollContainer.scrollWidth\n        };\n    }\n\n    _create() {\n        if (this.myTree) return;\n\n        this.container.style.top = '20px';\n        this.container.style.width = '420px';\n        this.container.style.height = '480px';\n\n        const _document = this.getDocument();\n        // Present geolocation metadata\n        let geoDiv = _document.createElement('div');\n        geoDiv.className = 'docking-panel-container-solid-color-a';\n        geoDiv.style['font-size'] = '12px';\n        geoDiv.style['padding'] = '0px 6px';\n        geoDiv.style['border'] = 'solid 5px green';\n        geoDiv.innerHTML = GEO_HTML;\n        this.container.appendChild(geoDiv);\n\n        \n        this._setGeolocationMetadata(geoDiv, this.viewer.model);\n\n        // Scrolling panel\n        this.nonScrollingContentHeight = geoDiv.clientHeight;\n        const extraHeight = HEIGHT_ADJUSTMENT + this.nonScrollingContentHeight;\n        this.createScrollContainer({left: false, heightAdjustment: extraHeight, marginTop: 0});\n        \n        // which contains a tree view\n        var delegate = this._createDelegate(); var options = {};\n        this.myTree = new Autodesk.Viewing.UI.Tree(delegate, null, this.scrollContainer, options);\n\n        // Bring footer forward\n        this.container.removeChild(this.footer);\n        this.container.appendChild(this.footer);\n\n        this.resizeToContent();\n    }\n\n    _createDelegate() {\n        var delegate = new Autodesk.Viewing.UI.TreeDelegate();\n        delegate.setGlobalManager(this.globalManager);\n        delegate.extension = this.extension;\n        delegate.viewer = this.viewer;\n        delegate.getTreeNodeId = function(node) {\n            return node.__id;\n        };\n        delegate.getTreeNodeLabel = function(node) {\n            return node.__id;\n        };\n        delegate.getTreeNodeClass = function(node) {\n            return null;\n        };\n        delegate.isTreeNodeGroup = function(node) {\n            return false;\n        };\n        delegate.shouldCreateTreeNode = function (node){\n            return true;\n        };\n        // Adds additional HTML and styling to the created entry\n        delegate.createTreeNode = function(node, header, options, type, depth) {\n\n            header.innerHTML = POINT_HTML;\n\n            // Label for point identification\n            header.querySelector('label').textContent = node.__id;\n\n            // LMV { x, y, z } values\n            var row = header.querySelector('tr[user-data=\"lmv\"]');\n            var xyz = row.querySelectorAll('td');\n            setTextContent(xyz[1], node.point.x); // skip first cell\n            setTextContent(xyz[2], node.point.y);\n            setTextContent(xyz[3], node.point.z);\n\n            // LonLat/WGS84 values\n            row = header.querySelector('tr[user-data=\"wgs84\"]');\n            if (this.extension.hasGeolocationData()) {\n                var lonLat = this.extension.lmvToLonLat(node.point);\n                xyz = row.querySelectorAll('td');\n                setTextContent(xyz[1], lonLat.x); // skip first cell\n                setTextContent(xyz[2], lonLat.y);\n                setTextContent(xyz[3], lonLat.z);\n            } else {\n                // Hide\n                row.style.display = 'none';\n            }\n            \n\n            // Hide \"Map\" button when there's no geolocation data for the model\n            if (!this.extension.hasGeolocationData()) {\n                header.querySelector('[user-data=map]').style.display = 'none';\n            }\n        };\n        delegate.onTreeNodeClick = (tree, node, event) => {\n            \n            if (event.target.tagName === 'BUTTON') {\n                \n                let action = event.target.getAttribute('user-data');\n                const _window = this.getWindow();\n                switch (action) {\n                    case 'close': {\n                        this.extension.removePoint(node);\n                        return;\n                    }\n\n                    case 'map': {\n                        var lonLat = this.extension.lmvToLonLat(node.point);\n                        let mapsUrl = this.extension.getGoogleMapsUrl(lonLat);\n                        console.log(mapsUrl);\n                        _window.open(mapsUrl);\n                        return;\n                    }\n                }\n\n                return;\n            }\n\n            // Restore camera position\n            this.viewer.restoreState(node.__viewerState);\n            //console.log(node.point);\n        };\n\n        return delegate;\n    }\n\n    /**\n     * @private\n     * Renders model's geolocation data onto an HTML div\n     * \n     * @param {HtmlDiv} geoDiv \n     * @param {Object} model\n     */\n    _setGeolocationMetadata(geoDiv, model) {\n        // Refer to geo_template.html\n        let row;\n        const metadata = model.getData().metadata || {};\n        const geoRef = metadata.georeference || {};\n        const otherVals = metadata['custom values'] || {};\n        const globalOffset = model.getData().globalOffset || {x: 0, y: 0, z: 0}; \n        const distanceUnit = model.getDisplayUnit();\n        \n        // globalOffset\n        row = geoDiv.querySelector('[user-data=row-globalOffset]');\n        setTextContent(row.children[1], globalOffset.x);\n        setTextContent(row.children[2], globalOffset.y);\n        setTextContent(row.children[3], globalOffset.z);\n        \n        // positionLL84\n        row = geoDiv.querySelector('[user-data=row-positionLL84]');\n        setTextContent(row.children[1], Array.isArray(geoRef.positionLL84) ? geoRef.positionLL84[0] : 'N/A');\n        setTextContent(row.children[2], Array.isArray(geoRef.positionLL84) ? geoRef.positionLL84[1] : 'N/A');\n        setTextContent(row.children[3], Array.isArray(geoRef.positionLL84) ? geoRef.positionLL84[2] : 'N/A');\n\n        // refPointLMV\n        row = geoDiv.querySelector('[user-data=row-refPointLMV]');\n        setTextContent(row.children[1], Array.isArray(geoRef.refPointLMV) ? geoRef.refPointLMV[0] : 'N/A');\n        setTextContent(row.children[2], Array.isArray(geoRef.refPointLMV) ? geoRef.refPointLMV[1] : 'N/A');\n        setTextContent(row.children[3], Array.isArray(geoRef.refPointLMV) ? geoRef.refPointLMV[2] : 'N/A');\n\n        // angleToTrueNorth\n        row = geoDiv.querySelector('[user-data=row-angleToTrueNorth]');\n        setTextContent(row.children[1], otherVals.angleToTrueNorth !== undefined ? otherVals.angleToTrueNorth : 'N/A');\n\n        // scaleFactor\n        row = geoDiv.querySelector('[user-data=row-scaleFactor]');\n        setTextContent(row.children[1], otherVals.scaleFactor !== undefined ? otherVals.scaleFactor : 'N/A');\n\n        // refPointTransform\n        row = geoDiv.querySelector('[user-data=row-refPointTransform]');\n        setTextContent(row.children[1], Array.isArray(otherVals.refPointTransform) ? 'Available' : 'N/A');\n\n        // distanceUnit\n        row = geoDiv.querySelector('[user-data=row-distanceUnit]');\n        setTextContent(row.children[1], distanceUnit || 'N/A');\n        \n    }\n}\n\nfunction setTextContent(div, value, decimals) {\n    decimals = decimals || 6;\n    div.textContent = typeof value === 'number' ? value.toFixed(decimals) : value;\n    div.setAttribute('title', value);\n}\n","\nconst av = Autodesk.Viewing;\n\nexport class CanvasPoint {\n\n    constructor(viewer, data, parentDiv) {\n        this.viewer = viewer;\n        this.setGlobalManager(this.viewer.globalManager);\n        this.data = data;\n\n        const _document = this.getDocument();\n        this.div = _document.createElement('div');\n        this.div.style.position = 'absolute';\n        this.div.style.background = 'rgb(14, 14, 14)';\n        this.div.textContent = data.__id;\n        this.onCameraChange();\n\n        parentDiv.appendChild(this.div);\n    }\n\n    hasData(data) {\n        return this.data === data;\n    }\n\n    onCameraChange() {\n        var clientPos = this.viewer.worldToClient(this.data.point);\n        this.div.style.left = clientPos.x + \"px\";\n        this.div.style.top = clientPos.y + \"px\";\n    }\n\n    destroy() {\n        if (this.div) {\n            this.div.parentElement.removeChild(this.div);\n            this.div = null;\n        }\n        this.viewer = null;\n        this.data = null;\n    }\n\n\n}\n\nav.GlobalManagerMixin.call(CanvasPoint.prototype);","import { CanvasPoint } from './canvasPoint';\n\nconst av = Autodesk.Viewing;\n\n/**\n * Maintains a list of 3D points on screen.\n */\nexport class CanvasPoints {\n\n    constructor(extension) {\n        this.extension = extension;\n        this.viewer = extension.viewer;\n        this.setGlobalManager(this.viewer.globalManager);\n        this._points = [];\n\n        this.onCameraChange = this.onCameraChange.bind(this);\n    }\n\n    pushPoint(pointData) {\n\n        if (!this.divContainer) {\n            const _document = this.getDocument();\n            this.divContainer = _document.createElement('div');\n            this.divContainer.style.position = 'absolute';\n            this.divContainer.style.top = \"0\";\n            this.divContainer.style.left = \"0\";\n            this.divContainer.style.width = \"100%\";\n            this.divContainer.style.height = \"100%\";\n            this.divContainer.style['pointer-events'] = \"none\";\n            this.viewer.container.appendChild(this.divContainer);\n\n            this.viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\n        }\n\n        var canvasPoint = new CanvasPoint(this.viewer, pointData, this.divContainer);\n        this._points.push( canvasPoint );\n    }\n\n    removePoint(pointData) {\n        var index = -1;\n        for (var i=0; i<this._points.length; ++i) {\n            if (this._points[i].hasData(pointData)) {\n                index = i;\n                break;\n            }\n        }\n        if (index === -1)\n            return;\n        var canvasPoint = this._points[index];\n        canvasPoint.destroy();\n        this._points.splice(index, 1);\n    }\n\n    destroy() {\n        if (this._points) {\n            this._points.forEach((canvasPoint) => { \n                canvasPoint.destroy();\n            });\n            this._points = null;\n        }\n        if (this.divContainer) {\n            this.divContainer.parentElement.removeChild(this.divContainer);\n            this.divContainer = null;\n        }\n\n        this.extension = null;\n\n        this.viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\n        this.viewer = null;\n    }\n\n    onCameraChange(event) {\n        this._points.forEach((canvasPoint) => { \n            canvasPoint.onCameraChange(event);\n        });\n    }\n} \n\nav.GlobalManagerMixin.call(CanvasPoints.prototype);","import { Panel } from './panel';\nimport { CanvasPoints } from './canvas';\n\nexport class UiController {\n\n    constructor(extension) {\n\n        this.extension = extension;\n        this.panel = new Panel(extension);\n        this.canvas = new CanvasPoints(extension);\n    }\n\n    pushPoint(pointData) {\n\n        if (!pointData)\n            return;\n\n        // Make sure the panel is visible\n        this.panel.setVisible(true);\n        this.panel.pushPoint(pointData);\n        \n        this.canvas.pushPoint(pointData);\n    }\n\n    removePoint(pointData) {\n\n        if (!pointData)\n            return;\n\n        this.panel.removePoint(pointData);\n        this.canvas.removePoint(pointData);\n    }\n\n    activate() {\n        this.panel.setVisible(true);\n    }\n\n    deactivate() {\n        this.panel.setVisible(false);\n    }\n\n    destroy() {\n        this.extension = null;\n        if (this.panel) {\n            this.panel.destroy();\n            this.panel = null;\n        }\n        if (this.canvas) {\n            this.canvas.destroy();\n            this.canvas = null;\n        }\n    }\n}","\n\n// from InfraWorks' Ellipsoid.h\nconst _a = 6378137.0; // meters\nconst _f = 298.257223563;\nconst _f_inv = 1.0 / _f;\nconst _b = _a * (1.0 - _f_inv);\nconst _e2 = (2.0 - _f_inv) * _f_inv;\n\n/**\n * Ellipsoid values for WGS84\n */\nexport class Ellipsoid {\n\n    static a() { return _a; }\n    static MajorRadius() { return _a; }\n\n    static f() { return _f_inv; }\n    static InverseFlattening() { return _f_inv; }\n\n    static b() { return _b; }\n    static MinorRadius() { return _b; }\n\n    static e2() { return _e2; } \n    static EccentricitySquared() { return _e2; }\n}","import { Ellipsoid } from './Ellipsoid';\n\n\nconst _pi = Math.PI; // 3.14159265358979; // Same as Revit\nconst _degToRadFactor = _pi / 180;\nconst _radToDegFactor = 180 / _pi;\n\nconst avp = Autodesk.Viewing.Private;\n\nexport function degToRad(degrees) {\n    return degrees * _degToRadFactor;\n}\n\nexport function radToDeg(radians) {\n    return radians * _radToDegFactor;\n}\n\n/**\n * Converts a WGS84-coordinate (longitude, latitude, height) \n * into a 3D-coordinate in geocentric ECEF format.\n * \n * @param {LmvVector3} wgsCoord \n * @param {number} wgsCoord.x - in as Longitude\n * @param {number} wgsCoord.y - in as Latitude\n * @param {number} wgsCoord.z - in as Height in meters\n * \n * @returns {lmvVector3} coordinate in ECEF, meters.\n */\nexport function ll2Geocentric(wgsCoord) {\n\n    const lambda = degToRad(wgsCoord.x); // longitude\n    const phi    = degToRad(wgsCoord.y); // latitude\n    const h      = wgsCoord.z;\n\n    const sinPhi = Math.sin(phi);\n    const cosPhi = Math.cos(phi);\n    const sinL = Math.sin(lambda);\n    const cosL = Math.cos(lambda);\n\n    const v = Ellipsoid.a() / Math.sqrt(1.0 - Ellipsoid.e2() * (sinPhi * sinPhi));\n    const tmp = (v + h) * cosPhi;\n\n    let x = tmp * cosL;\n    let y = tmp * sinL;\n    let z = ((1.0 - Ellipsoid.e2()) * v + h) * sinPhi;\n    return new avp.LmvVector3(x, y, z);\n}\n\n/**\n * Converts a 3D-coordinate in geocentric ECEF format\n * into a WGS84-coordinate (longitude, latitude, height)\n * \n * @param {LmvVector3} geoPoint - ECEF position in meters.\n * @returns {lmvVector3} WGS84-coordinate (longitude, latitude, height).\n */\nexport function geocentric2LL(geoPoint) {\n\n    const x = geoPoint.x;\n    const y = geoPoint.y;\n    const z = geoPoint.z;\n\n    const b = Ellipsoid.b();\n    const epsilon = Ellipsoid.e2() / (1.0 - Ellipsoid.e2());\n\n    const p = Math.sqrt(x*x + y*y);\n    const q = Math.atan2((z * Ellipsoid.a()),(p*b));\n\n    // sin^3(q) and cos^3(q)\n    let sin3q = Math.sin(q);\n    let cos3q = Math.cos(q);\n    sin3q = sin3q * sin3q * sin3q;\n    cos3q = cos3q * cos3q * cos3q;\n\n    const phi    = Math.atan2( (z + epsilon * b * sin3q) , (p - Ellipsoid.e2() * Ellipsoid.a() * cos3q) );\n    const lambda = Math.atan2( y , x );\n\n    let sin2phi = Math.sin(phi);\n    sin2phi = sin2phi * sin2phi;\n\n    const v = Ellipsoid.a() / Math.sqrt(1.0 - Ellipsoid.e2() * sin2phi);\n    const h = p / Math.cos(phi) - v;\n\n    let xx = radToDeg(lambda); // longitude\n    let yy = radToDeg(phi);    // latitude\n    let zz = h;                // height(m)\n    return new avp.LmvVector3(xx, yy, zz);\n}\n","import { degToRad, ll2Geocentric, geocentric2LL } from './GlobeMath';\n\nconst avp = Autodesk.Viewing.Private;\n\n// from InfraWorks' LocalCS.h\nexport class LocalCS {\n\n    /**\n     * Initializes a transformation context that can convert from LMV space to Latitude Longitude,\n     * based on georeference attributes of a specific SVF model.\n     * @param {LmvVector3} originLL84 - WGS84 world position expressed in { x: longitude, y: latutude, z: 0 }\n     */\n    constructor(originLL84, geoRefTransform, unitToMeter, modelToLmv) {\n\n        this.m_originLL84 = originLL84.clone();\n\n        let worldOrigin = ll2Geocentric(originLL84);\n\n        //Converts model coordinates to meters\n        var unitScale = new avp.LmvMatrix4(true);\n        unitScale.elements[0] = unitScale.elements[5] = unitScale.elements[10] = (unitToMeter || 1.0);\n\n        //Adds geocentric origin offset of the local ENU origin\n        var translation = new avp.LmvMatrix4(true);\n        translation.elements[12] = worldOrigin.x;\n        translation.elements[13] = worldOrigin.y;\n        translation.elements[14] = worldOrigin.z;\n\n        //Rotates from ENU to geocentric basis\n        var enu2ecefOrientation = LocalCS.createEnu2Ecef({ x:originLL84.x, y:originLL84.y });\n\n        if (!geoRefTransform)\n            geoRefTransform = new avp.LmvMatrix4(true);\n\n        if (!modelToLmv)\n            modelToLmv = new avp.LmvMatrix4(true);\n\n        let lmvToModel = new avp.LmvMatrix4(true);\n        lmvToModel.getInverse(modelToLmv);\n\n        this.m_model2ecef = translation //add geocentric origin\n                            .multiply(enu2ecefOrientation)   //geocentric orientation\n                            .multiply(unitScale) //scale refpoint space to meters\n                            .multiply(geoRefTransform) //from model local to refPoint (ENU) space\n                            .multiply(lmvToModel); //from LMV scene to model local\n\n        this.m_ecef2model = new avp.LmvMatrix4(true);\n        this.m_ecef2model.getInverse(this.m_model2ecef);\n    }\n\n    getLL84() {\n        return this.m_originLL84;\n    }\n\n    /**\n     * Conversion from global geocentric coords to ENU coords (= local)\n     * @param {LmvVector3} point - in global geocentric coords\n     * @returns {LmvVector3} - point in ENU coords\n     */\n    LL842LmvPoint(point) {\n        var localPoint = ll2Geocentric(point);\n        localPoint = this.m_ecef2model.transformPoint(localPoint);\n        return localPoint;\n    }\n\n    /**\n     * Conversion from ENU coords (= local) to global geocentric coords\n     * @param {LmvVector3} point - in ENU coords\n     * @returns {LmvVector3} - point in global geocentric coords\n     */\n    lmv2LL84Point(point) {\n        var worldPoint = this.m_model2ecef.transformPoint(point.clone());\n        return geocentric2LL(worldPoint);\n    }\n\n    /**\n     * Computes the orientation matrix M for a local ENU system.\n     * A point p in geocentric space can be converted to the ENU system point p' \n     * by p' = M*(p-anchor), where anchor is the origin in geocentric space.\n     * \n     * ECEF = Earth-Centered, Earth-Fixed\n     * ENU = East/North/Up\n     * \n     * @param {LmvVector3} originLL84\n     * @returns {LmvMatrix4}\n     */\n    static createEnu2Ecef(originLL84) {\n\n        const lambda = degToRad(originLL84.x);\n        const phi = degToRad(originLL84.y);\n\n        const sinLambda = Math.sin(lambda);\n        const cosLambda = Math.cos(lambda);\n        const sinPhi = Math.sin(phi);\n        const cosPhi = Math.cos(phi);\n\n        var ret = new avp.LmvMatrix4(true);\n        ret.set(\n            -sinLambda, -sinPhi * cosLambda, cosPhi*cosLambda, 0,\n            cosLambda,  -sinPhi * sinLambda, cosPhi*sinLambda, 0,\n            0,           cosPhi,             sinPhi,           0,\n            0, 0, 0, 1\n        );\n        return ret;\n    }\n\n    static createFromModel(model) {\n\n        const metadata = model.getData().metadata || {};\n        const geoRef = metadata.georeference || {};\n        if (!Array.isArray(geoRef.positionLL84)) {\n            return null;\n        }\n\n        //NOTE: [TS] The elevation of the LL84 point comes in as 0. However,\n        //I suspect that the LMV reference point is not always given at sea level,\n        //so we need to use a more appropriate elevation for the LL84 point. Otherwise\n        //the elevation values will be incorrect (by some fixed but unknown offset).\n        const ll84 = geoRef.positionLL84;\n        const originLL84 = new avp.LmvVector3(ll84[0], ll84[1], ll84[2]);\n\n        var localCS = new LocalCS(originLL84, model.getData().refPointTransform, model.getUnitScale(), model.getData().placementWithOffset);\n\n        return localCS;\n    }\n\n}\n","\nimport { PointTool } from './ui/tool';\nimport { UiController } from './ui/uiController';\nimport { LocalCS } from './LocalCS';\nimport { getGoogleMapsUrl } from './Maps';\nimport * as GlobeMath from './GlobeMath';\n\nconst av = Autodesk.Viewing;\nconst avp = Autodesk.Viewing.Private;\n\nexport * from './LocalCS';\n\n/**\n * Provides functions for converting GPS coordinates in WGS-84 format { x: Longitude, y: Latitude, z: Height(m) } into\n * Viewer scene coordinates, and back. Supports a single model loaded into the scene.\n * \n * The extension id is: `Autodesk.Geolocation`\n * \n * @example\n *   viewer.loadExtension('Autodesk.Geolocation')\n * \n * @memberof Autodesk.Viewing.Extensions\n * @alias Autodesk.Viewing.Extensions.GeolocationExtension\n * @see {@link Autodesk.Viewing.Extension} for common inherited methods.\n */\nexport class GeolocationExtension extends av.Extension {\n\n    /**\n     * @param {Autodesk.Viewing.Viewer3D} viewer - The Viewer instance\n     * @param {object} [options] - Not used\n     */\n    constructor(viewer, options) {\n        super(viewer, options);\n        this.nextPointId = 0;\n    }\n\n    static getGlobeMath() {\n        return GlobeMath;\n    }\n\n    load() {\n        \n        this.ui = new UiController(this),\n        this.tool = new PointTool(this);\n        this.viewer.toolController.registerTool(this.tool);\n\n        return true;\n    }\n\n    unload() {\n\n        this.deactivate();\n\n        if (this.tool) {\n            this.viewer.toolController.deregisterTool(this.tool);\n            this.tool.destroy();\n            this.tool = null;\n        }\n\n        if (this.ui) {\n            this.ui.destroy();\n            this.ui = null;\n        }\n\n        this.viewer = null;\n\n        return true;\n    }\n\n    /**\n     * When active, the extension will detect clicks on the model and will\n     * place a marker on the model. A panel will be displayed containing vertices clicked\n     * on the model. Each point-entry will also contain GPS its associated GPS position.\n     * \n     * @alias Autodesk.Viewing.Extensions.GeolocationExtension#activate\n     */\n    activate() {\n        if (!this.viewer.model)\n            return false;\n        if (this.isActive())\n            return true;\n        this.ui.activate();\n        this.viewer.toolController.activateTool(this.tool.getName());\n        if (this.viewer.model.is3d()) {\n            this.viewer.getExtension('Autodesk.ViewCubeUi', function(ext) {\n                ext.showTriad(true);\n            });\n        }\n        return true;\n    }\n\n    /**\n     * Stops detecting click events on the canvas and closes the Panel.\n     * \n     * @alias Autodesk.Viewing.Extensions.GeolocationExtension#deactivate\n     */\n    deactivate() {\n        if (!this.isActive())\n            return true;\n        this.ui.deactivate();\n        this.viewer.toolController.deactivateTool(this.tool.getName());\n        if (this.viewer.model && this.viewer.model.is3d()) {\n            this.viewer.getExtension('Autodesk.ViewCubeUi', function(ext) {\n                ext.showTriad(false);\n            });\n        }\n        return true;\n    }\n\n    /**\n     * Whether the extension is active.\n     * When the extension is active, click events will be processed and added\n     * into a Panel.\n     * \n     * @returns {boolean} True if the extension is active.\n     * \n     * @alias Autodesk.Viewing.Extensions.GeolocationExtension#isActive\n     */\n    isActive() {\n        var toolActive = this.viewer.toolController.isToolActivated(this.tool.getName());\n        return toolActive;\n    }\n\n    /**\n     * User has clicked on the canvas and a new point is to be added.\n     *\n     * @param {object} pointData \n     * @private\n     */\n    pushPoint(pointData) {\n        pointData.__id = this.nextPointId++;\n        pointData.__viewerState = this.viewer.getState({viewport: true});\n        this.ui.pushPoint(pointData);\n    }\n\n    /**\n     * Invoked by Panel UI; removes a point from the canvas.\n     *\n     * @param pointData\n     * @private\n     */\n    removePoint(pointData) {\n        this.ui.removePoint(pointData);\n    }\n\n    /**\n     * @private\n     */\n    getLocalCS() {\n        if (!this._localCS) {\n            this._localCS = LocalCS.createFromModel(this.viewer.model);\n        }\n        return this._localCS;\n    }\n\n    /**\n     * @returns {boolean} true when the model contains geolocation data.\n     * \n     * @alias Autodesk.Viewing.Extensions.GeolocationExtension#hasGeolocationData\n     */\n    hasGeolocationData() {\n        var localCs = this.getLocalCS();\n        return !!localCs;\n    }\n    \n    /**\n     * Converts viewer coordinates (obtained with something like `viewer.clientToWorld()`)\n     * into { x: Longitude, y: Latitude, z: Height (meters) } in WGS-84 format.\n     * \n     * @param {THREE.Vector3} lmvPoint - 3D point in the scene\n     * @returns {THREE.Vector3} GPS coordinate in WGS-84 format: { x: Longitude, y: Latitude, z: Height }\n     * \n     * @alias Autodesk.Viewing.Extensions.GeolocationExtension#lmvToLonLat\n     */\n    lmvToLonLat(lmvPoint) {\n        var thePoint = new avp.LmvVector3(lmvPoint.x, lmvPoint.y, lmvPoint.z);\n        let localCS = this.getLocalCS();\n        let lonLat = localCS.lmv2LL84Point(thePoint);\n        return lonLat;\n    }\n    \n    /**\n     * Converts coordinates from { x: Longitude, y: Latitude, z: Height (meters) } in WGS-84 format\n     * into viewer scene coordinates.\n     * \n     * @param {THREE.Vector3} lonLat - GPS coordinate in WGS-84 format: { x: Longitude, y: Latitude, z: Height }\n     * @returns {THREE.Vector3} 3D point in the scene\n     * \n     * @alias Autodesk.Viewing.Extensions.GeolocationExtension#lonLatToLmv\n     */\n    lonLatToLmv(lonLat) {\n        var lonLatPoint = new avp.LmvVector3(lonLat.x, lonLat.y, lonLat.z || 0);\n        let localCS = this.getLocalCS();\n        let lmvPoint = localCS.LL842LmvPoint(lonLatPoint);\n        return lmvPoint;\n    }\n\n    /**\n     * Returns a Google Maps URL with a PIN on the specified GPS location.\n     * When no argument is provided, the URL will use the Model's geolocation if available.\n     * \n     * @param {THREE.Vector3} [pointLL84] - GPS location in WGS-84 format: { x: Longitude, y: Latitude }. Height is ignored.\n     * \n     * @alias Autodesk.Viewing.Extensions.GeolocationExtension#openGoogleMaps\n     */\n    getGoogleMapsUrl(pointLL84) {\n    \n        var localCS = this.getLocalCS();\n        if (!pointLL84 && !localCS) {\n            console.warn(\"Model doesn't contain geolocation data.\");\n            return;\n        }\n    \n        const wgs84 = pointLL84 || localCS.getLL84();\n        return getGoogleMapsUrl(wgs84);\n    }\n\n    /**\n     * Returns a Promise that resolves with a position in Viewer-space coordinates based on the\n     * device's real world GPS position.\n     * \n     * @returns {Promise} that resolves with a THREE.Vector3 containing Viewer-space coordinates. It rejects if device's real world GPS position is not available.\n     *\n     * @alias Autodesk.Viewing.Extensions.GeolocationExtension#getCurrentPositionLmv\n     */\n    getCurrentPositionLmv() {\n\n        if (!this.hasGeolocationData()) {\n            return Promise.reject(\"Model doesn't contain geolocation data.\");\n        }\n\n        return new Promise((resolve, reject) => {\n            if (\"geolocation\" in navigator) {\n                navigator.geolocation.getCurrentPosition((position) => {\n                    var lmvPos = this.lonLatToLmv({x: position.coords.longitude, y: position.coords.latitude, z:0});\n                    resolve(lmvPos);\n                });\n            } else {\n                reject('geolocation API not available on this device.');\n            }\n        });\n    }\n    \n    \n}\n\nav.theExtensionManager.registerExtension('Autodesk.Geolocation', GeolocationExtension);\n","\n\nexport function getGoogleMapsUrl(pointLL84) {\n    \n    if (!pointLL84)\n        return null;\n\n    const longitude = pointLL84.x;\n    const latitude = pointLL84.y;\n\n    let URL = `https://www.google.com/maps/search/?api=1&query=${latitude},${longitude}`;\n    return URL;\n}"],"sourceRoot":""}