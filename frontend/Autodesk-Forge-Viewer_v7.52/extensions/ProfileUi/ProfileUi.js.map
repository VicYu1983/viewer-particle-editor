{"version":3,"file":"ProfileUi/ProfileUi.js","sources":["webpack://Autodesk.Extensions.[name]/webpack/bootstrap","webpack://Autodesk.Extensions.[name]/./extensions/ProfileUi/Locales.js","webpack://Autodesk.Extensions.[name]/./extensions/ProfileUi/ProfilePanel.js","webpack://Autodesk.Extensions.[name]/./extensions/ProfileUi/index.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./extensions/ProfileUi/index.js\");\n","/**\n * Include each locale json file and return it in an object\n * that can be consumed by i18n\n */\n\nimport json_en from '../../res/locales/en/nobundle-profiles.loc.json';\nimport json_en_GB from '../../res/locales/en-GB/nobundle-profiles.loc.json';\nimport json_cs from '../../res/locales/cs/nobundle-profiles.loc.json';\nimport json_de from '../../res/locales/de/nobundle-profiles.loc.json';\nimport json_es from '../../res/locales/es/nobundle-profiles.loc.json';\nimport json_fr from '../../res/locales/fr/nobundle-profiles.loc.json';\nimport json_fr_CA from '../../res/locales/fr-CA/nobundle-profiles.loc.json';\nimport json_it from '../../res/locales/it/nobundle-profiles.loc.json';\nimport json_ja from '../../res/locales/ja/nobundle-profiles.loc.json';\nimport json_ko from '../../res/locales/ko/nobundle-profiles.loc.json';\nimport json_pl from '../../res/locales/pl/nobundle-profiles.loc.json';\nimport json_pt_BR from '../../res/locales/pt-BR/nobundle-profiles.loc.json';\nimport json_ru from '../../res/locales/ru/nobundle-profiles.loc.json';\nimport json_tr from '../../res/locales/tr/nobundle-profiles.loc.json';\nimport json_zh_HANS from '../../res/locales/zh-HANS/nobundle-profiles.loc.json';\nimport json_zh_HANT from '../../res/locales/zh-HANT/nobundle-profiles.loc.json';\nimport json_zh_HK from '../../res/locales/zh-HK/nobundle-profiles.loc.json';\nimport json_nl from '../../res/locales/nl/nobundle-profiles.loc.json';\nimport json_sv from '../../res/locales/sv/nobundle-profiles.loc.json';\nimport json_da from '../../res/locales/da/nobundle-profiles.loc.json';\nimport json_no from '../../res/locales/no/nobundle-profiles.loc.json';\n\nexport var locales = {\n  en: json_en,\n  'en-GB': json_en_GB,\n  cs: json_cs,\n  de: json_de,\n  es: json_es,\n  fr: json_fr,\n  'fr-CA': json_fr_CA,\n  it: json_it,\n  ja: json_ja,\n  ko: json_ko,\n  pl: json_pl,\n  'pt-BR': json_pt_BR,\n  ru: json_ru,\n  tr: json_tr,\n  'zh-HANS': json_zh_HANS,\n  'zh-HANT': json_zh_HANT,\n  'zh-HK': json_zh_HK,\n  nl: json_nl,\n  sv: json_sv,\n  da: json_da,\n  no: json_no };","var TAB_ID = 'configTab';\nvar TAB_LABEL = 'Configuration';\nvar DEFAULT_DESC = 'Description not available';\n\n/**\n                                                 * Retrieves all of the unique profiles that have been registered.\n                                                 * @param {Object} registeredProfiles - viewer.profileManager.getProfiles()\n                                                 * @returns {Autodesk.Viewing.Profile[]} - array of viewer unique profiles\n                                                 * @private\n                                                 */\nfunction getUniqueProfiles(registeredProfiles) {\n  var profiles = [];\n  for (var key in registeredProfiles) {\n    var profile = registeredProfiles[key];\n    if (profiles.indexOf(profile) === -1) {\n      profiles.push(profile);\n    }\n  }\n  return profiles;\n}\n\nvar ProfilePanel = function ProfilePanel(viewer, title) {\n\n  var PANEL_ID = 'adsk_profile_panel_' + viewer.id;\n  var opts = { heightAdjustment: 100, width: 460, hideTabBar: true };\n  Autodesk.Viewing.UI.SettingsPanel.call(this, viewer.container, PANEL_ID, title, opts);\n\n  this.container.classList.add('viewer-settings-panel');\n  this.viewer = viewer;\n  this.setGlobalManager(viewer.globalManager);\n\n  this.addTab(TAB_ID, TAB_LABEL, { className: 'config' });\n  this.selectTab(TAB_ID);\n\n  this._profiles = getUniqueProfiles(this.viewer.profileManager.getProfiles());\n  this._onClick = this._onClick.bind(this);\n  this._onProfileChanged = this._onProfileChanged.bind(this);\n\n  var listContainer = this.tablesContainer.childNodes[0];\n  this._simpleList = this.addSimpleList(listContainer, renderListItem, this._onClick);\n  this._updateListUi();\n\n  this.viewer.addEventListener(Autodesk.Viewing.PROFILE_CHANGE_EVENT, this._onProfileChanged);\n};\n\nProfilePanel.prototype = Object.create(Autodesk.Viewing.UI.SettingsPanel.prototype);\nProfilePanel.prototype.constructor = ProfilePanel;\n\n/**\n                                                    * @private\n                                                    */\nProfilePanel.prototype._onClick = function (index) {\n  var profile = this._profiles[index];\n  this.viewer.setProfile(profile);\n};\n\n/**\n    * Appends a cell to the Profile grid.\n    * @param {*} event - should contain event.profile\n    * @returns {boolean} - returns true if a grid cell was added.\n    * @private\n    */\nProfilePanel.prototype._onProfileChanged = function (event) {\n  var profile = event && event.profile;\n  if (!profile) return false;\n  if (this._profiles.indexOf(profile) === -1) {\n    this._profiles.push(profile);\n  }\n  this._updateListUi();\n};\n\n/**\n    * Updates the table grid ui.\n    * @private\n    */\nProfilePanel.prototype._updateListUi = function () {\n  // Create a new array of from the this._profiles array.\n  // This will update the description if it is not present.\n  var uiItems = this._profiles.map(function (profile) {\n    return {\n      name: profile.label || profile.name,\n      description: profile.description || DEFAULT_DESC };\n\n  });\n\n  var selectedIndex = this._profiles.indexOf(this.viewer.profile);\n  this._simpleList.setData(uiItems, selectedIndex);\n\n  // Resize the panel for the new cell.\n  this.resizeToContent();\n};\n\n/**\n    * Uninitialize the panel.\n    * Removes all event listeners associated with the panel.\n    */\nProfilePanel.prototype.uninitialize = function () {\n  Autodesk.Viewing.UI.SettingsPanel.prototype.uninitialize.call(this);\n  this.viewer.removeEventListener(Autodesk.Viewing.PROFILE_CHANGE_EVENT, this._onProfileChanged);\n  this.removeSimpleList(this._simpleList);\n  this._simpleList = null;\n};\n\nexport { ProfilePanel };\n\n/**\n                          * Populates the DOM list element with all the necessary UI to\n                          * display a Profile's info the end users.\n                          *\n                          * @param {HTMLElement} domElem - The DOM element created by SimpleList.\n                          * @param {Object} uiItem - The list item to render by domElem.\n                          * @param {Object} options - Bag of options.\n                          *\n                          * @private\n                          */\nfunction renderListItem(domElem, uiItem, options) {\n\n  var _document = options.domDocument;\n  var i18n = Autodesk.Viewing.i18n;\n\n  domElem.classList.add(\"settings-cell\");\n\n  // Name\n  var name = _document.createElement(\"span\");\n  name.textContent = i18n.translate(uiItem.name);\n  name.classList.add(\"settings-name\");\n  name.setAttribute('data-i18n', uiItem.name);\n  domElem.appendChild(name);\n\n  var description = _document.createElement(\"span\");\n  description.classList.add(\"settings-description\");\n  description.textContent = !uiItem.description ? '' : i18n.translate(uiItem.description);\n  description.setAttribute('data-i18n', uiItem.description);\n  domElem.appendChild(description);\n}","import { ProfilePanel } from './ProfilePanel';\nimport { locales } from './Locales';\n\nvar av = Autodesk.Viewing;\n\nvar BUTTON_LABEL = 'Profiles';\n\n/**\n                                * Provides UI controls for Profiles\n                                * \n                                * The extension id is: `Autodesk.ProfileUi`\n                                * \n                                * @example\n                                *    viewer.loadExtension('Autodesk.ProfileUi');\n                                * \n                                * @see {@link Autodesk.Viewing.Extension} for common inherited methods.\n                                * @constructor\n                                * @param {Autodesk.Viewing.Viewer3D} viewer - Viewer instance.\n                                * @param {Object} options - Not used.\n                                */\nexport function ProfileUi(viewer, options) {\n  Autodesk.Viewing.Extension.call(this, viewer, options);\n  this.viewer = viewer;\n  this._configButtonId = null;\n  this._panel = null;\n  this.openPanel = this.openPanel.bind(this);\n  this._initButtonConfig = this._initButtonConfig.bind(this);\n}\n\nProfileUi.prototype = Object.create(Autodesk.Viewing.Extension.prototype);\nProfileUi.prototype.constructor = ProfileUi;\n\n/**\n                                              * Load the extensions\n                                              */\nProfileUi.prototype.load = function () {\n  this.extendLocalization(locales);\n  return true;\n};\n\n/**\n    * Unload the extension.\n    */\nProfileUi.prototype.unload = function () {\n  if (this._configButtonId !== null) {\n    this.viewer.viewerSettingsPanel.removeConfigButton(this._configButtonId);\n    this._configButtonId = null;\n  }\n  if (this._panel) {\n    this._panel.uninitialize();\n    this._panel = null;\n  }\n  return true;\n};\n\n/**\n    * Invoked by the viewer when the toolbar UI is available. \n    * Adds a button to the Settings panel.\n    *\n    * @alias Autodesk.Viewing.Extensions.ProfileUi#onToolbarCreated\n    */\nProfileUi.prototype.onToolbarCreated = function () {\n  this._initButtonConfig();\n};\n\n/**\n    * Opens the Profiles panel.\n    *\n    * @alias Autodesk.Viewing.Extensions.ProfileUi#openPanel\n    */\nProfileUi.prototype.openPanel = function () {\n  if (!this._panel) {\n    this._panel = new ProfilePanel(this.viewer, BUTTON_LABEL);\n  }\n  this._panel.setVisible(true);\n};\n\n/**\n    * Adds a button to the Settings Panel.\n    * @private\n    */\nProfileUi.prototype._initButtonConfig = function () {\n  var settingsPanel = this.viewer.getSettingsPanel();\n  if (!settingsPanel) {\n    this.addEventListener(av.SETTINGS_PANEL_CREATED_EVENT, this._initButtonConfig, { once: true });\n    return;\n  }\n  this._configButtonId = settingsPanel.addConfigButton(BUTTON_LABEL, this.openPanel);\n};\n\n\n/**\n    * Register the extension with the extension manager.\n    */\nAutodesk.Viewing.theExtensionManager.registerExtension('Autodesk.ProfileUi', ProfileUi);"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChDA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtIA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}