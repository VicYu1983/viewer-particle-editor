{"version":3,"sources":["webpack://Autodesk.Extensions.[name]/webpack/bootstrap","webpack://Autodesk.Extensions.[name]/./node_modules/css-loader/lib/css-base.js","webpack://Autodesk.Extensions.[name]/./node_modules/style-loader/lib/addStyles.js","webpack://Autodesk.Extensions.[name]/./node_modules/style-loader/lib/urls.js","webpack://Autodesk.Extensions.[name]/./extensions/FusionSim/FusionSim.css?334c","webpack://Autodesk.Extensions.[name]/./extensions/FusionSim/FusionSim.css","webpack://Autodesk.Extensions.[name]/./extensions/FusionSim/SimulationLoadCaseDef.js","webpack://Autodesk.Extensions.[name]/./extensions/FusionSim/SimulationDef.js","webpack://Autodesk.Extensions.[name]/./extensions/FusionSim/GalleryPanel.js","webpack://Autodesk.Extensions.[name]/./extensions/FusionSim/ModelStructurePanel.js","webpack://Autodesk.Extensions.[name]/./extensions/FusionSim/FusionSim.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","useSourceMap","list","toString","this","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","push","fn","memo","stylesInDom","isOldIE","window","document","all","atob","apply","arguments","getTarget","target","parent","querySelector","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","options","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","style","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","undefined","attrs","type","nonce","getNonce","addAttrs","el","keys","forEach","setAttribute","obj","update","remove","result","transform","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","href","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","location","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","test","locals","SimulationLoadCaseDef","loadCase","loadCaseName","constraintsNode","constraintNodes","loadsNode","loadNodes","resultsNode","undeformedResults","resultTypes","resultGroups","modalResults","constructor","associateResult","resultName","resultNode","associateResultGroup","resultGroupName","resultGroupNode","associateModalResult","subResultNode","subNode","isImportant","nodeId","shouldDisplayInTree","reset","SimulationDef","SimulationStudies","LSS","NLSS","MODAL","BUCKLING","THERMAL","THERMALSTRESS","SHAPEGENERATOR","NAMES","UNKNOWN","studyNode","loadCases","pointMasssesNode","pointMassNodes","connectorsNode","connectorNodes","activeLoadCaseKey","modelNodes","analysisType","modelStructurePanel","simExt","simNodes","studyName","addLoadCase","loadCaseID","loadCaseNode","loadCaseDef","node","dbId","groupKeys","av","Autodesk","Viewing","avu","Extension","Extensions","UI","i18n","GalleryPanel","preparePanel","labelUndeformed","optUndeformed","resultGroup","legend","resultSteps","divColorScale","colorScale","colorScaleTopText","colorScaleBottomText","line2","tbl","tblBody","that","DockingPanel","initialize","container","classList","add","position","dockRight","_document","getDocument","docfrag","createDocumentFragment","divResults","resultsGroup","divResultsOption","addEventListener","activeLoadCase","simDef","checked","viewer","show","hide","htmlFor","textContent","translate","innerHTML","divTable","getPropertyValue","properties","propertyName","displayName","displayValue","toggleDisable","element","len","resultGroupDisable","disabled","styleObject","substring","styleString","styleBuilder","appearance","setGlobalManager","globalManager","event","caller","modalAnalysis","setTimeout","setSimObjectsVisibility","updateType","selectedStep","getElementById","selectedIndex","setSimulationDef","onError","status","message","data","getProperties","setTitle","rowType","cells","row","insertRow","cellValue","insertCell","model","getObjectTree","instanceTree","calleeResultTypes","calleeResultsGroup","showResultsDlg","applySettings","elements","nodes","rowElements","innerText","rowNodes","processNodes","onProcessed","nodeIdsToProcess","enumNodeChildren","getRootId","processNext","onNodeProcessed","shift","initModel","SELECTION_CHANGED_EVENT","nodeArray","handleClick","fillResultsGroup","loadCaseKey","fillNLSSResultsGroup","groupBuffer","includes","fillResultTypes","resultGroupKey","groupResult","onResultPropertiesRetrieved","resultType","fillModalResultTypes","fillNLSSResultTypes","uiResultTypes","uiResultsSteps","itemType","itemTypeName","itemStep","itemStepName","indexDelimiter","substr","keysGroup","keysTypes","uninitialize","title","localizeTitle","setModelNodesVisible","bVisible","k","setNodeVisibility","visible","isSimStudyNode","callee","minValue","maxValue","reversed","unit","rowMin","rowMax","minRefValue","maxRefValue","moztransform","webkittransform","SimModelStructurePanel","ext","ViewerModelStructurePanel","setGallery","gallery","simGalleryPanel","isSimResultsNode","isModelNode","shouldInclude","onClick","expandStudyNode","tree","setCollapsed","GEOMETRY_LOAD_START","Simulation","defaults","loadSimulationExtension","unload","extensions","GEOMETRY_LOADED_EVENT","load","galleryPanel","addPanel","simButton","Button","setVisible","setToolTip","isVisible","deactivate","activate","setState","State","INACTIVE","ACTIVE","setIcon","settingsTools","addControl","hideLines","prefs","ghosting","ambientShadow","antialiazing","lightPreset","initModelBrowser","removeFromParent","removePanel","setGhosting","setQualityLevel","setLightPreset","addFooter","getExtension","setModelStructurePanel","simData","activeStatus","theExtensionManager","registerExtension"],"mappings":"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","file":"FusionSim/FusionSim.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 849);\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./FusionSim.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./FusionSim.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./FusionSim.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".toolbar-simulationIcon{background-image:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAYAAAArK+5dAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAINJREFUeNpiYKAxYIQxLl299p9ahuppazFiCFLLAnRzmGgdRDS3gIUWwTRwPsAW+5T6ioWayRGbY0i1oBGI60nxHbFxcAGIDYEubqA4iJBdhTVH0iiIDID4PNCARlITAKnJtH7IpyIGWgfRaEajQ0ajeRDhyL1kZzRSK5x6hhEHAAIMAPgbTyRsh4JhAAAAAElFTkSuQmCC\\\")}.toolbar-simulationSetupIcon{background-image:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAOxJREFUeNpi/P//P8NAAiaGAQajDsDnAFISx38S1Y9GwchwwDuktJGGO/UACyIcGBtAV/MAi5oHSPpd8JgPxoRCgBENo4MCIsUYyA0BBiLwASTfH8ARgkq49FPDAQpIFimg6ScYBSxUSGwPgHgiEhsG3kMx/jjGUxv+xxHv2IAAlP5Aquup5YDRgmjUAQPuAFAuuADFAvQuCQWA+AJSYXQBKkaMXoodYADEH7BUSB+gchQ7AF9tiMtykhzBSGa/gFRNjNROhIJA/BGIFYlkUz0XBEBT/AMi2WTlAmKqYVLYVE0DoyXh8HEAQIABAH7a/BD95CkUAAAAAElFTkSuQmCC\\\")}.simulation-colorscale{background-image:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAABCAYAAABADtw1AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAADdJREFUWIXt1LENACAMxEBn/6HDCFAg5QUurnflgm4AStJ/GtB9BDRIOwELkg4Q0PCc6f1ImgEs9yMAHrvm2CUAAAAASUVORK5CYII=\\\");background-size:contain;-moz-transform:rotate(90deg);-webkit-transform:rotate(90deg)}.simulation-container{min-height:35px !important;height:510px !important;position:absolute !important;background-color:rgba(34,34,34,0.9) !important}.simulation-container-Collapse{height:356px !important}.position-left-corner{top:150px;left:220px}.position-right-corner{right:100px;top:170px}.simulation-resultGroup,.simulation-resultTypes,.simulation-resultSteps{position:relative !important;width:100% !important;color:black !important;height:22px !important;border:1px !important;-webkit-box-sizing:border-box !important;-moz-box-sizing:border-box !important;box-sizing:border-box !important}.sim-div-Results{position:absolute !important;top:51px !important;left:5px !important;right:5px !important}.simulation-resultTypes,.simulation-resultSteps{margin-top:5px !important}.toolbar-simulationIcon{background-image:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAVJJREFUeNrslzFOwzAUhh3ETo7AxJoeIQOXYMtAl06dGFAHD52YcgS69wgM5QSElSlHSE9gnqXf0lMi288GlErE0qfW7znPv1/+SElhjFFzjis181gE/ERAQ/SgyS1SZJqwI6pR7JNY/WUHbPETeCYOLHdAzOXlQmwHBLya6bCxGvjy0drXAW0lscX/I05VsXbbWB3Ja8xbYkjxgMbmN5ifUaTH/DYzry/uMfR1wJ7khbjD/I3Yj1q8I+6F+S/iCZ0RmdCNLmLCFQiZsGOxyV6xW1Cxe7om3sED4h9AIebya3baKucx1MTAVIdOFeqWu3ZAzclePgE9sSHakQDDBG6wzq3VnrUtWysWkHKqlG4lC3AXnYhH/CrjH7G1YgGLBxYPzO4BS/mLHih9++S8kKR6IIhUgMKbj9QDtbTu7C+lKR0Y0zAPNLl1iuXb8N8L+BZgAFKZnMHoWj7GAAAAAElFTkSuQmCC\\\")}.sim-div-options{top:95px;margin-top:5px;left:5px;right:5px;position:absolute}.sim-div-options-NLSS{top:125px !important}.sim-undeformedOption{width:14px;height:14px}.sim-undeformedOptionText{color:white !important;font-weight:200 !important}.sim-line1{position:absolute;top:110px;width:100%;border-top:1px solid black}.sim-div-colorscale{left:5px;right:5px;height:220px;margin-top:5px;position:absolute}.sim-div-colorscale-top1{top:120px}.sim-div-colorscale-top1-NLSS{top:140px !important}.sim-div-colorscale-top2{top:100px}.sim-div-colorscale-Collapse{cursor:pointer}.simulation-colorscale{background-image:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABAAAAAABCAYAAABADtw1AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAADdJREFUWIXt1LENACAMxEBn/6HDCFAg5QUurnflgm4AStJ/GtB9BDRIOwELkg4Q0PCc6f1ImgEs9yMAHrvm2CUAAAAASUVORK5CYII=\\\");background-size:contain;-moz-transform:rotate(90deg);-webkit-transform:rotate(90deg);width:220px;height:20px;left:-70px;top:110px;position:absolute;background-repeat:repeat}.simulation-colorscale-NLSS{width:190px !important}.sim-colorScaleTopText,.sim-colorScaleBottomText{left:52px;color:white !important;position:relative !important}.sim-colorScaleTopText{top:0px}.sim-colorScaleTopText-NLSS{top:13px !important}.sim-colorScaleBottomText{top:195px}.sim-colorScaleBottomText-NLSS{top:178px !important}.sim-line2{position:absolute;top:360px;width:100%;border-top:1px solid black}.sim-div-Table{position:absolute !important;top:370px !important;left:5px !important;right:5px !important;margin-top:5px;cursor:pointer}.sim-div-Table-Collapse{height:0px !important;transition:height 0s 10000s;visibility:hidden !important}.sim-table{position:relative !important;color:white !important;width:100% !important;margin:0 0 0 0;-webkit-box-sizing:border-box !important;-moz-box-sizing:border-box !important;box-sizing:border-box !important}.sim-hide{visibility:hidden !important}\\n\", \"\"]);\n\n// exports\n","export var SimulationLoadCaseDef = (function () {\n    function SimulationLoadCaseDef() {\n        var that = this;\n\n        that.loadCase = -1;\n        that.loadCaseName = \"\";\n        that.constraintsNode = -1;\n        that.constraintNodes = [];\n        that.loadsNode = -1;\n        that.loadNodes = [];\n        that.resultsNode = -1;\n        that.undeformedResults = -1;\n        that.resultTypes = {};\n        that.resultGroups = {};\n        that.modalResults = {};\n    }\n\n    SimulationLoadCaseDef.prototype = {\n        constructor: SimulationLoadCaseDef\n    };\n\n    var prototype = SimulationLoadCaseDef.prototype;\n    prototype.associateResult = function (resultName, resultNode) {\n        this.resultTypes[resultNode] = resultName;\n    };\n\n    prototype.associateResultGroup = function (resultGroupName, resultGroupNode) {\n        this.resultGroups[resultGroupNode] = resultGroupName;\n    };\n\n    prototype.associateModalResult = function (resultName, resultNode) {\n        var subResultNode = [];\n        subResultNode = this.modalResults[resultName];\n        if (!subResultNode) {\n            var subNode = [];\n            subNode.push(resultNode);\n            subResultNode = subNode;\n        } else {\n            subResultNode.push(resultNode);\n        }\n        this.modalResults[resultName] = subResultNode;\n    };\n\n    prototype.isImportant = function(nodeId) {\n        var that = this;\n        if(that.loadCase === nodeId) return true;\n        if(that.loadNodes.indexOf(nodeId) !== -1) return true;\n        if(that.constraintNodes.indexOf(nodeId) !== -1) return true;\n\n        //do not show///\n        if(that.resultsNode === nodeId) return true;\n        ////////////\n        if(that.constraintsNode === nodeId) return true;\n        if(that.loadsNode === nodeId) return true;\n\n        return false;\n    };\n\n    prototype.shouldDisplayInTree = function(nodeId) {\n        var that = this;\n        if(that.loadCase === nodeId) return true;\n        if(that.loadNodes.indexOf(nodeId) !== -1) return true;\n        if(that.constraintNodes.indexOf(nodeId) !== -1) return true;\n\n        //do not show///\n        if(that.resultsNode === nodeId) return false;\n        ////////////\n        if(that.constraintsNode === nodeId) return true;\n        if(that.loadsNode === nodeId) return true;\n\n        return false;\n    };\n    \n    prototype.reset = function () {\n        var that = this;\n        that.loadCase = -1;\n        that.loadCaseName = '';\n        that.constraintsNode = -1;\n        that.constraintNodes = [];\n        that.loadsNode = -1;\n        that.loadNodes = [];\n        that.resultsNode = -1;\n        that.undeformedResults = -1;\n        that.resultTypes = {};\n        that.resultGroups = {};\n        that.modalResults = {};\n    };\n    return SimulationLoadCaseDef;\n})();\n","import { SimulationLoadCaseDef } from './SimulationLoadCaseDef'\n\n'use strict';\n\nexport var SimulationDef = (function () {\n    function SimulationDef() {\n        var that = this;\n        that.SimulationStudies = { LSS: \"SimCaseLSS\",\n            NLSS: \"SimCaseNLSS\",\n            MODAL: \"SimCaseModalFrequencies\",\n            BUCKLING: \"SimCaseStructuralBuckling\",\n            THERMAL: \"SimCaseThermalSteady\",\n            THERMALSTRESS: \"SimCaseThermalStress\",\n            SHAPEGENERATOR: \"SimCaseTopOpt\",\n            NAMES: {\n                UNKNOWN: \"Unknown\",\n                LSS: \"Static Stress\",\n                NLSS: \"Nonlinear Static Stress\",\n                MODAL: \"Modal Frequencies\",\n                BUCKLING: \"Structural Buckling\",\n                THERMAL: \"Thermal\",\n                THERMALSTRESS: \"Thermal Stress\",\n                SHAPEGENERATOR: \"Shape Optimization\"              \n            }};\n        that.studyNode;\n        that.loadCases = {};\n        that.pointMasssesNode = -1;\n        that.pointMassNodes = [];\n        that.connectorsNode = -1;\n        that.connectorNodes = [];\n        that.activeLoadCaseKey = null;\n        that.modelNodes = [];\n        that.analysisType = that.SimulationStudies.LSS;\n        that.modelStructurePanel = null;\n        that.simExt = null;\n        that.simNodes = [];       \n    }\n\n    SimulationDef.prototype = {\n        constructor: SimulationDef\n    };\n    var prototype = SimulationDef.prototype;\n    prototype.studyName = function () {\n        var name = this.SimulationStudies.NAMES.UNKNOWN;\n        if (this.analysisType === this.SimulationStudies.LSS)\n            name = this.SimulationStudies.NAMES.LSS;\n        else if (this.analysisType === this.SimulationStudies.NLSS)\n            name = this.SimulationStudies.NAMES.NLSS;\n        else if (this.analysisType === this.SimulationStudies.MODAL)\n            name = this.SimulationStudies.NAMES.MODAL;\n        else if (this.analysisType === this.SimulationStudies.BUCKLING)\n            name = this.SimulationStudies.NAMES.BUCKLING;\n        else if (this.analysisType === this.SimulationStudies.THERMAL)\n            name = this.SimulationStudies.NAMES.THERMAL;\n        else if (this.analysisType === this.SimulationStudies.THERMALSTRESS)\n            name = this.SimulationStudies.NAMES.THERMALSTRESS;\n        else if (this.analysisType === this.SimulationStudies.SHAPEGENERATOR)\n            name = this.SimulationStudies.NAMES.SHAPEGENERATOR;\n        return name;\n    };\n\n    prototype.reset = function () {\n        var that = this;\n        that.studyNode = -1;\n        that.modelNodes = [];\n        that.analysisType = that.SimulationStudies.LSS;\n        that.loadCases = {};\n        that.pointMasssesNode = -1;\n        that.pointMassNodes = [];\n        that.connectorsNode = -1;\n        that.connectorNodes = [];\n        that.activeLoadCaseKey = null;\n        that.simNodes = [];\n        that.modelStructurePanel = null;\n    };\n    prototype.addLoadCase = function (loadCaseName, loadCaseID, loadCaseNode) {\n        var that = this;\n        var loadCaseDef = new SimulationLoadCaseDef();\n        loadCaseDef.loadCase = loadCaseNode;\n        loadCaseDef.loadCaseName = loadCaseName;\n        //if initialization so set active the first one\n        that.loadCases[\"SIM_LOAD_CASE\" + loadCaseID] = loadCaseDef;\n        if(Object.keys(that.loadCases).length === 1)\n          that.activeLoadCaseKey = \"SIM_LOAD_CASE\" + loadCaseID;\n\n        return loadCaseDef;\n    };\n\n    prototype.shouldDisplayInTree = function (node) {\n        var that = this;\n        var nodeId = node.dbId;\n        if(that.simNodes.indexOf(nodeId) < 0) return false;\n        if(that.studyNode === nodeId) return true;\n        if(that.activeLoadCaseKey === null) return false;\n\n        if(that.pointMasssesNode === nodeId) return true;\n        if(that.pointMassNodes.indexOf(nodeId) !== -1) return true;\n\n        if(that.connectorNodes.indexOf(nodeId) !== -1) return true;\n        if(that.connectorsNode === nodeId) return true;\n\n        var groupKeys = Object.keys(that.loadCases);\n        for (var i = 0; i < groupKeys.length; i++) {\n            var loadCase = that.loadCases[groupKeys[i]];\n            if(loadCase.isImportant(nodeId))\n                return loadCase.shouldDisplayInTree(nodeId);\n        }\n\n        //var activeLoadCase = that.loadCases[that.activeLoadCaseKey];\n        //if(activeLoadCase === null) return false;\n        //var visible = activeLoadCase.isImportant(node);\n        \n        return false;\n    }\n    \n    return SimulationDef;\n})();\n","import { SimulationDef } from './SimulationDef'\n\n'use strict';\n\nvar av = Autodesk.Viewing;\nvar _ave = av.Extension;\nvar aves = av.Extensions;\nvar avu = av.UI;\nvar i18n = av.i18n;\n\nexport var GalleryPanel = (function () {\n    // helper methods\n    function styleBuilder(element, styleObject) {\n        if (!element || !styleObject) return;\n        var cssText = element.style.cssText.trim();\n        var colon = \";\";\n        var isEndingWithColon = cssText.substring(cssText.length - 1) === \";\";\n        if (!isEndingWithColon) {\n            cssText = cssText + \";\";\n        }\n        var styleString = [];\n        for (var style in styleObject) {\n            styleString[styleString.length] = [style, styleObject[style]].join(':');\n        }\n        styleString = styleString.join(';');\n        element.style.cssText = styleString;\n    }\n\n    function preparePanel() {\n        var that = this, labelUndeformed, optUndeformed, resultGroup, legend, resultTypes, resultSteps, divColorScale, colorScale, colorScaleTopText, colorScaleBottomText, /*line1,*/ line2, tbl, tblBody;\n        avu.DockingPanel.prototype.initialize.call(that);\n        var container = that.container;\n        container.classList.add('property-panel', 'simulation-container', 'position-' + (that.position || \"left\") + '-corner');\n        container.dockRight = true;\n\n        var _document = that.getDocument();\n        legend = that.legend = _document.createElement('div');\n        var docfrag = _document.createDocumentFragment();\n\n        //results div//////////\n        var divResults = _document.createElement('div');\n        divResults.classList.add('sim-div-Results');\n\n        resultGroup = that.resultsGroup = _document.createElement(\"select\");\n        resultGroup.classList.add('simulation-resultGroup');\n        divResults.appendChild(resultGroup);\n\n        resultTypes = that.resultTypes = _document.createElement(\"select\");\n        resultTypes.classList.add('simulation-resultTypes');\n        resultTypes.id = 'resultTypes';\n        divResults.appendChild(resultTypes);\n\n        resultSteps = that.resultSteps = document.createElement('select');\n        resultSteps.classList.add('simulation-resultSteps');\n        resultSteps.id = 'resultSteps';\n        divResults.appendChild(resultSteps);\n\n        docfrag.appendChild(divResults);\n        ///////////////////////\n        //sim options\n        var divResultsOption = that.divResultsOption = _document.createElement('div');\n        divResultsOption.classList.add('sim-div-options');\n        optUndeformed = that.optUndeformed = _document.createElement(\"input\");\n        optUndeformed.classList.add('sim-undeformedOption');\n        optUndeformed.setAttribute(\"type\", \"checkbox\");\n        optUndeformed.setAttribute(\"name\", \"optUndeformed\");\n        optUndeformed.setAttribute(\"id\", \"Undeformed\");\n        optUndeformed.addEventListener('change', function (e) { // When someone clicks on it\n            var activeLoadCase = that.simDef.loadCases[that.simDef.activeLoadCaseKey];\n            if(activeLoadCase === null) return;\n            if (activeLoadCase.undeformedResults === -1)\n                return;\n            if (that.optUndeformed.checked) {\n                //show undeformed state\n                that.viewer.show(activeLoadCase.undeformedResults);\n            }\n            else {\n                that.viewer.hide(activeLoadCase.undeformedResults);\n            }\n        });\n\n        optUndeformed.checked = false;\n        divResultsOption.appendChild(optUndeformed);\n        //do this after you append it\n        optUndeformed.checked = false;\n\n        labelUndeformed = that.labelUndeformed = _document.createElement('label');\n        labelUndeformed.classList.add('sim-undeformedOptionText');\n        labelUndeformed.htmlFor = \"Undeformed\";\n        labelUndeformed.setAttribute(\"data-i18n\", \"Show Undeformed Model\");\n        labelUndeformed.textContent = i18n.translate(\"Show Undeformed Model\");\n        divResultsOption.appendChild(labelUndeformed);\n        docfrag.appendChild(divResultsOption);\n        ///////////////////////\n\n//      line1 = that.line1 = document.createElement(\"hr\");\n//      line1.classList.add('sim-line1');\n//      docfrag.appendChild(line1);\n\n        //color scale div\n        divColorScale = that.divColorScale = _document.createElement(\"div\");\n        divColorScale.classList.add('sim-div-colorscale');\n        divColorScale.classList.add('sim-div-colorscale-top1');\n        colorScale = that.colorScale = _document.createElement(\"div\");\n        colorScale.classList.add('simulation-colorscale');\n        divColorScale.appendChild(colorScale);\n\n        colorScaleTopText = that.colorScaleTopText = _document.createElement(\"div\");\n        colorScaleTopText.classList.add('sim-colorScaleTopText');\n        colorScaleTopText.innerHTML = \"- 3333\";\n        divColorScale.appendChild(colorScaleTopText);\n\n        colorScaleBottomText = that.colorScaleBottomText = _document.createElement(\"div\");\n        colorScaleBottomText.classList.add('sim-colorScaleBottomText');\n        colorScaleBottomText.innerHTML = \"- 3333\";\n        divColorScale.appendChild(colorScaleBottomText);\n        docfrag.appendChild(divColorScale);\n        ////////////////////////////////////\n\n        line2 = that.line2 = _document.createElement(\"hr\");\n        line2.classList.add('sim-line2');\n        docfrag.appendChild(line2);\n\n        var divTable = _document.createElement('div');\n        divTable.classList.add('sim-div-Table');\n        divTable.addEventListener('click', function (e) { // When someone clicks on it\n            divTable.classList.add('sim-div-Table-Collapse');\n            container.classList.add('simulation-container-Collapse');\n            divColorScale.classList.add('sim-div-colorscale-Collapse');\n        });\n\n        divColorScale.addEventListener('click', function (e) { // When someone clicks on it\n            divTable.classList.remove('sim-div-Table-Collapse');\n            container.classList.remove('simulation-container-Collapse');\n            divColorScale.classList.remove('sim-div-colorscale-Collapse');\n        });\n\n        tbl = that.tbl = _document.createElement(\"table\");\n        tblBody = that.tblBody = _document.createElement(\"tbody\");\n        tbl.appendChild(tblBody);\n        tbl.classList.add('sim-table');\n        divTable.appendChild(tbl);\n        docfrag.appendChild(divTable);\n\n        legend.appendChild(docfrag);\n\n        container.appendChild(legend);\n    }\n\n    function getPropertyValue(properties, propertyName) {\n        for (var i = 0; i < properties.length; ++i) {\n            var property = properties[i];\n            if (property.displayName === propertyName) {\n                return property.displayValue;\n            }\n        }\n        return null;\n    }\n\n    function toggleDisable(element, len) {\n        var resultGroupDisable = false;\n        var style = '\"\"';\n        if (len <= 1) {\n            resultGroupDisable = true;\n            style = \"none\";\n        }\n        element.disabled = resultGroupDisable;\n        styleBuilder(element, {\n            \"-webkit-appearance\": style,\n            \"-moz-appearance\": style,\n            appearance: style\n        });\n    }\n\n    // GalleryPanel class\n    function GalleryPanel(viewer, options) {\n        var that = this;\n        options = options || {};\n        that.viewer = viewer;\n        that.simDef = null;\n        this.setGlobalManager(viewer.globalManager);\n        avu.DockingPanel.call(that, viewer.container, 'Simulation-Panel', 'Simulation Results');\n        // panel position configuration.\n        that.position = options.position || \"right\";\n    }\n\n    GalleryPanel.prototype = Object.create(avu.DockingPanel.prototype);\n    var prototype = GalleryPanel.prototype;\n    prototype.constructor = GalleryPanel; \n\n    prototype.initialize = function () {\n        var that = this;\n        preparePanel.call(that);\n        that.resultsGroup.addEventListener('change', function (event) {\n            var simDef = that.simDef;\n            var activeLoadCase = simDef.loadCases[that.simDef.activeLoadCaseKey];\n            that.viewer.hide(activeLoadCase.resultsNode);\n            var caller = 'fillResultTypes';\n            if (simDef.modalAnalysis) {\n                caller = 'fillModalResultTypes';\n            } else if (simDef.analysisType === simDef.SimulationStudies.NLSS) {\n                caller = 'fillNLSSResultTypes';\n            }\n            that[caller](simDef.activeLoadCaseKey, that.resultsGroup.value);\n            setTimeout(function () {\n                that.setSimObjectsVisibility();\n            }, 100);\n        });\n        that.resultTypes.addEventListener('change', function () {\n            var activeLoadCase = that.simDef.loadCases[that.simDef.activeLoadCaseKey];\n            that.viewer.hide(activeLoadCase.resultsNode);\n            that.setSimObjectsVisibility();\n        });\n        that.resultSteps.addEventListener('change', function() {\n            var activeLoadCase = that.simDef.loadCases[that.simDef.activeLoadCaseKey];\n            that.viewer.hide(activeLoadCase.resultsNode);\n            that.updateType();\n            that.setSimObjectsVisibility();\n        });\n    };\n\n    prototype.updateType = function() {\n        var selectedStep = document.getElementById('resultSteps').selectedIndex;\n        document.getElementById('resultTypes').selectedIndex = selectedStep;\n    };\n\n    prototype.setSimulationDef = function (simDef) {\n        var that = this, studyNode, loadCase, studyName, tblBody, resultsGroup, viewer;\n        that.simDef = simDef;\n        studyNode = simDef.studyNode * 1;\n        function onStudyPropertiesRetrieved(studyNode) {\n            var name = getPropertyValue(studyNode.properties, \"Name\");\n            that.setTitle(name);\n        }\n\n        //hide undeformed option if neccessary\n        if (simDef.undeformedResults === -1) {\n            that.optUndeformed.classList.add('sim-hide');\n            that.labelUndeformed.classList.add('sim-hide');\n            that.divColorScale.classList.remove('sim-div-colorscale-top1');\n            that.divColorScale.classList.add('sim-div-colorscale-top2');\n    } else {\n      if (simDef.analysisType === simDef.SimulationStudies.NLSS) {\n        that.resultSteps.classList.remove('sim-hide');\n        that.divResultsOption.classList.add('sim-div-options-NLSS');\n        that.divColorScale.classList.remove('sim-div-colorscale-top1');\n        that.divColorScale.classList.add('sim-div-colorscale-top1-NLSS');\n        that.colorScale.classList.add('simulation-colorscale-NLSS');\n        that.colorScaleTopText.classList.add('sim-colorScaleTopText-NLSS');\n        that.colorScaleBottomText.classList.add('sim-colorScaleBottomText-NLSS');\n      } else {\n        that.resultSteps.classList.add('sim-hide');\n        that.divResultsOption.classList.remove('sim-div-options-NLSS');\n        that.divColorScale.classList.add('sim-div-colorscale-top1');\n        that.divColorScale.classList.remove('sim-div-colorscale-top1-NLSS');\n        that.colorScale.classList.remove('simulation-colorscale-NLSS');\n        that.colorScaleTopText.classList.remove('sim-colorScaleTopText-NLSS');\n        that.colorScaleBottomText.classList.remove('sim-colorScaleBottomText-NLSS');\n      }\n        }\n\n        function onError(status, message, data) {\n        }\n\n        that.viewer.getProperties(studyNode, onStudyPropertiesRetrieved, onError);\n        //result groups\n        studyName = i18n.translate(simDef.studyName());\n        // info: Analysis type\n        tblBody = that.tblBody;\n        if (!that.rowType) {\n            var rowsToInsert = [\n                {\n                    name: 'rowType',\n                    content: [i18n.translate(\"Analysis Type\"), studyName]\n                },\n                {\n                    name: 'rowNodes',\n                    content: [i18n.translate(\"Nodes\"), '1872']\n                },\n                {\n                    name: 'rowElements',\n                    content: [i18n.translate(\"Elements\"), '1084']\n                },\n                {\n                    name: 'rowMin',\n                    content: [i18n.translate(\"Min\"), '0.000E+02 MPa']\n                },\n                {\n                    name: 'rowMax',\n                    content: [i18n.translate(\"Max\"), '5.117E+02 MPa']\n                }\n            ];\n            rowsToInsert.forEach(function (row) {\n                that[row.name] = tblBody.insertRow(-1);\n                row.content.forEach(function (cellValue) {\n                    that[row.name].insertCell(-1).innerHTML = cellValue;\n                });\n            });\n        } else {\n            that.rowType.cells[1].innerHTML = studyName;\n        }\n\n        viewer = that.viewer;\n\n        viewer.model.getObjectTree(function (instanceTree) {\n            that.instanceTree = instanceTree;\n            var calleeResultTypes, calleeResultsGroup;\n            if (simDef.analysisType === simDef.SimulationStudies.MODAL || simDef.analysisType === simDef.SimulationStudies.BUCKLING) {\n              calleeResultsGroup = \"fillResultsGroup\";\n              calleeResultTypes = \"fillModalResultTypes\";\n            } else if (simDef.analysisType === simDef.SimulationStudies.NLSS) {\n              calleeResultsGroup = \"fillNLSSResultsGroup\";\n              calleeResultTypes = \"fillNLSSResultTypes\";\n            } else {\n              calleeResultsGroup = \"fillResultsGroup\";\n              calleeResultTypes = \"fillResultTypes\";\n            }\n            that[calleeResultsGroup](that.simDef.activeLoadCaseKey);\n            that[calleeResultTypes](that.simDef.activeLoadCaseKey, that.resultsGroup.value);\n            setTimeout(function () {\n                simDef.simExt.showResultsDlg(true);\n                simDef.simExt.applySettings();\n                that.setSimObjectsVisibility();\n            }, 500);\n        });\n\n        //elements & nodes\n        var activeLoadCase = that.simDef.loadCases[that.simDef.activeLoadCaseKey];\n        var resultsNode = +activeLoadCase.resultsNode;\n\n        function onResultsPropertiesRetrieved(resultsNode) {\n            var elements = getPropertyValue(resultsNode.properties, \"Elements\");\n            var nodes = getPropertyValue(resultsNode.properties, \"Nodes\");\n            that.rowElements.cells[1].innerText = elements;\n            that.rowNodes.cells[1].innerText = nodes;\n        }\n\n        viewer.getProperties(resultsNode, onResultsPropertiesRetrieved, onError);\n\n        if (simDef.analysisType === simDef.SimulationStudies.NLSS) that.updateType();\n    };\n\n    prototype.processNodes = function (instanceTree, onProcessed) {\n        var that = this;\n        var nodeIdsToProcess = [];\n        var simDef = that.simDef;\n        var viewer = that.viewer;\n        var loadCase = null;\n        if (!simDef) {\n            simDef = new SimulationDef();\n        } else {\n            simDef.reset();\n        }\n        instanceTree.enumNodeChildren(instanceTree.getRootId(), function (dbId) {\n            nodeIdsToProcess[nodeIdsToProcess.length] = dbId;\n        }, true);\n        function processNodeId(node, onNodeProcessed) {\n            function onPropertiesRetrieved(result) {\n                //force to hide until all init. that.viewer.hide(node);\n                var properties = result.properties;\n                var name = getPropertyValue(result.properties, 'A1C6011B-E1A6-4ADF-975D-A0003C592F87');\n                if (name) {\n                    var bSimNode = true;\n                    switch (name) {\n                        case \"SIM_STUDY\":\n                            simDef.studyNode = node;\n                            var type = getPropertyValue(result.properties, \"Study Type\");\n                            simDef.analysisType = type;\n                            break;\n                        case \"SIM_POINT_MASSES\":\n                            simDef.pointMasssesNode = node;\n                            break;\n                        case \"SIM_POINT_MASS\":\n                            simDef.pointMassNodes.push(node);\n                            break;\n                        case \"SIM_CONNECTORS\":\n                            simDef.connectorsNode = node;\n                            break;\n                        case \"SIM_CONNECTOR\":\n                            //case \"SIM_BOLT_CONNECTOR\":\n                            //case \"SIM_SPRING_CONNECTOR\":\n                            simDef.connectorNodes.push(node);\n                            break;                          \n                        case \"SIM_LOAD_CASE\":\n                            loadCase = simDef.addLoadCase(getPropertyValue(result.properties, 'Name'), node, node);\n                            break;\n                        case \"SIM_CONSTRAINTS\":\n                            if(loadCase == null) {\n                                loadCase = simDef.addLoadCase(i18n.translate(\"Load Case:1\"), 0, 0);\n                            }                       \n                            loadCase.constraintsNode = node;\n                            break;\n                        case \"SIM_CONSTRAINT\":\n                            loadCase.constraintNodes.push(node);\n                            break;\n                        case \"SIM_LOADS\":\n                            if(loadCase == null) {\n                                loadCase = simDef.addLoadCase(i18n.translate(\"Load Case:1\"), 0, 0);\n                            }                        \n                            loadCase.loadsNode = node;\n                            break;\n                        case \"SIM_LOAD\":\n                            loadCase.loadNodes.push(node);\n                            break;\n                        case \"SIM_RESULTS_SCALAR_PLOT\":\n                            if(loadCase == null) {\n                                loadCase = simDef.addLoadCase(i18n.translate(\"Load Case:1\"), 0, 0);\n                            }                        \n                            if (simDef.analysisType === simDef.SimulationStudies.LSS || simDef.analysisType === simDef.SimulationStudies.NLSS || simDef.analysisType === simDef.SimulationStudies.THERMAL ||\n                                simDef.analysisType === simDef.SimulationStudies.THERMALSTRESS || simDef.analysisType === simDef.SimulationStudies.SHAPEGENERATOR) {\n                                loadCase.associateResult(getPropertyValue(properties, \"Name\"), node);\n                            } else {//Buckling, Modal\n                                loadCase.associateModalResult(getPropertyValue(properties, \"Name\"), node);\n                            }\n                            break;\n                        case \"SIM_RESULTS_GROUP\":\n                            if(loadCase == null) {\n                                loadCase = simDef.addLoadCase(i18n.translate(\"Load Case:1\"), 0, 0);\n                            }                      \n                            if (simDef.analysisType === simDef.SimulationStudies.LSS || simDef.analysisType === simDef.SimulationStudies.NLSS || simDef.analysisType === simDef.SimulationStudies.THERMAL ||\n                                simDef.analysisType === simDef.SimulationStudies.THERMALSTRESS || simDef.analysisType === simDef.SimulationStudies.SHAPEGENERATOR) {\n                                loadCase.associateResultGroup(getPropertyValue(properties, \"Name\"), node);\n                            }\n                            break;\n                        case \"SIM_RESULTS\":\n                            if(loadCase == null) {\n                                loadCase = simDef.addLoadCase(i18n.translate(\"Load Case:1\"), 0, 0);\n                            }                        \n                            loadCase.resultsNode = node;\n                            //viewer.hide(node);\n                            break;\n                        case \"SIM_RESULTS_UNDEFORMED_FEATURE_EDGES_PLOT\":\n                            if(loadCase == null) {\n                                loadCase = simDef.addLoadCase(i18n.translate(\"Load Case:1\"), 0, 0);\n                            }                        \n                            loadCase.undeformedResults = node;\n                            //viewer.hide(node);\n                            break;\n                        case \"SIM_RESULTS_SCALAR_PLOT_BODY\":\n                        case \"SIM_RESULTS_SAMPLE\":\n                            // Nothing for now!\n                            break;\n                    }\n                    if (bSimNode === true) {\n                        simDef.simNodes.push(node);\n                    }                    \n                }\n                else {\n                    simDef.modelNodes.push(node);\n                }\n                onNodeProcessed();\n            }\n\n            function onError(status, message, data) {\n                onNodeProcessed();\n            }\n\n            if (node && viewer) {\n                viewer.getProperties(node, onPropertiesRetrieved, onError);\n            }\n        }\n\n        // Process the nodes one by one.\n        function processNext() {\n            if (nodeIdsToProcess.length > 0) {\n                processNodeId(nodeIdsToProcess.shift(), processNext);\n            } else {\n                // No more nodes to process - call the provided callback.\n                onProcessed(simDef);\n            }\n        }\n\n        processNext();\n    };\n\n    prototype.initModel = function (instanceTree, simExt) {\n        var that = this;\n        var viewer = that.viewer;\n        if (!viewer) return;\n        that.processNodes(instanceTree, function (simDef) {\n            simDef.simExt = simExt;\n            that.setSimulationDef(simDef);\n        });\n        that.addEventListener(that.viewer, av.SELECTION_CHANGED_EVENT, function(e) {\n            var nodes = e.nodeArray;\n            if (nodes) {\n                that.handleClick(nodes[0]);\n                \n        //     for (var k = 0; k < nodes.length; k++)\n        //     {\n        //         if(that.isModelNode(nodes[k]))\n        //         {\n        //           that.viewer.hide(that.simDef.resultsNode);\n        //           break;\n        //         }\n        //      }\n           }\n        });\n    };\n\n    prototype.fillResultsGroup = function (loadCaseKey) {\n\n        if (!loadCaseKey)\n            return;\n\n        var that = this;\n        var simDef = that.simDef;\n        var loadCase = simDef.loadCases[loadCaseKey];\n        var resultsGroup = that.resultsGroup;\n\n        const _document = that.getDocument();\n        resultsGroup.options.length = 0;\n        var groupKeys = Object.keys(simDef.analysisType === simDef.SimulationStudies.MODAL || simDef.analysisType === simDef.SimulationStudies.BUCKLING ? loadCase.modalResults : loadCase.resultGroups);\n        for (var i = 0; i < groupKeys.length; i++) {\n            var item = _document.createElement(\"option\");\n            item.value = groupKeys[i];\n            var name = simDef.analysisType === simDef.SimulationStudies.MODAL || simDef.analysisType === simDef.SimulationStudies.BUCKLING ? groupKeys[i] : loadCase.resultGroups[groupKeys[i]];\n            item.setAttribute(\"data-i18n\", name);\n            item.textContent = i18n.translate(name);\n            resultsGroup.add(item);\n        }\n\n        toggleDisable(resultsGroup, resultsGroup.options.length, false);\n    };\n\n    prototype.fillNLSSResultsGroup = function(loadCaseKey) {\n        var that = this;\n        var simDef = that.simDef;\n        var loadCase = simDef.loadCases[loadCaseKey];\n        var resultsGroup = that.resultsGroup;\n\n        const _document = that.getDocument();\n        resultsGroup.options.length = 0;\n        var groupKeys = Object.keys(loadCase.resultGroups);\n        var groupBuffer;\n        groupBuffer = [];\n        for (var i = 0; i < groupKeys.length; i++) {\n            var name = loadCase.resultGroups[groupKeys[i]];\n            if (groupBuffer.includes(name)) continue;\n            groupBuffer.push(name);\n\n            var item = _document.createElement(\"option\");\n            item.value = name;\n            item.setAttribute(\"data-i18n\", name);\n            item.textContent = i18n.translate(name);\n            resultsGroup.add(item);\n        }\n\n        toggleDisable(resultsGroup, resultsGroup.options.length, false);\n    };\n\n    prototype.fillResultTypes = function (loadCaseKey, resultGroupKey) {\n        var that = this;\n        var viewer = that.viewer;\n        var resultTypes = that.resultTypes;\n        var resultsGroup = that.resultsGroup;\n        var loadCase = that.simDef.loadCases[loadCaseKey];\n\n        resultTypes.options.length = 0;\n        var node = +resultGroupKey;\n\n        function onError(status, message, data) {\n            // onNodeProcessed();\n        }\n\n        function onGroupPropertiesRetrieved(groupResult) {\n            var key = \"Result group\";\n            var resultGroup = getPropertyValue(groupResult.properties, key);\n\n            const _document = that.getDocument();\n            function onResultPropertiesRetrieved(resultType) {\n                var resultTypeGroup = getPropertyValue(resultType.properties, key);\n                if (resultTypeGroup === resultGroup) {\n                    var item = _document.createElement(\"option\");\n                    item.value = resultType.dbId;\n                    var name = loadCase.resultTypes[resultType.dbId];\n                    item.setAttribute(\"data-i18n\", name);\n                    item.textContent = i18n.translate(name);\n                    resultTypes.add(item);\n                    toggleDisable(resultTypes, resultTypes.options.length, resultsGroup.options.length === 0);\n                }\n            }\n\n            //result types\n            var keys = Object.keys(loadCase.resultTypes);\n            for (var i = 0; i < keys.length; i++) {\n                var resultNode = +keys[i];\n                viewer.getProperties(resultNode, onResultPropertiesRetrieved, onError);\n            }\n        }\n\n        viewer.getProperties(node, onGroupPropertiesRetrieved, onError);\n    };\n\n    prototype.fillModalResultTypes = function (loadCaseKey, resultGroupKey) {\n        var that = this;\n        var resultTypes = that.resultTypes;\n        var resultsGroup = that.resultsGroup;\n        var loadCase = that.simDef.loadCases[loadCaseKey];\n\n        resultTypes.options.length = 0;\n        var resultGroup = resultGroupKey;\n\n        const _document = that.getDocument();\n        function onResultPropertiesRetrieved(resultType) {\n            var resultTypeGroup = getPropertyValue(resultType.properties, \"Result type\");\n            if (resultTypeGroup === resultGroup) {\n                var item = _document.createElement(\"option\");\n                item.value = resultType.dbId;\n                var resultMode = getPropertyValue(resultType.properties, \"Mode\");\n                var name = resultMode;\n                item.setAttribute(\"data-i18n\", name);\n                item.textContent = name; //Autodesk.Viewing.i18n.translate(name); //Mode 1: 200 Hz -> result from translate 200 Hz -> not acceptable\n                that.resultTypes.add(item);\n                //that.simDef.associateResult(name, resultType.dbId);\n                toggleDisable(resultTypes, resultTypes.options.length, resultsGroup.options.length === 0);\n            }\n        }\n\n        function onError(status, message, data) {\n            // onNodeProcessed();\n        }\n\n        //result types\n        var keys = loadCase.modalResults[resultGroup] || [];\n        for (var i = 0; i < keys.length; i++) {\n            var resultNode = +keys[i];\n            that.viewer.getProperties(resultNode, onResultPropertiesRetrieved, onError);\n        }\n\n    };\n\n\n\n    prototype.fillNLSSResultTypes = function(loadCaseKey, resultGroupKey) {\n        var that = this;\n        var viewer = that.viewer;\n        var uiResultTypes = that.resultTypes;\n        var uiResultsSteps = that.resultSteps;\n        var loadCase = that.simDef.loadCases[loadCaseKey];\n        const _document = that.getDocument();\n\n        var node = +resultGroupKey;\n\n        function onError(status, message, data) {\n            // onNodeProcessed();\n        }\n\n        function onGroupPropertiesRetrieved(groupResult) {\n            function onResultPropertiesRetrieved(resultType) {\n                var itemType = _document.createElement(\"option\");\n                itemType.value = resultType.dbId;\n                var itemTypeName = getPropertyValue(resultType.properties, \"Result type\");\n                itemType.setAttribute('data-i18n', itemTypeName);\n                itemType.textContent = i18n.translate(itemTypeName);\n                uiResultTypes.add(itemType);\n                toggleDisable(uiResultTypes, 0);\n\n                var itemStep = _document.createElement(\"option\");\n                itemStep.value = resultType.dbId;\n\n                // we do not want to display original display name in \"Step X: X\" format\n                // since for the NLSS, step values and units are irrelevant.\n                // Instead, we will parse its name to \"Step X\" format\n                var itemStepName = getPropertyValue(resultType.properties, \"Mode\");\n                var indexDelimiter = itemStepName.indexOf(':');\n                if (indexDelimiter != -1) itemStepName = itemStepName.substr(0, indexDelimiter);\n\n                itemStep.setAttribute('data-i18n', itemStepName);\n                itemStep.textContent = i18n.translate(itemStepName);\n                uiResultsSteps.add(itemStep);\n            }\n\n            // first, remove all old entries\n            _document.getElementById(\"resultTypes\").options.length = 0;\n            _document.getElementById(\"resultSteps\").options.length = 0;\n\n            const keysGroup = Object.keys(loadCase.resultGroups).map(e => loadCase.resultGroups[e]);\n            var keysTypes = Object.keys(loadCase.resultTypes);\n            for (var i = 0; i < keysGroup.length; i++) {\n                if (resultGroupKey === keysGroup[i]) {\n                    var resultNode = +keysTypes[i];\n                    viewer.getProperties(resultNode, onResultPropertiesRetrieved, onError);\n                }\n            }\n        }\n\n        viewer.getProperties(node, onGroupPropertiesRetrieved, onError);\n    };\n\n    prototype.uninitialize = function () {\n        avu.DockingPanel.prototype.uninitialize.call(this);\n        this.viewer = null;\n    };\n\n    prototype.setTitle = function (title, options) {\n        if (!title) {\n            title = 'Simulations';\n            options = options || {};\n            options.localizeTitle = true;\n        }\n        avu.DockingPanel.prototype.setTitle.call(this, title, options);\n    };\n\n    prototype.setModelNodesVisible = function (bVisible) {\n        var that = this;\n        var viewer = that.viewer;\n        if (!that.simDef) return;\n        var modelNodes = that.simDef.modelNodes;\n        if (modelNodes && modelNodes.length > 0) {\n            for (var k = 0; k < modelNodes.length; k++) {\n                viewer[bVisible ? \"show\" : \"hide\"](modelNodes[k]);\n            }\n        }\n    };\n\n//    prototype.isModelNode = function (node) {\n//      var that = this;\n//      if(!that.simDef) return;\n//      var modelNodes = that.simDef.modelNodes;\n//      if (!modelNodes || modelNodes.length === 0) {\n//        return;\n//      }\n//      return modelNodes.indexOf(node) !== -1;\n//    };\n\n    prototype.setNodeVisibility = function (node, visible) {\n        this.viewer[visible ? \"show\" : \"hide\"](node);\n    };\n\n    prototype.isSimStudyNode = function (node) {\n        if (!this.simDef.studyNode) return false;\n        return this.simDef.studyNode === node;\n    };\n\n        prototype.handleClick = function(nodeId) {\n            var that = this;\n            if(that.simDef === null) return false;\n            var activeLoadCase = that.simDef.loadCases[that.simDef.activeLoadCaseKey];\n            if(activeLoadCase === null) return false;\n            //if(!activeLoadCase.isImportant(node)) return false;\n            var groupKeys = Object.keys(that.simDef.loadCases);\n            for (var i = 0; i < groupKeys.length; i++) {\n                var loadCase = that.simDef.loadCases[groupKeys[i]];\n                if(loadCase.isImportant(nodeId) && activeLoadCase !== loadCase) {\n                    //hide old load case items\n                    if(activeLoadCase.loadsNode !== -1)  that.viewer.hide(activeLoadCase.loadsNode);\n                    if(activeLoadCase.constraintsNode !== -1)  that.viewer.hide(activeLoadCase.constraintsNode);\n                    if(activeLoadCase.undeformedResults !== -1) that.viewer.hide(activeLoadCase.undeformedResults);\n                    if(activeLoadCase.resultsNode !== -1) that.viewer.hide(activeLoadCase.resultsNode);\n                    if(that.simDef.connectorsNode !== -1) that.viewer.hide(that.simDef.connectorsNode);\n                    //set new active load case\n                    that.simDef.activeLoadCaseKey = groupKeys[i];\n                    //fill results group cbo with new items\n                    that.fillResultsGroup(that.simDef.activeLoadCaseKey);\n                    var callee;\n                    if (that.simDef.analysisType === that.simDef.SimulationStudies.MODAL || that.simDef.analysisType === that.simDef.SimulationStudies.BUCKLING) {\n                      callee = 'fillModalResultTypes';\n                    } else if (that.simDef.analysisType === that.simDef.SimulationStudies.NLSS) {\n                      callee = 'fillNLSSResultTypes';\n                    } else {\n                      callee = 'fillResultTypes';\n                    }\n\n                    //fill results type cbo with new items\n                    that[callee](that.simDef.activeLoadCaseKey, that.resultsGroup.value);\n                    //sets the visibility of new items\n                    setTimeout(function () {\n                        that.simDef.simExt.showResultsDlg(true);\n                        that.setSimObjectsVisibility();\n                    }, 500);\n                    return true;\n                }\n            }\n\n            return false;\n        };  \n\n    prototype.setSimObjectsVisibility = function (node) {\n        var that = this;\n        //if no results and no active load then show model and hide results panel\n        var activeLoadCase = that.simDef.loadCases[that.simDef.activeLoadCaseKey];\n        if (!that.resultTypes || that.resultTypes.options.length === 0 || activeLoadCase === null) {\n            that.setModelNodesVisible(true);\n            that.simDef.simExt.showResultsDlg(false);\n            return;\n        }\n\n        var resultNode = +that.resultTypes.value;\n        //hide models\n        that.setModelNodesVisible(false);\n        //show result\n        if (resultNode !== -1) that.viewer.show(resultNode);\n        //show loads of active load case\n        if (activeLoadCase.loadsNode !== -1) that.viewer.show(activeLoadCase.loadsNode);\n        //show constraints of active load case\n        if (activeLoadCase.constraintsNode !== -1) that.viewer.show(activeLoadCase.constraintsNode);\n        //show undeformed style if\n        if (that.optUndeformed.checked && activeLoadCase.undeformedResults !== -1)\n            that.viewer.show(activeLoadCase.undeformedResults);\n        //show connectors\n        if (that.simDef.connectorsNode !== -1) that.viewer.show(that.simDef.connectorsNode);\n\n        //this.viewer.fitToView();\n        function onResultPropertiesRetrieved(resultType) {\n            var minValue = getPropertyValue(resultType.properties, \"Minimal value\");\n            var maxValue = getPropertyValue(resultType.properties, \"Maximal value\");\n            var reversed = getPropertyValue(resultType.properties, \"Scale reversed\");\n            var unit = getPropertyValue(resultType.properties, \"Unit\");\n            that.rowMin.cells[1].innerText = minValue + \" \" + unit;\n            that.rowMax.cells[1].innerText = maxValue + \" \" + unit;\n\n            var minRefValue = getPropertyValue(resultType.properties, \"Lower referential value\");\n            var maxRefValue = getPropertyValue(resultType.properties, \"Upper referential value\");\n            if (reversed === \"True\") {\n                //var temp = maxRefValue;\n                //maxRefValue = minRefValue;\n                //minRefValue = temp;\n                that.colorScale.style.transform = \"rotate(90deg)\";\n                that.colorScale.style.moztransform = \"rotate(90deg)\";\n                that.colorScale.style.webkittransform = \"rotate(90deg)\";\n            }\n            else {\n                that.colorScale.style.transform = \"rotate(-90deg)\";\n                that.colorScale.style.moztransform = \"rotate(-90deg)\";\n                that.colorScale.style.webkittransform = \"rotate(-90deg)\";\n            }\n            that.colorScaleTopText.innerHTML = \"- \" + maxRefValue + \" \" + unit;\n            that.colorScaleBottomText.innerHTML = \"- \" + minRefValue + \" \" + unit;\n        }\n\n        function onError(status, message, data) {\n            // onNodeProcessed();\n        }\n\n        that.viewer.getProperties(resultNode, onResultPropertiesRetrieved, onError);\n    };\n\n    return GalleryPanel;\n})();\n\n","'use strict';\n\nexport function SimModelStructurePanel(ext, title, options) {\n    Autodesk.Viewing.Extensions.ViewerModelStructurePanel.call(this, ext.viewer, title, options);\n    this.viewer = ext.viewer;\n    this.ext = ext;\n};\n\nSimModelStructurePanel.prototype = Object.create(Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype);\nSimModelStructurePanel.prototype.constructor = SimModelStructurePanel;\n\nSimModelStructurePanel.prototype.setGallery = function (gallery) {\n    this.simGalleryPanel = gallery;\n};\n\nSimModelStructurePanel.prototype.initialize = function () {\n    Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.initialize.call(this);\n};\n\nSimModelStructurePanel.prototype.isSimResultsNode = function (node) {\n    if (!this.simGalleryPanel || !this.simGalleryPanel.simDef || !this.simGalleryPanel.simDef.resultsNode) return false;\n    return this.simGalleryPanel.simDef.resultsNode == node;\n};\n\nSimModelStructurePanel.prototype.isSimStudyNode = function (node) {\n    if (!this.simGalleryPanel || !this.simGalleryPanel.simDef || !this.simGalleryPanel.simDef.studyNode) return false;\n    return this.simGalleryPanel.simDef.studyNode == node;\n};\n\nSimModelStructurePanel.prototype.isModelNode = function (node) {\n    if (!this.simGalleryPanel || !this.simGalleryPanel.simDef || !this.simGalleryPanel.simDef.modelNodes || this.simGalleryPanel.simDef.modelNodes.length == 0)\n        return false;\n\n    return this.simGalleryPanel.simDef.modelNodes.indexOf(node) !== -1;\n};\n\nSimModelStructurePanel.prototype.shouldInclude = function (node) {\n    var that = this;\n    if (!that.simGalleryPanel || !that.simGalleryPanel.simDef) return false;\n    if(that.isModelNode(node)) return true;\n    if(that.isSimStudyNode(node)) return true;\n\n    var simDef = that.simGalleryPanel.simDef;\n    var groupKeys = Object.keys(simDef.loadCases);\n    for (var i = 0; i < groupKeys.length; i++) {\n        var loadCase = simDef.loadCases[groupKeys[i]];\n        if(loadCase.resultsNode === node) return false;\n    }\n    \n    return true;\n}\n\nSimModelStructurePanel.prototype.onClick = function (node, event) {\n    Autodesk.Viewing.Extensions.ViewerModelStructurePanel.prototype.onClick.call(this, node, event);\n\n    this.simGalleryPanel.handleClick(node);\n};\n\nSimModelStructurePanel.prototype.expandStudyNode = function () {\n    if (!this.simGalleryPanel.simDef.studyNode) return;\n    this.tree.setCollapsed(this.simGalleryPanel.simDef.studyNode, false);\n};\n\n","import { GalleryPanel } from './GalleryPanel'\nimport { SimModelStructurePanel } from './ModelStructurePanel'\nimport CSS from './FusionSim.css' // REQUIRED!!\n\n'use strict';\n\nvar av = Autodesk.Viewing;\n\nav.GEOMETRY_LOAD_START = 'geometryLoadStarted'; // Ehhh, what?\n\nexport var Simulation = (function () {\n\n    var defaults = {\n    };\n    var loadSimulationExtension = false;\n\n    function Simulation(viewer, options) {\n        var that = this;\n        options = options || {};\n        // Check options, else override with defaults.\n        for (var i in defaults) {\n            options[i] = options[i] || defaults[i];\n        }\n        av.Extension.call(that, viewer, options);\n        this.name = 'fusionsim';\n\n        viewer.addEventListener(av.GEOMETRY_LOAD_START, function (event) {\n            //if extension is already loadded\n            //need to unload it first\n            if (loadSimulationExtension)\n                that.unload();\n            var extension = event.data.extensions;\n            if (extension === 'Autodesk.Fusion360.Simulation') {\n                loadSimulationExtension = true;\n            } else {\n                that.unload();\n                loadSimulationExtension = false;\n            }\n        });\n        viewer.addEventListener(av.GEOMETRY_LOADED_EVENT, function (event) {\n          //  if (loadSimulationExtension) {\n                that.load();\n         //   }\n        });\n    }\n    \n    Simulation.prototype = Object.create(av.Extension.prototype);\n    var prototype = Simulation.prototype;\n    prototype.constructor = Simulation;\n\n\n    prototype.load = function () {\n\n        var that = this;\n        var viewer = that.viewer;\n        if (!viewer.model) return true;\n        that.galleryPanel = new GalleryPanel(that.viewer);\n        that.viewer.addPanel(that.galleryPanel);\n        that.simButton = new av.UI.Button('toolbar-simulation');\n        that.simButton.setVisible(false);\n        that.simButton.setToolTip('Simulation Results');\n        that.simButton.onClick = function (e) {\n            var visible = that.galleryPanel.isVisible();\n            if(!visible) {\n                that.activate(that.galleryPanel);\n            } else {\n                that.deactivate(that.galleryPanel);\n            }\n            that.simButton.setState(!visible ? av.UI.Button.State.ACTIVE : av.UI.Button.State.INACTIVE);\n        };\n        that.simButton.setIcon('toolbar-simulationIcon');\n        viewer.settingsTools.addControl(that.simButton, {\n            index: 1\n        });\n\n        // Change these viewer settings for SIM files.\n        // keep defaults\n        that.hideLines = viewer.prefs.get(\"lineRendering\");\n        that.ghosting = viewer.prefs.get(\"ghosting\");\n        that.ambientShadow = viewer.prefs.get(\"ambientShadows\");\n        that.antialiazing = viewer.prefs.get(\"antialiasing\");\n        that.lightPreset = viewer.prefs.get(\"lightPreset\");\n        viewer.model.getObjectTree(function (instanceTree) {\n            setTimeout(function () {\n                that.galleryPanel.initModel(instanceTree, that);\n                that.initModelBrowser();\n            }, 100);\n        });\n        return true;\n    };\n    prototype.unload = function () {\n        var that = this;\n        if (!that.viewer.model) return;\n        that.showResultsDlg(false);\n        that.simButton.removeFromParent();\n        that.viewer.removePanel(this.galleryPanel);\n        that.galleryPanel.uninitialize();\n        // restore viewer settings back.\n        that.viewer.hideLines(!that.hideLines);\n        that.viewer.setGhosting(that.ghosting);\n        that.viewer.setQualityLevel(that.ambientShadow, that.antialiazing);\n        that.viewer.setLightPreset(that.lightPreset);\n        return true;\n    };\n\n    prototype.initModelBrowser = function () {\n        var that = this;\n        setTimeout(function () {\n            that.options = that.options || {};\n            that.options.addFooter = true;\n            that.modelStructurePanel = new SimModelStructurePanel(that, 'Simulation Model Structure Loading', that.options);\n            that.viewer.getExtension('Autodesk.ModelStructure').setModelStructurePanel(that.modelStructurePanel);\n            that.modelStructurePanel.setGallery(that.galleryPanel);\n        }, 100);\n    };\n\n    prototype.showResultsDlg = function (show) {\n        var that = this;\n        that.simButton.setState(show ? av.UI.Button.State.ACTIVE : av.UI.Button.State.INACTIVE);\n        that.simButton.setVisible(show);\n        that.galleryPanel.setVisible(show);\n    };\n    prototype.applySettings = function () {\n        var viewer = this.viewer;\n        viewer.hideLines(false);\n        viewer.setGhosting(false);\n        viewer.setQualityLevel(false, true);\n        viewer.setLightPreset(4);\n    };\n    prototype.simData = function () {\n        return this.galleryPanel.simDef;\n    };\n\n    prototype.activate = function (galleryPanel) {\n        if(!this.activeStatus) {\n            galleryPanel.setVisible(true);\n            this.activeStatus = true;\n        }\n        return true;\n\n    };\n\n    prototype.deactivate = function (galleryPanel) {\n        if(this.activeStatus) {\n            galleryPanel.setVisible(false);\n            this.activeStatus = false;\n        }\n        return true;\n    };\n\n\n    return Simulation;\n})();\n\nav.theExtensionManager.registerExtension('Autodesk.Fusion360.Simulation', Simulation);\n\n"],"sourceRoot":""}