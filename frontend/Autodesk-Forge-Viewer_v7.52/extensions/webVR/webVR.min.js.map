{"version":3,"sources":["webpack://Autodesk.Extensions.[name]/webpack/bootstrap","webpack://Autodesk.Extensions.[name]/./node_modules/css-loader/lib/css-base.js","webpack://Autodesk.Extensions.[name]/./node_modules/style-loader/lib/addStyles.js","webpack://Autodesk.Extensions.[name]/./node_modules/style-loader/lib/urls.js","webpack://Autodesk.Extensions.[name]/./extensions/webVR/VR.css?cd31","webpack://Autodesk.Extensions.[name]/./extensions/webVR/VR.css","webpack://Autodesk.Extensions.[name]/./extensions/webVR/StereoRenderContext.js","webpack://Autodesk.Extensions.[name]/./extensions/webVR/menuVR.js","webpack://Autodesk.Extensions.[name]/./extensions/webVR/cursorVR.js","webpack://Autodesk.Extensions.[name]/./extensions/webVR/webVrTool.js","webpack://Autodesk.Extensions.[name]/./extensions/webVR/webVR.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","useSourceMap","list","toString","this","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","push","fn","memo","stylesInDom","isOldIE","window","document","all","atob","apply","arguments","getTarget","target","parent","querySelector","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","options","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","style","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","undefined","attrs","type","nonce","getNonce","addAttrs","el","keys","forEach","setAttribute","obj","update","remove","result","transform","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","href","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","location","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","test","locals","StereoRenderContext","_vrDisplay","camera","HUD","toolConfig","_context","_renderer","_w","_h","pose","avp","Autodesk","Viewing","Private","leftEyeParams","getEyeParameters","rightEyeParams","eyeTranslationL","THREE","Vector3","eyeTranslationR","cameraL","PerspectiveCamera","cameraR","_scale","modelScaleFactor","frameData","that","getStereoCamera","leftEye","fixed","matrixWorld","decompose","position","quaternion","scale","set","translateOnAxis","projectionMatrix","elements","leftProjectionMatrix","rightProjectionMatrix","init","renderer","width","height","RenderContext","dpr","getWindow","devicePixelRatio","renderWidth","renderHeight","settings","fromArray","offset","VRFrameData","worldup","z","webVR_orbitModel","modeFusion","applyQuaternion","Quaternion","orientation","multiplyScalar","x","y","lookAt","up","modeWalkthrough","setFromAxisAngle","Math","PI","multiply","lookAtDir","clone","add","updateCamera","_isPresenting","depthNear","near","depthFar","far","getFrameData","updateMatrixWorld","dirty","L","R","C","beginScene","prototypeScene","_camera","customLights","needClear","renderScenePart","scene","want_colorTarget","want_saoTarget","want_idTarget","updateLights","halfW","setViewport","setCamera","sceneDirty","bbox","endScene","clearAllOverlays","renderOverlays","overlays","composeFinalFrame","skipAOPass","skipPresent","submitFrame","cleanup","setSize","w","h","force","getMaxAnisotropy","hasMRT","initPostPipeline","useSAO","useFXAA","useIDBuffer","setClearColors","colorTop","colorBot","setAOOptions","radius","intensity","getAORadius","getAOIntensity","setTonemapExposureBias","bias","getExposureBias","setTonemapMethod","getToneMapMethod","toggleTwoSided","isTwoSided","enter2DMode","getAOEnabled","idAtPixel","vpx","vpy","setHighlightLights","setStencilEnabled","enabled","setEdgeColor","colorAsVec4","overlayUpdate","highResTimer","rolloverObjectViewport","screenCapture","console","warn","setUnitScale","metersPerUnit","getUnitScale","getColorTarget","WebVrMenu","_menu","menuAnchor","menuRotOffset","prevMenuIdx","getResourceUrl","imgLoader","ImageUtils","crossOrigin","icons","Object3D","menuOffset","rotateX","createMenuItem","menuBg","BASE_URL","visible","url","xScale","opacity","Mesh","PlaneBufferGeometry","MeshBasicMaterial","loadTexture","color","side","DoubleSide","depthTest","transparent","onVisible","rotation","_z","cam","inverse","copy","tmp","children","material","setHex","floor","onClick","WebVrCursor","viewerImpl","autocam","USE_YUP","_cursor","hit","RingGeometry","hud","dist","hitTestViewport","intersectPoint","sub","matrix","Matrix4","extractRotation","direction","multiplyVector3","hitpt","face","normal","view","getCurrentView","center","pivot","goToView","GlobalManagerMixin","av","VRTool","viewer","vrExtension","setGlobalManager","globalManager","_stereoRenderContext","_HUD","_canvas","canvas","_navapi","navigation","getCamera","webVR_cursor","isExperimentalFlagEnabled","webVR_menu","_names","_isActive","activate","impl","toggleGroundShadow","toggleGroundReflection","toPerspective","setVerticalFov","setRequestFitToView","boundsSize","model","getBoundingBox","size","getCenter","setPivotPoint","setView","setCameraUpVector","max","min","isMobileDevice","requestPresent","then","setLmvDisplay","resetPose","showHUD","setScreenMode","ScreenMode","kFullScreen","addEventListener","setActiveNavigationTool","initHUD","setUserRenderContext","Scene","HUDCamera","menu","camYup","cursor","IPD","timeStamp","isPresenting","deactivate","exitPresent","kNormal","resize","clientWidth","clientHeight","resetHome","removeEventListener","isVisible","getExtension","ext","setVisible","displayViewCube","tbar","getDocument","getElementsByClassName","display","isActive","getNames","getName","VRExtension","Extension","populateDefaultOptions","experimental","constructor","proto","load","onToolbarCreated","toolbar","self","loadDependency","navigator","getVRDisplays","displays","capabilities","canPresent","getToolbar","avu","UI","tool","toolController","registerTool","createUI","onToolChanged","state","toolName","active","Button","State","ACTIVE","INACTIVE","vrToolButton","setState","TOOL_CHANGE_EVENT","logger","navTools","getControl","TOOLBAR","NAVTOOLSID","setToolTip","setIcon","getState","cameraSubmenuTool","addControl","getId","unload","removeFromParent","deregisterTool","activeStatus","theExtensionManager","registerExtension"],"mappings":"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","file":"webVR/webVR.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 847);\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./VR.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./VR.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./VR.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".adsk-icon-webvr{background-image:url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAc1JREFUSA3tVL2KwkAQnsSgpYKCtaIgCNaCja0gYiHY6Qv4BsFnsLLwFawsLSy0VBQbLQT/CxFEsFIUdW4ndy4uGy9y3jWHAyH5Zr6ZyXyzCcDbLBRQWBwtOC+FtUwmA4lEAhB/t4+qqrDb7QA6nQ6r/XemvjT/E8kqe/cnaD+nmE5wOByg2+3CcDi0rEw6t9ttmEwm5lwWFBawXq8xlUqh3W5Hp9OJuq7j6XQSODcwGAwwGo2ipmno9XqxUqncQvxO3Tmgh2KxSJrxy2azYaPREDgErtcrZrNZzqMct9uNo9FI4EoSTadTYdTL5QKr1UrwEWANYLFYCP7tdgubzUbwSQ3ou3A4HJwUCAQgFosZ+Hw+AxUhY5MBce8tHo9DOBy+d4EkEY1erVYxnU5jPp/HXq9njMyWiblcDkOhEJZKJcN3PB6xXC5jMpnEQqGAs9lMkIeA1EBifDlogezVjMvlciEt+BmTJBLn+0Skd61W4yE6mvV6nePvHlTS0sqWyyX0+32B1mw2BfwIaOPxGCKRyMOfnaIo0Gq1gH0fQg1qyI4k+P1+01zK2+/3oHg8HvT5fKYkqkjE+XwuHT+KBYNBYPswzb01IN7b/rkCH+c1AQdiGKHcAAAAAElFTkSuQmCC\\\");background-repeat:no-repeat;background-position:center}.webvr-polyfill-fullscreen-wrapper canvas{width:100% !important;height:100% !important}\\n\", \"\"]);\n\n// exports\n","const av = Autodesk.Viewing;\n\nexport function StereoRenderContext(_vrDisplay, camera, HUD, toolConfig) {\n\n    var avp = Autodesk.Viewing.Private;\n\n    var _vrDisplay; //holds the VR device object info supported by webVR\n    var _context;\n    var _renderer;\n    var _w, _h;\n    var pose;\n    var RADIUS = 2.1;\n\n\n    var leftEyeParams = _vrDisplay.getEyeParameters(\"left\");\n    var rightEyeParams = _vrDisplay.getEyeParameters(\"right\");\n    var eyeTranslationL = new THREE.Vector3();\n    var eyeTranslationR = new THREE.Vector3();\n    var cameraL = new THREE.PerspectiveCamera();\n    var cameraR = new THREE.PerspectiveCamera();\n\n    var _standing = false;\n    var _userHeight = 0.5;\n    var _scale = 10.0 * _vrDisplay.modelScaleFactor; // scale factor 10.0 of a 'toy house'.  Make a UI for this.\n\n    var frameData = null;\n\n    var that = this;\n    this.init = function(renderer, width, height) {\n        _context = new avp.RenderContext();\n        _renderer = renderer;\n\n        const _window = that.getWindow();\n        var dpr = _window.devicePixelRatio * 1.5;\n        _w = _vrDisplay.getEyeParameters(\"left\").renderWidth * 2 / dpr;\n        _h = _vrDisplay.getEyeParameters(\"right\").renderHeight / dpr;\n\n        this.settings = _context.settings;\n        _context.init(_renderer, _w, _h);\n        eyeTranslationL.fromArray(leftEyeParams.offset);\n        eyeTranslationR.fromArray(rightEyeParams.offset);\n\n        frameData = new VRFrameData();\n\n        if (camera.worldup && camera.worldup.z == 1)\n            toolConfig.webVR_orbitModel = false;  // model is not fusion, switch to walkthrough mode\n    };\n\n    this.modeFusion = function(pose) {\n        var position = new THREE.Vector3(0, 0, 1);\n        position.applyQuaternion(new THREE.Quaternion().fromArray(pose.orientation)).multiplyScalar(_scale * RADIUS);\n        camera.position.set(position.x, position.y, position.z);\n        camera.lookAt(_vrDisplay.target); // compute quaternion\n        //camera.quaternion.z = pose.orientation[2];  // roll camera based on head tilt\n        camera.up.set(0, 1, 0); // override touch events\n    };\n\n    this.modeWalkthrough = function(pose) {\n        if (pose.orientation && pose.orientation[1] != 0)\n            camera.quaternion.fromArray(pose.orientation);\n        if (pose.position && pose.position[0] != 0)\n            camera.position.fromArray(pose.position).multiplyScalar(_scale);\n\n        // adjust for alternate worldup\n        if (camera.worldup && camera.worldup.z == 1) {\n            camera.quaternion.setFromAxisAngle(new THREE.Vector3(1, 0, 0), Math.PI / 2);\n            camera.quaternion.multiply(new THREE.Quaternion().fromArray(pose.orientation));\n            if (pose.position && pose.position[0] != 0)\n            \tcamera.position.set(camera.position.x, -camera.position.z, camera.position.y);\n        }\n        // adjust camera target\n        var lookAtDir = new THREE.Vector3(0, 0, -1);\n        lookAtDir.applyQuaternion(camera.quaternion);\n        camera.target = camera.position.clone().add(lookAtDir.clone().multiplyScalar(10));\n    };\n\n    this.updateCamera = function() {\n        if (!(_vrDisplay && _vrDisplay._isPresenting)) return;\n\n        // set position and orientation\n        _vrDisplay.depthNear = camera.near;\n        _vrDisplay.depthFar = camera.far;\n        _vrDisplay.getFrameData(frameData);\n\n        pose = frameData.pose;\n        if (!pose.orientation) return;\n\n        if (toolConfig.webVR_orbitModel)\n            this.modeFusion(pose);\n        else\n            this.modeWalkthrough(pose);\n\n        if (_standing) //MB: perhaps add configurable user height option in settings menu\n            camera.position.setY(camera.position.y + _userHeight);\n        //_vrDisplay.stageParameters.sittingToStandingTransform;\n\n        camera.updateMatrixWorld();\n        camera.dirty = true;\n\n        getStereoCamera(camera, frameData, true, false, cameraL);\n        getStereoCamera(camera, frameData, false, false, cameraR);\n\n        if (HUD) {\n\n            HUD.camera = camera.clone();\n            HUD.camera.position.set(0 ,0, 0);\n\n            getStereoCamera(camera, frameData, true, true, HUD.cameraL);\n            getStereoCamera(camera, frameData, false, true, HUD.cameraR);\n        }\n\n        return {L:cameraL, R:cameraR, C:camera}\n    };\n\n    this.beginScene = function(prototypeScene, _camera, customLights, needClear) {\n        _context.beginScene(prototypeScene, camera, customLights, needClear);\n    };\n\n\n    this.renderScenePart = function(scene, want_colorTarget, want_saoTarget, want_idTarget, updateLights) {\n\n        var halfW = _w / 2;\n\n        _renderer.setViewport(0, 0, halfW, _h);\n        _context.setCamera(cameraL);\n        _context.renderScenePart(scene, true, false, false, false);\n\n        _renderer.setViewport(halfW, 0, halfW, _h);\n        _context.setCamera(cameraR);\n        _context.renderScenePart(scene, true, false, false, false);\n\n        if (HUD) {\n\n            _renderer.setViewport(0, 0, halfW, _h);\n            _context.setCamera(HUD.cameraL);\n            _context.renderScenePart(HUD.scene, true, false, false, false);\n\n            _renderer.setViewport(halfW, 0, halfW, _h);\n            _context.setCamera(HUD.cameraR);\n            _context.renderScenePart(HUD.scene, true, false, false, false);\n        }\n\n        _renderer.setViewport(0, 0, _w, _h);\n    };\n\n    this.sceneDirty = function(camera, bbox) {\n        _context.sceneDirty(camera, bbox);\n    };\n\n    //TODO: get rid of this and combine it with composeFinalFrame\n    this.endScene = function() {\n        _context.endScene();\n    };\n\n    this.clearAllOverlays = function() {};\n\n    this.renderOverlays = function(overlays) {\n        // disabled, due to performance hit on mobile\n    };\n\n    this.composeFinalFrame = function(skipAOPass, skipPresent) {\n        _context.composeFinalFrame(true, skipPresent);\n        if (_vrDisplay._isPresenting) _vrDisplay.submitFrame();\n    };\n\n    this.cleanup = function() {\n        _context.cleanup();\n    };\n\n    this.setSize = function(w, h, force) {\n        _w = w;\n        _h = h;\n        _context.setSize(_w, _h, force);\n    };\n\n    this.getMaxAnisotropy = function() {\n        return _context.getMaxAnisotropy();\n    };\n\n    this.hasMRT = function() {\n        return _context.hasMRT();\n    };\n\n    this.initPostPipeline = function(useSAO, useFXAA, useIDBuffer) {\n        _context.initPostPipeline(false, false, false);\n    };\n\n    this.setClearColors = function(colorTop, colorBot) {\n        _context.setClearColors(colorTop, colorBot);\n    };\n\n    this.setAOOptions = function(radius, intensity) {\n        _context.setAOOptions(radius, intensity);\n    };\n\n    this.getAORadius = function() {\n        return _context.getAORadius();\n    };\n\n    this.getAOIntensity = function() {\n        return _context.getAOIntensity();\n    };\n\n    this.setTonemapExposureBias = function(bias) {\n        _context.setTonemapExposureBias(bias);\n    };\n\n    this.getExposureBias = function() {\n        return _context.getExposureBias();\n    };\n\n    this.setTonemapMethod = function(value) {\n        _context.setTonemapMethod(value);\n    };\n\n    this.getToneMapMethod = function() {\n        return _context.getToneMapMethod();\n    };\n\n    this.toggleTwoSided = function(isTwoSided) {\n        _context.toggleTwoSided(isTwoSided);\n    };\n\n    this.enter2DMode = function(...args) {\n        _context.enter2DMode(...args);\n    };\n\n    this.getAOEnabled = function() {\n        return false\n    };\n\n    this.idAtPixel = function(vpx, vpy) {\n        // idAtPixel not implemented in stereo context\n        return 0;\n    };\n\n    this.setHighlightLights = function(customLights) {\n        // Nothing\n    };\n\n    this.setStencilEnabled = function(enabled) {\n        // Nothing\n    };\n\n    this.setEdgeColor = function(colorAsVec4) {\n        // Nothing\n    };\n\n    this.overlayUpdate = function(highResTimer) {\n        _context.overlayUpdate(highResTimer);\n    };\n\n    this.rolloverObjectViewport = function(vpx, vpy) {};\n\n    this.screenCapture = function() {\n        console.warn(\"Screen capture not implemented by stereo render context\");\n        return null;\n    };\n\n    this.setUnitScale = function(metersPerUnit) {\n        _context.setUnitScale(metersPerUnit);\n    };\n\n    this.getUnitScale = function() {\n        return _context.getUnitScale();\n    };\n\n    // TODO_NOP: hack expose colorTarget so shadow/reflection can draw into\n    this.getColorTarget = function() {\n        return null;\n    };\n\n    function getStereoCamera(camera, frameData, leftEye, fixed, result) {\n\n        // Copy world transform and move camera to origin if it's fixed.\n        camera.matrixWorld.decompose(result.position, result.quaternion, result.scale);\n        if (fixed) {\n            result.position.set(0, 0, 0);\n        }\n\n        // Translate eye bye scene scaling.\n        result.translateOnAxis(leftEye ? eyeTranslationL : eyeTranslationR, _scale);\n\n        // Copy projection matrix.\n        result.projectionMatrix.elements =\n            leftEye ? frameData.leftProjectionMatrix : frameData.rightProjectionMatrix;\n\n    }\n};\n\nav.GlobalManagerMixin.call(StereoRenderContext.prototype);","export function WebVrMenu(_scale) {\n    var DEFAULT_COLOR = 0xffffff; // default color of menu items\n    var YOFFSET = -12;\n    var DEPTH = -14;\n\n    var _menu, menuAnchor, menuRotOffset;\n    var prevMenuIdx;\n\n    this.init = function(scene) {\n        if (_menu) return;\n\n        var getResourceUrl = Autodesk.Viewing.Private.getResourceUrl;\n        var imgLoader = THREE.ImageUtils;\n        imgLoader.crossOrigin = 'anonymous';\n        var BASE_URL = \"res/webvr/\";\n        var icons = [\n            \"back.png\",\n            \"zoomin.png\",\n            \"zoomout.png\",\n            \"next.png\"\n        ];\n\n        // position the menu so it is floating at waist level in front of the user\n        _menu = new THREE.Object3D();\n        menuAnchor = new THREE.Object3D();\n        var menuOffset = new THREE.Object3D();\n        menuOffset.position.set(0, YOFFSET, DEPTH);\n        menuOffset.rotateX(-0.6);\n\n        // create each menu item\n        function createMenuItem(url, xScale, opacity) {\n            return new THREE.Mesh(\n                new THREE.PlaneBufferGeometry(xScale, 1),\n                new THREE.MeshBasicMaterial({\n                    map: imgLoader.loadTexture( getResourceUrl(url) ),\n                    color: DEFAULT_COLOR,\n                    side: THREE.DoubleSide,\n                    depthTest: false,\n                    transparent: true,\n                    opacity: opacity\n                })\n            );\n        }\n        // horizontal menu layout\n        for (var i = 0; i < icons.length; i++) {\n            var item = createMenuItem(BASE_URL + icons[i], 2, 1);\n            item.position.set(2 * (i - icons.length / 2), 0, 0.1);\n            item.scale.set(0.94, 0.94, 0.1);\n            menuOffset.add(item);\n        };\n        // add wide transparent black background for menu container\n        var menuBg = createMenuItem(BASE_URL + \"bg.png\", 48, 0.1);\n        menuOffset.add(menuBg);\n        menuAnchor.add(menuOffset)\n        _menu.add(menuAnchor);\n\n        _menu.visible = true;\n        scene.add(_menu);\n    }\n\n    this.onVisible = function(camera) {\n        menuAnchor.rotation.y = camera.rotation._z;\n        menuRotOffset = -_menu.quaternion.y;\n    }\n\n    this.update = function(camera) {\n        // move menu based on camera orientation only\n        var cam = camera.quaternion.clone().inverse();\n        _menu.quaternion.copy(cam);\n\n        // look down for menu to appear in front of user\n        var tmp = _menu.visible;\n        _menu.visible = (_menu.quaternion.x > 0.26) && (_menu.quaternion.x < 0.4);\n        if (!tmp && _menu.visible) \n            this.onVisible(camera);\n        /*\n        // fade in/out\n        _menu.traverse(function(node) {\n            if (node.material)\n                node.material.opacity = (_menu.quaternion.x * _menu.quaternion.x) - 0.1;\n        });\n        */\n        if ((prevMenuIdx >= 0) && (prevMenuIdx < 4)) {\n            _menu.children[0].children[0].children[prevMenuIdx].material.color.setHex(DEFAULT_COLOR);\n        }\n        prevMenuIdx = Math.floor((menuRotOffset + _menu.quaternion.y + 0.14) * 4.54 * 4);\n        if ((prevMenuIdx >= 0) && (prevMenuIdx < 4)) {\n            _menu.children[0].children[0].children[prevMenuIdx].material.color.setHex(0xaaaaff);\n        }   \n    };\n\n    this.onClick = function() {\n        // handle menu click\n    }\n};\n","export function WebVrCursor(viewerImpl, autocam, _scale, USE_YUP) {\n\n    var STANDING_HEIGHT = 5;\n    var DEFAULT_GREEN = 0x0022aa;\n    var DEFAULT_RED = 0xaa0022;\n    var _cursor;\n    var hit;\n\n    var USE_ANGLECURSOR = true;\n\n    this.init = function(scene) {\n        // Create Cursor\n        _cursor = new THREE.Object3D();\n        _cursor.scale.set(0.25, 0.25, 1);\n        _cursor.add(new THREE.Mesh(\n            new THREE.RingGeometry(.6, 1, 32, 32),\n            new THREE.MeshBasicMaterial({\n                color: DEFAULT_RED,\n                depthTest: false,\n                side: THREE.DoubleSide\n            })\n        ));\n\n        scene.add(_cursor);\n    };\n\n    this.update = function(camera, hud) {\n\n        var dist;\n\n        // set cursor red, not available to move or to green otherwise\n        hit = viewerImpl.hitTestViewport(new THREE.Vector3(), false);\n        if (hit) {\n            _cursor.children[0].material.color.setHex(DEFAULT_GREEN);\n            dist = hit.intersectPoint.clone().sub(camera.position).length();\n        } else {\n            _cursor.children[0].material.color.setHex(DEFAULT_RED);\n            dist = (camera.far - camera.near) * 0.5;\n        }\n\n        var matrix = new THREE.Matrix4();\n        matrix.extractRotation(hud.camera.matrixWorld);\n\n        var direction = new THREE.Vector3(0, 0, -1);\n        direction = matrix.multiplyVector3(direction);\n        direction.multiplyScalar(dist);\n\n        _cursor.scale.set(_scale, _scale, _scale);\n        _cursor.position.copy(direction);\n        _cursor.lookAt(hud.camera.position);\n\n        // orientate the cursor angle with the terrain and position it's distance\n        // this technique reduces cursor jitter\n        if (USE_ANGLECURSOR) {\n    //        _cursor.quaternion.setFromUnitVectors(new THREE.Vector3(0, 0, 1), hit.face.normal.clone().normalize());\n    //        _cursor.quaternion.multiply(camera.quaternion);\n    //        _cursor.quaternion.inverse();\n            //_cursor.quaternion.y = 0;\n        }\n\n        // if (Math.round(hit.face.normal.x*10)/10 == -0.7) {}\n\n    };\n\n    this.onClick = function() {\n        if (!hit) return;\n        var hitpt = hit.intersectPoint;\n        var hitangle = hit.face.normal;\n        if (USE_YUP)\n            hitpt.z += STANDING_HEIGHT;\n        else\n            hitpt.y += STANDING_HEIGHT;\n\n        var view = autocam.getCurrentView();\n        view.position.copy(hitpt);\n\n        // optional: force walkthrough pivot effect, using existing nav controls (used within desktop browser)\n        view.center.set(hitpt.x + 0.000001, hitpt.y, hitpt.z);\n        view.pivot.set(hitpt.x, hitpt.y, hitpt.z);\n\n        autocam.goToView(view);\n    }\n};","import { StereoRenderContext } from './StereoRenderContext'\nimport { WebVrMenu } from './menuVR'\nimport { WebVrCursor } from './cursorVR'\n\nconst av = Autodesk.Viewing;\n\nexport function VRTool(viewer, vrExtension, _vrDisplay) {\n    this.setGlobalManager(viewer.globalManager);\n\n    var _canvas = viewer.canvas;\n    var _navapi = viewer.navigation;\n    var _camera = _navapi.getCamera();\n    var _stereoRenderContext, _HUD;\n    const avp = Autodesk.Viewing.Private;\n    var toolConfig = {\n        webVR_cursor : avp.isExperimentalFlagEnabled('webVR_cursor', vrExtension.options),\n        webVR_menu : avp.isExperimentalFlagEnabled('webVR_menu', vrExtension.options),\n        webVR_orbitModel : avp.isExperimentalFlagEnabled('webVR_orbitModel', vrExtension.options)\n    };\n\n    // VR state\n    var _names = [\"vr\"];\n    var _isActive = false;\n    var _isPresenting = false;\n\n    var that = this;\n\n    this.activate = function(name) {\n        _isActive = true;\n\n        // prepare camera for VR mode\n        viewer.impl.toggleGroundShadow(false);\n        viewer.impl.toggleGroundReflection(false);\n        _navapi.toPerspective();\n        _navapi.setVerticalFov(75, true); // same as firstPerson FOV\n        _navapi.setRequestFitToView(true);\n\n        // Calculate a model scale factor based on the model bounds.\n        var boundsSize = viewer.model.getBoundingBox().size();\n        _vrDisplay.target = viewer.model.getBoundingBox().getCenter();\n        _navapi.setPivotPoint(_vrDisplay.target, true, true);\n        _navapi.setView(_camera.position, _vrDisplay.target);\n        _navapi.setCameraUpVector(new THREE.Vector3(0, 1, 0));\n        _vrDisplay.modelScaleFactor = Math.max(Math.min(Math.min(boundsSize.x, boundsSize.y), boundsSize.z) / 10.0, 0.0001);\n\n        // Request webVR full screen\n        _vrDisplay._isPresenting = av.isMobileDevice();\n        _vrDisplay.requestPresent([{\n            source: _canvas\n        }]).then(function() {\n            viewer.impl.setLmvDisplay(_vrDisplay);\n            _vrDisplay._isPresenting = true;\n            //viewer.resize(viewer.canvas.clientWidth, viewer.canvas.clientHeight);\n        });\n        _vrDisplay.resetPose();\n\n        // handle fullscreen on mobile/cardboard differently.  Add 'exit VR' button and hide toolbar\n        if (av.isMobileDevice()) {\n            var self = this;\n            showHUD(false);\n            viewer.setScreenMode(Autodesk.Viewing.ScreenMode.kFullScreen);\n            _canvas.addEventListener(\"dblclick\", function() {\n                if (_isActive)\n                    viewer.setActiveNavigationTool();\n            });\n        }\n        if (toolConfig.webVR_cursor || toolConfig.webVR_menu)\n            _HUD = this.initHUD();\n            \n        _stereoRenderContext = new StereoRenderContext(_vrDisplay, _camera, _HUD, toolConfig);\n        _stereoRenderContext.setGlobalManager(this.globalManager);\n        viewer.impl.setUserRenderContext(_stereoRenderContext);\n    };\n\n    this.initHUD = function() {\n        // Create HUD overlay scene and camera\n        var scene = new THREE.Scene();\n        var HUDCamera = _camera.clone();\n\n    //    new THREE.PerspectiveCamera(_camera.fov, _camera.aspect * 0.5, 0.1, 2000);\n    //    HUDcamera.position.set(0, 0, 0);\n    //    scene.add(HUDcamera);\n\n        if (toolConfig.webVR_menu) {\n            // Add menu and cursor to the HUD scene\n            var menu = new WebVrMenu(_vrDisplay.modelScaleFactor);\n            menu.init(scene);\n        }\n\n        if (toolConfig.webVR_cursor) {\n            var camYup = (_camera.worldup && _camera.worldup.z == 1);\n            var cursor = new WebVrCursor(viewer.impl, viewer.autocam, _vrDisplay.modelScaleFactor, camYup);\n            cursor.init(scene);\n            _canvas.addEventListener(\"click\", cursor.onClick);\n        }\n\n        return {\n            scene: scene,\n            camera: HUDCamera,\n            cameraL: HUDCamera.clone(),\n            cameraR: HUDCamera.clone(),\n            menu: menu,\n            cursor: cursor,\n            IPD: 1.2\n        }\n    }\n\n    this.update = function(timeStamp) {\n\n        if (!_vrDisplay) {\n            return true;\n        }\n\n        if (_isPresenting && !_vrDisplay.isPresenting && _isActive) {\n            viewer.setActiveNavigationTool();\n        }\n        _isPresenting = _vrDisplay.isPresenting;\n\n        var cam = _stereoRenderContext.updateCamera();\n        if (!_HUD) return true;\n\n        if (toolConfig.webVR_cursor)\n            _HUD.cursor.update(cam.C, _HUD);\n\n        if (toolConfig.webVR_menu)\n            _HUD.menu.update(_HUD.camera);\n\n        return true;\n    };\n\n    this.deactivate = function(name) {\n        if (_vrDisplay) {\n            if (_vrDisplay.isPresenting)\n                _vrDisplay.exitPresent(); // Stops VR mode\n            _vrDisplay._isPresenting = false;\n        }\n        _isActive = false;\n        showHUD(true);\n\n        viewer.impl.setUserRenderContext(null);\n        viewer.setScreenMode(Autodesk.Viewing.ScreenMode.kNormal);\n        viewer.resize(viewer.canvas.clientWidth, viewer.canvas.clientHeight);\n        viewer.autocam.resetHome();\n        if (_HUD && toolConfig.webVR_cursor)\n            _canvas.removeEventListener(\"click\", _HUD.cursor.onClick);\n    };\n\n    var showHUD = function(isVisible) {\n        // Show/hide the toolbar (don't show when in mobile)\n        viewer.getExtension(\"Autodesk.ViewCubeUi\", function(ext) {\n            ext.setVisible(isVisible);\n            ext.displayViewCube(isVisible && !av.isMobileDevice());\n        });\n\n        const _document = that.getDocument();\n        var tbar = _document.getElementsByClassName('adsk-toolbar');\n        if (tbar.length > 0) { // HACK: Assume only 1\n            if (tbar[0] !== '')\n                tbar[0].style.display = isVisible ? 'block' : 'none';\n        }\n    };\n\n    this.isActive = function() {\n        return _isActive;\n    };\n\n    this.getNames = function() {\n        return _names;\n    };\n\n    this.getName = function() {\n        return _names[0];\n    };\n};\n\nav.GlobalManagerMixin.call(VRTool.prototype);","import { VRTool } from './webVrTool'\n\nimport CSS from './VR.css' // REQUIRED !!\n\n//\n// WebVR extension (both Toolbar icon and mode)\n//\n\n'use strict';\n\n/**\n * First Person navigation tool, similar to those found in videogames.\n *\n * It will also replace the default walk tool button when {@link Autodesk.Viewing.GuiViewer3D} is present.\n * @constructor\n * @see {@link Autodesk.Viewing.Extension} for common inherited methods.\n * @param {Autodesk.Viewing.Viewer3D} viewer - Viewer instance.\n * @param {object} options - Not used.\n */\n\nexport function VRExtension(viewer, options) {\n    Autodesk.Viewing.Extension.call(this, viewer, options);\n    this.name = 'webvr';\n};\n\n/**\n * Static function internally used that provides info on what are the configuration options\n * available to this extension.\n * @private\n */\nVRExtension.populateDefaultOptions = function(options) {\n    // Use double-dashes to prevent flag from being active by default while still surfacing them out (cuz why not)\n    options.experimental.push('--webVR_orbitModel');\n    options.experimental.push('--webVR_cursor');\n    options.experimental.push('--webVR_menu');\n};\n\nVRExtension.prototype = Object.create(Autodesk.Viewing.Extension.prototype);\nVRExtension.prototype.constructor = VRExtension;\n\nvar proto = VRExtension.prototype;\n\nproto.load = function() {\n    return true;\n};\n\nproto.onToolbarCreated = function(toolbar) {\n    var self = this;\n    var _vrDisplay = null;\n    var avp = Autodesk.Viewing.Private;\n    // check if browser supports webVR1.1 natively, if not, load polyfill\n    avp.loadDependency('VRFrameData', 'webvr-polyfill.min.js', function() {\n        navigator.getVRDisplays().then(function(displays) {\n            if (displays.length > 0) {\n                _vrDisplay = displays[0];\n                if (_vrDisplay.capabilities.canPresent) {\n\n                    // VR detected, add the 'VR button'\n                    var viewer = self.viewer;\n                    var toolbar = viewer.getToolbar();\n                    var avu = Autodesk.Viewing.UI;\n\n                    // Register tool\n                    self.tool = new VRTool(viewer, self, _vrDisplay);\n                    viewer.toolController.registerTool(self.tool);\n                    self.createUI(toolbar);\n\n                    // Register listeners\n                    self.onToolChanged = function(e) {\n                        var vrToolActive = (e.toolName === 'vr') && e.active;\n                        var state = vrToolActive ? avu.Button.State.ACTIVE : avu.Button.State.INACTIVE;\n                        self.vrToolButton && self.vrToolButton.setState(state);\n                    };\n                    viewer.addEventListener(Autodesk.Viewing.TOOL_CHANGE_EVENT, self.onToolChanged);\n                    return;\n                }\n            }\n            avp.logger.warn('Attempted to load WebVR extension, but WebVR is not supported.');\n        });\n    });\n}\n\nproto.createUI = function(toolbar) {\n    var self = this;\n    var viewer = this.viewer;\n    var avu = Autodesk.Viewing.UI;\n    var navTools = toolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);\n\n    // Create a button for the VR Tool. \n    this.vrToolButton = new avu.Button('toolbar-vrTool');\n    this.vrToolButton.setGlobalManager(this.globalManager);\n    this.vrToolButton.setToolTip('Enable VR mode');\n    this.vrToolButton.setIcon(\"adsk-icon-webvr\");\n    this.vrToolButton.onClick = function(e) {\n        var state = self.vrToolButton.getState();\n        if (state === avu.Button.State.INACTIVE) {\n            self.activate();\n        } else if (state === avu.Button.State.ACTIVE) {\n            self.deactivate();\n        }\n    };\n\n    var cameraSubmenuTool = navTools.getControl('toolbar-cameraSubmenuTool');\n    if (cameraSubmenuTool) {\n        navTools.addControl(this.vrToolButton, {\n            index: navTools.indexOf(cameraSubmenuTool.getId())\n        });\n    } else {\n        navTools.addControl(this.vrToolButton);\n    }\n};\n\nproto.unload = function() {\n    var viewer = this.viewer;\n\n    // Remove listeners\n    if (this.onToolChanged) {\n        viewer.removeEventListener(Autodesk.Viewing.TOOL_CHANGE_EVENT, this.onToolChanged);\n        this.onToolChanged = undefined;\n    }\n\n    // Remove the UI\n    var toolbar = viewer.getToolbar();\n    if (toolbar && this.vrToolButton) {\n        this.vrToolButton.removeFromParent();\n    }\n    this.vrToolButton = null;\n\n    // Deregister tool\n    if (this.tool) {\n        viewer.toolController.deregisterTool(this.tool);\n        this.tool = null;\n    }\n\n    return true;\n};\n\nproto.activate = function () {\n    if(!this.activeStatus) {\n        this.viewer.setActiveNavigationTool(\"vr\");\n        this.activeStatus = true;\n    }\n    return true;\n};\n\nproto.deactivate = function () {\n    if(this.activeStatus) {\n        this.viewer.setActiveNavigationTool();\n        this.activeStatus = false;\n    }\n    return true;\n};\n\nAutodesk.Viewing.theExtensionManager.registerExtension('Autodesk.Viewing.WebVR', VRExtension);\n"],"sourceRoot":""}