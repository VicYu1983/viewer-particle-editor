{"version":3,"sources":["webpack://Autodesk.Extensions.[name]/webpack/bootstrap","webpack://Autodesk.Extensions.[name]/./node_modules/css-loader/lib/css-base.js","webpack://Autodesk.Extensions.[name]/./node_modules/style-loader/lib/addStyles.js","webpack://Autodesk.Extensions.[name]/./node_modules/css-loader/lib/url/escape.js","webpack://Autodesk.Extensions.[name]/./node_modules/style-loader/lib/urls.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Measure.css?7049","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Measure.css","webpack://Autodesk.Extensions.[name]/./extensions/Measure/res/icon-spinner-sm.svg","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Calibration.css?c2b7","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Calibration.css","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MeasurementsManager.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Indicator.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/PolygonCentroid.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MeasureToolIndicator.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MeasureTool.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/CalibrationToolIndicator.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/CalibrationPanels.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/CalibrationTool.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MagnifyingGlass.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MeasureToolbar.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Measure.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","useSourceMap","list","toString","this","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","push","fn","memo","stylesInDom","isOldIE","window","document","all","atob","apply","arguments","getTarget","target","parent","querySelector","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","options","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","style","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","undefined","attrs","type","nonce","getNonce","addAttrs","el","keys","forEach","setAttribute","obj","update","remove","result","transform","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","href","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","url","test","slice","replace","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","locals","escape","MeasureCommon","Autodesk","Viewing","MeasurementsManager","viewer","init","restoredMeasurementData","proto","getCurrentMeasurement","currentMeasurement","getRestoredMeasurementData","selectMeasurementById","measurement","measurementsList","changeCurrentMeasurement","createMeasurement","measurementType","measurementsCounter","Measurement","createMeasurementFromData","measurementData","createIndicatorCb","preparePicksCb","model","parse","modelId","impl","findModel","globalOffset","getData","x","y","z","cvtPts","points","THREE","Vector3","sub","dimensionOffset","dashedLeader","arc","Function","initPicks","picks","MeasurementTypes","MEASUREMENT_AREA","closedArea","MEASUREMENT_CALLOUT","text","indicator","changeAllEndpointsEditableStyle","enableSelectionAreas","enableLabelsTouchEvents","activatePicks","computeResult","renderFromPoints","data","pointData","intersection","circularArcRadius","circularArcCenter","preparePointData","isRestored","pickData","pick","pickPoint","modelData","clone","viewportId","viewportIndex2d","hasTopology","snapNode","getPick","pointInfo","getGeometry","geomType","SnapType","SNAP_VERTEX","geomVertex","intersectPoint","dispatchEvent","Events","MEASUREMENT_CHANGED_EVENT","removeCurrentMeasurement","reset","destroy","av","Indicator","tool","setGlobalManager","globalManager","snapper","getSnapper","materialExtensionLine","materialExtensionFace","extensionLines","extensionFaces","grayOutPlane","materialPoint","materialLine","materialAngle","materialAngleOutline","materialGreyOutPlane","materialFace","angleArc","angleOutline","arcOutline","arcTip","showMeasureResult","visibleLabels","overlayName","xAxis","autocam","getWorldRightVector","yAxis","getWorldUpVector","zAxis","getWorldFrontVector","getPolygonVisualCenter","polygon","Cell","h","inside","minDistSq","Infinity","k","ring","len","a","b","Math","min","getSegDistSq","sqrt","pointToPolygonDist","max","SQRT2","px","py","dx","dy","TinyQueue","compare","_down","_up","pop","top","peek","pos","current","halfLength","left","right","best","centroid","add","multiplyScalar","getCentroidOfPolygon","minX","minY","maxX","maxY","width","height","cellSize","cellQueue","bestCell","area","f","getCentroidCell","bboxCell","cell","GlobalManagerMixin","updateDistance","updateAngle","clear","updateLabelsPosition","endpoints","createEndpoint","position","showClick","renderRubberbandFromPoints","render","hasPick","renderPick","renderRubberband","changeEndpointOnEditStyle","endpointNumber","isEditing","handleResize","setNoTopology","setFetchingTopology","setTopologyAvailable","clientToCanvasCoords","event","rect","getCanvasBoundingClientRect","res","canvasX","center","canvasY","pointers","clientX","clientY","initLabelMobileGestures","label","pointNumber","magnifyingGlass","toolController","getTool","hammer","Hammer","Manager","recognizers","GestureRecognizers","drag","singletap","handlePointerEventMouse","inputClass","isIE11","PointerEventInput","TouchInput","onSingleTapBinded","onMouseDown","editEndpoint","onDragStartBinded","editByDrag","handlePressHold","handleGesture","onDragMoveBinded","onDragEndBinded","handleButtonUp","on","clearLabelMobileGestures","off","updateVisibleLabelsArray","isVisible","hideEndpoints","endpoint","hideLabel","showEndpoints","showLabel","safeToggle","changeEndpointEditableStyle","isEditable","changeAllEndpointsOnEditStyle","hideLabelsOutsideOfView","is2d","point","show","navigation","isPointVisible","classList","contains","toggle","pickNumber","getActivePointIndex","hideClick","renderEndpointGeometry","geometry","getSnapResultPosition","drawEdgeAsCylinder","geom","material","linewidth","cylinderGeometry","cylinder","edge","vertices","cylinderMesh","setCylinderScale","drawDashedLine","p1","p2","dashSize","gapSize","Geometry","line","subVectors","lineLength","lineDirection","normalize","currLength","addVectors","getNewCylinderGeometry","addMultipleOverlays","drawLineAsCylinder","addOverlay","CylinderGeometry","pointX","pointY","direction","orientation","Matrix4","lookAt","Object3D","up","multiply","set","Mesh","applyMatrix","lmv_line_width","scale","nearestPointInPointToSegment","getPosition","setScale","navapi","camera","getCamera","distance","isPerspective","getEyeVector","fov","getVerticalFov","tan","degToRad","getScreenViewport","alignLabelWithLine","offset","camUpVector","getCameraUpVector","cameraAngle","angleTo","PI","angle","deltaX","deltaY","atan2","abs","isTouchDevice","endPoint","removeEventListener","isSafari","onMouseClickBinded","mousewheel","intersectionPoints","MEASUREMENT_DISTANCE","start","end","renderDistanceMeasurementFromPoints","MEASUREMENT_ANGLE","renderAngleMeasurementFromPoints","renderAreaMeasurementFromPoints","MEASUREMENT_ARC","radius","renderArcMeasurementFromPoints","MEASUREMENT_LOCATION","renderLocationMeasurementFromPoints","renderCalloutMeasurementFromPoints","previewsPick","activePick","renderDistanceMeasurement","renderAngleMeasurement","renderAreaMeasurement","renderArcMeasurement","renderLocationMeasurement","renderCalloutMeasurement","initMouseEvent","pointerType","addEventListener","tmpColor","Color","numToColor","num","getHexString","MeasureToolIndicator","measureTool","lines","xyz","axis","_createLineMaterial","className","iconText","applyLineColor","segments","dashedLines","simple","angleLabel","areaLabel","arcLabel","locationLabel","calloutLabel","labels","isLeaflet","topologyStatus","TOPOLOGY_NOT_AVAILABLE","tmpVector","surfaceColor","MeshBasicMaterial","color","parseInt","opacity","transparent","depthTest","depthWrite","side","DoubleSide","constructor","isLeftIntersect","other","isRightIntersect","isMiddleIntersect","moveRight","currentLabel","currentRect","otherRect","moveDown","bottom","setValueMeasurementLabelText","strValue","div","textContent","escapeHtml","str","createSpan","format","space","fontSize","bold","setDeltaMeasurementLabelText","setVisibilityMeasurementLabelSpinner","display","MeasureTool","sharedMeasureConfig","_viewer","_names","_sharedMeasureConfig","Extensions","Measure","_active","_isDragging","_endpointMoved","_activePoint","_consumeSingleClick","_singleClickHandled","_downX","_downY","_isolateMeasure","_measurementsManager","_currentMeasurement","_onIndicatorCreatedCB","_fetchingMeasurements","_prevMeasurement","_useLastViewport","_snapper","_isPressing","_picksBackup","_cursorPosition","_preMeasureState","_measurementType","_sessionMeasurements","getActivePick","getMaxNumberOfPicks","countPicks","getPreviousPick","noPicksSet","allPicksSet","enableMeasurementsTouchEvents","MEASUREMENT_COMPLETED_EVENT","isNoPicksSet","getPickData","clonePicks","picksData","snapToFirstPick","currentPick","forceSnap","firstPick","firstPickPoint","firstPickPosition","project","currentPickPoint","currentPickPosition","distanceTo","onMouseMove","copyTo","showResult","viewportIndex","setMeasurePicksViewport","hasResult","getMeasurementType","types","CALIBRATION","enable","changeFetchingState","stateSetter","areAllPicksSet","setSessionMeasurements","measurementList","getSessionMeasurements","register","deregister","deactivate","isActive","getNames","getName","getPriority","getCursor","getCurrentMeasurementRaw","getMeasurementsManager","startNewMeasurement","attachIndicator","changeMeasurementType","getCurrentMeasureType","activate","isEditingEndpoint","pauseHighlight","clearSelection","getState","objectSet","activateTool","onMeasurementChangedBinded","onMeasurementChanged","CAMERA_CHANGE_EVENT","onCameraChange","SHOW_ALL_EVENT","onShowAllEvent","prefs","Private","Prefs","RESTORE_SESSION_MEASUREMENTS","sessionMeasurements","setMeasurements","isolateMeasurement","clearIncompleteMeasurement","getMeasurementList","clearIsolate","clearCurrentMeasurement","deactivateTool","undoEditEndpoint","getUnits","units","setUnits","DISPLAY_UNITS_CHANGED","updateResults","getPrecision","precision","setPrecision","PRECISION_CHANGED","getDistanceXYZ","getDistanceAux","distanceXYZ","getDistanceX","distanceX","getDistanceY","distanceY","getDistanceZ","distanceZ","measurementDistance","convertUnits","getUnitString","calibrationFactor","formatValueWithUnits","getAngle","String","fromCharCode","getArc","getLocation","getCallout","getArea","setUseLastViewport","getUseLastViewport","Array","isArray","measureData","getMeasureType","deselectAllMeasurements","getMeasurement","unitType","geomTypes","from","to","deltaZ","getMeasurementPoints","clearPick","updateViewportId","setIsolateMeasure","getIsolateMeasure","defaultModelId","isolationGroups","isolationSet","modelInstance","ids","visibilityManager","aggregateIsolate","restoreState","setSimple","unfocusLabels","isComplete","measurementId","snapResult","getSnapResult","isValid","isMobileDevice","_handleMouseEvent","setPick","focusLabels","deleteMeasurements","measurements","deleteCurrentMeasurement","_deletedMeasurement","DELETE_MEASUREMENT","deleteCurrentPick","count","setViewportId","viewport","correctPickPosition","active","passive","correctPerpendicularPicks","nextPick","valid","isSnapped","copyResults","isEqualVectors","container","getBoundingClientRect","canDrawRubberBand","renderer","idAtPixel","modelQueue","inverseProject","lastPick","_doConsumeSingleClick","renderSucceeded","hasEqualPicks","measurementComplete","handleButtonDown","button","ctrlKey","metaKey","shiftKey","altKey","handleMouseMove","setArc","secondPick","isArc","checkSnapperIndicatorForArc","restoreMouseListeners","controller","enableMouseButtons","handleSingleClick","updateScale","clearOverlays","clearSnapped","handleDoubleClick","handleSingleTap","handleDoubleTap","handleKeyDown","keyCode","KeyCode","BACKSPACE","DELETE","currLabel","onSelectionAreaClickedBinded","onSelectionAreaClicked","createMeasurementLabel","onCameraChangeBinded","handleButtonUpBinded","addWindowEventListener","_hexToCorrectedColor","correctedColor","getHex","createSnapResultLabel","lineColor","TEXTCOLOR","Enabled","FILLCOLOR","LINECOLOR","UIntValue","applyLabelColors","hasColor","bg","backgroundColor","xy","placeLabel","xOff","yOff","visible","floor","clientHeight","clientWidth","p1Projected","p2Projected","invalidate","xyzDirection","itemDirection","cross","dot","point1Relative","point2Relative","midPointProjected","midPointRelative","centerProjected","needToStackLabels","labelsStacked","backupPositions","labelsOverlapDetection","stackLabels","staticLabel","labelsList","dynamicLabel","moved","staticRect","dynamicRect","causeStacking","topLabel","drawXYZLine","self","drawLineSegment","tmpVec","d1","d2","normal","l1","l2","tips","drawTip","redrawDashedLine","dashedLine","removeMultipleOverlays","p1Scale","redrawDashedLines","isDashedLine","drawSurface","cset","CompGeom","ContourSet","addContour","triangulate","triangulationFailed","bufferGeometry","toPolygonMesh","face","drawSegmentAndPush","pickPositions","firstPoint","parseFloat","position1","position2","EPSILON","showAreaLabel","updateArea","clearAngleMeshes","removeOverlay","drawAngle","ep1","ep2","midPoint","_radius","MeshPhongMaterial","ambient","createCommonOverlay","circleGeometry","CircleGeometry","V","updateMatrixWorld","vA","vB","applyMatrix4","matrixWorld","v1","v2","v3","v4","ra","a13","a14","a23","a24","rotWorldMatrix","makeRotationAxis","matrix","rotation","setFromRotationMatrix","outlineGeometry","copy","round","dir","createArcLabel","clearArcMeshes","drawCircularArc","point1","point2","drawTips","edgeGeomtry","nearPoint","startAngle","endAngle","arcAngle","drawArcTip","midAngle","cos","sin","showArcLabel","arcRadius","o0","o1","crossVectors","showAngleLabel","updateArcLength","showLocationLabel","updateLocation","showCalloutLabel","updateCallout","createDistanceLabel","setVisibilityMeasurementLabelText","_document","getDocument","axisIcon","innerText","updateLine","x1","y1","z1","x2","y2","z2","showAxis","getAlignedUpVector","isParallel","displayAxis","setTimeout","setWidth","getWidth","is3d","maxWidth","split","calloutValue","innerHTML","setValueMeasurementLabelCallout","setLineVisible","pointerEvents","setLabelsZIndex","zIndex","tip","clearSelectionAreas","clearOverlay","selectionArea","overlayScenes","removeOverlayScene","removeWindowEventListener","clearXYZLine","segment","scaleXZ","scaleY","spinner","delta","label_icon","hitArea","whiteSpace","textAlign","createSelectionArea","updateSelectionArea","v","Vector2","_selectorAreaSize","transformOrigin","element","getElementById","CalibrationToolIndicator","calibrationTool","calibrationLabel","rubberbandDefaultMaterial","rubberbandSnappedMaterial","rubberbandTipMaterial","clearRubberband","updateLabelValue","i18n","translate","changeLabelClickableMode","clickable","showAddCalibrationLabel","onClick","showPanel","renderCalibrationLabel","mid","labelPosition","drawMeasurementLineTip","flip","tipMaterial","lineNormal","lineMaterial","isPerpendicular","ave","avp","avu","UI","DockingPanel","ViewerPanelMixin","_gDocument","getGlobal","CalibrationPanel","title","addFooter","parentContainer","resize","closer","cancel","heightAdjustment","marginTop","createScrollContainer","calibrationMenu","scrollContainer","table","tbody","row","insertRow","requestedSizeTextbox","autofocus","updateLabel","ESCAPE","ENTER","unitList","selectedIndex","requestedUnits","calibrate","requestedSize","cursorIndex","selectionStart","isSimple","simpleInput","isPositiveNumber","isSimpleDecimal","calculatePrecision","getMaxPrecision","preventDefault","insertCell","caption","matches","unitNames","OptionDropDown","paddingLeft","paddingRight","buttonsWrapper","setCalibration","match","isNaN","uninitialize","setVisible","clearSize","findUnits","selectedUnits","getCurrentUnits","setPanelValue","size","updateUnits","setSelectedIndex","parsedNumber","UnitParser","parsePositiveNumber","updatePanelPosition","labelOffset","cornerX","cornerY","rubberbandDirection","pow","canvas","CalibrationRequiredDialog","measureExt","dialogBox","calibrateNow","calibrateNowButton","enableCalibrationTool","CalibrationTool","_measurement","_options","_maxPrecision","maxPrecision","_isCalibrated","_distance","_calibrationTaken","_selectedSize","_selectedUnits","_selectedP1","_selectedP2","_waitingForInput","_calibrationPanel","_hasUI","GuiViewer3D","addPanel","screenSizeChangedBinded","screenSizeChanged","removePanel","parsedRequestedSize","HudMessage","displayMessage","messageKey","messageDefaultValue","VIEWER_RESIZE_EVENT","dismiss","hidePanel","clearAllPicks","setCalibrationFactor","getCalibrationFactor","isCalibrationValid","currentSize","defualtPrecision","requestedPrecision","getExtension","FINISHED_CALIBRATION","scaleFactor","calibrateByScale","requestedScale","CLOSE_CALIBRATION_PANEL_EVENT","_window","getWindow","focus","onKeyUp","OPEN_CALIBRATION_PANEL_EVENT","updateCalibrationPanel","isCalibrated","CLEAR_CALIBRATION_SIZE_EVENT","clearMeasurement","repickEndpoint","hasPreviousPick","MagnifyingGlass","_magnifyingGlassCanvas","_imageData","_imageBuffer","_clientX","_clientY","_needsClear","updateMagnifyingGlassBinded","updateMagnifyingGlass","pixelRatio","devicePixelRatio","normlizedDiameter","diameter","getContext","createImageData","ceil","Uint8Array","buffer","ctx","gl","glrenderer","readPixels","RGBA","UNSIGNED_BYTE","putImageData","drawImage","setGlassPosition","clearMagnifyingGlass","requestUpdate","hasEventListener","RENDER_PRESENTED_EVENT","once","drawMagnifyingGlass","handleWheelInput","MeasureToolbar","measureExtension","buttonsList","toolbar","getToolbar","navigationBar","getControl","TOOLBAR","NAVTOOLSID","toolbarOptions","measureToolbar","ControlGroup","MEASURETOOLSID","addControl","measureSimpleDistanceBtn","Button","setToolTip","setIcon","State","ACTIVE","measureAngleBtn","measureAreaBtn","measureArcBtn","calibrationToolBtn","separator","deleteBtn","settingsBtn","settingsControlPanel","setButtonActive","setButtonInactive","root","initialIndex","getDisplayUnit","shift","toUnits","setupPrecision","logger","track","category","precisionList","isolate","OptionCheckbox","checked","freeMeasure","isFreeMeasureMode","setFreeMeasureMode","updateSettingsPanel","setVisibility","disableUnitOption","measureDoneBtn","doneText","cancelLabel","btnContainer","iconEle","getElementsByClassName","exitMeasurementMode","closeToolbar","removeFromParent","enableMeasureTool","toggleVisible","viewerToolbarContainer","viewerContainerChildrenCount","children","MODELTOOLSID","measurementToolbarButton","setState","INACTIVE","deactivateAllButtons","activateButtonByType","dropdownElement","lastChild","precisions","elem","disabled","visibility","avem","AutodeskNamespace","DEFAULT_MEASUREMENT_TYPE","MeasureExtension","Extension","modes","_onModelLoaded","_onDisplayUnitsPrefChanged","_onPrecisionPrefChanged","load","loadExtension","hasUI","escapeHotkeyId","measureToolOptions","onCloseCallback","snapperOptions","forceCalibrate","Snapping","Snapper","renderSnappedTopology","registerTool","onToolChangedCb","setActive","calibration","onFinishedCalibration","activateInitiator","MODEL_ROOT_LOADED_EVENT","onModelRemoved","DISABLED","onModelAdded","getVisibleModels","MODEL_ADDED_EVENT","MODEL_REMOVED_EVENT","addListeners","DISPLAY_UNITS","DISPLAY_UNITS_PRECISION","setPdfUnits","isPdf","Prefs2D","FORCE_PDF_CALIBRATION","setLeafletUnits","FORCE_LEAFLET_CALIBRATION","calibrationUnits","getMetadata","precisionPreference","unload","destroyUI","deregisterTool","unloaded","removeListeners","getUnitOptions","getPrecisionOptions","isFractional","getDefaultUnit","openCalibrationRequiredDialog","initiator","CALIBRATION_REQUIRED_EVENT","FINISHED_CALIBRATION_FOR_DIMENSION_EVENT","getCalibration","activeStatus","success","enterMeasurementMode","console","warn","setForcePDFCalibrate","setForceLeafletCalibrate","setRestoreSessionMeasurements","snapToArc","setSnapToArc","selectedTool","forcePDFCalibration","forceLeafletCalibration","checkAndFetchTopology","OPEN_TOOL_AFTER_CALIBRAION","UNITS_CALIBRATION_STARTS_EVENT","_measurementMode","MEASUREMENT_MODE_ENTER","navigationControls","measureControls","measureButtonId","getId","removeControl","centerToolBar","MEASUREMENT_MODE_LEAVE","onToolbarCreated","modelTools","state","hotkeys","keycodes","onRelease","getHotkeyManager","pushHotkeys","_checkedTopology","modelHasTopology","fetchTopology","then","catch","err","log","popHotkeys","allow","useLastViewport","setSnapToPixel","getSnapToPixel","theExtensionManager","registerExtension"],"mappings":"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","file":"Measure/Measure.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 836);\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","module.exports = function escape(url) {\n    if (typeof url !== 'string') {\n        return url\n    }\n    // If url is already wrapped in quotes, remove them\n    if (/^['\"].*['\"]$/.test(url)) {\n        url = url.slice(1, -1);\n    }\n    // Should url be wrapped?\n    // See https://drafts.csswg.org/css-values-3/#urls\n    if (/[\"'() \\t\\n]/.test(url)) {\n        return '\"' + url.replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n') + '\"'\n    }\n\n    return url\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Measure.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Measure.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Measure.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","var escape = require(\"../../node_modules/css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".adsk-viewing-viewer .measure-length:hover.measure-length.enable-hover{box-shadow:0 0 16px 3px rgba(0,117,210,0.7);-webkit-box-shadow:0 0 16px 3px rgba(0,117,210,0.7);-moz-box-shadow:0 0 16px 3px rgba(0,117,210,0.7)}.adsk-viewing-viewer .measure-length{display:none;position:absolute;height:19px;left:0px;top:0px;padding:2px 0 2px 0;background-color:#009bea;box-shadow:0px 1px 3px 1px rgba(0,0,0,0.25);color:#f4f4f4;font-size:12px;text-align:center;line-height:1.2;white-space:nowrap;border-radius:8px;pointer-events:none;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0)}.adsk-viewing-viewer .measure-length.visible{display:block}.adsk-viewing-viewer .measure-length.fetching-topology{background-color:rgba(34,34,34,0.8);box-shadow:0 0.5px 1.5px 0 rgba(0,0,0,0.3)}.adsk-viewing-viewer .measure-length-text{display:inline-block;margin:0 5px 0 5px;vertical-align:middle;font-size:16px;pointer-events:none}.adsk-viewing-viewer .measure-delta-text{margin:0 5px 0 5px;align-self:center;font-size:14px;overflow:hidden;white-space:nowrap;height:16px;line-height:16px;vertical-align:middle;pointer-events:none}.adsk-viewing-viewer .measure-length-button{display:inline-block;width:16px;height:16px;font-size:16px;float:right;color:#FFFFFF;opacity:0.7}.adsk-viewing-viewer .measure-length-button:hover{background-color:rgba(166,194,255,0.7);-webkit-transition:all 0.2s ease;-moz-transition:all 0.2s ease;-ms-transition:all 0.2s ease;-o-transition:all 0.2s ease;transition:all 0.2s ease}.adsk-viewing-viewer .measure-label:hover.measure-label.enable-hover,.adsk-viewing-viewer .measure-label.on-edit{box-shadow:0 0 4px 4px #0d69ca;-webkit-box-shadow:0 0 4px 4px #0d69ca;-moz-box-shadow:0 0 4px 4px #0d69ca}.adsk-viewing-viewer .measure-label.editable{pointer-events:all}.adsk-viewing-viewer .measure-label{display:none;position:absolute;width:7px;height:7px;cursor:move;pointer-events:none;border-radius:100px}.adsk-viewing-viewer .measure-label-hit-area{display:inline-block;position:absolute;width:44px;height:44px;left:-22px;top:-22px;border-radius:100px;z-index:2}.adsk-viewing-viewer .measure-label-icon{display:inline-block;position:absolute;width:7px;height:7px;left:-2px;top:-2px;background-color:#009bea;border-style:solid;border-width:2px;border-color:#FFFFFF;border-radius:100px;box-shadow:0 2px 5px 0 #182A3D;z-index:2}.adsk-viewing-viewer .measure-label.visible{display:block}.adsk-viewing-viewer .measure-label-text{display:inline-block;margin:0px 5px 0px 5px;vertical-align:middle}.adsk-viewing-viewer .measure-horizontal-divider{height:1px;border-top:1px solid rgba(200,200,200,0.8)}.adsk-viewing-viewer .measure-submenu-select{display:block;position:relative;width:calc(100% - 40px);padding:10px 20px 0px 20px;opacity:0.3}.adsk-viewing-viewer .option-drop-down:disabled{opacity:0.3}.adsk-viewing-viewer .measure-submenu-selectlabel{position:relative;display:inline-block;padding-right:20px;padding-bottom:4px}.adsk-viewing-viewer .measure-results{position:relative;display:block;padding:5px 0px  10px 30px}.adsk-viewing-viewer .measure-result-label{display:inline-block;padding-right:10px}.adsk-viewing-viewer .measure-result-number{display:inline-block}.adsk-viewing-viewer .measure-delta-collapse{position:absolute;right:20px;display:inline-block;background-color:rgba(255,255,255,0.12);margin:0px 4px 0px 4px;padding:0px 4px 0px 4px;cursor:pointer;text-align:center}.adsk-viewing-viewer .measure-delta-collapse:hover{background-color:rgba(166,194,255,0.7);-webkit-transition:all 0.2s ease;-moz-transition:all 0.2s ease;-ms-transition:all 0.2s ease;-o-transition:all 0.2s ease;transition:all 0.2s ease}.adsk-viewing-viewer .measure-selection-repick{position:absolute;right:20px;display:inline-block;background-color:rgba(255,255,255,0.12);margin:4px 4px 4px 4px;padding:4px 4px 4px 4px;cursor:pointer;text-align:center}.adsk-viewing-viewer .measure-selection-repick:hover{background-color:rgba(166,194,255,0.7);-webkit-transition:all 0.2s ease;-moz-transition:all 0.2s ease;-ms-transition:all 0.2s ease;-o-transition:all 0.2s ease;transition:all 0.2s ease}.adsk-viewing-viewer .measure-restart{margin:10px 20px 15px 20px;padding:6px 10px 6px 10px;width:calc(100% - 55px);cursor:pointer;text-align:center;border-style:solid;border-width:1px;border-color:rgba(255,255,255,0.2);border-radius:3px}.adsk-viewing-viewer .docking-panel:hover .measure-restart{background-color:rgba(255,255,255,0.12)}.adsk-viewing-viewer .docking-panel .measure-restart:hover{background-color:rgba(166,194,255,0.7);-webkit-transition:all 0.2s ease;-moz-transition:all 0.2s ease;-ms-transition:all 0.2s ease;-o-transition:all 0.2s ease;transition:all 0.2s ease}.adsk-viewing-viewer .measure-panel-title{padding-top:0px;padding-left:20px;margin-top:10px}.adsk-viewing-viewer .measure-panel-title:hover{cursor:pointer}.adsk-viewing-viewer .measure-panel-title.collapsed{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEwMDhBMzY4QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEwMDhBMzY5QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTAwOEEzNjZBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTAwOEEzNjdBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6WHWu4AAAAcElEQVR42mL8//8/AzmAiYFMgEtjGSFDcUmGAfEEIOYix6lWQLwUiGXJ8SNI00IgNiIncPiAeCoQ+5ITqsxQA+CAhQhN34C4AoiPkaLxGRAXAfEdUvx4DohjsGkCA1CSw4LrgZgVhxwYM9I9rQIEGACZNDs01yUXlAAAAABJRU5ErkJggg==);background-repeat:no-repeat}.adsk-viewing-viewer .measure-panel-title.expanded{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE3QzFFQUQ1QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE3QzFFQUQ2QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTdDMUVBRDNBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTdDMUVBRDRBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6XuY60AAAARklEQVR42mL8//8/AzmAiYFMQBeNqSg8kB+JwKlAfAZZjIlIm9JJdSpWTYQ04tSETyNeTbg0EtSETSNRmkCAcegkOYAAAwDGjDZHvY373AAAAABJRU5ErkJggg==);background-repeat:no-repeat}.adsk-viewing-viewer .adsk-viewing-viewer .measure-table td{padding:10px 0px  10px 20px}.adsk-viewing-viewer .measure-selection-one-label{display:inline-block;margin:18px 18px 18px 18px;width:16px;height:16px;font-size:16px;float:left;padding:2px;background-color:#0033FF;border-radius:10px;opacity:0.6}.adsk-viewing-viewer .measure-selection-two-label{display:inline-block;margin:18px 18px 18px 18px;width:16px;height:16px;font-size:16px;float:left;padding:2px;background-color:#0033FF;border-radius:10px;opacity:0.6}.adsk-viewing-viewer .measure-repick{display:inline-block;cursor:default;margin:20px 20px 20px 20px;width:16px;height:16px;font-size:16px;float:right;opacity:0.5}.adsk-viewing-viewer .measure-repick:hover{opacity:1}.adsk-viewing-viewer .measure-selection-result{display:inline-block;margin:21px 0px 21px 0px}.adsk-viewing-viewer .measure-distance-icon{display:inline-block;margin:20px 2px 20px 2px;font-size:52px;color:#FF9900;float:left}.adsk-viewing-viewer .measure-angle-icon{display:inline-block;margin:20px 2px 20px 2px;font-size:52px;color:#FF9900;float:left}.adsk-viewing-viewer .adsk-viewing-viewer .measure-result{font-size:20px;color:#FF9900;display:inline-block;margin:38px 0px 38px 0px}.adsk-viewing-viewer .measure-initial{font-size:20px;display:inline-block;margin:38px 0px 38px 56px}.adsk-viewing-viewer .measure-settings-button{cursor:default;position:relative;top:20px;right:20px;width:16px;height:16px;font-size:18px;float:right;opacity:0.5}.adsk-viewing-viewer .measure-settings-button:hover{opacity:1}.adsk-viewing-viewer .measure-delta-button{position:relative;top:56px;right:4px;width:16px;height:16px;font-size:16px;float:right;opacity:0.5;-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg);transform:rotate(-90deg)}.adsk-viewing-viewer .measure-delta-button.rotated{-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-ms-transform:rotate(90deg);-o-transform:rotate(90deg);transform:rotate(90deg)}.adsk-viewing-viewer .measure-delta-button:hover{opacity:1}.adsk-viewing-viewer .measure-delta-result{display:inline-block;margin:0px 0px 20px 0px;padding:0px 0px 0px 56px}.adsk-viewing-viewer .measure-label-axis{display:none;position:absolute;width:16px;height:16px;left:0px;top:0px;background-color:#f4f4f4;border-radius:8px;pointer-events:none}.adsk-viewing-viewer .measure-label-axis-icon.X{background-color:#F12C2C}.adsk-viewing-viewer .measure-label-axis-icon.Y{background-color:#0BB80B}.adsk-viewing-viewer .measure-label-axis-icon.Z{background-color:#2C2CF1}.adsk-viewing-viewer .measure-label-axis-icon{width:20px;height:18px;color:#f4f4f4;border-radius:8px 0 0 8px;font-size:12px;padding-top:4px;line-height:15px;text-align:center;margin-left:-2px}.adsk-viewing-viewer .measure-label-axis-delta.enableTransition{transition:opacity 0.1s linear}.adsk-viewing-viewer .measure-label-axis-delta{display:none;position:absolute;font-size:18px;left:0px;top:0px;background-color:#ffffff;pointer-events:none;opacity:0;border-radius:8px;box-shadow:0px 1px 3px 1px rgba(0,0,0,0.25)}.adsk-viewing-viewer .measure-label-axis.visible{display:block}.adsk-viewing-viewer .measure-label-axis-delta.visible{display:flex}.adsk-viewing-viewer .measure-label-axis-x{color:#F12C2C}.adsk-viewing-viewer .measure-label-axis-y{color:#0BB80B}.adsk-viewing-viewer .measure-label-axis-z{color:#2C2CF1}.adsk-viewing-viewer .magnifying-glass.visible{display:block}.adsk-viewing-viewer .magnifying-glass{position:absolute;display:none;-moz-border-radius:100%;-webkit-border-radius:100%;border-radius:100%;background:transparent;box-shadow:2px 2px 4px rgba(0,0,0,0.5),inset 2px 2px 4px rgba(0,0,0,0.5);-webkit-box-shadow:2px 2px 4px rgba(0,0,0,0.5),inset 2px 2px 4px rgba(0,0,0,0.5);-moz-box-shadow:2px 2px 4px rgba(0,0,0,0.5),inset 2px 2px 4px rgba(0,0,0,0.5);z-index:4}.adsk-viewing-viewer .measure-fetching-topology{display:inline-block;width:10px;height:10px;background:url(\" + escape(require(\"./res/icon-spinner-sm.svg\")) + \");margin:3px 0px -2px 3px;animation:measure-topology-fetching-anim 1.4s infinite linear;-webkit-animation:measure-topology-fetching-anim 1.4s infinite linear}@keyframes measure-topology-fetching-anim{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes measure-topology-fetching-anim{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.adsk-viewing-viewer .docking-panel.measure-settings-popup{display:flex;justify-content:center;flex-direction:column;bottom:120%;box-sizing:border-box;text-align:left;position:absolute;padding-top:15px;padding-bottom:15px}.adsk-viewing-viewer .adsk-toolbar-vertical .docking-panel.measure-settings-popup{right:120%;bottom:unset;height:max-content;width:max-content}.adsk-viewing-viewer .docking-panel.measure-settings-popup .adsk-lmv-tftable tr.switch-slider-row td{width:auto;padding-bottom:0px;padding-top:0px;vertical-align:inherit}.adsk-viewing-viewer .docking-panel.measure-settings-popup.hide{display:none}.adsk-viewing-viewer .measure-settings-popup tbody{top:15px}.adsk-toolbar .measure-toolbar-seperator{height:18px;width:1px;background-color:#999;float:left;margin:16px 5px}.adsk-toolbar.adsk-toolbar-vertical .measure-toolbar-seperator{height:1px;width:18px;margin:5px 16px}.adsk-viewing-viewer .measure-selection-area{display:block;position:absolute;cursor:pointer;z-index:1;-webkit-tap-highlight-color:rgba(0,0,0,0)}\\n\", \"\"]);\n\n// exports\n","module.exports = \"\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='10' height='10' viewBox='0 0 10 10'%3E %3Cdefs%3E %3ClinearGradient id='linear-gradient' y1='5' x2='10' y2='5' gradientUnits='userSpaceOnUse'%3E %3Cstop offset='0' stop-color='%23fff' stop-opacity='0'/%3E %3Cstop offset='1' stop-color='%23fff'/%3E %3C/linearGradient%3E %3C/defs%3E %3Ctitle%3EAsset 6%3C/title%3E %3Cg id='Layer_2' data-name='Layer 2'%3E %3Cg id='finals_24px'%3E %3Cpath d='M5,10A5,5,0,0,1,0,5,1.2,1.2,0,0,1,2.3,5,2.7,2.7,0,1,0,5,2.3,1.2,1.2,0,0,1,5,0,5,5,0,0,1,5,10Z' fill='url(%23linear-gradient)'/%3E %3C/g%3E %3C/g%3E %3C/svg%3E\\\"\"","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Calibration.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Calibration.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Calibration.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"@font-face{font-family:'calibration-icon';src:url(\\\"data:application/octet-stream;base64,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\\\") format(\\\"woff\\\");font-weight:normal;font-style:normal}[class^=\\\"calibration-icon\\\"],[class*=\\\" calibration-icon\\\"]{font-family:'calibration-icon';font-style:normal;font-weight:normal;font-variant:normal;line-height:1;padding-top:2px;speak:none;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.adsk-viewing-viewer .calibration-icon:before{content:'a'}.adsk-viewing-viewer .calibration-panel{left:calc(50% - 190px);top:calc(50% - 145px);width:380px;height:auto;z-index:4}.adsk-viewing-viewer .calibration-panel .calibration-table{padding-left:24px;padding-right:24px;margin-top:12px;margin-bottom:12px;box-sizing:border-box}.adsk-viewing-viewer .measure-settings-popup .option-drop-down,.adsk-viewing-viewer .calibration-panel .option-drop-down{width:100%;padding-right:0px;box-sizing:border-box}.adsk-viewing-viewer .measure-settings-popup .adsk-lmv-tftable tr td,.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td{width:auto;padding:2px 0px 2px 0px;height:56px;font-size:14px}.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td div{padding:0px}.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td input{margin:0px;box-sizing:border-box;width:100%;height:36px;font-size:14px}.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td select{height:36px;font-size:14px}.adsk-viewing-viewer .measure-settings-popup .switch{margin-left:25px}.adsk-viewing-viewer .measure-settings-popup .switch .slider{width:26px}.adsk-viewing-viewer .calibration-textbox::-webkit-inner-spin-button,.adsk-viewing-viewer .calibration-textbox::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.adsk-viewing-viewer .calibration-text{text-align:left;padding:6px 10px 6px 10px;margin:20px 20px 14px 20px;font-size:14px;-webkit-font-smoothing:antialiased}.adsk-viewing-viewer .calibration-button{margin-top:15px}.adsk-viewing-viewer .calibration-button-left{width:calc(50% - 15px);margin-right:5px !important;display:inline-block}.adsk-viewing-viewer .calibration-button-right{width:calc(50% - 15px);margin-left:5px !important;display:inline-block}.adsk-viewing-viewer .calibration-line{position:absolute;display:block;top:0;left:0;pointer-events:none;z-index:0}.adsk-viewing-viewer .calibration-label{display:none;position:absolute;pointer-events:none;text-align:'center';vertical-align:middle;cursor:default;padding:2px;color:#000000;background:#FFFFFF;border-radius:10px;-webkit-transform-origin:50%  53%}.adsk-viewing-viewer .calibration-label-text{display:inline-block;pointer-events:none;text-align:'center';vertical-align:middle;font-size:12px;cursor:default;padding:2px;color:#000000;background:#FFFFFF;border-bottom:1px dashed #000000;text-decoration:none;text-transform:uppercase;-webkit-font-smoothing:antialiased}.adsk-viewing-viewer .calibration-label-text:hover{color:#039be5;border-bottom:1px dashed #039be5}.adsk-viewing-viewer .calibration-label.visible{display:block}.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover,.adsk-viewing-viewer .calibration-endpoint.edit{background-color:#039be5}.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover>*,.adsk-viewing-viewer .calibration-endpoint.edit>*{color:#ffffff}.adsk-viewing-viewer .calibration-endpoint.editable{pointer-events:all}.adsk-viewing-viewer .calibration-endpoint{display:none;position:absolute;cursor:move;pointer-events:none;width:30px;height:30px;background-color:#ffffff;box-shadow:0 4px 8px 0 rgba(0,0,0,0.24),0 0 8px 0 rgba(0,0,0,0.12);-moz-border-radius:50px;-webkit-border-radius:50px;border-radius:50px;justify-content:center;align-items:center;text-align:center}.adsk-viewing-viewer .calibration-endpoint.visible{display:block}.adsk-viewing-viewer .calibration-endpoint-text{display:inline-block;font-size:14px;vertical-align:middle;cursor:default;margin:5px 5px 5px 5px;vertical-align:middle;text-align:center;color:#039be5;text-decoration:none;text-transform:uppercase;pointer-events:none}.adsk-viewing-viewer .calibration-panel .docking-panel-footer{padding:16px 24px;display:flex;justify-content:flex-end;text-align:center;position:relative;height:auto}.adsk-viewing-viewer .calibration-panel .docking-panel-footer .docking-panel-secondary-button,.adsk-viewing-viewer .calibration-panel .docking-panel-footer .docking-panel-primary-button{padding:0px 16px;margin:0px 0px 0px 8px;font-size:14px}.adsk-viewing-viewer .calibration-panel .docking-panel-title{padding-top:19px;padding-bottom:19px}.adsk-viewing-viewer .calibration-panel .docking-panel-close{margin-top:7.5px}\\n\", \"\"]);\n\n// exports\n","\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon; //These come from main lmv bundle.\n\n    // /** @constructor */\n    export function MeasurementsManager(viewer)\n    {   \n        this.viewer = viewer;\n        this.init();\n\n        this.restoredMeasurementData = [];\n    }\n\n    var proto = MeasurementsManager.prototype;\n\n    proto.getCurrentMeasurement = function() {\n        return this.currentMeasurement;\n    };\n\n    proto.getRestoredMeasurementData = function() {\n        return this.restoredMeasurementData.slice();\n    }\n\n    proto.selectMeasurementById = function(id) {\n        var measurement = this.measurementsList[id];\n        \n        if (measurement) {\n            this.changeCurrentMeasurement(measurement);\n            return this.currentMeasurement;    \n        }\n\n        return false;\n    };\n\n    proto.createMeasurement = function(measurementType, options) {\n        var id = this.measurementsCounter;\n        var measurement = new MeasureCommon.Measurement(measurementType, id, options);\n        this.measurementsList[id] = measurement;\n        this.measurementsCounter++;\n        this.changeCurrentMeasurement(measurement);\n        return this.currentMeasurement;\n    };\n\n    // Renders measurements from data.\n    proto.createMeasurementFromData = function(measurementData, measurementType, createIndicatorCb, preparePicksCb) {\n        // Convert optional values from DWF to local coordinate\n        let options = measurementData.options;\n        if (options) {\n            // Deep clone options\n            options = JSON.parse(JSON.stringify(options));\n\n            // Convert global world coordinats to LMV coordinates\n            const model =\n                options.hasOwnProperty('modelId') && options.modelId\n                    ? this.viewer.impl.findModel(options.modelId)\n                    : this.viewer.model;\n            const globalOffset = model && model.getData().globalOffset;\n            if (globalOffset && (globalOffset.x !== 0 || globalOffset.y !== 0 || globalOffset.z !== 0)) {\n                const cvtPts = points => {\n                    if (points) {\n                        for (let i = 0; i < points.length; ++i) {\n                            // Tricky way to use Vector3 sub on plain objects\n                            THREE.Vector3.prototype.sub.call(points[i], globalOffset);\n                        }\n                    }\n                };\n                cvtPts(options.dimensionOffset);\n                cvtPts(options.dashedLeader);\n                cvtPts(options.arc);\n            }\n        }\n\n        this.createMeasurement(measurementType, options);\n        if (createIndicatorCb instanceof Function) {\n            createIndicatorCb(this.currentMeasurement);\n        }\n\n        this.initPicks(measurementData.picks);\n\n        if (preparePicksCb instanceof Function) {\n            preparePicksCb();\n        }\n\n        if (this.currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA) {\n            this.currentMeasurement.closedArea = true;\n        } else if (this.currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_CALLOUT) {\n            this.currentMeasurement.text = measurementData.text;\n        }\n\n        const preparePointData = () => {\n            const points = this.restoredMeasurementData[this.currentMeasurement.id];\n            const keys = Object.keys(points);\n            const data = [];\n            for (let i = 0; i < keys.length; i++) {\n                const key = keys[i];\n                const pointData = points[key];\n                data[key] = {\n                    intersection: pointData.intersection,\n                    circularArcRadius: pointData.circularArcRadius,\n                    circularArcCenter: pointData.circularArcCenter,\n                };\n            }\n            return data;\n        };\n\n        this.currentMeasurement.indicator.changeAllEndpointsEditableStyle(true);\n        this.currentMeasurement.indicator.enableSelectionAreas(true);\n        this.currentMeasurement.indicator.enableLabelsTouchEvents(true);\n\n        this.activatePicks();\n\n        this.currentMeasurement.computeResult(this.currentMeasurement.picks, this.viewer)\n\n        // This will render the measurements\n        this.currentMeasurement.indicator.renderFromPoints(preparePointData(), true);\n\n        this.currentMeasurement.indicator.changeAllEndpointsEditableStyle(true);\n        this.currentMeasurement.indicator.enableSelectionAreas(true);\n        this.currentMeasurement.indicator.enableLabelsTouchEvents(true);\n\n        this.currentMeasurement.isRestored = true;\n    };\n\n    // Initializes picks from pick data\n    proto.initPicks = function(pickData) {\n        if (!pickData) return;\n        const points = [];\n\n        for (let i = 0; i < pickData.length; i++) {\n            const pick = pickData[i];\n            if (!pick) continue;\n            const key = i + 1;\n\n            let pickPoint = new THREE.Vector3(pick.intersection.x, pick.intersection.y, pick.intersection.z);\n            const model =\n                pick.hasOwnProperty('modelId') && pick.modelId\n                    ? this.viewer.impl.findModel(pick.modelId)\n                    : this.viewer.model;\n\n            if (model) {\n                const modelData = model.getData();\n                pickPoint =\n                    modelData && modelData.hasOwnProperty('globalOffset')\n                        ? pickPoint.sub(modelData.globalOffset).clone()\n                        : pickPoint.clone();\n            }\n\n            points[key] = {\n                intersection: pickPoint,\n                viewportId: pick.viewportIndex2d,\n                hasTopology: pick.hasTopology,\n                modelId: pick.modelId,\n                snapNode: pick.snapNode,\n                circularArcRadius: pick.circularArcRadius,\n                circularArcCenter: pick.circularArcCenter\n            };\n            this.currentMeasurement.getPick(key);\n        }\n\n        this.restoredMeasurementData[this.currentMeasurement.id] = points;\n    };\n\n    // Stores information from the restored measurement pick data in the current measurement picks\n    proto.activatePicks = function() {\n        if (!this.currentMeasurement.picks) return;\n        const keys = Object.keys(this.currentMeasurement.picks);\n\n        const id = this.currentMeasurement.id;\n        for (let i = 0; i < keys.length; i++) {\n            const key = keys[i];\n\n            const pick = this.currentMeasurement.picks[key];\n            const restoredMeasurements = this.getRestoredMeasurementData();\n            const pointInfo = restoredMeasurements[id][key];\n            let p = pointInfo.intersection.clone();\n\n            if (!pick.getGeometry() && pointInfo.intersection) {\n                pick.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\n                pick.geomVertex = p;\n                pick.intersectPoint = p;\n                pick.modelId = pointInfo.modelId;\n                pick.snapNode = pointInfo.snapNode; // the dbid of the pick. This is used for isolation.\n                pick.circularArcCenter = pointInfo.circularArcCenter;\n                pick.circularArcRadius = pointInfo.circularArcRadius;\n\n                // Set the isRestored flag if all of the picks are valid.\n                pick.viewportIndex2d = pointInfo.viewportId;\n            }\n        }\n    };\n\n    proto.changeCurrentMeasurement = function(measurement) {\n        this.currentMeasurement = measurement;\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, data: { type: measurement.measurementType, id: measurement.id }});\n    };\n\n    proto.removeCurrentMeasurement = function() { \n        // Remove current measurement from the list\n        if (Object.keys(this.measurementsList).length > 0) {\n            delete this.measurementsList[this.currentMeasurement.id];\n        }\n    };\n\n    proto.init = function() {\n        this.reset();\n    };\n\n    proto.destroy = function() {\n        this.reset();\n    };\n\n    proto.reset = function() {\n        this.currentMeasurement = null;\n        this.measurementsList = {};\n        this.measurementsCounter = 0;\n    };\n\n","\n    var av = Autodesk.Viewing;\n    var MeasureCommon = av.MeasureCommon;\n    \n    /**\n     * Base class for an indicator.\n     */\n\n    export var Indicator = function(viewer, measurement, tool)\n    {\n        this.viewer = viewer;\n        this.setGlobalManager(viewer.globalManager);\n        this.measurement = measurement;\n        this.tool = tool;\n        this.snapper = tool.getSnapper();\n        this.materialExtensionLine = null;\n        this.materialExtensionFace = null;\n        this.extensionLines = [];\n        this.extensionFaces = [];\n        this.grayOutPlane = [];\n        this.materialPoint = null;\n        this.materialLine = null;\n        this.materialAngle = null;\n        this.materialAngleOutline = null;\n        this.materialGreyOutPlane = null;\n        this.materialFace = null;\n        this.angleArc = null;\n        this.angleOutline = [];\n        this.arcOutline = [];\n        this.arcTip = [];\n        this.showMeasureResult = false;\n        this.visibleLabels = [];\n        this.overlayName = 'measure-indicator-overlay-' + (measurement.id || '');\n        this.xAxis = this.viewer.autocam.getWorldRightVector();\n        this.yAxis = this.viewer.autocam.getWorldUpVector();\n        this.zAxis = this.viewer.autocam.getWorldFrontVector();\n    };\n\n\n\n    var proto = Indicator.prototype;\n    av.GlobalManagerMixin.call(proto);\n\n    proto.init = function() {\n        return false;\n    };\n\n    proto.updateDistance = function() {\n        return false;\n    };\n\n    proto.updateAngle = function() {\n        return false;\n    };\n\n    proto.clear = function() {\n        return false;\n    };\n\n    proto.updateLabelsPosition = function() {\n        return false;\n    };\n\n    proto.renderFromPoints = function(pointData, showMeasureResult) {\n        this.showMeasureResult = showMeasureResult;\n\n        this.clear();\n\n        for (var i = 1; i <= Object.keys(pointData).length; i++) {\n            const p = pointData[i].intersection;\n    \n            if (!this.endpoints[i]) {\n                this.createEndpoint(i);\n            }\n    \n            this.endpoints[i].position = new THREE.Vector3(p.x, p.y, p.z);\n            this.showClick(i);\n        }\n            \n        this.renderRubberbandFromPoints(pointData);\n        \n        this.updateLabelsPosition();\n    };\n\n    // Renders the measurement and the labels.\n    proto.render = function(picks, showMeasureResult) {\n\n        this.showMeasureResult = showMeasureResult;\n\n        this.clear();\n\n        for (var i = 1; i <= Object.keys(picks).length; i++) {\n            if (this.measurement.hasPick(i)) {\n                this.renderPick(i);\n            }\n        }\n            \n        this.renderRubberband(picks);\n        \n        this.updateLabelsPosition();\n    };\n\n    proto.changeEndpointOnEditStyle = function(endpointNumber, isEditing) {\n        return false;\n    };\n\n    proto.handleResize = function() {\n        return false;\n    };\n\n    proto.setNoTopology = function() {\n        return false;\n    };\n\n    proto.setFetchingTopology = function() {\n        return false;\n    };\n\n    proto.setTopologyAvailable = function() {\n        return false;\n    };\n\n    proto.clientToCanvasCoords = function(event) {\n        var rect = this.viewer.impl.getCanvasBoundingClientRect();\n        var res = {};\n        if( event.hasOwnProperty(\"center\") )\n        {\n            event.canvasX = res.x = event.center.x - rect.left;\n            event.canvasY = res.y = event.center.y - rect.top;\n        }\n        else\n        {\n            event.canvasX = res.x = event.pointers[0].clientX - rect.left;\n            event.canvasY = res.y = event.pointers[0].clientY - rect.top;\n        }\n\n        return res;\n    };\n\n    proto.initLabelMobileGestures = function(label, pointNumber) {\n        var magnifyingGlass = this.viewer.toolController.getTool(\"magnifyingGlass\");\n\n        this.hammer = new av.Hammer.Manager(label, {\n                recognizers: [\n                    av.GestureRecognizers.drag,\n                    av.GestureRecognizers.singletap\n                ],\n                handlePointerEventMouse: false,\n                inputClass: av.isIE11 ? av.Hammer.PointerEventInput : av.Hammer.TouchInput\n            });\n\n        this.onSingleTapBinded = function(event) { \n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n                                    this.tool.editEndpoint(event, pointNumber, this.measurement.id); \n                                }.bind(this);\n\n        this.onDragStartBinded = function(event) {\n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n                                    this.tool.editEndpoint(event, pointNumber, this.measurement.id);\n                                    this.tool.editByDrag = true;\n\n                                    // Activate Magnifying Glass and tool by faking press event.\n                                    event.type = \"press\";\n                                    magnifyingGlass.handlePressHold(event);\n                                    this.tool.handlePressHold(event);\n                                    event.type = \"dragstart\";\n                                    magnifyingGlass.handleGesture(event);\n                                    this.tool.handleGesture(event);\n                                }.bind(this);\n\n        this.onDragMoveBinded = function(event){ \n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n\n                                    magnifyingGlass.handleGesture(event);\n                                    this.tool.handleGesture(event);\n                                }.bind(this);\n\n        this.onDragEndBinded = function(event){ \n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n                                    \n                                    // Deactivate Magnifying Glass and tool by faking pressup event.\n                                    magnifyingGlass.handleGesture(event);\n                                    this.tool.handleGesture(event);\n                                    event.type = \"pressup\";\n                                    magnifyingGlass.handlePressHold(event);\n                                    this.tool.handlePressHold(event);\n\n                                    this.tool.handleButtonUp(event);\n                                }.bind(this);\n\n        this.hammer.on(\"singletap\", this.onSingleTapBinded);\n        this.hammer.on(\"dragstart\", this.onDragStartBinded);\n        this.hammer.on(\"dragmove\", this.onDragMoveBinded);\n        this.hammer.on(\"dragend\", this.onDragEndBinded);\n    };\n\n    proto.clearLabelMobileGestures = function() {\n        if (this.hammer) {\n            this.hammer.off(\"singletap\", this.onSingleTapBinded);\n            this.hammer.off(\"dragstart\", this.onDragStartBinded);\n            this.hammer.off(\"dragmove\", this.onDragMoveBinded);\n            this.hammer.off(\"dragend\", this.onDragEndBinded);\n            this.hammer = null;\n        }\n    };\n\n    proto.updateVisibleLabelsArray = function(label, isVisible) {\n        if (isVisible) {\n            if (!(this.visibleLabels.indexOf(label) > -1)) {\n                this.visibleLabels.push(label);        \n            }\n        } else {\n            // remove from array\n            var index = this.visibleLabels.indexOf(label);\n            if (index > -1) {\n                this.visibleLabels.splice(index, 1);\n            }\n        }\n    };\n\n    proto.hideEndpoints = function() {\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endpoint = this.endpoints[name];\n                if (endpoint.label) {\n                    this.hideLabel(endpoint.label);\n                }\n            }\n        }\n    };\n\n    proto.showEndpoints = function() {\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endpoint = this.endpoints[name];\n                if (this.measurement.hasPick(name) && endpoint.label) {\n                    this.showLabel(endpoint.label);\n                }\n            }\n        }\n    };\n\n    proto.hideLabel = function(label) {\n        if (label) {\n            MeasureCommon.safeToggle(label, 'visible', false);\n            this.updateVisibleLabelsArray(label, false);      \n        }\n    };\n\n    proto.showLabel = function(label) {\n        if (label) {\n            MeasureCommon.safeToggle(label, 'visible', true);\n            this.updateVisibleLabelsArray(label, true);\n        }\n    };\n\n    proto.changeEndpointOnEditStyle = function(endpointNumber, isEditing) {\n        if (this.endpoints[endpointNumber] && this.endpoints[endpointNumber].label) {\n            MeasureCommon.safeToggle(this.endpoints[endpointNumber].label, 'on-edit', isEditing);\n        }\n    };\n\n    proto.changeEndpointEditableStyle = function(endpointNumber, isEditable) {\n        if (this.endpoints[endpointNumber] && this.endpoints[endpointNumber].label) {\n            MeasureCommon.safeToggle(this.endpoints[endpointNumber].label, 'editable', isEditable);\n        }\n    };\n\n    proto.changeAllEndpointsEditableStyle = function(isEditable) {\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                this.changeEndpointEditableStyle(name, isEditable);    \n            }\n        }\n    };\n\n    proto.changeAllEndpointsOnEditStyle = function(isEditing) {\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                this.changeEndpointOnEditStyle(name, isEditing);\n            }\n        }\n    };\n\n    proto.hideLabelsOutsideOfView = function() {\n        // For each label, check if it's inside the camera viewport.\n        if (this.viewer.model && !this.viewer.model.is2d()) {\n            this.visibleLabels.forEach(function(label) {\n\n                // Ignore labels if position is not computed yet. This may temporarily happen, because label positions are not\n                // always immediately assigned. (see MeasureToolIndicator.js)\n                // Note that we must not set them to invisible here, because this may cause a hen-and-egg-problem: \n                // Some code sections in MeasureToolIndicator.updatePositions() don't set the label position for invisible labels.\n                if (!label.point) {\n                    return;\n                }\n\n                var show = this.viewer.navigation.isPointVisible(label.point);\n\n                if ((label.classList.contains('visible') && !show) || (!label.classList.contains('visible') && show)) {\n                    label.classList.toggle('visible', show);    \n                } \n\n            }.bind(this));\n        }\n    };\n\n    proto.showClick = function(pickNumber) {\n        if (this.tool.getActivePointIndex() !== pickNumber) {\n            this.showLabel(this.endpoints[pickNumber].label);\n        }\n    };\n\n    proto.hideClick = function(pickNumber) {\n\n        if (this.endpoints[pickNumber]) {\n            this.hideLabel(this.endpoints[pickNumber].label);    \n        }\n    };\n\n    proto.renderPick = function(pickNumber) {\n        if (!this.endpoints[pickNumber]) {\n            this.createEndpoint(pickNumber);\n        }\n\n        this.renderEndpointGeometry(pickNumber);\n        this.showClick(pickNumber);\n    };\n\n    proto.renderEndpointGeometry = function(pickNumber) {\n        var geometry = MeasureCommon.getSnapResultPosition(this.measurement.getPick(pickNumber), this.viewer);\n        \n        if (geometry !== null) {\n            this.endpoints[pickNumber].position = geometry.clone();\n        }\n    };\n\n\n    // This is a workaround to deal with the limitation on linewidth on Windows due to the ANGLE library\n    proto.drawEdgeAsCylinder = function(geom, material, linewidth, type, cylinderGeometry) {\n\n        // The array for all cylinders\n        var edge = [];\n        var cylinder;\n\n        if (type == 1) { // LinePieces\n            for (var i = 0; i < geom.vertices.length; i += 2) {\n                cylinder = this.cylinderMesh(geom.vertices[i], geom.vertices[i + 1], material, linewidth, cylinderGeometry);\n                this.setCylinderScale(cylinder, geom.vertices[i], geom.vertices[i + 1]);\n                edge.push(cylinder);\n            }\n        }\n        else { // LineStrip\n            for (var i = 0; i < geom.vertices.length - 1; i++) {\n                cylinder = this.cylinderMesh(geom.vertices[i], geom.vertices[i + 1], material, linewidth, cylinderGeometry);\n                this.setCylinderScale(cylinder, geom.vertices[i], geom.vertices[i + 1]);\n                edge.push(cylinder);\n            }\n        }\n\n\n        return edge;\n    };\n\n    proto.drawDashedLine = function(p1, p2, dashSize, gapSize, material, width, overlayName) {\n\n        var geometry = new THREE.Geometry();\n        var line = new THREE.Vector3().subVectors(p2, p1);\n        var lineLength = line.length() - gapSize;\n        var lineDirection = line.normalize();\n        \n        var i = 0;\n        var pos = p1.clone();\n        var currLength = 0;\n\n        while (currLength < lineLength) {\n            var isPointVisible = this.viewer.navigation.isPointVisible(pos);\n            \n            if (isPointVisible) {\n                geometry.vertices[i] = pos.clone();\n                i++;\n            }\n            \n            pos.addVectors(pos, lineDirection.clone().multiplyScalar(dashSize));\n            \n            if (isPointVisible) {\n                geometry.vertices[i] = pos.clone();\n                i++;\n            }\n            \n            pos.addVectors(pos, lineDirection.clone().multiplyScalar(gapSize));\n\n            currLength += dashSize + gapSize;\n        }\n        \n        line = this.drawEdgeAsCylinder(geometry, material, width, 1, this.getNewCylinderGeometry());\n        this.viewer.impl.addMultipleOverlays(overlayName, line);\n\n        return line;\n    };\n\n    // This is a workaround to deal with the limitation on linewidth on Windows due to the ANGLE library\n    proto.drawLineAsCylinder = function(geom, material, linewidth, overlayName) {\n\n        var line;\n\n        if (geom.vertices.length == 2) {\n            line = this.cylinderMesh(geom.vertices[0], geom.vertices[1], material, linewidth, this.getNewCylinderGeometry());\n            this.setCylinderScale(line, geom.vertices[0], geom.vertices[1]);\n            this.viewer.impl.addOverlay(overlayName, line);\n        }\n\n        return line;\n    };\n\n    proto.getNewCylinderGeometry = function() {\n        return new THREE.CylinderGeometry(0.1, 0.1, 1, 8, 1, true);\n    };\n\n\n    proto.cylinderMesh = function(pointX, pointY, material, linewidth, cylinderGeometry) {\n\n        var direction = new THREE.Vector3().subVectors(pointY, pointX);\n        var orientation = new THREE.Matrix4();\n        orientation.lookAt(pointX, pointY, new THREE.Object3D().up);\n        orientation.multiply(new THREE.Matrix4().set(linewidth, 0, 0, 0,\n            0, 0, linewidth, 0,\n            0, -direction.length(), 0, 0,\n            0, 0, 0, 1));\n\n        var edge = new THREE.Mesh(cylinderGeometry, material);\n        edge.applyMatrix(orientation);\n        edge.lmv_line_width = linewidth;\n        edge.position.x = (pointY.x + pointX.x) / 2;\n        edge.position.y = (pointY.y + pointX.y) / 2;\n        edge.position.z = (pointY.z + pointX.z) / 2;\n\n        return edge;\n    };\n\n    // Set scale for cylinder\n    proto.setCylinderScale = function(cylinderMesh, p1, p2) {\n        var scale;\n\n        if (p1 && p2) {\n            var point = MeasureCommon.nearestPointInPointToSegment(this.viewer.navigation.getPosition(), p1, p2);\n            scale = this.setScale(point);    \n        } else {\n            scale = this.setScale(cylinderMesh.position);\n        }\n\n        if (cylinderMesh.hasOwnProperty(\"lmv_line_width\"))\n            scale *= cylinderMesh.lmv_line_width;\n        cylinderMesh.scale.x = scale;\n        cylinderMesh.scale.z = scale;\n    };\n\n\n    // Set scale for vertex and extension dashed line\n    proto.setScale = function(point) {\n\n        var pixelSize = 5;\n\n        var navapi = this.viewer.navigation;\n        var camera = navapi.getCamera();\n        var position = navapi.getPosition();\n\n        var p = point.clone();\n\n        var distance = camera.isPerspective ? p.sub(position).length()\n            : navapi.getEyeVector().length();\n\n        var fov = navapi.getVerticalFov();\n        var worldHeight = 2.0 * distance * Math.tan(THREE.Math.degToRad(fov * 0.5));\n\n        var viewport = navapi.getScreenViewport();\n        var scale = pixelSize * worldHeight / viewport.height;\n\n        return scale;\n    };\n\n    proto.alignLabelWithLine = function(label, p1, p2, offset, viewer){\n        var camUpVector = viewer.navigation.getCameraUpVector();\n        var worldUpVec = new THREE.Vector3(0,1,0);\n        var cameraAngle = worldUpVec.angleTo(camUpVector) * 180 / Math.PI;\n\n        cameraAngle = camUpVector.x >= 0 ? cameraAngle : -cameraAngle;\n        \n        var angle = null;\n\n        var deltaX = p1.x - p2.x;\n        var deltaY = p1.y - p2.y;\n\n        if (p1.x < p2.x) {\n            angle =  Math.atan2(-deltaY , -deltaX) * 180 / Math.PI;    \n        } \n        else {\n            angle =  Math.atan2(deltaY , deltaX) * 180 / Math.PI;    \n        }\n\n        angle = -(angle + cameraAngle);\n\n        if (Math.abs(angle) > 90){\n            angle = angle + 180;\n        }\n\n        label.style.transform = 'rotate('+ angle +'deg) translate(0px, ' + offset + 'px)';\n    };\n\n    proto.destroy = function() {\n        this.materialPoint = null;\n        this.materialFace = null;\n        this.materialLine = null;\n        this.materialAngle = null;\n\n        if (av.isTouchDevice()) {\n            this.clearLabelMobileGestures();    \n        }\n\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endPoint = this.endpoints[name];\n\n                if (endPoint.label) {\n                    endPoint.label.removeEventListener(av.isSafari() ? 'mousedown' : 'pointerdown', this.onMouseClickBinded);\n                    endPoint.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                    endPoint.label.parentNode.removeChild(endPoint.label);\n                    endPoint.label = null;\n                }\n            }\n        }\n\n        this.visibleLabels = [];\n    };\n\n    proto.renderRubberbandFromPoints = function(pointData) {\n        const keys = Object.keys(pointData);\n        const intersectionPoints = [];\n        for (let i = 0; i < keys.length; i++) {\n            intersectionPoints.push(pointData[keys[i]].intersection)\n        }\n        switch (this.measurement.measurementType) {\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\n                var start = pointData[1].intersection;\n                var end = pointData[2].intersection;\n                if (start && end) {\n                    this.renderDistanceMeasurementFromPoints(start, end);\n                }\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\n                this.renderAngleMeasurementFromPoints(intersectionPoints);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\n                this.renderAreaMeasurementFromPoints(intersectionPoints);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_ARC:\n                const p1 = pointData[1].intersection;\n                const p2 = pointData[2].intersection;\n                const center = pointData[1].circularArcCenter;\n                const radius = pointData[1].circularArcRadius;\n                // Render the arc measurement from the intersection points, center and radius.\n                this.renderArcMeasurementFromPoints(p1, p2, center, radius);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_LOCATION:\n                this.renderLocationMeasurementFromPoints(intersectionPoints);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_CALLOUT:\n                this.renderCalloutMeasurementFromPoints(intersectionPoints);\n                break;\n            }\n\n    }\n\n    proto.renderRubberband = function(picks) {\n\n        switch (this.measurement.measurementType) {\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\n                var previewsPick = picks[1];\n                var activePick = picks[2];\n                var start = MeasureCommon.getSnapResultPosition(previewsPick, this.viewer);\n                var end = MeasureCommon.getSnapResultPosition(activePick, this.viewer);\n                \n                if (start && end) {\n                    this.renderDistanceMeasurement(start, end);\n                }\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\n                this.renderAngleMeasurement(picks);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\n                this.renderAreaMeasurement(picks);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_ARC:\n                var previewsPick = picks[1];\n                var activePick = picks[2];\n                \n                if (previewsPick && activePick) {\n                    this.renderArcMeasurement(previewsPick, activePick);\n                }\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_LOCATION:\n                this.renderLocationMeasurement(picks);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_CALLOUT:\n                this.renderCalloutMeasurement(picks);\n                break;\n            }\n    };\n\n    proto.initMouseEvent = function(label, pointNumber) {\n        \n        var isSafari = av.isSafari();\n        this.onMouseClickBinded = function(event) { \n            if(isSafari || event.pointerType === 'mouse'){\n                event.canvasX = event.clientX;\n                event.canvasY = event.clientY;\n                this.tool.editEndpoint(event, pointNumber, this.measurement.id); \n            }\n        }.bind(this);\n        label.addEventListener(isSafari ? 'mousedown' : 'pointerdown', this.onMouseClickBinded);         \n    };\n","    // Centroid of a polygon is the average of its points.\n    export function getCentroidOfPolygon(points) {\n        var centroid = new THREE.Vector3();\n        var n = points.length;\n\n        for (var i = 0; i < n; i++) {\n            centroid.add(points[i]);\n        }\n\n        centroid.multiplyScalar(1 / n);\n        return centroid;\n    }\n\n    // Algorithm based on https://github.com/mapbox/polylabel\n    export function getPolygonVisualCenter(polygon) {\n        function compareMax(a, b) {\n            return b.max - a.max;\n        }\n\n        function Cell(x, y, h, polygon) {\n            this.x = x; // cell center x\n            this.y = y; // cell center y\n            this.h = h; // half the cell size\n            this.d = pointToPolygonDist(x, y, polygon); // distance from cell center to polygon\n            this.max = this.d + this.h * Math.SQRT2; // max distance to polygon within a cell\n        }\n\n        // signed distance from point to polygon outline (negative if point is outside)\n        function pointToPolygonDist(x, y, polygon) {\n            var inside = false;\n            var minDistSq = Infinity;\n\n            for (var k = 0; k < polygon.length; k++) {\n                var ring = polygon[k];\n\n                for (var i = 0, len = ring.length, j = len - 1; i < len; j = i++) {\n                    var a = ring[i];\n                    var b = ring[j];\n\n                    if ((a.y > y !== b.y > y) &&\n                        (x < (b.x - a.x) * (y - a.y) / (b.y - a.y) + a.x)) inside = !inside;\n\n                    minDistSq = Math.min(minDistSq, getSegDistSq(x, y, a, b));\n                }\n            }\n\n            return (inside ? 1 : -1) * Math.sqrt(minDistSq);\n        }\n\n        // get polygon centroid\n        function getCentroidCell(polygon) {\n            var area = 0;\n            var x = 0;\n            var y = 0;\n            var points = polygon[0];\n\n            for (var i = 0, len = points.length, j = len - 1; i < len; j = i++) {\n                var a = points[i];\n                var b = points[j];\n                var f = a.x * b.y - b.x * a.y;\n                x += (a.x + b.x) * f;\n                y += (a.y + b.y) * f;\n                area += f * 3;\n            }\n            if (area === 0) return new Cell(points[0].x, points[0].y, 0, polygon);\n            return new Cell(x / area, y / area, 0, polygon);\n        }\n\n        // get squared distance from a point to a segment\n        function getSegDistSq(px, py, a, b) {\n\n            var x = a.x;\n            var y = a.y;\n            var dx = b.x - x;\n            var dy = b.y - y;\n\n            if (dx !== 0 || dy !== 0) {\n\n                var t = ((px - x) * dx + (py - y) * dy) / (dx * dx + dy * dy);\n\n                if (t > 1) {\n                    x = b.x;\n                    y = b.y;\n\n                } else if (t > 0) {\n                    x += dx * t;\n                    y += dy * t;\n                }\n            }\n\n            dx = px - x;\n            dy = py - y;\n\n            return dx * dx + dy * dy;\n        }\n\n        function TinyQueue(data, compare) {\n\n            function defaultCompare(a, b) {\n                return a < b ? -1 : a > b ? 1 : 0;\n            }\n\n            if (!(this instanceof TinyQueue)) return new TinyQueue(data, compare);\n\n            this.data = data || [];\n            this.length = this.data.length;\n            this.compare = compare || defaultCompare;\n\n            if (this.length > 0) {\n                for (var i = (this.length >> 1); i >= 0; i--) this._down(i);\n            }\n        }\n\n        TinyQueue.prototype = {\n\n            push: function (item) {\n                this.data.push(item);\n                this.length++;\n                this._up(this.length - 1);\n            },\n\n            pop: function () {\n                if (this.length === 0) return undefined;\n\n                var top = this.data[0];\n                this.length--;\n\n                if (this.length > 0) {\n                    this.data[0] = this.data[this.length];\n                    this._down(0);\n                }\n                this.data.pop();\n\n                return top;\n            },\n\n            peek: function () {\n                return this.data[0];\n            },\n\n            _up: function (pos) {\n                var data = this.data;\n                var compare = this.compare;\n                var item = data[pos];\n\n                while (pos > 0) {\n                    var parent = (pos - 1) >> 1;\n                    var current = data[parent];\n                    if (compare(item, current) >= 0) break;\n                    data[pos] = current;\n                    pos = parent;\n                }\n\n                data[pos] = item;\n            },\n\n            _down: function (pos) {\n                var data = this.data;\n                var compare = this.compare;\n                var halfLength = this.length >> 1;\n                var item = data[pos];\n\n                while (pos < halfLength) {\n                    var left = (pos << 1) + 1;\n                    var right = left + 1;\n                    var best = data[left];\n\n                    if (right < this.length && compare(data[right], best) < 0) {\n                        left = right;\n                        best = data[right];\n                    }\n                    if (compare(best, item) >= 0) break;\n\n                    data[pos] = best;\n                    pos = left;\n                }\n\n                data[pos] = item;\n            }\n        };\n\n        if (polygon.length === 3) {\n            return getCentroidOfPolygon(polygon);\n        }\n\n        var precision = 0.01;\n        polygon = [polygon];\n\n        // find the bounding box of the outer ring\n        var minX, minY, maxX, maxY;\n        for (var i = 0; i < polygon[0].length; i++) {\n            var p = polygon[0][i];\n            if (!i || p.x < minX) minX = p.x;\n            if (!i || p.y < minY) minY = p.y;\n            if (!i || p.x > maxX) maxX = p.x;\n            if (!i || p.y > maxY) maxY = p.y;\n        }\n\n        var width = maxX - minX;\n        var height = maxY - minY;\n        var cellSize = Math.min(width, height);\n        var h = cellSize / 2;\n\n        // a priority queue of cells in order of their \"potential\" (max distance to polygon)\n        var cellQueue = new TinyQueue(null, compareMax);\n\n        if (cellSize === 0) return [minX, minY];\n\n        // cover polygon with initial cells\n        for (var x = minX; x < maxX; x += cellSize) {\n            for (var y = minY; y < maxY; y += cellSize) {\n                cellQueue.push(new Cell(x + h, y + h, h, polygon));\n            }\n        }\n\n        // take centroid as the first best guess\n        var bestCell = getCentroidCell(polygon);\n\n        // special case for rectangular polygons\n        var bboxCell = new Cell(minX + width / 2, minY + height / 2, 0, polygon);\n        if (bboxCell.d > bestCell.d) bestCell = bboxCell;\n\n        while (cellQueue.length) {\n            // pick the most promising cell from the queue\n            var cell = cellQueue.pop();\n\n            // update the best cell if we found a better one\n            if (cell.d > bestCell.d) {\n                bestCell = cell;\n            }\n\n            // do not drill down further if there's no chance of a better solution\n            if (cell.max - bestCell.d <= precision) continue;\n\n            // split the cell into four cells\n            h = cell.h / 2;\n            cellQueue.push(new Cell(cell.x - h, cell.y - h, h, polygon));\n            cellQueue.push(new Cell(cell.x + h, cell.y - h, h, polygon));\n            cellQueue.push(new Cell(cell.x - h, cell.y + h, h, polygon));\n            cellQueue.push(new Cell(cell.x + h, cell.y + h, h, polygon));\n        }\n\n        return {x:bestCell.x, y:bestCell.y};\n    };\n","import { Indicator } from './Indicator'\nimport { getPolygonVisualCenter } from \"./PolygonCentroid\";\n\n    var av = Autodesk.Viewing;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    /** Color values should match Measure.css **/\n    const DEFAULT_LINE_COLOR = '009bea';\n    const X_AXIS_COLOR = \"F12C2C\";\n    const Y_AXIS_COLOR = \"0BB80B\";\n    const Z_AXIS_COLOR = \"2C2CF1\";\n    /*******************************************/\n\n    const tmpColor = new THREE.Color();\n    function numToColor(num) {\n        return tmpColor.set(num >>> 8).getHexString();\n    }\n\n    // /** @constructor */\n    export function MeasureToolIndicator( viewer, measurement, measureTool )\n    {\n        Indicator.call(this, viewer, measurement, measureTool);\n        this.measureTool = measureTool;\n        this.endpoints = [];\n        this.lines = { \n            xyz: {axis: false, material: this._createLineMaterial(DEFAULT_LINE_COLOR), className: 'adsk-icon-axis-delta' + '-xyz measure-label-axis-delta' + ' measure-label-axis-xyz'},\n            x:   {axis: true,  material: this._createLineMaterial(X_AXIS_COLOR), className: 'adsk-icon-axis-delta' + '-x measure-label-axis-delta' + ' measure-label-axis-x', iconText: 'X'},\n            y:   {axis: true,  material: this._createLineMaterial(Y_AXIS_COLOR), className: 'adsk-icon-axis-delta' + '-y measure-label-axis-delta' + ' measure-label-axis-y', iconText: 'Y'},\n            z:   {axis: true,  material: this._createLineMaterial(Z_AXIS_COLOR), className: 'adsk-icon-axis-delta' + '-z measure-label-axis-delta' + ' measure-label-axis-z', iconText: 'Z'}\n        };\n        this.applyLineColor(this.lines.xyz.material);\n        this.segments = [];\n        this.dashedLines = [];\n        this.simple = false;\n        this.angleLabel = {};\n        this.areaLabel = {};\n        this.arcLabel = {};\n        this.locationLabel = {};\n        this.calloutLabel = {};\n        this.labels = [];\n        this.isLeaflet = false;\n        this.topologyStatus = TOPOLOGY_NOT_AVAILABLE;\n        this.tmpVector = new THREE.Vector3();\n        this.surfaceColor = new THREE.MeshBasicMaterial({\n            color: parseInt(DEFAULT_LINE_COLOR, 16),\n            opacity: 0.15,\n            transparent: true,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });   \n        this.applyLineColor(this.surfaceColor);\n    }\n\n    MeasureToolIndicator.prototype = Object.create(Indicator.prototype);\n    MeasureToolIndicator.prototype.constructor = MeasureToolIndicator;\n    var proto = MeasureToolIndicator.prototype;\n\n    var _labelsSpace = 4;\n    var _angleLabelOffset = 5;\n    var TOPOLOGY_NOT_AVAILABLE = 0;\n    var TOPOLOGY_FETCHING = 1; \n    var TOPOLOGY_AVAILABLE = 2;\n    var _selectorAreaSize = 15;\n\n    var _tipHeight = 2;\n    var _tipWidth = 3;\n    var _segmentWidth = 4;\n    var _dashedSegmentWidth = 3;\n    var _axisLineWidth = 2;\n    var _dashSize = 2;\n    var _gapSize = 1;\n\n    var _angleArcWidth = 2;\n\n    function isVisible(label) {\n        return label.classList.contains('visible');\n    }\n\n    proto.init = function() {\n        this.isLeaflet = this.viewer.model.isLeaflet();\n        // Create HTML Labels\n        var currLabel;\n\n        this.onSelectionAreaClickedBinded = this.onSelectionAreaClicked.bind(this);\n\n        // Line\n        if (!this.lines.xyz.label) {\n            currLabel = this.lines.xyz.label = this.createMeasurementLabel(); // Measurement result\n            currLabel.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            currLabel.addEventListener('click', this.onSelectionAreaClickedBinded);\n            this.viewer.container.appendChild(currLabel);\n        }\n        switch (this.topologyStatus) {\n            case TOPOLOGY_FETCHING:\n                this.setFetchingTopology();\n                break;\n            case TOPOLOGY_AVAILABLE:\n                this.setTopologyAvailable();\n                break;\n            case TOPOLOGY_NOT_AVAILABLE:\n                this.setNoTopology();\n                break;\n        }\n\n        this.showMeasureResult = false;\n\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\n        this.viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n\n        this.handleButtonUpBinded = this.measureTool.handleButtonUp.bind(this.measureTool);\n        this.addWindowEventListener('mouseup', this.handleButtonUpBinded);\n    };\n\n    proto._hexToCorrectedColor = function (color) {\n        tmpColor.set(parseInt(color, 16));\n\n        // In case of a 3D viewer, manually apply gamma correction to the materials.\n        // It is needed because we are using THREE.js materials that don't get LMV's shaders.\n        // So GAMMA_INPUT & GAMMA_OUTPUT are missing in their shaders.\n        if (!this.viewer.impl.is2d) {\n          tmpColor.multiply(tmpColor);\n        }\n\n        return tmpColor;\n    }\n\n    proto._createLineMaterial = function(color) {\n        const correctedColor = this._hexToCorrectedColor(color);\n        \n        const material = new THREE.MeshBasicMaterial({\n            color: correctedColor.getHex(),\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide,\n        });\n\n        return material;\n    }\n\n    proto.createEndpoint = function(index) {\n        this.endpoints[index] = {};\n\n        // Don't render endpoints that are under the labels.\n        if (index === 2 &&\n            (this.measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_LOCATION ||\n                this.measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_CALLOUT)) {\n            return;\n        }\n\n        var currLabel = this.endpoints[index].label = this.createSnapResultLabel(index);\n        this.viewer.container.appendChild(currLabel);    \n    };\n\n    proto.applyLineColor = function(material) {\n        if (!material)\n            return;\n\n        const hasColor = this.measurement.options && this.measurement.options.format &&\n            this.measurement.options.format.TEXTCOLOR && this.measurement.options.format.TEXTCOLOR.Enabled === 'true' &&\n            this.measurement.options.format.FILLCOLOR && this.measurement.options.format.FILLCOLOR.Enabled === 'true' &&\n            this.measurement.options.format.LINECOLOR && this.measurement.options.format.LINECOLOR.Enabled === 'true';\n        const lineColor = hasColor ? numToColor(this.measurement.options.format.LINECOLOR.UIntValue) : DEFAULT_LINE_COLOR;\n        const correctedColor = this._hexToCorrectedColor(lineColor);\n\n        material.color.set(correctedColor);\n    };\n\n    proto.applyLabelColors = function(label) {\n        if (!label)\n            return;\n\n        const hasColor = this.measurement.options && this.measurement.options.format &&\n            this.measurement.options.format.TEXTCOLOR && this.measurement.options.format.TEXTCOLOR.Enabled === 'true' &&\n            this.measurement.options.format.FILLCOLOR && this.measurement.options.format.FILLCOLOR.Enabled === 'true' &&\n            this.measurement.options.format.LINECOLOR && this.measurement.options.format.LINECOLOR.Enabled === 'true';\n        const color = hasColor ? `#${numToColor(this.measurement.options.format.TEXTCOLOR.UIntValue)}` : `#${DEFAULT_LINE_COLOR}`;\n        const bg = hasColor ? `#${numToColor(this.measurement.options.format.FILLCOLOR.UIntValue)}` : '#f4f4f4';\n        label.style.color = color;\n        label.style.backgroundColor = bg;\n    };\n\nproto.updateLabelsPosition = function() {\n\n        var point,\n            xy,\n            label,\n            key;\n\n        const placeLabel = (xOff, yOff) => {\n            xy = MeasureCommon.project(point, this.viewer);\n\n            label.style.top  = (xy.y - yOff) + 'px';\n            label.style.left = (xy.x - xOff) + 'px';\n            label.point = point;\n            this.applyLabelColors(label);\n            this.labels.push(label);\n        };\n    \n        for (key in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(key)) {\n                    label = this.endpoints[key].label;\n                    point = this.endpoints[key].position;\n\n                if (label && point && isVisible(label)) {\n                    xy = MeasureCommon.project(point, this.viewer);\n\n                    placeLabel(label.getBoundingClientRect().width / 2,\n                        label.getBoundingClientRect().height / 2);\n                }\n            }\n        }\n\n        for (var name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                    label = item.label;\n\n                if (label && item.p1 && item.p2 && isVisible(label)) {\n                    \n                    item.line.visible = item.visible;\n\n                    point = { x: (item.p1.x + item.p2.x)/2, y: (item.p1.y + item.p2.y)/2, z: (item.p1.z + item.p2.z)/2 };\n                    \n                    xy = MeasureCommon.project(point, this.viewer);\n                    label.style.top  = xy.y - Math.floor(label.clientHeight / 2) + 'px';\n                    label.style.left = xy.x - Math.floor(label.clientWidth / 2) + 'px';\n\n                    if (this.viewer.model && this.viewer.model.is2d()) {\n                        var offset = item === this.lines.xyz ? 0 : label.clientHeight;\n\n                        var p1Projected = MeasureCommon.project(item.p1, this.viewer);\n                        var p2Projected = MeasureCommon.project(item.p2, this.viewer);\n\n                        if (label.clientWidth >= p1Projected.distanceTo(p2Projected) - this.endpoints[1].label.clientWidth) {\n                            if (item === this.lines.xyz) {\n                                offset = label.clientHeight;\n                            } else {\n                                // Hide all axis labels and quit the loop\n                            \n                                this.lines.x.line.visible = false;\n                                this.lines.y.line.visible = false;\n\n                                this.viewer.impl.invalidate(false, false, /*overlayDirty=*/true);\n\n                                for (name in this.lines) {\n                                    if (this.lines.hasOwnProperty(name)) {\n                                        if (this.lines[name] !== this.lines.xyz) {\n                                            var currLabel = this.lines[name].label;\n                                            if (currLabel) {\n                                                currLabel.style.opacity = 0;\n                                            }\n                                        }\n                                    }\n                                }\n\n                                break;\n                                \n                            }\n                        }\n\n                        if (item !== this.lines.xyz) {\n                            var xyzDirection = new THREE.Vector3();\n                            var itemDirection = new THREE.Vector3();\n                            xyzDirection.subVectors(this.lines.xyz.p1, this.lines.xyz.p2).normalize();\n                            itemDirection.subVectors(item.p1, item.p2).normalize();\n                            var normal = xyzDirection.cross(this.viewer.navigation.getEyeVector()).normalize();\n                            var angle = normal.dot(itemDirection);\n                            \n                            if (angle < 0) {\n                                offset = -offset;\n                            }\n                        }\n\n                        this.alignLabelWithLine(label, item.p1, item.p2, offset, this.viewer);\n                    }\n\n                    label.style.opacity = 1;\n                    label.point = point;\n                    this.applyLabelColors(label);\n                    this.labels.push(label);\n                }\n            }\n        }\n\n        if (this.angleLabel) {\n\n            label = this.angleLabel.label;\n\n            if (label && this.angleLabel.p1 && this.angleLabel.p2 && isVisible(label)) {\n                point = { x: (this.angleLabel.p1.x + this.angleLabel.p2.x)/2, y: (this.angleLabel.p1.y + this.angleLabel.p2.y)/2, z: (this.angleLabel.p1.z + this.angleLabel.p2.z)/2 };\n                xy = MeasureCommon.project(point, this.viewer, _angleLabelOffset);\n                placeLabel(Math.floor(label.clientWidth / 2), Math.floor(label.clientHeight / 2));\n            }\n        }\n\n        if(this.arcLabel) {\n            label = this.arcLabel.label;\n            offset = 0;\n\n            if (label && this.arcLabel.p1 && this.arcLabel.p2 && isVisible(label)) {\n                point = { x: (this.arcLabel.p1.x + this.arcLabel.p2.x)/2, y: (this.arcLabel.p1.y + this.arcLabel.p2.y)/2, z: (this.arcLabel.p1.z + this.arcLabel.p2.z)/2 };\n                xy = MeasureCommon.project(point, this.viewer, label.clientHeight);\n                placeLabel(Math.floor(label.clientWidth / 2), Math.floor(label.clientHeight / 2));\n\n                // Rotate the label\n                var p1Projected = MeasureCommon.project(this.arcLabel.point1Relative, this.viewer);\n                var p2Projected = MeasureCommon.project(this.arcLabel.point2Relative, this.viewer);\n\n                if (label.clientWidth >= p1Projected.distanceTo(p2Projected) - this.endpoints[1].label.clientWidth) {\n                    \n                    // you need to project midpoint and the circle center here because the offset direction logic occurs in screen coordinates\n                    var midPointProjected = MeasureCommon.project(this.arcLabel.midPointRelative, this.viewer);\n                    var centerProjected = MeasureCommon.project(new THREE.Vector3(), this.viewer);\n\n                    // Check if the midpoint position is above or below the center of the circle\n                    // Based on this, offset the label up or down to ensure it is always outside the arc\n                    if(midPointProjected.y > centerProjected.y) {\n                        offset = label.clientHeight; // offset down\n                    } else {\n                        offset = -label.clientHeight; // offset up\n                    }\n\n                }\n                this.alignLabelWithLine(label, this.arcLabel.point1Relative, this.arcLabel.point2Relative, offset, this.viewer);\n            }\n        }\n\n        if (this.locationLabel) {\n\n            label = this.locationLabel.label;\n\n            if (label && this.locationLabel.p && isVisible(label)) {\n                xy = MeasureCommon.project(this.locationLabel.p, this.viewer);\n                placeLabel(Math.floor(label.clientWidth / 2),Math.floor(label.clientHeight / 2));\n            }\n        }\n\n        if (this.calloutLabel) {\n\n            label = this.calloutLabel.label;\n\n            if (label && this.calloutLabel.p && isVisible(label)) {\n                xy = MeasureCommon.project(this.calloutLabel.p, this.viewer);\n                placeLabel(Math.floor(label.clientWidth / 2), Math.floor(label.clientHeight / 2));\n            }\n        }\n\n        if (this.areaLabel) {\n\n            label = this.areaLabel.label;\n\n            if (label && this.areaLabel.p1 && this.areaLabel.p2 && isVisible(label)) {\n                point = { x: (this.areaLabel.p1.x + this.areaLabel.p2.x)/2, y: (this.areaLabel.p1.y + this.areaLabel.p2.y)/2, z: (this.areaLabel.p1.z + this.areaLabel.p2.z)/2 };\n                xy = MeasureCommon.project(point, this.viewer);\n                placeLabel(Math.floor(label.clientWidth / 2), Math.floor(label.clientHeight / 2));\n            }\n        }\n\n        if (this.viewer.model && !this.viewer.model.is2d()) {\n    \n            var needToStackLabels = false;\n            this.labelsStacked = false;\n            var currentLabel, i;\n\n            // Backup lable's positions in case of the need of stacking them later\n            var backupPositions = [];\n            for (i = 0; i < this.labels.length; i++) {\n                backupPositions.push({left: this.labels[i].style.left, top:this.labels[i].style.top});\n            }\n\n            // Detect and move in case of overlapping.\n            for (i = 0; i < this.labels.length && !needToStackLabels; i++) {\n                currentLabel = this.labels[i];\n                needToStackLabels = this.labelsOverlapDetection(currentLabel, this.labels);\n            }\n\n            // If we found out that the labels need to be stacked, restore their positions from the backup first, and then start again.\n            if (needToStackLabels) {\n\n                for (i = 0; i < this.labels.length; i++) {\n                    this.labels[i].style.left = backupPositions[i].left;\n                    this.labels[i].style.top = backupPositions[i].top;\n                }\n\n                this.stackLabels(this.labels);\n\n                for (i = 0; i < this.labels.length; i++) {\n                    currentLabel = this.labels[i];\n                    this.labelsOverlapDetection(currentLabel, this.labels);\n                }\n            } \n        }\n\n        this.labels = [];\n        \n    };\n\n    function isLeftIntersect(current, other) {\n        return current.right >= other.left && current.right <= other.right;\n    }\n\n    function isRightIntersect(current, other) {\n        return current.left >= other.left && current.left <= other.right;\n    }\n\n    function isMiddleIntersect(current, other) {\n        return current.left <= other.left && current.right >= other.right;\n    }\n\n    function isVerticalIntersect(current, other) {\n        return current.top < other.bottom && current.bottom > other.top;\n    }\n\n    function moveLeft(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) - (currentRect.right - otherRect.left) + 'px';\n    }\n\n    function moveRight(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) + (otherRect.right - currentRect.left) + 'px';\n    }\n\n    function moveDown(currentLabel, currentRect, otherRect) {\n        currentLabel.style.top = parseInt(currentLabel.style.top, 10) + (otherRect.bottom - currentRect.top) + 'px';\n    }\n\n\n    proto.labelsOverlapDetection = function(staticLabel, labelsList) {\n\n        var needToStackLabels = false;\n\n        for (var i = 0; i < labelsList.length ; i++) {\n\n            var dynamicLabel = labelsList[i];\n            var moved = false;\n\n            if (staticLabel !== dynamicLabel) {\n                var staticRect = staticLabel.getBoundingClientRect();\n                var dynamicRect = dynamicLabel.getBoundingClientRect();\n\n                if (isVerticalIntersect(dynamicRect, staticRect)) {\n\n                    if (isLeftIntersect(dynamicRect, staticRect)) {\n                        moveLeft(dynamicLabel, dynamicRect, staticRect);\n                        moved = true;\n                    }\n                    else if (isRightIntersect(dynamicRect, staticRect)) {\n                        moveRight(dynamicLabel, dynamicRect, staticRect);\n                        moved = true;\n                    }\n                    else if (isMiddleIntersect(dynamicRect, staticRect)) {\n                        moveDown(dynamicLabel, dynamicRect, staticRect);\n                        moved = true;\n                    }\n\n                    if (moved) {\n                        var newList = labelsList.slice(0);\n                        newList.splice(newList.indexOf(staticLabel), 1);\n                        this.labelsOverlapDetection(dynamicLabel, newList);    \n                        \n                        if (dynamicLabel.causeStacking && staticLabel.causeStacking) {\n                            needToStackLabels = true;\n                        }\n\n                        // We don't want that after the labels have been stacked, only one of them will move alone.\n                        if (dynamicLabel.causeStacking && this.labelsStacked) {\n                            this.stackLabels(this.labels);\n                        }\n                    }\n                }\n            }\n        }\n\n        return needToStackLabels;\n    };\n\n    proto.stackLabels = function(labels) { \n        var topLabel = this.lines.xyz.label;\n\n        for (var i = 1; i < labels.length; i++) {\n            if (labels[i].causeStacking) {\n                labels[i].style.left = topLabel.style.left;\n            \n                var rect = labels[i-1].getBoundingClientRect();\n                var space = (labels[i-1] == topLabel) ? _labelsSpace : 0;\n                var top = (labels[i] === topLabel) ? topLabel.style.top : labels[i-1].style.top;\n                labels[i].style.top = parseInt(top, 10) + rect.height + space + 'px';\n            }\n            labels[i].style.transform = '';\n        }\n\n        this.labelsStacked = true;\n    };\n\n    proto.drawXYZLine = function(item) {\n        var self = this;\n\n        var p1 = item.p1;\n        var p2 = item.p2;\n\n        if (!p1 || !p2)\n            return;\n\n        item.line = this.drawLineSegment(p1, p2, _segmentWidth, item.material);\n\n        var tmpVec = new THREE.Vector3();\n        var geometry = item.geometry = new THREE.Geometry();\n        var point = MeasureCommon.nearestPointInPointToSegment(self.viewer.navigation.getPosition(), p1, p2);\n        var scale = self.setScale(point);\n\n        var direction;\n        const dimensionOffset = this.measurement.options && this.measurement.options.dimensionOffset;\n        if (dimensionOffset) {\n            const d1 = new THREE.Vector3(dimensionOffset[0].x, dimensionOffset[0].y, dimensionOffset[0].z);\n            const d2 = new THREE.Vector3(dimensionOffset[1].x, dimensionOffset[1].y, dimensionOffset[1].z);\n            direction = new THREE.Vector3().subVectors(p1, d1);\n            this.segments.push({ line: this.drawLineSegment(d1, p1, _segmentWidth, item.material), p1: d1, p2: p1 });\n            this.segments.push({ line: this.drawLineSegment(p2, d2, _segmentWidth, item.material), p1: p2, p2: d2});\n            p1 = d1;\n            p2 = d2;\n        } else {\n            direction = new THREE.Vector3().subVectors(p2, p1);\n        }\n        var normal = direction.cross(self.viewer.navigation.getEyeVector()).normalize();\n        item.visible = true;\n\n        this.segments.push(item);\n\n        const dashedLeader = this.measurement.options && this.measurement.options.dashedLeader;\n        if (dashedLeader) {\n            const l1 = new THREE.Vector3(dashedLeader[0].x, dashedLeader[0].y, dashedLeader[0].z);\n            const l2 = new THREE.Vector3(dashedLeader[1].x, dashedLeader[1].y, dashedLeader[1].z);\n            this.drawLineSegment(l1, l2, _segmentWidth, item.material, true);\n        }\n\n        function drawTip(p) {\n            geometry.vertices = [];\n\n            // Edge\n            tmpVec.addVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));\n            geometry.vertices[0] = tmpVec.clone();\n            tmpVec.subVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));\n            geometry.vertices[1] = tmpVec.clone();\n            var line = self.drawLineAsCylinder(geometry, item.material, _tipWidth, self.overlayName);\n            self.setCylinderScale(line, p1 ,p2);\n            line.visible = true;\n            item.tips.push(line);\n        }\n\n        if (self.showMeasureResult) {\n            item.tips = [];\n\n            drawTip(p1);\n            drawTip(p2);    \n        }        \n    };\n\n    proto.redrawDashedLine = function(dashedLine) {\n        if (!dashedLine.p1 || !dashedLine.p2)\n            return;\n\n        this.viewer.impl.removeMultipleOverlays(this.overlayName, dashedLine.line);\n        \n        var p1Scale = this.setScale(dashedLine.p2);\n        var dashSize = _dashSize * p1Scale;\n        var gapSize = _gapSize * p1Scale;\n        dashedLine.line = this.drawDashedLine(dashedLine.p2, dashedLine.p1, dashSize, gapSize, this.lines.xyz.material, _dashedSegmentWidth, this.overlayName);\n\n        return dashedLine.line;\n    };\n\n    proto.redrawDashedLines = function() {\n        this.dashedLines.forEach(this.redrawDashedLine.bind(this));\n    };\n\n    proto.drawLineSegment = function(p1, p2, width, material, isDashedLine) {\n        var line;\n\n        if (isDashedLine) {\n            const dashedLine = {};\n            dashedLine.p1 = p1;\n            dashedLine.p2 = p2;\n            this.dashedLines.push(dashedLine);\n            line = this.redrawDashedLine(dashedLine);\n        } else {\n            var geometry = new THREE.Geometry();\n            geometry.vertices.push(p1);\n            geometry.vertices.push(p2);\n            line = this.drawLineAsCylinder(geometry, material, width, this.overlayName);\n            this.setCylinderScale(line, p1, p2);\n        }\n\n        line.visible = true;\n\n        return line;\n    };\n\n    proto.drawSurface = function(points) {\n\n        const cg = Autodesk.Viewing.Extensions.CompGeom;\n\n        let cset = new cg.ContourSet();\n\n        cset.addContour(points);\n\n        cset.triangulate();\n\n        if (cset.triangulationFailed)\n            return false;\n\n        let bufferGeometry = cset.toPolygonMesh();\n\n        var face = new THREE.Mesh(bufferGeometry, this.surfaceColor);\n        this.applyLineColor(this.surfaceColor);\n    \n        this.viewer.impl.addOverlay(this.overlayName, face);\n\n        return true;\n    };\n\n    proto.drawSegmentAndPush = function(p1, p2, isDashedLine) {\n        if (!p1 || !p2) {\n            return;\n        }\n\n         var line = this.drawLineSegment(p1, p2, _segmentWidth, this.lines.xyz.material, isDashedLine);\n            \n        if (!isDashedLine) {\n            var item = { line: line, p1: p1, p2: p2 };\n            this.segments.push(item);    \n        }\n    };\n\n\n    proto.renderAreaMeasurementFromPoints = function(pickPositions) {\n        let p1, p2;\n        let firstPoint;\n\n        const points = [];\n        this.applyLineColor(this.lines.xyz.material);\n        this.applyLineColor(this.surfaceColor);\n\n        const keys = Object.keys(pickPositions);\n\n        for (var i = 0; i < keys.length - 1; i++) {\n            const key = parseFloat(keys[i]);\n            const position1 = pickPositions[key];\n            const position2 = pickPositions[key+1];\n\n            if (i === 0) {\n                firstPoint = new THREE.Vector3(position1.x, position1.y, position1.z);\n            }\n\n            p1 = new THREE.Vector3(position1.x, position1.y, position1.z);\n            p2 = new THREE.Vector3(position2.x, position2.y, position2.z);\n\n            this.drawSegmentAndPush(p1, p2);\n            points.push(p1);\n        }\n\n        if (keys.length > 2) {\n            // Draw last line\n            this.drawSegmentAndPush(firstPoint, p2, !this.measurement.closedArea);\n            \n            if(!MeasureCommon.isEqualVectors(firstPoint,p2,MeasureCommon.EPSILON)){\n                points.push(p2);\n            }\n            \n            if (this.measurement.area !== 0) {\n                //Draw surface will return false if it failed to triangulate the polygon (e.g. it has self-intersections)\n                if (this.drawSurface(points)) {\n                    this.showAreaLabel(getPolygonVisualCenter(points));\n                    this.updateArea();\n                }\n            }\n        }        \n    };\n\n    proto.renderAreaMeasurement = function(picks) {\n\n        var count = this.measurement.countPicks();\n        var p1, p2;\n\n        var points = [];\n        \n        for (var i = 1; i < count; i++) {\n            p1 = MeasureCommon.getSnapResultPosition(picks[i], this.viewer);\n            p2 = MeasureCommon.getSnapResultPosition(picks[i + 1], this.viewer);\n\n            this.drawSegmentAndPush(p1, p2);\n            points.push(p1);\n        }\n\n        if (count > 2) {\n            // Draw last line\n            p1 = MeasureCommon.getSnapResultPosition(picks[1], this.viewer);\n            this.drawSegmentAndPush(p1, p2, !this.measurement.closedArea);\n            \n            if(!MeasureCommon.isEqualVectors(p1,p2,MeasureCommon.EPSILON)){\n                points.push(p2);\n            }\n            \n            if (this.measurement.area !== 0) {\n                //Draw surface will return false if it failed to triangulate the polygon (e.g. it has self-intersections)\n                if (this.drawSurface(points)) {\n                    this.showAreaLabel(getPolygonVisualCenter(points));\n                    this.updateArea();\n                }\n            }\n        }        \n    };\n\n    proto.clearAngleMeshes = function() {\n        if (this.angleArc) {\n            this.viewer.impl.removeOverlay(this.overlayName, this.angleArc);\n            this.angleArc = null;\n        }\n        if (this.angleOutline.length > 0) {\n            this.viewer.impl.removeMultipleOverlays(this.overlayName, this.angleOutline);\n            this.angleOutline.length = 0;\n        }\n    };\n\n    proto.drawAngle = function(p, ep1, ep2, n, angle, midPoint, _radius) {\n\n        var smallNum = 0.001;\n\n        if (!this.materialAngle) {\n\n            this.materialAngle = new THREE.MeshPhongMaterial({\n                    color: 0x999999,\n                    ambient: 0x999999,\n                    opacity: 0.5,\n                    transparent: true,\n                    depthTest: false,\n                    depthWrite: false,\n                    side: THREE.DoubleSide\n                }\n            );\n\n            this.materialAngleOutline = new THREE.MeshBasicMaterial({\n                color: 0xFF9900,\n                depthTest: false,\n                depthWrite: false\n            });\n\n        }\n\n        this.applyLineColor(this.lines.xyz.material);\n        this.applyLineColor(this.surfaceColor);\n\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\n        this.clearAngleMeshes();\n\n        // draw arc of angle\n        var radius = _radius || Math.min(p.distanceTo(ep1), p.distanceTo(ep2)) / 4;\n        var segments = 100;\n        //angle = angle * Math.PI / 180;\n\n        var circleGeometry = new THREE.CircleGeometry(radius, segments, 0, angle * Math.PI / 180);\n        var arc = new THREE.Mesh(circleGeometry, this.surfaceColor);\n        this.applyLineColor(this.surfaceColor);\n\n        var center = arc.geometry.vertices[0].clone();\n        arc.geometry.vertices.push(center);\n\n\n        // Translate and rotate the arc to the plane where it should lie in\n        arc.position.set(p.x, p.y, p.z);\n        var V = arc.position.clone();\n        V.add(n);\n        arc.lookAt(V);\n        arc.updateMatrixWorld();\n\n\n        // Rotate the arc in the plane to the right place\n        var vA = arc.geometry.vertices[1].clone();\n        var vB = arc.geometry.vertices[arc.geometry.vertices.length - 2].clone();\n        vA.applyMatrix4(arc.matrixWorld);\n        vB.applyMatrix4(arc.matrixWorld);\n\n        var v1 = new THREE.Vector3();\n        var v2 = new THREE.Vector3();\n        var v3 = new THREE.Vector3();\n        var v4 = new THREE.Vector3();\n        v1.subVectors(vA, p);\n        v2.subVectors(vB, p);\n        v3.subVectors(ep1, p);\n        v4.subVectors(ep2, p);\n\n        var a13 = v1.angleTo(v3);\n        var a14 = v1.angleTo(v4);\n        var a23 = v2.angleTo(v3);\n        var a24 = v2.angleTo(v4);\n\n        //console.log(a13 * 180 / Math.PI + \" \" + a14 * 180 / Math.PI + \" \" + a23 * 180 / Math.PI + \" \" + a24 * 180 / Math.PI);\n\n        var ra;\n        // The arc is in the right place\n        if (((a13 <= smallNum && a13 >= -smallNum) || (a14 <= smallNum && a14 >= -smallNum))\n            && ((a23 <= smallNum && a23 >= -smallNum) || (a24 <= smallNum && a24 >= -smallNum))) {\n\n            ra =0;\n        }\n        // The arc needs to be rotated 180 degree to the right place\n        else if (((a13 <= Math.PI + smallNum && a13 >= Math.PI - smallNum) || (a14 <= Math.PI + smallNum && a14 >= Math.PI - smallNum))\n            && ((a23 <= Math.PI + smallNum && a23 >= Math.PI - smallNum) || (a24 <= Math.PI + smallNum && a24 >= Math.PI - smallNum))) {\n\n            ra = Math.PI;\n        }\n        // The arc needs to be rotated a13 radian\n        else if ((a13 <= a23 + smallNum && a13 >= a23 - smallNum) || (a13 <= a24 + smallNum && a13 >= a24 - smallNum)) {\n\n            ra = a13;\n        }\n        // The arc needs to be rotated a14 radian\n        else {\n\n            ra = a14;\n        }\n\n        var rotWorldMatrix = new THREE.Matrix4();\n        rotWorldMatrix.makeRotationAxis(n, ra);\n        //arc.matrix.multiply(rotWorldMatrix);\n        rotWorldMatrix.multiply(arc.matrix);\n        arc.matrix = rotWorldMatrix;\n        arc.rotation.setFromRotationMatrix(arc.matrix);\n\n        // Check if rotate to the wrong direction, if so, rotate back twice of the degree\n        arc.updateMatrixWorld();\n        vA = arc.geometry.vertices[1].clone();\n        vB = arc.geometry.vertices[arc.geometry.vertices.length - 2].clone();\n        vA.applyMatrix4(arc.matrixWorld);\n        vB.applyMatrix4(arc.matrixWorld);\n\n        v1.subVectors(vA, p);\n        v2.subVectors(vB, p);\n\n        a13 = v1.angleTo(v3);\n        a14 = v1.angleTo(v4);\n        a23 = v2.angleTo(v3);\n        a24 = v2.angleTo(v4);\n\n        //console.log(a13 * 180 / Math.PI + \" \" + a14 * 180 / Math.PI + \" \" + a23 * 180 / Math.PI + \" \" + a24 * 180 / Math.PI);\n\n        if (a13 >= smallNum && a14 >= smallNum) {\n\n            rotWorldMatrix = new THREE.Matrix4();\n            rotWorldMatrix.makeRotationAxis(n, - ra * 2);\n            //arc.matrix.multiply(rotWorldMatrix);\n            rotWorldMatrix.multiply(arc.matrix);\n            arc.matrix = rotWorldMatrix;\n            arc.rotation.setFromRotationMatrix(arc.matrix);\n        }\n\n        // draw outline of the arc\n        var outlineGeometry = new THREE.CircleGeometry(radius, segments, 0, angle * Math.PI / 180);\n        outlineGeometry.vertices.splice(0, 1);\n        arc.updateMatrixWorld();\n        outlineGeometry.applyMatrix(arc.matrixWorld);\n        this.angleOutline = this.drawEdgeAsCylinder(outlineGeometry, this.lines.xyz.material, _angleArcWidth, 0, this.getNewCylinderGeometry());\n\n        this.angleArc = arc;\n        this.viewer.impl.addOverlay(this.overlayName, this.angleArc);\n        this.viewer.impl.addMultipleOverlays(this.overlayName, this.angleOutline);\n\n        // This is used for angle label's position\n        midPoint.copy(arc.geometry.vertices[Math.round(arc.geometry.vertices.length / 2) - 1]);\n        midPoint.applyMatrix4(arc.matrixWorld);\n        if (!_radius) {\n            var dir = new THREE.Vector3();\n            dir.subVectors(midPoint, p).normalize();\n            dir.multiplyScalar(radius / 2);\n            midPoint.add(dir);\n        }\n    };\n\n    proto.createArcLabel = function() {\n        var label = this.createMeasurementLabel();\n        this.viewer.container.appendChild(label);\n        label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n        label.addEventListener('click', this.onSelectionAreaClickedBinded);\n\n        return label;\n    };\n\n    proto.clearArcMeshes = function() {\n        if(this.arcOutline && this.arcOutline.length > 0) {\n            this.viewer.impl.removeMultipleOverlays(this.overlayName, this.arcOutline);\n            this.arcOutline.length = 0;\n        }\n    };\n\n    proto.drawCircularArc = function(point1, point2, center, radius, drawTips=true) {\n        var segments = 100;\n        var edgeGeomtry = new THREE.Geometry();\n        var tmpVec = new THREE.Vector3();\n        var nearPoint = MeasureCommon.nearestPointInPointToSegment(this.viewer.navigation.getPosition(), point1, point2);\n        var scale = this.setScale(nearPoint);\n\n        var point1Relative = new THREE.Vector3();\n        point1Relative.subVectors(point1, center);\n        var startAngle = Math.atan2(point1Relative.y, point1Relative.x);\n\n        var point2Relative = new THREE.Vector3();\n        point2Relative.subVectors(point2, center);\n        var endAngle = Math.atan2(point2Relative.y, point2Relative.x);\n\n        // Set this.lines with the points to rotabte the label\n        this.arcLabel.point1Relative = point1Relative.clone();\n        this.arcLabel.point2Relative = point2Relative.clone().normalize().multiplyScalar(radius);\n\n        var arcAngle = endAngle - startAngle;\n        if(arcAngle > Math.PI) {\n            arcAngle -= 2 * Math.PI;\n        } else if (arcAngle < -Math.PI) {\n            arcAngle += 2 * Math.PI;\n        }\n\n        var circleGeometry = new THREE.CircleGeometry(radius, segments, startAngle, arcAngle);\n        var arc = new THREE.Mesh(circleGeometry, this.lines.xyz.material);\n\n        // Translate and rotate the arc to the plane where it should lie in\n        arc.position.set(center.x, center.y, center.z);\n        circleGeometry.vertices.splice(0, 1);\n\n        arc.updateMatrixWorld();\n        circleGeometry.applyMatrix(arc.matrixWorld);\n\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\n        this.clearArcMeshes();\n        this.arcOutline = this.drawEdgeAsCylinder(circleGeometry, this.lines.xyz.material, _segmentWidth, 0, this.getNewCylinderGeometry());\n\n        this.viewer.impl.addMultipleOverlays(this.overlayName, this.arcOutline);\n\n        function drawArcTip(p, normal) {\n            edgeGeomtry.vertices = [];\n\n            tmpVec.addVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));  \n            edgeGeomtry.vertices[0] = tmpVec.clone();\n\n            tmpVec.subVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));\n            edgeGeomtry.vertices[1] = tmpVec.clone();\n\n            var line = this.drawLineAsCylinder(edgeGeomtry, this.lines.xyz.material, _tipWidth, this.overlayName);\n            this.arcTip.push(line);\n        }\n        \n        // Draw arc's tip lines\n        if(drawTips) {\n            drawArcTip.call(this, point1, point1Relative.normalize());\n            drawArcTip.call(this, point2, point2Relative.normalize());\n        }\n        \n        var midPoint = new THREE.Vector3();\n\n        // Calculate midpoint position\n        var midAngle = startAngle + (arcAngle * 0.5);\n        midPoint.x = Math.cos(midAngle) * radius;\n        midPoint.y = Math.sin(midAngle) * radius;\n        this.arcLabel.midPointRelative = midPoint.clone();\n        midPoint.applyMatrix4(arc.matrixWorld);\n\n        this.showArcLabel(midPoint);\n    };\n\n    proto.renderAngleMeasurementFromPoints = function(pickPositions) {\n        var points = [];\n        \n        const keys = Object.keys(pickPositions);\n        for (var i = 0; i < keys.length; i++) {\n            const key = parseFloat(keys[i]);\n            const position = pickPositions[key];\n\n            points.push(new THREE.Vector3(position.x, position.y, position.z));\n        }\n\n        if (points.length === 3) {\n            let arcRadius;\n            const options = this.measurement.options;\n            if (options && options.offset) {\n                const o0 = new THREE.Vector3(options.offset.x, options.offset.y, options.offset.z);\n                const o1 = o0.clone().add(points[1]);\n                o0.add(points[0]);\n                this.drawSegmentAndPush(o0, o1);\n                this.drawSegmentAndPush(points[1], points[2]);\n                this.drawSegmentAndPush(points[0], o0, true);\n                this.drawSegmentAndPush(points[1], o1, true);\n                arcRadius = o1.clone().sub(o0).length();\n            } else {\n                this.drawSegmentAndPush(points[0], points[1]);\n                this.drawSegmentAndPush(points[1], points[2]);\n            }\n\n            if (this.measurement.angle) {\n                var n = new THREE.Vector3();\n                var v1 = new THREE.Vector3();\n                var v2 = new THREE.Vector3();\n                v1.subVectors(points[0], points[1]);\n                v2.subVectors(points[1], points[2]);\n                n.crossVectors(v1, v2);\n                n.normalize();\n\n                var midPoint = new THREE.Vector3();\n                this.drawAngle(points[1], points[0], points[2], n, this.measurement.angle, midPoint, arcRadius);\n                this.showAngleLabel(midPoint);\n                this.updateAngle();\n            }\n        }\n    };\n\n    proto.renderAngleMeasurement = function(picks) {\n\n        var count = this.measurement.countPicks();\n        var p1, p2;\n\n        var points = [];\n        this.applyLineColor(this.lines.xyz.material);\n        this.applyLineColor(this.surfaceColor);\n        \n        for (var i = 1; i < count; i++) {\n            p1 = MeasureCommon.getSnapResultPosition(picks[i], this.viewer);\n            p2 = MeasureCommon.getSnapResultPosition(picks[i + 1], this.viewer);\n\n            this.drawSegmentAndPush(p1, p2);\n\n            if (p1) {\n                points.push(p1);    \n            }\n        }\n\n        if (p2) {\n            points.push(p2);\n        }\n        \n        if (points.length === 3 && this.measurement.angle) {\n            var n = new THREE.Vector3();\n            var v1 = new THREE.Vector3();\n            var v2 = new THREE.Vector3();\n            v1.subVectors(points[0], points[1]);\n            v2.subVectors(points[1], points[2]);\n            n.crossVectors(v1, v2);\n            n.normalize();\n\n            var midPoint = new THREE.Vector3();\n            this.drawAngle(points[1], points[0], points[2], n, this.measurement.angle, midPoint);\n            this.showAngleLabel(midPoint);\n            this.updateAngle();\n        }        \n    };\n\n    proto.renderArcMeasurementFromPoints = function(p1, p2, center, radius) {\n        if (!p1 || !p2 || !center || !radius) {\n            return;\n        }\n        this.drawCircularArc(p1, p2, center, radius);\n        this.updateArcLength();\n    }\n\n    proto.renderArcMeasurement = function(p1, p2) {\n\n        if(!p1 || !p2 || !p1.circularArcCenter|| !p1.circularArcRadius) {\n            return;\n        }\n\n        var radius = p1.circularArcRadius;\n        var center = p1.circularArcCenter;\n        \n        var point1 = MeasureCommon.getSnapResultPosition(p1);\n        var point2 = MeasureCommon.getSnapResultPosition(p2);\n\n        const drawTips =\n            this.showMeasureResult &&\n            MeasureCommon.isEqualVectors(p1.circularArcCenter, p2.circularArcCenter, 0) &&\n            p1.circularArcRadius === p2.circularArcRadius;\n\n        this.drawCircularArc(point1, point2, center, radius, drawTips);\n        this.updateArcLength();\n        \n    };\n\n    proto.renderLocationMeasurementFromPoints = function(pickPositions) {\n        var p1 = pickPositions[1];\n        var p2 = pickPositions[2];\n        if (!p1 || !p2)\n            return;\n        \n        this.applyLineColor(this.lines.xyz.material);\n        this.drawSegmentAndPush(p1, p2);\n\n        this.showLocationLabel(p2);\n        this.updateLocation();\n    };\n\n    proto.renderLocationMeasurement = function(picks) {\n        var p1 = picks[1] && picks[1].intersection;\n        var p2 = picks[2] && picks[2].intersection;\n        if (!p1 || !p2)\n            return;\n        \n        this.applyLineColor(this.lines.xyz.material);\n        this.drawSegmentAndPush(p1, p2);\n\n        this.showLocationLabel(p2);\n        this.updateLocation();\n    };\n\n    proto.renderCalloutMeasurementFromPoints = function(pickPositions) {\n        var p1 = pickPositions[1];\n        var p2 = pickPositions[2];\n        if (!p1 || !p2)\n            return;\n\n        this.applyLineColor(this.lines.xyz.material);\n        this.drawSegmentAndPush(p1, p2);\n\n        this.showCalloutLabel(p2);\n        this.updateCallout();\n    };\n\n    proto.renderCalloutMeasurement = function(picks) {\n        var p1 = picks[1] && picks[1].intersection;\n        var p2 = picks[2] && picks[2].intersection;\n        if (!p1 || !p2)\n            return;\n        \n        this.applyLineColor(this.lines.xyz.material);\n        this.drawSegmentAndPush(p1, p2);\n\n        this.showCalloutLabel(p2);\n        this.updateCallout();\n    };\n\n    proto.createDistanceLabel = function(item) {\n        var label = item.label = this.createMeasurementLabel();\n        \n        setVisibilityMeasurementLabelText(label, item === this.lines.xyz);\n\n        const _document = this.getDocument();\n        // Override main label when displaying only an axis label (X, Y or Z)\n        if (item.axis) {\n            label.className = item.className;\n            var axisIcon = _document.createElement('div');\n            axisIcon.className = 'measure-label-axis-icon ' + item.iconText;\n            axisIcon.innerText = item.iconText;\n            label.insertBefore(axisIcon, label.firstChild);\n\n            if (!av.isMobileDevice()) {\n                MeasureCommon.safeToggle(label, 'enableTransition', true);\n            }\n        }\n\n        this.viewer.container.appendChild(label);\n\n        return label;\n    };\n\n    proto.updateLine = function(item, x1, y1, z1, x2, y2, z2, showAxis) {\n        this.applyLineColor(this.lines.xyz.material);\n\n        var line = item.line,\n            label = item.label,\n            p1 = new THREE.Vector3(x1, y1, z1),\n            p2 = new THREE.Vector3(x2, y2, z2);\n\n        // Swap points if needed to have consistent axis directions.\n        var tmpVec;\n        if (item === this.lines.x && p2.x > p1.x) {\n            tmpVec = p1.clone();\n            p1 = p2.clone();\n            p2 = tmpVec.clone();\n        } \n        else if (item === this.lines.y && p2.y > p1.y) {\n            tmpVec = p1.clone();\n            p1 = p2.clone();\n            p2 = tmpVec.clone();\n        } \n        else if (item === this.lines.z && p2.z > p1.z) {\n            tmpVec = p1.clone();\n            p1 = p2.clone();\n            p2 = tmpVec.clone();\n        }\n\n        item.line = null;            \n\n        if (!label) {\n            label = this.createDistanceLabel(item);\n        }\n        else {\n            this.hideLabel(label);\n        }\n        \n        if (((this.isLeaflet && item !== this.lines.z) || (p1.distanceTo(p2) >= MeasureCommon.EPSILON)) && showAxis) {\n\n            item.p1 = p1;\n            item.p2 = p2;\n\n            if (item === this.lines.xyz) {\n                this.drawXYZLine(item);\n                this.showLabel(label);\n                this.updateDistance();\n            }\n            else {\n                line = item.line = this.drawLineSegment(p1, p2, _axisLineWidth, item.material);\n                var show = !this.simple && this.showMeasureResult;\n\n                line.visible = show;\n                item.visible = show;\n\n                if (show) {\n                    this.showLabel(label);\n                }\n                else {\n                    this.hideLabel(label);\n                }\n            }\n        }\n    }\n\n    // Draw distance measurement\n    proto.renderDistanceMeasurementFromPoints = function(p1, p2) {\n\n        this.updateLine(this.lines.xyz, p1.x, p1.y, p1.z, p2.x, p2.y, p2.z, true);\n\n        var up = this.viewer.navigation.getAlignedUpVector(),\n            x = Math.abs(up.x),\n            y = Math.abs(up.y),\n            z = Math.abs(up.z);\n\n        var showAxis = false;\n\n        if (z > x && z > y) { // z up\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            this.updateLine(this.lines.y, p2.x, p1.y, p1.z, p2.x, p2.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p2.x, p2.y, p1.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else if (y > x && y > z) { // y up\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p2.x, p1.y, p1.z, p2.x, p1.y, p2.z, showAxis);\n            this.updateLine(this.lines.y, p2.x, p1.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else { // x up - do we ever see this?\n            this.updateLine(this.lines.y, p1.x, p1.y, p1.z, p1.x, p2.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p1.x, p2.y, p1.z, p1.x, p2.y, p2.z, showAxis);\n            this.updateLine(this.lines.x, p1.x, p2.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n        }\n\n    };\n\n    // Draw distance measurement\n    proto.renderDistanceMeasurement = function(p1, p2)\n    {\n        var self = this;\n\n        // If the line aligns with one of axis, then don't show axis\n        function displayAxis(p1, p2) {\n            self.tmpVector.subVectors(p1, p2);\n            self.tmpVector.normalize();\n\n            return !MeasureCommon.isParallel(self.tmpVector, self.xAxis) && !MeasureCommon.isParallel(self.tmpVector, self.yAxis) && !MeasureCommon.isParallel(self.tmpVector, self.zAxis);\n        }\n\n        this.updateLine(this.lines.xyz, p1.x, p1.y, p1.z, p2.x, p2.y, p2.z, true);\n\n        var up = this.viewer.navigation.getAlignedUpVector(),\n            x = Math.abs(up.x),\n            y = Math.abs(up.y),\n            z = Math.abs(up.z);\n\n        var showAxis = displayAxis(p1, p2);\n\n        if (z > x && z > y) { // z up\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            this.updateLine(this.lines.y, p2.x, p1.y, p1.z, p2.x, p2.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p2.x, p2.y, p1.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else if (y > x && y > z) { // y up\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p2.x, p1.y, p1.z, p2.x, p1.y, p2.z, showAxis);\n            this.updateLine(this.lines.y, p2.x, p1.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else { // x up - do we ever see this?\n            this.updateLine(this.lines.y, p1.x, p1.y, p1.z, p1.x, p2.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p1.x, p2.y, p1.z, p1.x, p2.y, p2.z, showAxis);\n            this.updateLine(this.lines.x, p1.x, p2.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n        }\n\n    };\n\n    proto.updateResults = function() {\n        this.updateDistance();\n        this.updateAngle();\n        this.updateArea();\n        this.updateArcLength();\n        \n        setTimeout(function(){\n            // This can get called after the viewer is unloaded\n            if (this.viewer.impl)\n                this.updateLabelsPosition();\n        }.bind(this), 0);\n    };\n\n    // Update distance measurement label\n    proto.updateDistance = function() {\n\n        function setWidth(label, value) {\n            if (!label) return;\n            label.style.width = value;\n        }\n\n        function getWidth(label) {\n            return label ? label.clientWidth : 0;\n        }\n\n        Object.keys(this.lines).forEach(function(name) {\n            setWidth(this.lines[name].label, '');\n        }.bind(this));\n        \n        setDeltaMeasurementLabelText(this.lines.x.label, \"~ \" + this.measureTool.getDistanceX(this.measurement));\n        setDeltaMeasurementLabelText(this.lines.y.label, \"~ \" + this.measureTool.getDistanceY(this.measurement));\n        setDeltaMeasurementLabelText(this.lines.z.label, \"~ \" + this.measureTool.getDistanceZ(this.measurement));\n        setValueMeasurementLabelText(this.lines.xyz.label, \"~ \" + this.measureTool.getDistanceXYZ(this.measurement));\n\n        if (this.viewer.model && this.viewer.model.is3d()) {\n            setTimeout(function(){\n                var maxWidth = Math.max(getWidth(this.lines.x.label), getWidth(this.lines.y.label), getWidth(this.lines.z.label), getWidth(this.lines.xyz.label));                \n                Object.keys(this.lines).forEach(function(name) {\n                    setWidth(this.lines[name].label, maxWidth + 'px');\n                }.bind(this));\n            }.bind(this), 0);\n        }\n    };\n\n    // Update angle measurement label\n    proto.updateAngle = function() {\n        setValueMeasurementLabelText(this.angleLabel.label, \"~ \" + this.measureTool.getAngle(this.measurement));\n    };\n\n    // Update location measurement label\n    proto.updateLocation = function() {\n        setValueMeasurementLabelText(this.locationLabel.label,\n            (\"~ \" + this.measureTool.getLocation(this.measurement)).split('\\n').join('\\n~ '));\n    };\n\n    // Update callout measurement label\n    proto.updateCallout = function() {\n        setValueMeasurementLabelCallout(this.calloutLabel.label, this.measureTool.getCallout(this.measurement));\n    };\n\n    // Update area measurement label\n    proto.updateArea = function() {\n        setValueMeasurementLabelText(this.areaLabel.label, \"~ \" + this.measureTool.getArea(this.measurement));\n    };\n\n    // Update arc measurement label\n    proto.updateArcLength = function() {\n        setValueMeasurementLabelText(this.arcLabel.label, \"~ \" + this.measureTool.getArc(this.measurement));\n    };\n\n    // Set if collapse or expand the xyz delta distance\n    proto.setSimple = function(simple) {\n        if (this.simple != simple) {\n            this.simple = simple;\n\n            var isVisible = !simple;\n            this.setLineVisible(this.lines.x, isVisible);\n            this.setLineVisible(this.lines.y, isVisible);\n            this.setLineVisible(this.lines.z, isVisible);\n\n            this.updateLabelsPosition();\n\n            this.viewer.impl.invalidate(false, false, /*overlayDirty=*/true);\n        }\n    };\n\n    proto.setLineVisible = function(item, isVisible) {\n        if (item.line) {\n            item.line.visible = isVisible;\n            item.visible = isVisible;\n\n            if (item.label) {\n                if (isVisible) {\n                    this.showLabel(item.label);\n                }\n                else {\n                    this.hideLabel(item.label);\n                    item.label.style.opacity = 0;\n                }\n            }\n        }\n    };\n\n    proto.enableLabelsTouchEvents = function(enable) {\n        var value = enable ? 'all' : 'none';\n\n        if (this.lines.xyz.label) {\n            this.lines.xyz.label.style.pointerEvents = value;   \n        }\n\n        if (this.angleLabel.label) {\n            this.angleLabel.label.style.pointerEvents = value;   \n        }\n\n        if (this.areaLabel.label) {\n            this.areaLabel.label.style.pointerEvents = value;\n        }\n\n        if (this.arcLabel.label) {\n            this.arcLabel.label.style.pointerEvents = value;\n        }\n    };\n\n    proto.setLabelsZIndex = function(zIndex) {\n        for (var name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.label) {\n                    item.label.style.zIndex = zIndex;\n                }\n            }\n        }\n\n        if (this.angleLabel && this.angleLabel.label) {\n            this.angleLabel.label.style.zIndex = zIndex;    \n        }\n\n        if (this.locationLabel && this.locationLabel.label) {\n            this.locationLabel.label.style.zIndex = zIndex;    \n        }\n\n        if (this.calloutLabel && this.calloutLabel.label) {\n            this.calloutLabel.label.style.zIndex = zIndex;    \n        }\n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.areaLabel.label.style.zIndex = zIndex;    \n        }\n\n        if (this.arcLabel && this.arcLabel.label) {\n            this.arcLabel.label.style.zIndex = zIndex;    \n        }\n\n        for (name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endpoint = this.endpoints[name];\n                if (endpoint.label) {\n                    endpoint.label.style.zIndex = zIndex - 1;\n                }\n            }\n        }\n    };\n\n    proto.focusLabels = function() {\n        this.setLabelsZIndex(3);\n    };\n\n    proto.unfocusLabels = function() {\n        this.setLabelsZIndex(2);\n    };\n\n    proto.clear = function() {\n        var name;\n\n        for (name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endpoint = this.endpoints[name];\n                if (endpoint.label) {\n                    this.hideLabel(endpoint.label);\n                }\n            }\n        }\n\n        for (name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.line) {\n                    item.line.visible = false;\n                    item.visible = false;\n\n                    item.tips && item.tips.forEach(function(tip) {\n                        tip.visible = false;\n                    });\n                }\n                if (item.label) {\n                    this.hideLabel(item.label);\n                    item.label.style.opacity = 0;\n                    item.label.style.zIndex = 2;\n                }\n            }\n        }\n\n        if (this.angleLabel && this.angleLabel.label) {\n            this.hideLabel(this.angleLabel.label);\n        }\n\n        if (this.locationLabel && this.locationLabel.label) {\n            this.hideLabel(this.locationLabel.label);\n        }\n\n        if (this.calloutLabel && this.calloutLabel.label) {\n            this.hideLabel(this.calloutLabel.label);\n        }\n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.hideLabel(this.areaLabel.label);\n        }\n\n        if (this.arcLabel && this.arcLabel.label) {\n          this.hideLabel(this.arcLabel.label);\n        }\n        \n        this.clearSelectionAreas();\n\n        this.segments = [];\n        this.dashedLines = [];\n\n        this.viewer.impl.clearOverlay(this.overlayName);\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\n    };\n\n    proto.hideClick = function(pickNumber) {\n\n        Indicator.prototype.hideClick.call(this, pickNumber);\n\n        for (var name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.line) {\n                    item.line.visible = false;\n                    item.visible = false;\n\n                    item.tips && item.tips.forEach(function(tip) {\n                        tip.visible = false;\n                    });\n                }\n                if (item.label) {\n                    this.hideLabel(item.label);\n                    item.label.style.opacity = 0;\n                }\n            }\n        }\n\n        if (this.angleLabel && this.angleLabel.label) {\n            this.hideLabel(this.angleLabel.label);\n        }\n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.hideLabel(this.areaLabel.label);\n        }\n\n        if (this.arcLabel && this.arcLabel.label) {\n            this.hideLabel(this.arcLabel.label);\n        }\n\n        this.enableSelectionAreas(item.selectionArea, false);\n    };\n\n    proto.destroy = function() {\n        var name;\n\n        Indicator.prototype.destroy.call(this);\n\n        for (name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.line) {\n                    this.viewer.impl.clearOverlay(self.overlayName);\n                    item.material = item.line = item.geometry = null;\n                }\n\n                if (item.label) {\n                    if (name === 'xyz') {\n                        item.label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                        item.label.removeEventListener('click', this.onSelectionAreaClickedBinded);    \n                    }\n\n                    item.label.parentNode.removeChild(item.label);\n                    item.label = null;\n                }\n                item.material = item.line = item.geometry = item.label = item.p1 = item.p2 = null;\n            }\n        }\n\n        this.clearAngleMeshes();\n        \n        if (this.angleLabel && this.angleLabel.label) {\n            this.angleLabel.label.parentNode.removeChild(this.angleLabel.label);\n            this.angleLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            this.angleLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\n             this.angleLabel.label = this.angleLabel.p1 = this.angleLabel.p2 = null;\n        }\n\n        \n        this.clearArcMeshes();\n\n        if (this.arcLabel && this.arcLabel.label) {\n            this.arcLabel.label.parentNode.removeChild(this.arcLabel.label);\n            this.arcLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            this.arcLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\n            this.arcLabel.label = this.arcLabel.midPoint = null;\n        }\n\n\n        if (this.locationLabel && this.locationLabel.label) {\n            this.locationLabel.label.parentNode.removeChild(this.locationLabel.label);\n            this.locationLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            //this.locationLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\n             this.locationLabel.label = this.locationLabel.p = null;\n        }\n\n        \n        if (this.calloutLabel && this.calloutLabel.label) {\n            this.calloutLabel.label.parentNode.removeChild(this.calloutLabel.label);\n            this.calloutLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            //this.calloutLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\n             this.calloutLabel.label = this.calloutLabel.p = null;\n        }\n\n        \n        if (this.areaLabel && this.areaLabel.label) {\n            this.areaLabel.label.parentNode.removeChild(this.areaLabel.label);\n            this.areaLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            this.areaLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\n            this.areaLabel.label = this.areaLabel.p1 = this.areaLabel.p2 = null;\n        }\n        \n        \n\n        if (this.viewer.impl.overlayScenes[this.overlayName]){\n            this.viewer.impl.removeOverlayScene(this.overlayName);\n        }\n\n        this.viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n        this.removeWindowEventListener('mouseup', this.handleButtonUpBinded);\n    };\n\n    proto.clearXYZLine = function() {\n        this.viewer.impl.removeOverlay(this.overlayName, this.lines.xyz.line);\n\n        this.lines.xyz.tips && this.lines.xyz.tips.forEach(function(tip) {\n            this.viewer.impl.removeOverlay(this.overlayName, tip);\n        }.bind(this));\n    };\n\n    // Update scale for vertex, edge, line and extension dash line\n    proto.updateScale = function() {\n        var name;\n\n        this.angleOutline.forEach(cylinderMesh => this.setCylinderScale(cylinderMesh));\n\n        this.arcOutline.forEach(cylinderMesh => this.setCylinderScale(cylinderMesh));        \n        \n        for (name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.line && item !== this.lines.xyz) {\n                    this.setCylinderScale(item.line, item.p1, item.p2);\n                }\n            }\n        }\n        \n        for (name in this.segments) {\n            if (this.segments.hasOwnProperty(name)) {\n                var segment = this.segments[name];\n                if (segment.line) {\n                    this.setCylinderScale(segment.line, segment.p1, segment.p2);\n                } \n            }\n        }\n        \n        if (this.measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE) {\n            if (this.measurement.isComplete()) {\n                this.clearXYZLine();\n                this.drawXYZLine(this.lines.xyz);\n            }\n        }\n\n        if (this.measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ARC) {\n            this.arcTip.forEach(cylinderMesh => \n            {\n                var scale = this.setScale(cylinderMesh.position);\n                if (cylinderMesh.hasOwnProperty(\"lmv_line_width\")) {\n                    var scaleXZ = scale * cylinderMesh.lmv_line_width;\n                    cylinderMesh.scale.x = scaleXZ;\n                    cylinderMesh.scale.z = scaleXZ;\n                }\n                var scaleY = scale * (2 * _tipHeight);\n                cylinderMesh.scale.y = scaleY;\n            });\n        }\n    };\n\n    proto.setNoTopology = function(){\n        this.topologyStatus = TOPOLOGY_NOT_AVAILABLE;\n        if (this.lines.xyz.label) {\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, false, this.topologyStatus);\n            this.lines.xyz.label.classList.remove('fetching-topology');\n        }\n    };\n    proto.setFetchingTopology = function() {\n        this.topologyStatus = TOPOLOGY_FETCHING;\n        if (this.lines.xyz.label) {\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, true, this.topologyStatus);\n                this.lines.xyz.label.classList.add('fetching-topology');\n        }\n    };\n    proto.setTopologyAvailable = function() {\n        this.topologyStatus = TOPOLOGY_AVAILABLE;\n        if (this.lines.xyz.label) {\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, false, this.topologyStatus);\n            this.lines.xyz.label.classList.remove('fetching-topology');\n        }\n    };\n\n    proto.createMeasurementLabel = function() {\n      \n        const _document = this.getDocument();\n\n        var label = _document.createElement('div');\n        label.className = 'measure-length';\n        \n        var spinner = _document.createElement('div');\n        spinner.className = 'measure-fetching-topology';\n        spinner.style.display = 'none';\n        label.appendChild(spinner);\n\n        var text = _document.createElement('div');\n        text.className = 'measure-length-text';\n        label.appendChild(text);    \n\n        var delta = _document.createElement('div');\n        delta.className = 'measure-delta-text';\n        label.appendChild(delta);\n\n        label.causeStacking = true;\n        \n        if (!av.isMobileDevice()) {\n            MeasureCommon.safeToggle(label, 'enable-hover', true);\n        }\n\n        return label;\n    };\n\n    // Receives an object created with createMeasurementLabel()\n    function setVisibilityMeasurementLabelText(label, isVisible) {\n        var div = label.querySelector('.measure-length-text');\n        div && (div.style.display = isVisible ? '' : 'none');\n    }\n\n    // Receives an object created with createMeasurementLabel()\n    function setValueMeasurementLabelText(label, strValue) {\n        if (!label) return;\n        var div = label.querySelector('.measure-length-text');\n        div && (div.textContent = strValue);\n    }\n\n    // Escape special characters in HTML and convert \\n to <br>\n    function escapeHtml(str) {\n        return str\n             .replace(/&/g, \"&amp;\")\n             .replace(/</g, \"&lt;\")\n             .replace(/>/g, \"&gt;\")\n             .replace(/\"/g, \"&quot;\")\n             .replace(/'/g, \"&#039;\")\n             .replace(/\\n/g, '<br>');\n    }\n\n    // Create a space with formatting from format\n    function createSpan(format) {\n        // If format is a string, no formatting - just return the escaped string\n        if (typeof format === 'string')\n            return escapeHtml(format);\n\n        // Build the style parameters for font-size and font-weight\n        let space = '';\n        let fontSize = format.fontSize;\n        if (format.fontSize !== undefined && format.fontSize !== 10) {\n            // Base the fontSize on 10 === 100% which is ADRs default\n            // LMV uses 12 as the default.\n            fontSize = `font-size: ${0 | (fontSize * 10)}%;`;\n            space = ' ';    // Put a space between font-size and bold\n        } else\n            fontSize = '';\n        let bold = format.bold;\n        if (bold !== undefined)\n            bold = `${space}font-weight: ${bold ? 'bold' : 'normal'};`;\n        else\n            bold = '';\n        // Escape the string.\n        const str = escapeHtml(format.text);\n        // Include bold and fontSize styles if present.\n        if (bold || fontSize)\n            return `<span style=\"${fontSize}${bold}\">${str}</span>`;\n        // return escaped string if no formatting\n        return str;\n    }\n\n    function setValueMeasurementLabelCallout(label, calloutValue) {\n        // If the calloutValue is just a string, then set it as text.\n        if (typeof calloutValue === 'string') {\n            setValueMeasurementLabelText(label, calloutValue);\n            return;\n        }\n\n        var div = label.querySelector('.measure-length-text');\n        if (div) {\n            // construct and set the html for the callout.\n            if (!Array.isArray(calloutValue))\n                div.innerHTML = createSpan(calloutValue);\n            else\n                div.innerHTML = calloutValue.map(createSpan).join('');\n        }\n    }\n\n    // Receives an object created with createMeasurementLabel()\n    function setDeltaMeasurementLabelText(label, strValue) {\n        if (!label) return;\n        var div = label.querySelector('.measure-delta-text');\n        div && (div.textContent = strValue);\n    }\n\n    // Receives an object created with createMeasurementLabel()\n    function setVisibilityMeasurementLabelSpinner(label, isVisible, topologyStatus) {\n        if (!label) return;\n        var div = label.querySelector('.measure-fetching-topology');\n        div && (div.style.display = \n            (isVisible && topologyStatus === TOPOLOGY_FETCHING) ? 'inline-block' : 'none');\n    }\n\n    /**\n     * Helper function that creates the label used for (1) and (2),\n     * which are the 2 mouse clicks for the measurement.\n     */\n    proto.createSnapResultLabel = function(pointNumber) {\n        const _document = this.getDocument();\n\n        var label = _document.createElement('div');\n        label.className = 'measure-label';\n\n        var label_icon = _document.createElement('div');\n        label_icon.className = 'measure-label-icon';\n        label.appendChild(label_icon);\n\n        if (av.isTouchDevice()) {\n            this.initLabelMobileGestures(label, pointNumber, this.measureTool);\n            var hitArea = _document.createElement('div');\n            hitArea.className = 'measure-label-hit-area';\n            label.appendChild(hitArea);                      \n        } \n         \n        if (!av.isMobileDevice()) {\n            this.initMouseEvent(label, pointNumber);\n\n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            MeasureCommon.safeToggle(label, 'enable-hover', true);  \n        }\n        \n \n        label.causeStacking = false;\n        \n        return label;\n    };\n\n    proto.showAngleLabel = function(midPoint) {\n\n            var label = this.angleLabel.label;\n\n            if (!label) {\n                label = this.angleLabel.label = this.createMeasurementLabel();\n                this.viewer.container.appendChild(label);\n                label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                label.addEventListener('click', this.onSelectionAreaClickedBinded);\n            }\n\n            this.updateAngle();\n            this.showLabel(label);\n\n            this.angleLabel.p1 = midPoint.clone();\n            this.angleLabel.p2 = midPoint.clone();\n\n    };\n\n    proto.showArcLabel  = function(midPoint) {\n\n        var label = this.arcLabel.label;\n\n        if (!label) {\n            this.arcLabel.label = label = this.createArcLabel();\n        }\n        else {\n            this.hideLabel(label);\n        }\n        this.updateArcLength();\n        this.showLabel(label);\n\n        this.arcLabel.p1 = midPoint.clone();\n        this.arcLabel.p2 = midPoint.clone();\n\n    };\n\n    proto.showLocationLabel = function(p) {\n\n        var label = this.locationLabel.label;\n\n        if (!label) {\n            label = this.locationLabel.label = this.createMeasurementLabel();\n            label.style.whiteSpace = 'pre-line';\n            label.style.height = 'auto';\n            label.style.textAlign = 'start';\n            label.querySelector('.measure-delta-text').style.display = 'none';\n            this.viewer.container.appendChild(label);\n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            //label.addEventListener('click', this.onSelectionAreaClickedBinded);\n        }\n\n        this.updateLocation();\n        this.showLabel(label);\n\n        this.locationLabel.p = p.clone();\n\n    };\n\n    proto.showCalloutLabel = function(p) {\n\n        var label = this.calloutLabel.label;\n\n        if (!label) {\n            label = this.calloutLabel.label = this.createMeasurementLabel();\n            label.style.whiteSpace = 'pre-line';\n            label.style.height = 'auto';\n            label.style.textAlign = 'start';\n            if (this.measurement.options && this.measurement.options.width)\n                label.style.width = this.measurement.options.width + 'px';\n            label.querySelector('.measure-delta-text').style.display = 'none';\n            this.viewer.container.appendChild(label);\n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            //label.addEventListener('click', this.onSelectionAreaClickedBinded);\n        }\n\n        this.updateCallout();\n        this.showLabel(label);\n\n        this.calloutLabel.p = p.clone();\n\n    };\n\n    proto.showAreaLabel = function(midPoint) {\n\n            var label = this.areaLabel.label;\n\n            if (!label) {\n                label = this.areaLabel.label = this.createMeasurementLabel();\n                this.viewer.container.appendChild(label);\n                label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                label.addEventListener('click', this.onSelectionAreaClickedBinded);\n            }\n\n            this.updateArea();\n            this.showLabel(label);\n\n            this.areaLabel.p1 = midPoint;\n            this.areaLabel.p2 = midPoint;\n\n    };\n\n    proto.onSelectionAreaClicked = function() {\n        this.measureTool.selectMeasurementById(this.measurement.id);\n    };\n\n    proto.createSelectionArea = function() {\n        const _document = this.getDocument();\n        var selectionArea = _document.createElement('div');\n        selectionArea.id = 'measurement-selection-area-' + this.measurement.id;\n        this.viewer.container.appendChild(selectionArea);\n        selectionArea.className = 'measure-selection-area';\n        selectionArea.style.display = 'none';\n        selectionArea.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n        selectionArea.addEventListener('click', this.onSelectionAreaClickedBinded);\n        return selectionArea;\n    };\n\n    proto.updateSelectionArea = function() {\n\n        this.segments.forEach(function(item) \n        {\n            if (item.p1 && item.p2) {\n                var p1 = MeasureCommon.project(item.p1, this.viewer);\n                var p2 = MeasureCommon.project(item.p2, this.viewer);\n\n                if (!item.selectionArea) {\n                    item.selectionArea = this.createSelectionArea();\n                }\n\n                var selectionArea = item.selectionArea;\n\n                var v = new THREE.Vector2();\n\n                selectionArea.style.top = (p1.y - (_selectorAreaSize / 2)) + 'px';\n                selectionArea.style.left = p1.x  + 'px';\n                selectionArea.style.width = v.subVectors(p1, p2).length() + 'px';\n                selectionArea.style.height = _selectorAreaSize + 'px';\n\n                var angle = null;\n                var deltaX = p1.x - p2.x;\n                var deltaY = p1.y - p2.y;\n\n                angle =  Math.atan2(-deltaY , -deltaX) * 180 / Math.PI;    \n\n                selectionArea.style.transform = 'rotate('+ angle +'deg)';\n                selectionArea.style.transformOrigin = '0px ' + (_selectorAreaSize / 2) + 'px';\n            }\n        }.bind(this));\n\n        if (this.measureTool.areAllPicksSet()) {\n            this.enableSelectionAreas(true);    \n        }\n    };\n\n    proto.clearSelectionAreas = function() {\n        const _document = this.getDocument();\n        this.segments.forEach(function(item) \n        {  \n            if (item.selectionArea) {\n                item.selectionArea.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                item.selectionArea.removeEventListener('click', this.onSelectionAreaClickedBinded);\n                var element = _document.getElementById('measurement-selection-area-' + this.measurement.id);\n                if (element) {\n                    element.parentNode.removeChild(element);\n                }\n                item.selectionArea = null;\n            }\n        }.bind(this));\n    };\n\n    proto.enableSelectionAreas = function(enable) {\n        this.segments.forEach(function(item) \n        {   \n            if (item.selectionArea) {\n                if (enable) {\n                    item.selectionArea.style.display = 'block';\n                } \n                else {\n                    item.selectionArea.style.display = 'none';\n                }\n            }\n        }.bind(this));\n    };\n\n    proto.render = function(picks, showMeasureResult) {\n        Indicator.prototype.render.call(this, picks, showMeasureResult);\n\n        this.updateSelectionArea();\n    };\n\n    proto.renderFromPoints = function(pointData, showMeasureResult) {\n        Indicator.prototype.renderFromPoints.call(this, pointData, showMeasureResult);\n\n        this.updateSelectionArea();\n    }\n\n    proto.onCameraChange = function() {\n        this.redrawDashedLines();\n        this.updateSelectionArea();\n        this.hideLabelsOutsideOfView();\n        this.updateLabelsPosition();\n    };\n\n    proto.handleResize = function() {\n        this.redrawDashedLines();\n        this.updateSelectionArea();\n        this.updateLabelsPosition();\n    };\n\n","import { MeasurementsManager } from './MeasurementsManager'\nimport { MeasureToolIndicator } from './MeasureToolIndicator'\n\nconst av = Autodesk.Viewing;\n\n//\n// /** @constructor */\n//\n//\nexport function MeasureTool( viewer, options, sharedMeasureConfig, snapper )\n{\n    var _viewer  = viewer;\n    var _options = options || {};\n    var _names  = [\"measure\"];\n    var _priority = 50;\n\n    this.setGlobalManager(viewer.globalManager);\n\n    // Shared State with CalibrationTool and Indicator\n    var _sharedMeasureConfig = sharedMeasureConfig;\n\n    var av = Autodesk.Viewing;\n    var avem = Autodesk.Viewing.Extensions.Measure;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n    \n    // Not shared with Indicator.js\n    var _active = false;\n    var _isDragging = false;\n    var _endpointMoved = false;\n    var _activePoint = 0;\n    var _consumeSingleClick = false;\n    var _singleClickHandled = false;\n    var _downX = null;\n    var _downY = null;\n    var _isolateMeasure = false;\n\n    var _measurementsManager = new MeasurementsManager(_viewer);\n    var _currentMeasurement = null;\n    var _onIndicatorCreatedCB = null;\n    var _fetchingMeasurements = [];\n    var _prevMeasurement = null;\n    var _useLastViewport = false;\n\n    var _cursor = \"url(data:image/png;base64,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), auto\";\n\n    // Snapper\n    var _snapper = snapper;\n    \n    var _isPressing = false;\n\n    var _picksBackup = [];\n    var _cursorPosition = null;\n\n    var _closeAreaSnapRange = 25;\n    var _preMeasureState = null;\n\n    var _measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\n\n    var _sessionMeasurements = null;\n\n    function getActivePick()\n    {   \n        if(!_currentMeasurement)\n            return null;\n\n        var index;\n\n        if (_activePoint === 0) {\n            return null;\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n            index = _currentMeasurement.countPicks();\n        } else {\n               index = _activePoint;\n        }\n\n        return _currentMeasurement.getPick(index);\n    }\n\n    function getPreviousPick()\n    {\n        if(!_currentMeasurement)\n            return null;\n\n        var index;\n\n        if (_activePoint === 0) {\n            return null;\n        } else if (_activePoint === 1) {\n            index = _currentMeasurement.countPicks();\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n            index = _currentMeasurement.countPicks() - 1;\n        } else {\n            index = _activePoint - 1;\n        }\n        \n        return _currentMeasurement.getPick(index);\n    }\n\n    function hasPreviousPick()\n    {\n        if(!_currentMeasurement)\n            return false;\n\n        var index;\n\n        if (_activePoint === 0) {\n            return false;\n        } else if (_activePoint === 1) {\n            index = _currentMeasurement.countPicks();\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n            index = _currentMeasurement.countPicks() - 1;\n        } else {\n            index = _activePoint - 1;\n        }\n        \n        return _currentMeasurement.hasPick(index);\n    }\n\n    function noPicksSet() {\n        _activePoint = 0;\n    }\n\n    function allPicksSet() {\n        _activePoint = _currentMeasurement.countPicks() + 1;\n        enableMeasurementsTouchEvents(true);\n        _currentMeasurement.indicator.enableSelectionAreas(true);\n        \n        // Keep track of the previous measurement\n        _prevMeasurement = _currentMeasurement.clone();\n        _viewer.dispatchEvent({\n            type: MeasureCommon.Events.MEASUREMENT_COMPLETED_EVENT,\n            data: { type: _currentMeasurement.measurementType, id: _currentMeasurement.id }\n        });\n    }\n\n    function isNoPicksSet() {\n        return _activePoint === 0 || !_currentMeasurement;\n    }\n\n    this.areAllPicksSet = function() {\n        return _currentMeasurement && (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1);\n    };\n\n    this.setSessionMeasurements = function(measurementList) {\n        // Store the clone of the measurementList\n        _sessionMeasurements = JSON.parse(JSON.stringify(measurementList));\n    };\n\n    this.getSessionMeasurements = function() {\n        return JSON.parse(JSON.stringify(_sessionMeasurements));\n    };\n\n    this.register = function()\n    {\n\n    };\n\n    this.deregister = function()\n    {\n        this.deactivate();\n    };\n\n    this.isActive = function()\n    {\n        return _active;\n    };\n\n    this.getNames = function()\n    {\n        return _names;\n    };\n\n    this.getName = function()\n    {\n        return _names[0];\n    };\n\n    this.getPriority = function()\n    {\n        return _priority;\n    };\n\n    this.getCursor = function() {\n        return _isDragging ? null : _cursor;\n    };\n\n    this.getCurrentMeasurementRaw = function() {\n        return _currentMeasurement;\n    };\n\n    this.getActivePointIndex = function() {\n        return _activePoint;\n    };\n\n    this.getMeasurementsManager = function() {\n        return _measurementsManager;\n    }\n\n\n    this.startNewMeasurement = function() {\n        _currentMeasurement = _measurementsManager.createMeasurement(_measurementType);\n        _currentMeasurement.attachIndicator(_viewer, this, MeasureToolIndicator);\n\n        if (_onIndicatorCreatedCB instanceof Function) {\n            _onIndicatorCreatedCB();\n            _onIndicatorCreatedCB = null;\n        }\n\n        enableMeasurementsTouchEvents(false);\n    };\n\n    this.changeMeasurementType = function(type) {\n        _measurementType = type;\n    };\n\n    this.getCurrentMeasureType = function() {\n        return _measurementType;\n    };\n\n    this.activate = function()\n    {\n        _active = true;\n        _measurementsManager.init();\n\n        noPicksSet();\n        _isDragging = false;\n        this.isEditingEndpoint = false;\n        this.editByDrag = false;\n\n        _viewer.impl.pauseHighlight(true);\n\n        _viewer.clearSelection();\n        _preMeasureState = _viewer.getState({objectSet: true});\n        \n        _viewer.toolController.activateTool(\"snapper\");\n        _viewer.toolController.activateTool(\"magnifyingGlass\");\n \n       this.onMeasurementChangedBinded = this.onMeasurementChanged.bind(this);\n       _viewer.addEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChangedBinded);\n       _viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\n       _viewer.addEventListener(av.SHOW_ALL_EVENT, this.onShowAllEvent);\n\n       // Set the stored session measurements only if the preference is enabled\n       const restoreSessionMeasurements = _viewer.prefs.get(av.Private.Prefs.RESTORE_SESSION_MEASUREMENTS);\n       if (restoreSessionMeasurements) {\n           const sessionMeasurements = this.getSessionMeasurements();\n           this.setMeasurements(sessionMeasurements);\n           this.isolateMeasurement();\n       }\n    };\n\n    this.deactivate = function()\n    {\n        if (!_active)\n            return;\n\n        // Store the session measurements only if the preference is enabled\n        const restoreSessionMeasurements = _viewer.prefs.get(av.Private.Prefs.RESTORE_SESSION_MEASUREMENTS);\n        if (restoreSessionMeasurements) {\n            this.clearIncompleteMeasurement();\n            const measurementList = this.getMeasurementList();\n            this.setSessionMeasurements(measurementList);\n        }\n\n        _active = false;\n        \n        this.clearIsolate(); // restore initial isolation\n        _preMeasureState = null;\n\n        _prevMeasurement = null;\n        _useLastViewport = false;\n\n        while (Object.keys(_measurementsManager.measurementsList).length > 0) {\n            _currentMeasurement = _measurementsManager.measurementsList[Object.keys(_measurementsManager.measurementsList)[0]];\n            _measurementsManager.changeCurrentMeasurement(_currentMeasurement);\n            this.clearCurrentMeasurement();\n            _currentMeasurement = null;\n        }\n\n        if(_snapper && _snapper.isActive()) {\n            _viewer.toolController.deactivateTool(\"snapper\");\n        }\n\n        _viewer.toolController.deactivateTool(\"magnifyingGlass\");\n\n        _viewer.impl.pauseHighlight(false);\n\n        _measurementsManager.destroy();\n        _viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\n        _viewer.removeEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChangedBinded);\n        _viewer.removeEventListener(av.SHOW_ALL_EVENT, this.onShowAllEvent);\n    };\n\n    this.clearIncompleteMeasurement = function() {\n        if (!this.areAllPicksSet()) {\n            if (this.isEditingEndpoint) {\n                this.undoEditEndpoint();\n            } else {\n                this.clearCurrentMeasurement();\n            }\n        }\n    };\n\n    this.update = function()\n    {\n        return false;\n    };\n\n    this.getUnits = function() {\n        return _sharedMeasureConfig.units;\n    };\n\n    this.setUnits = function( units )\n    {\n        if (_sharedMeasureConfig.units !== units ) {\n            _sharedMeasureConfig.units = units;\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.DISPLAY_UNITS_CHANGED, units: units});\n\n            for (var key in _measurementsManager.measurementsList) {\n                if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                    // Update UI\n                    var measurement = _measurementsManager.measurementsList[key];\n                    if (measurement.indicator) {\n                        measurement.indicator.updateResults();\n                    }\n                }\n            }\n        }\n    };\n\n    this.getPrecision = function() {\n        return _sharedMeasureConfig.precision;\n    };\n\n    this.setPrecision = function( precision ) {\n\n        if (_sharedMeasureConfig.precision !== precision ) {\n            _sharedMeasureConfig.precision = precision;\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.PRECISION_CHANGED, precision});\n\n            for (var key in _measurementsManager.measurementsList) {\n                if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                    // Update UI\n                    var measurement = _measurementsManager.measurementsList[key];\n                    if (measurement.indicator) {\n                        measurement.indicator.updateResults();\n                    }\n                }\n            }\n        }\n    };\n\n    /**\n     * Prepare the measurement snap result information into a serializable object.\n     * @param {*} measurement \n     */\n    function getPickData(measurement) {\n        measurement = measurement || _currentMeasurement;\n        const picks = measurement.clonePicks();\n        const picksData = [];\n        for (let i = 0; i < picks.length; i++) {\n            const pick = picks[i];\n\n            let pickPoint = MeasureCommon.getSnapResultPosition(pick, _viewer);\n            const model = pick.hasOwnProperty('modelId') && pick.modelId ? _viewer.impl.findModel(pick.modelId) : _viewer.model;\n            if (model) {\n                const modelData = model.getData();\n                pickPoint = modelData && modelData.hasOwnProperty('globalOffset') ? pickPoint.clone().add(modelData.globalOffset) : pickPoint.clone();\n            }\n\n            const pickData = {\n                intersection: JSON.parse(JSON.stringify(pickPoint)),\n                modelId: pick.modelId,\n                viewportIndex2d: pick.viewportIndex2d,\n                snapNode: pick.snapNode\n            };\n\n            // Add the arc center and arc radius for the measurement\n            if (measurement.arc) {\n                pickData.circularArcCenter = pick.circularArcCenter;\n                pickData.circularArcRadius = pick.circularArcRadius;\n            }\n\n            picksData.push(pickData);\n        }\n\n        return picksData;\n    };\n\n    this.getDistanceXYZ = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceXYZ);\n    };\n    this.getDistanceX = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceX);\n    };\n    this.getDistanceY = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceY);\n    };\n    this.getDistanceZ = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceZ);\n    };\n\n    /**\n     * @private\n     */\n    this.getDistanceAux = function (measurementDistance) {\n\n        if (_viewer.model) {\n            var d = Autodesk.Viewing.Private.convertUnits(_viewer.model.getUnitString(), _sharedMeasureConfig.units, _sharedMeasureConfig.calibrationFactor, measurementDistance || 0);\n            return Autodesk.Viewing.Private.formatValueWithUnits(d, _sharedMeasureConfig.units, 3, _sharedMeasureConfig.precision);\n        }\n    };\n\n    this.getAngle = function(measurement) {\n\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        var angle = measurement.angle;\n        return Autodesk.Viewing.Private.formatValueWithUnits(angle, String.fromCharCode(0xb0), 3, _sharedMeasureConfig.precision);\n    };\n\n    this.getArc = function(measurement) {\n\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        var arc = measurement.arc;\n        return Autodesk.Viewing.Private.formatValueWithUnits(arc, _sharedMeasureConfig.units, 3, _sharedMeasureConfig.precision);\n    };\n\n\n    this.getLocation = function(measurement) {\n\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        var location = measurement.location || { x: 0, y: 0, z: 0};\n        return 'X: ' + this.getDistanceAux(location.x) +\n            '\\nY: ' + this.getDistanceAux(location.y) +\n            '\\nZ: ' + this.getDistanceAux(location.z);\n    };\n\n    this.getCallout = function(measurement) {\n\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return measurement.text || \"\";\n    };\n\n    this.getArea = function(measurement) { \n\n        if (_viewer.model) {\n\n            if (!measurement) {\n                measurement = _currentMeasurement;\n            }\n\n            var area = Autodesk.Viewing.Private.convertUnits(viewer.model.getUnitString(), _sharedMeasureConfig.units, _sharedMeasureConfig.calibrationFactor, measurement.area, 'square');\n\n            if (_sharedMeasureConfig.units) {\n                return Autodesk.Viewing.Private.formatValueWithUnits(area, _sharedMeasureConfig.units+'^2', 3, _sharedMeasureConfig.precision);\n            }\n            else {\n                return Autodesk.Viewing.Private.formatValueWithUnits(area, null, 3, _sharedMeasureConfig.precision);\n            }\n        }\n    };\n\n    function snapToFirstPick(currentPick, forceSnap) {\n        if (_currentMeasurement.hasPick(1) && _activePoint > 3 && !_currentMeasurement.closedArea) {\n            var firstPick = _currentMeasurement.getPick(1);\n            var firstPickPoint = MeasureCommon.getSnapResultPosition(firstPick, _viewer);\n            var firstPickPosition = MeasureCommon.project(firstPickPoint, viewer);\n            var currentPickPoint = MeasureCommon.getSnapResultPosition(currentPick, _viewer);\n            var currentPickPosition = MeasureCommon.project(currentPickPoint, viewer);\n            \n            if (forceSnap || currentPickPosition.distanceTo(firstPickPosition) < _closeAreaSnapRange) {\n                _snapper.onMouseMove(firstPickPosition);\n                firstPick.copyTo(currentPick);\n            }\n        }\n    }\n\n    function checkSnapperIndicatorForArc() {\n        if(!_currentMeasurement) {\n            _snapper.setArc(true);\n        }\n\n        if (_currentMeasurement?.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ARC && viewer.model.is2d()) {\n            var firstPick = _currentMeasurement && _currentMeasurement.getPick(1);\n            var secondPick = _currentMeasurement && _currentMeasurement.hasPick(2) && _currentMeasurement.getPick(2);\n            const isArc = !firstPick || _currentMeasurement.countPicks().length > 2 || (MeasureCommon.isEqualVectors(firstPick.circularArcCenter, secondPick.circularArcCenter, 0) && firstPick.circularArcRadius === secondPick.circularArcRadius);\n            _snapper.setArc(isArc);\n        }\n    }\n\n    /**\n     * Overrides each pick's viewportIndex2d in the current measurement with the passed in viewportIndex.\n     * This function only overrides the viewport index if the current measurement's picks do not have the viewportIndex2d set.\n     */\n    function setMeasurePicksViewport(viewportIndex) {\n        const picks = _currentMeasurement.picks;\n        for (var key in picks) {\n            if (picks.hasOwnProperty(key)) {\n                // If the current measurement has a viewport index do not override the its picks viewport id with the previous measurement's.\n                if (picks[key].viewportIndex2d) return;\n                picks[key].viewportIndex2d = viewportIndex;\n            }\n        }\n    }\n\n    function render(showResult) {\n        // LMV-5498: Set the current measurement's picks viewport to the previous measurement's pciks viewport.\n        if (_useLastViewport && _prevMeasurement && _prevMeasurement.picks.length > 0) {\n            setMeasurePicksViewport(_prevMeasurement.picks[0].viewportIndex2d);\n        }\n\n        var hasResult = _currentMeasurement.computeResult(_currentMeasurement.picks, _viewer, _snapper);\n        _currentMeasurement.indicator.render(_currentMeasurement.picks, _consumeSingleClick || !!showResult);\n\n        return hasResult;\n    }\n\n    this.setUseLastViewport = function(value) {\n        _useLastViewport = value;\n    };\n\n    this.getUseLastViewport = function() {\n        return _useLastViewport;\n    }\n\n    /**\n     * Sets existing measurements from the passed in measurement list. Reference getMeasurementList.\n     * \n     * @param {Object[]} measurementList - measurements to set.\n     */\n    this.setMeasurements = function(measurementList) {\n        if (!measurementList) return; // Only set the a measurementList is passed in.\n        measurementList = !Array.isArray(measurementList) ? [measurementList] : measurementList;\n\n        if (measurementList.length === 0) return;\n\n        function getMeasureType(measureData) {\n            let measurementType;\n            switch (measureData.type) {\n                case 'Distance':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\n                    break;\n                case 'Angle':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE;\n                    break;\n                case 'Area':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_AREA;\n                    break;\n                case 'Arc':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_ARC;\n                    break;\n                case 'Location':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_LOCATION;\n                    break;\n                case 'Callout':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_CALLOUT;\n                    break;\n                default:\n                    return;\n            }\n            return measurementType;\n        }\n\n        // Restore the supplied measurementList.\n        for (let i = 0; i < measurementList.length; i++) {\n            const measureData = measurementList[i];\n            const measurementType = getMeasureType(measureData);\n            if (!measurementType) continue;\n\n            const attachIndicatorCb = (measurement) => {\n                _currentMeasurement = measurement; // _currentMeasurement needs to be set for the onMeasurementChanged to work\n                measurement.attachIndicator(_viewer, this, MeasureToolIndicator);\n\n                if (_onIndicatorCreatedCB instanceof Function) {\n                    _onIndicatorCreatedCB();\n                    _onIndicatorCreatedCB = null;\n                }\n\n                enableMeasurementsTouchEvents(false);\n            };\n\n            const initPicksCb = () => {\n                const restoredMeasurements = _measurementsManager.getRestoredMeasurementData();\n                const points = restoredMeasurements[_currentMeasurement.id];\n                _activePoint = points.length;\n            };\n\n            _measurementsManager.createMeasurementFromData(\n                measureData,\n                measurementType,\n                attachIndicatorCb,\n                initPicksCb\n            );\n        }\n\n        this.deselectAllMeasurements();\n    };\n\n    function getMeasurementType(measurement) {\n        measurement = measurement || _currentMeasurement;\n        const types = MeasureCommon.MeasurementTypes;\n        const type = measurement.measurementType;\n        switch (type) {\n            case types.MEASUREMENT_DISTANCE:\n                return 'Distance';\n            case types.MEASUREMENT_ANGLE:\n                return 'Angle';\n            case types.MEASUREMENT_AREA:\n                return 'Area';\n            case types.CALIBRATION:\n                return 'Calibration';\n            case types.MEASUREMENT_ARC:\n                return 'Arc';\n            case types.MEASUREMENT_LOCATION:\n                return 'Location';\n            case types.MEASUREMENT_CALLOUT:\n                return 'Callout';\n            default:\n                return;\n        }\n    }\n\n    /**\n     * TODO: We need to flesh out the return value here.\n     *\n     * @param unitType\n     * @param precision\n     * @returns {Object}\n     */\n    this.getMeasurement = function(unitType, precision) {\n\n        _sharedMeasureConfig.units = unitType || _sharedMeasureConfig.units;\n        _sharedMeasureConfig.precision = precision || _sharedMeasureConfig.precision;\n\n        var geomTypes = ['Vertex', 'Edge', 'Face', 'Circular Arc', 'Curved Edge', 'Curved Face'];\n        var picks = getPickData();\n        var type = getMeasurementType();\n        var measurement = {\n            from: geomTypes[_currentMeasurement.getGeometry(1).type],\n            to: geomTypes[_currentMeasurement.getGeometry(2).type],\n            distance: this.getDistanceXYZ(),\n            deltaX: this.getDistanceX(),\n            deltaY: this.getDistanceY(),\n            deltaZ: this.getDistanceZ(),\n            angle: this.getAngle(),\n            area: this.getArea(),\n            arc: this.getArc(),\n            location: this.getLocation(),\n            text: this.getCallout(),\n            unitType: _sharedMeasureConfig.units,\n            precision: _sharedMeasureConfig.precision,\n            picks,\n            type\n        };\n\n        return measurement;\n    };\n\n    /**\n     * @returns {SnapResult[]} list of points for the selected measurement.\n     */\n    this.getMeasurementPoints = function() {\n\n        return _currentMeasurement.clonePicks();\n    };\n\n    /**\n     * @param unitType\n     * @param precision\n     * @returns {Array.<Object>}\n     */\n\n    this.getMeasurementList = function(unitType, precision) {\n        var list = [];\n        var measurement = null;\n        // TODO: These need to match the measurement SnapTypes\n        var geomTypes = ['Vertex', 'Edge', 'Face', 'Circular Arc', 'Curved Edge', 'Curved Face'];\n        var measurementList = Object.keys(_measurementsManager.measurementsList);\n\n        for(let i = 0; i < measurementList.length; i++) {\n            measurement = _measurementsManager.measurementsList[measurementList[i]];\n            var picks = getPickData(measurement);\n            var type = getMeasurementType(measurement);\n            var result = {\n              from: geomTypes[measurement.getGeometry(1).type],\n              to: geomTypes[measurement.getGeometry(2).type],\n              distance: this.getDistanceXYZ(measurement),\n              deltaX: this.getDistanceX(measurement),\n              deltaY: this.getDistanceY(measurement),\n              deltaZ: this.getDistanceZ(measurement),\n              angle: this.getAngle(measurement),\n              area: this.getArea(measurement),\n              arc: this.getArc(measurement),\n              location: this.getLocation(measurement),\n              text: this.getCallout(measurement),\n              unitType: unitType || _sharedMeasureConfig.units,\n              precision: precision || _sharedMeasureConfig.precision,\n              picks,\n              type\n            };\n            if (measurement.options) {\n                const options = result.options = JSON.parse(JSON.stringify(measurement.options));\n                if (!options.modelId && picks[0] && picks[0].modelId)\n                    options.modelId = picks[0].modelId;\n                const model = options.modelId ? _viewer.impl.findModel(options.modelId) : _viewer.model;\n                const globalOffset = model && model.getData().globalOffset;\n                if (globalOffset && (globalOffset.x !== 0 || globalOffset.y !== 0 || globalOffset.z !== 0)) {\n                    const cvtPts = points => {\n                        if (points) {\n                            for (let i = 0; i < points.length; ++i) {\n                                // Tricky way to use Vector3 add on plain objects\n                                THREE.Vector3.prototype.add.call(points[i], globalOffset);\n                            }\n                        }\n                    };\n                    cvtPts(options.dimensionOffset);\n                    cvtPts(options.dashedLeader);\n                    cvtPts(options.arc);\n                }\n            }\n            list.push(result);\n        }\n        return list;\n    };\n\n    this.clearCurrentMeasurement = function() {\n        if (_currentMeasurement) {\n            noPicksSet();\n\n            for (var key in _currentMeasurement.picks) {\n                if (_currentMeasurement.picks.hasOwnProperty(key)) {\n                    this.clearPick(key);    \n                }\n            }\n            \n            this.updateViewportId(true);\n\n            if (_isolateMeasure) {\n                this.clearIsolate();    \n            }\n\n            _currentMeasurement.indicator.clear();\n            _currentMeasurement.indicator.destroy();\n            _currentMeasurement = _measurementsManager.removeCurrentMeasurement();\n            _currentMeasurement = null;\n        }\n\n        enableMeasurementsTouchEvents(true);\n    };\n\n    this.clearPick = function(pickNumber) {\n        if (_currentMeasurement && _currentMeasurement.hasPick(pickNumber)) {\n            _currentMeasurement.clearPick(pickNumber);\n            _currentMeasurement.indicator.hideClick(pickNumber);\n        }\n    };\n\n    this.setIsolateMeasure = function(enable) {\n        _isolateMeasure = enable;\n    };\n   \n    this.getIsolateMeasure = function() {\n        return _isolateMeasure;\n    };\n\n    this.isolateMeasurement = function () {\n\n        if (!_active || !_isolateMeasure) {\n            return;\n        }\n\n        var defaultModelId = _viewer.model.id;\n        var isolationGroups = {};\n\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n\n                var measurement = _measurementsManager.measurementsList[key];\n                for (var key in measurement.picks) {\n                    if (measurement.picks.hasOwnProperty(key)) {\n                        var pick = measurement.getPick(key);\n\n                        var modelId = pick.modelId || defaultModelId;\n                        if (!Array.isArray(isolationGroups[modelId])) {\n                            isolationGroups[modelId] = [];\n                        }\n                        if (isolationGroups[modelId].indexOf(pick.snapNode) == -1) {\n                            isolationGroups[modelId].push(pick.snapNode);\n                        }\n                    }\n                }\n\n            }\n        }\n    \n\n        // convert to expected format\n        var isolationSet = [];\n        for (var modelId in isolationGroups) {\n            if (isolationGroups.hasOwnProperty(modelId)) {\n\n                var modelInstance = _viewer.impl.findModel(parseInt(modelId));\n                isolationSet.push({\n                    model: modelInstance,\n                    ids: isolationGroups[modelId]\n                });\n            }\n        }\n\n        if (isolationSet.length) {\n            _viewer.impl.visibilityManager.aggregateIsolate(isolationSet);\n        }\n    };\n\n    // It actually restores the isolation state to the one just before\n    // the measure tool was enabled...\n    this.clearIsolate = function() {\n        if (_preMeasureState) {\n            _viewer.restoreState(_preMeasureState, undefined, true);\n        }\n    };\n\n    this.onShowAllEvent = function (event) {\n        _preMeasureState = null;\n    };\n\n    this.deselectAllMeasurements = function() {\n        if (_currentMeasurement && !this.areAllPicksSet()) {\n            if (this.isEditingEndpoint) {\n                this.undoEditEndpoint();\n            }\n            else {\n                this.clearCurrentMeasurement();\n            }\n        }\n\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                if (measurement.indicator) {\n                    measurement.indicator.setSimple(true);        \n                    measurement.indicator.hideEndpoints();\n                    measurement.indicator.unfocusLabels();\n                }\n            }\n        }\n\n        _currentMeasurement = null;\n    };\n\n    this.onMeasurementChanged = function() {\n        \n        this.deselectAllMeasurements();\n\n        _currentMeasurement = _measurementsManager.getCurrentMeasurement();\n        \n        if (_currentMeasurement.isComplete()) {\n            _currentMeasurement.indicator.setSimple(false);        \n            allPicksSet();\n            render(true); \n            this.updateResults();\n        }\n    };\n\n    this.selectMeasurementById = function(measurementId) {\n        if (!_currentMeasurement) {\n            _currentMeasurement = _measurementsManager.selectMeasurementById(measurementId);\n        }\n\n        if (_currentMeasurement.id !== measurementId) {\n            this.clearIncompleteMeasurement();\n            \n            _currentMeasurement = _measurementsManager.selectMeasurementById(measurementId);\n        }\n    };\n\n    function enableMeasurementsTouchEvents(enable) {\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                measurement.indicator.changeAllEndpointsEditableStyle(enable);   \n                measurement.indicator.enableSelectionAreas(enable);\n                measurement.indicator.enableLabelsTouchEvents(enable);\n            }\n        }\n    }\n\n    this.editEndpoint = function(event, endpointNumber, measurementId) {\n        if (_currentMeasurement.id === measurementId && _activePoint === endpointNumber) {\n            _currentMeasurement.indicator.changeEndpointOnEditStyle(endpointNumber, false);\n            this.undoEditEndpoint();\n            return;\n        }\n\n        this.selectMeasurementById(measurementId);\n\n        _activePoint = endpointNumber;\n        this.isEditingEndpoint = true;\n\n        _currentMeasurement.indicator.changeEndpointOnEditStyle(endpointNumber, true);\n        enableMeasurementsTouchEvents(false);\n\n        for (var key in _currentMeasurement.picks) {\n            if (_currentMeasurement.picks.hasOwnProperty(key)) {\n                _picksBackup[key] = _currentMeasurement.getPick(key).clone();\n            }\n        }\n\n        this.updateViewportId();\n\n        if (_isolateMeasure) {\n            this.clearIsolate();    \n        }\n\n        if (_currentMeasurement.isRestored) {\n            // populate the existing picks with the new snap result from the snapper\n            _snapper.onMouseMove({x: event.canvasX, y: event.canvasY});\n            const snapResult = _snapper.getSnapResult().clone();\n            const pick = _currentMeasurement.getPick(_activePoint);\n            snapResult.copyTo(pick);\n\n            // Keep track of the pick that was updated.\n            pick.isValid = true;\n\n            // Set isRestored flag back to false if all of the picks have been validated\n            _currentMeasurement.isRestored = !function() {\n                const picks = _currentMeasurement.picks;\n                for (var key in picks) {\n                    if (picks.hasOwnProperty(key)) {\n                        const pick = picks[key];\n                        if (!pick.isValid) {\n                            return false;\n                        }\n                    }\n                }\n                return true;\n            }();\n        }\n\n        if(!av.isMobileDevice()) {\n            this._handleMouseEvent(event);\n        }\n    };\n\n    function canCloseArea() {\n        return _currentMeasurement.countPicks() > 3;\n    }\n\n    this.undoEditEndpoint = function() {\n        _currentMeasurement.indicator.clear();\n\n        for (var key in _currentMeasurement.picks) {\n            if (_currentMeasurement.picks.hasOwnProperty(key)) {\n                _currentMeasurement.setPick(key, _picksBackup[key].clone());\n            }\n        }\n        \n        _currentMeasurement.indicator.changeEndpointOnEditStyle(_activePoint, false);\n        \n        this.isEditingEndpoint = false;\n        this.updateViewportId(true);\n        allPicksSet();\n        render(true);\n    };\n\n    this.updateResults = function() {\n\n        _currentMeasurement.indicator.updateResults();\n        _currentMeasurement.indicator.showEndpoints();\n        _currentMeasurement.indicator.focusLabels();\n\n        if (_currentMeasurement.isComplete()) {\n            this.isolateMeasurement();\n        }\n    };\n\n    /**\n     * Delete all measurements.\n     */\n    this.deleteMeasurements = function() {\n        const measurements = _measurementsManager.measurementsList;\n        const keys = Object.keys(measurements);\n        for (let i = 0; i < keys.length; i++) {\n            const key = keys[i];\n            _measurementsManager.currentMeasurement = measurements[key];\n            _currentMeasurement = _measurementsManager.getCurrentMeasurement();\n            this.deleteCurrentMeasurement();\n        }\n    }\n\n    this.deleteCurrentMeasurement = function() {\n        // Keeping a copy of current measurement so send info in event.\n        let _deletedMeasurement = _currentMeasurement ? _currentMeasurement.clone() : null;\n        this.clearCurrentMeasurement();\n        this.isEditingEndpoint = false;\n        this.editByDrag = false;\n        _isDragging = false;\n        this.isolateMeasurement();\n        if(_deletedMeasurement){\n            _viewer.dispatchEvent({\n                type: MeasureCommon.Events.DELETE_MEASUREMENT,\n                data: { type: _deletedMeasurement.measurementType, id: _deletedMeasurement.id }\n            });\n        }\n        _deletedMeasurement = null;\n    };\n\n    this.deleteCurrentPick = function() {\n\n        var pick = getActivePick();\n        var id = pick.id;\n\n        while (_currentMeasurement.hasPick(id + 1)) {\n            _currentMeasurement.setPick(id, _currentMeasurement.getPick(id + 1));\n            id++;\n        }\n\n        delete _currentMeasurement.picks[id];\n        \n        \n        \n        var count = _currentMeasurement.countPicks();\n        \n        _activePoint--;\n        \n        if (_activePoint <= 0) {\n            _activePoint = count;\n        }\n\n        if (this.isEditingEndpoint) {\n            if (count == 2) {\n                this.deleteCurrentMeasurement();\n                return;\n            }\n\n            _currentMeasurement.indicator.changeAllEndpointsOnEditStyle(false);\n            this.isEditingEndpoint = false;\n            this.updateViewportId(true);\n            allPicksSet();\n            render();\n        } else {\n            this._handleMouseEvent();    \n        }\n    };\n\n    this.updateViewportId = function(clear) {\n        if (_viewer.model && _viewer.model.is2d()) {\n            if (clear || isNoPicksSet()) {\n                _viewer.impl.updateViewportId(0);\n                _snapper.setViewportId(null);\n            }\n            else if (!_isPressing) {\n                var viewport = getPreviousPick().viewportIndex2d || getActivePick().viewportIndex2d;\n                \n                // Pass viewport Id to LineShader to make all other geometries with different viewport transparent\n                _viewer.impl.updateViewportId(viewport);\n                if (_snapper)\n                    _snapper.setViewportId(viewport);  \n            \n            }\n        }\n    };\n\n    // Setting session measurements before activating measure needed\n    // some special handling for the topology state. The problem was\n    // that the indicators were set to 'fetching', and were cleared from\n    // _currentMeasurement before the the topology fetch could finish.\n    // I changed the logic to track all of the measurements that were\n    // marked as fetching and clear them when the fetch is finished.\n\n    // Clear fetching state in all measurements that were created\n    // while we were fetching topology. The stateSetter is the name\n    // of the method that sets the correct state.\n    function changeFetchingState(stateSetter) {\n        // call setter for all measurements in the list\n        for (let i = 0; i < _fetchingMeasurements.length; ++i) {\n            var measurement = _fetchingMeasurements[i];\n            measurement.indicator[stateSetter]();\n        }\n        // Clear list\n        _fetchingMeasurements.length = 0;\n    }\n\n    this.setNoTopology = function() {\n        // Change existing indicators\n        changeFetchingState(\"setNoTopology\");\n        // Set state for future measurements\n        _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setNoTopology(); };\n    };\n    this.setFetchingTopology = function() {\n        // Set state for future measurements\n        _onIndicatorCreatedCB = function() {\n            _fetchingMeasurements.push(_currentMeasurement);\n            _currentMeasurement.indicator.setFetchingTopology();\n        };\n        // Change existing indicator\n        if (_currentMeasurement && _currentMeasurement.indicator)\n            _onIndicatorCreatedCB();\n    };\n    this.setTopologyAvailable = function() {\n        // Change existing indicators\n        changeFetchingState(\"setTopologyAvailable\");\n        // Set state for future measurements\n        _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setTopologyAvailable(); };\n    };\n\n    this.getSnapper = function() {\n        return _snapper;\n    };\n\n    this.correctPickPosition = function() {\n        \n        var active = getActivePick();\n        \n        if (active && !active.getGeometry() && _cursorPosition) {\n            active.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\n            active.geomVertex = _cursorPosition;\n            active.intersectPoint = _cursorPosition;\n        }\n\n        if (hasPreviousPick()) {\n            var passive = getPreviousPick();\n            var corrected = MeasureCommon.correctPerpendicularPicks(passive, active, viewer, _snapper);\n            if (!corrected) {\n\n                // get next pick in case of closed loop measurement.\n                var id = (active.id + 1) % (_currentMeasurement.countPicks() + 1);\n                \n                if (id === 0)\n                    id = 1;\n\n                if (id !== active.id && _currentMeasurement.hasPick(id)) {\n                    var nextPick = _currentMeasurement.getPick(id);   \n                    MeasureCommon.correctPerpendicularPicks(nextPick, active, viewer, _snapper);\n                }\n            }\n            \n            if (_currentMeasurement.measurementType == MeasureCommon.MeasurementTypes.MEASUREMENT_AREA) {\n                snapToFirstPick(active);    \n            }\n        }\n    };\n\n    this._handleMouseEvent = function (event) {\n\n        var valid = false;\n\n        if (_snapper.isSnapped()) {\n            \n            // User picked a new point after two points where already set (or none) - Start a new measurement.\n            if (this.areAllPicksSet() || isNoPicksSet()) {\n                this.startNewMeasurement();\n\n                _activePoint = 1;\n            }\n\n            _snapper.copyResults(getActivePick());\n\n\n            // When user is in the arc measurement mode and the user clicks on a different circle than the first point, then don't do anything\n            if (_consumeSingleClick && _currentMeasurement?.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ARC) {\n                if(!_currentMeasurement.getPick(1).circularArcCenter ||\n                (_currentMeasurement.hasPick(2) && !(MeasureCommon.isEqualVectors(_currentMeasurement.getPick(1).circularArcCenter, _currentMeasurement.getPick(2).circularArcCenter, 0)\n                && (_currentMeasurement.getPick(1).circularArcRadius === _currentMeasurement.getPick(2).circularArcRadius)))) {\n                    return false;\n                }\n            }\n\n            valid = true;\n\n        } \n        else { \n            // In order to draw rubber-band, set the cursor position, so the indicator will use it as active point.\n            if (event && _viewer.model) {\n                var viewport = _viewer.container.getBoundingClientRect();\n                var x = event.canvasX || event.clientX - viewport.left;\n                var y = event.canvasY || event.clientY - viewport.top;\n\n                if (x && y) {\n                    let canDrawRubberBand;\n                    if (_viewer.impl.is2d) {\n                        canDrawRubberBand = true;\n                    } else {\n                        const renderer = _viewer.impl.renderer();\n                        const res = [];\n                        renderer.idAtPixel(x, y, res);\n                        const modelId = res[1];\n                        if (modelId > 0) {\n                            const model = _viewer.impl.modelQueue().findModel(modelId);\n                            canDrawRubberBand = model?.is2d();\n                        }\n                    }\n\n                    _cursorPosition = canDrawRubberBand ? MeasureCommon.inverseProject({x: x, y: y}, _viewer) : null;\n                }\n            }\n\n            // In case a measurement is set, and the user clicks on a blank spot - don't do nothing.\n            if (_consumeSingleClick && _currentMeasurement && !this.isEditingEndpoint) {\n                if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n                    return true;\n                }\n            }\n\n            var lastPick = getActivePick();\n            if (lastPick) {\n                lastPick.clear();\n            }\n        }\n\n        if (_currentMeasurement) {\n            this.correctPickPosition();\n            \n            if (_consumeSingleClick) {\n                this._doConsumeSingleClick();\n            }\n\n            if (!isNoPicksSet()) {\n                var renderSucceeded = render();\n                \n                // If it's the first pick, we don't expect the render of the rubberband to be succeeded.\n                // So enter here only if it's not the first pick.\n                if (_currentMeasurement.hasPick(2)) {\n                    valid &= renderSucceeded;\n                }\n            }\n        }\n\n        // If valid is false, the last pick is not revelant, and will clear it in case of a click.\n        return valid;\n    };\n\n    this._doConsumeSingleClick = function() {\n        // In case the measurement is a closed loop, eliminate the last pick.\n        if (_currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && !_currentMeasurement.closedArea) {\n            var length = _currentMeasurement.countPicks();\n            var firstPick = _currentMeasurement.getPick(1);\n            var lastPick = _currentMeasurement.getPick(length);\n\n            if (length >= 3 && _currentMeasurement.hasEqualPicks(firstPick, lastPick)) {\n                lastPick.clear();\n                delete _currentMeasurement.picks[length];\n                _currentMeasurement.closedArea = true;\n            }\n        }\n\n        this.updateResults();\n\n        var measurementComplete = _currentMeasurement.isComplete();\n        this.updateViewportId(measurementComplete);\n    };\n\n\n    this.handleButtonDown = function (event, button) {\n        if (av.isMobileDevice()) \n            return false;\n\n        _isDragging = true;\n        if (button === 0 && !event.ctrlKey && !event.metaKey && !event.shiftKey && !event.altKey) {\n            _consumeSingleClick = true;\n            _downX = event.canvasX;\n            _downY = event.canvasY;\n        }\n        return false;\n    };\n\n    this.handleMouseMove = function (event) {\n\n        if (av.isMobileDevice())\n            return false;\n\n        if (event.canvasX !== _downX || event.canvasY !== _downY) {\n            _consumeSingleClick = false;    \n        } \n\n        _endpointMoved = this.isEditingEndpoint;\n\n        if (!isNoPicksSet() && !this.areAllPicksSet()) {\n            this.clearPick(_activePoint);\n            this._handleMouseEvent(event);\n        }\n\n        checkSnapperIndicatorForArc(); \n\n        _snapper.indicator.render();\n\n        return false;\n    };\n\n    this.restoreMouseListeners = function () {\n\n        // When a press event has happend, the default behavior of firefly.js is to disable other mouse events,\n        // So they won't be triggered as well.\n        // The solution is to enable them after the end of the pressing.\n\n        _viewer.toolController.getTool(\"gestures\").controller.enableMouseButtons(true);\n    };\n\n    this.handlePressHold = function (event) {\n        _consumeSingleClick = false;\n\n        if (av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"press\":\n                    _isPressing = true;\n\n                    if (this.areAllPicksSet() || isNoPicksSet()) {\n                        this.startNewMeasurement();\n\n                        if (_isolateMeasure) { \n                            this.clearIsolate();\n                        }\n\n                        _activePoint = 1;\n                    }\n\n                    this._handleMouseEvent(event);\n                    _snapper.indicator.render();\n\n                    return true;\n\n                case \"pressup\":\n                    _consumeSingleClick = true;\n                    this.restoreMouseListeners();\n                    _singleClickHandled = !_singleClickHandled;\n                    this.handleSingleClick(event);\n                    _isPressing = false;\n                    return true;\n            }\n        }\n        return false;\n\n    };\n\n\n\n    this.handleGesture = function( event )\n    {   \n        if (av.isTouchDevice()){\n            \n            _consumeSingleClick = false;\n        \n            if (_isPressing) {\n                \n                this.clearPick(_activePoint);\n\n                switch( event.type )\n                {\n                    case \"dragstart\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragmove\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragend\":\n                        _isPressing = false;\n                        _consumeSingleClick = true;\n\n                        if (!this.editByDrag) {\n                            _singleClickHandled = !_singleClickHandled;\n                            this.handleSingleClick(event);    \n                        }\n\n                        this.editByDrag = false;\n                        this.restoreMouseListeners();\n                        return true;\n\n                    case \"pinchstart\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        break;\n\n                    case \"pinchmove\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        break;\n\n                    case \"pinchend\":\n                        _consumeSingleClick = true;\n                        _singleClickHandled = !_singleClickHandled;\n                        this.handleSingleClick(event);\n                        this.restoreMouseListeners();\n                        return true;\n                }\n            }\n\n            if (event.type.indexOf('pinch') !== -1) {\n                for (var key in _measurementsManager.measurementsList) {\n                    if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                        var measurement = _measurementsManager.measurementsList[key];\n                        measurement.indicator.updateScale();    \n                    }\n                }\n            }\n        }\n\n        return false;\n    };\n\n    this.handleButtonUp = function (event, button) {\n        _isDragging = false;\n        _downX = null;\n        _downY = null;\n        \n        if (_endpointMoved) {\n            _consumeSingleClick = true;\n            _singleClickHandled = !_singleClickHandled;\n            this.handleSingleClick(event);\n            _endpointMoved = false;\n        }\n\n        return false;\n    };\n\n    this.handleSingleClick = function (event, button) {\n        if (_consumeSingleClick) {\n\n            _snapper.indicator.clearOverlays();\n\n            if (_currentMeasurement) {\n                _currentMeasurement.indicator.changeEndpointOnEditStyle(_activePoint, false);    \n            }\n\n            if (this._handleMouseEvent(event)) {\n                this.updateResults();\n                _activePoint++;\n            }\n            else {\n                if (this.isEditingEndpoint) {\n                    this.undoEditEndpoint();\n                }\n                else {\n                    if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && canCloseArea()) {\n                        snapToFirstPick(getActivePick(), true);\n                        this._handleMouseEvent();\n                    } else {\n                        this.clearCurrentMeasurement();    \n                    }\n                }\n            }\n\n            if (_currentMeasurement && _currentMeasurement.isComplete()) {\n                allPicksSet();\n            }\n\n            _consumeSingleClick = false;\n            _singleClickHandled = !_singleClickHandled;\n            this.isEditingEndpoint = false;\n\n            _snapper.clearSnapped();\n        }\n        return true;\n    };\n\n    this.handleDoubleClick = function(event) {\n        return true;\n    };\n\n    this.onCameraChange = function () {\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                measurement.indicator.updateScale();\n            }\n        }\n\n        _snapper.indicator.onCameraChange();\n    };\n\n    this.handleSingleTap = function (event) {\n        if (!_singleClickHandled) {\n            _consumeSingleClick = true;\n            _snapper.onMouseDown({x: event.canvasX, y:event.canvasY});\n            this.handleSingleClick(event);\n        }\n        _singleClickHandled = !_singleClickHandled;\n\n        return true;\n    };\n\n    this.handleDoubleTap = function(event) {\n        if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && _currentMeasurement.countPicks() > 2) {\n            // fake single click over the first handle, to close the area.\n            var firstPick = _currentMeasurement.getPick(1);\n            var firstPickPoint = MeasureCommon.getSnapResultPosition(firstPick, _viewer);\n            var firstPickPosition = MeasureCommon.project(firstPickPoint, viewer);\n            event.canvasX = firstPickPosition.x;\n            event.canvasY = firstPickPosition.y;\n            _consumeSingleClick = true;\n            _snapper.onMouseDown(firstPickPosition);\n            this.handleSingleClick(event);\n            _singleClickHandled = !_singleClickHandled;\n        }\n\n        return true;\n    };\n\n    this.handleResize = function() {\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                if (measurement.indicator) {\n                    measurement.indicator.handleResize();\n                }\n            }\n        }\n    };\n\n    this.handleKeyDown = function(event, keyCode) {\n        switch (keyCode) {\n            case Autodesk.Viewing.KeyCode.BACKSPACE:\n            case Autodesk.Viewing.KeyCode.DELETE:\n            if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && !this.areAllPicksSet()) {\n                if (_currentMeasurement.countPicks() > 2 ) {\n                    this.deleteCurrentPick();\n                } else {\n                    this.deleteCurrentMeasurement();    \n                }\n            } else {\n                this.deleteCurrentMeasurement();\n            }\n\n            return true;\n        }\n\n        return false;\n    };\n};\n\nav.GlobalManagerMixin.call(MeasureTool.prototype);\n","import { Indicator } from './Indicator'\n\n    var av = Autodesk.Viewing;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    // /** @constructor */\n    export function CalibrationToolIndicator(viewer, measurement, calibrationTool)\n    {\n        Indicator.call(this, viewer, measurement, calibrationTool);\n        this.calibrationTool = calibrationTool;\n        this.calibrationLabel = null;\n        this.endpoints = null;\n        this.tmpVector = new THREE.Vector3();\n        this.p1 = null;\n        this.p2 = null;\n\n        this.rubberbandDefaultMaterial = new THREE.MeshBasicMaterial({\n            color: 0xe8b22c,\n            opacity: 1,\n            transparent: false,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });\n\n        this.rubberbandSnappedMaterial = new THREE.MeshBasicMaterial({\n            color: 0x005BCE,\n            opacity: 1,\n            transparent: false,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });\n\n        this.rubberbandTipMaterial = new THREE.MeshBasicMaterial({\n            color: 0x000000,\n            opacity: 1,\n            transparent: false,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });\n\n    }\n\n    CalibrationToolIndicator.prototype = Object.create(Indicator.prototype);\n    CalibrationToolIndicator.prototype.constructor = CalibrationToolIndicator;\n    var proto = CalibrationToolIndicator.prototype;\n    \n    var kEndpointOffset = 15;\n    \n    var kCrossWidth = 1.5;\n    var kTipXWidth = 2;\n    var kLineWidth = 3;\n\n    var kTipXLength = 3;\n    var kCrossLength = 5;\n\n    var kDashSize = 2;\n    var kGapSize = 1;\n\n    proto.createEndpoint = function(name) {\n        this.endpoints[name] = {};\n        this.endpoints[name].position = null;\n\n        const _document = this.getDocument();\n        var label = this.endpoints[name].label = _document.createElement('div');\n        label.className = 'calibration-endpoint';\n\n        this.viewer.container.appendChild(label);\n\n        var text = _document.createElement('div');\n        text.className = 'calibration-endpoint-text';\n        text.textContent = name.toString();\n        label.appendChild(text);\n        \n        if (av.isTouchDevice()) {\n            this.initLabelMobileGestures(label, name, this.calibrationTool);\n        }\n        // Disable hover for mobile devices\n        if(!av.isMobileDevice()) {\n            MeasureCommon.safeToggle(label, 'enable-hover', true);\n\n            this.initMouseEvent(label, name);\n    \n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            \n        }   \n    };\n\n    proto.init = function() {\n\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\n        \n        if (!this.calibrationLabel) {\n            const _document = this.getDocument();\n            this.calibrationLabel = _document.createElement('div');\n            this.calibrationLabel.className = 'calibration-label';\n            this.hideLabel(this.calibrationLabel);\n            this.viewer.container.appendChild(this.calibrationLabel);\n            this.calibrationLabel.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n\n            var text = _document.createElement('div');\n            text.className = 'calibration-label-text';\n            this.calibrationLabel.appendChild(text);\n        }\n\n        this.endpoints = [];\n\n        this.handleButtonUpBinded = this.calibrationTool.handleButtonUp.bind(this.calibrationTool);\n        this.addWindowEventListener('mouseup', this.handleButtonUpBinded);\n\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\n        this.viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n    };\n\n    proto.destroy = function() {\n        this.clear();\n\n        Indicator.prototype.destroy.call(this);\n\n        if (this.calibrationLabel) {\n            this.calibrationLabel.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            this.viewer.container.removeChild(this.calibrationLabel);\n            this.calibrationLabel = null;\n        }\n\n        \n        this.viewer.impl.clearOverlay(this.overlayName);\n        this.viewer.impl.removeOverlayScene(this.overlayName);\n        \n        this.removeWindowEventListener('mouseup', this.handleButtonUpBinded);\n        this.viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n    };\n\n    proto.clearRubberband = function() {\n        this.viewer.impl.clearOverlay(this.overlayName);\n    };\n\n    proto.clear = function() {\n\n        this.clearRubberband();\n        \n        this.hideLabel(this.calibrationLabel);\n        \n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                this.hideClick(name);\n                this.endpoints[name].position = null;\n            }\n        }\n    };\n\n    proto.updateLabelValue = function(text) {\n        if (!text || text === \"\") {\n            this.calibrationLabel.childNodes[0].textContent = null;\n            this.hideLabel(this.calibrationLabel);\n        }\n        else {\n            this.calibrationLabel.childNodes[0].setAttribute(\"data-i18n\", text);\n            this.calibrationLabel.childNodes[0].textContent = av.i18n.translate(text);\n            this.showLabel(this.calibrationLabel);\n            this.calibrationTool.render();\n        }\n    };\n\n    proto.changeLabelClickableMode = function(clickable) {\n        if (clickable) {\n            this.calibrationLabel.childNodes[0].style.pointerEvents='all';\n        }\n        else {\n            this.calibrationLabel.childNodes[0].style.pointerEvents='none';\n        }\n    };\n\n    proto.showAddCalibrationLabel = function() {\n        var self = this;\n        this.updateLabelValue(\"Add Calibration\");\n        this.changeLabelClickableMode(true);\n        this.calibrationTool.render();\n        \n        this.calibrationLabel.addEventListener(\"click\", function onClick() {\n            self.calibrationLabel.childNodes[0].style.pointerEvents = 'none';\n            self.calibrationTool.render();\n            self.updateLabelValue(null);\n            self.calibrationTool.showPanel();\n            self.calibrationLabel.removeEventListener(\"click\", onClick);\n        });    \n    };\n\n    proto.updateLabelsPosition = function() {\n        for (var i = 1; i <= Object.keys(this.endpoints).length; i++) {\n            if (this.endpoints[i].position) {\n                var label = this.endpoints[i].label;\n                var pos = MeasureCommon.project(this.endpoints[i].position, this.viewer, kEndpointOffset);\n                label.style.left = (pos.x - parseInt(label.clientWidth) / 2) + 'px';\n                label.style.top = (pos.y - parseInt(label.clientHeight) / 2) + 'px';\n                label.point = this.endpoints[i].position;\n\n                // Detect and move in case of overlapping.\n                this.labelsOverlapDetection(this.endpoints[i].label, this.endpoints);\n            }\n        }\n\n        this.hideLabelsOutsideOfView();\n    };\n\n    function isLeftIntersect(current, other) {\n        return current.right >= other.left && current.right <= other.right;\n    }\n\n    function isRightIntersect(current, other) {\n        return current.left >= other.left && current.left <= other.right;\n    }\n\n    function isMiddleIntersect(current, other) {\n        return current.left <= other.left && current.right >= other.right;\n    }\n\n    function isVerticalIntersect(current, other) {\n        return current.top < other.bottom && current.bottom > other.top;\n    }\n\n    function moveLeft(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) - (currentRect.right - otherRect.left) + 'px';\n    }\n\n    function moveRight(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) + (otherRect.right - currentRect.left) + 'px';\n    }\n\n    function moveDown(currentLabel, currentRect, otherRect) {\n        currentLabel.style.top = parseInt(currentLabel.style.top, 10) + (otherRect.bottom - currentRect.top) + 'px';\n    }\n\n\n    proto.labelsOverlapDetection = function(staticLabel, labelsList) {\n\n        for (var i = 1; i <= Object.keys(labelsList).length ; i++) {\n\n            var dynamicLabel = labelsList[i].label;\n\n            if (staticLabel !== dynamicLabel) {\n                var staticRect = staticLabel.getBoundingClientRect();\n                var dynamicRect = dynamicLabel.getBoundingClientRect();\n\n                if (isVerticalIntersect(dynamicRect, staticRect)) {\n\n                    if (isLeftIntersect(dynamicRect, staticRect)) {\n                        moveLeft(dynamicLabel, dynamicRect, staticRect);\n                    }\n                    else if (isRightIntersect(dynamicRect, staticRect)) {\n                        moveRight(dynamicLabel, dynamicRect, staticRect);\n                    }\n                    else if (isMiddleIntersect(dynamicRect, staticRect)) {\n                        moveDown(dynamicLabel, dynamicRect, staticRect);\n                    }\n                }\n            }\n        }\n    };\n\n    proto.renderCalibrationLabel = function() {\n\n        if (this.showMeasureResult && this.calibrationLabel && this.p1 && this.p2) {\n            \n            var point = { x: (this.p1.x + this.p2.x)/2, y: (this.p1.y + this.p2.y)/2, z: (this.p1.z + this.p2.z)/2 };\n            var mid = MeasureCommon.project(point, this.viewer);\n\n            this.labelPosition = new THREE.Vector2(mid.x, mid.y);\n\n            if (this.calibrationLabel.childNodes[0].textContent) {\n                this.showLabel(this.calibrationLabel);\n            }\n\n            this.calibrationLabel.style.top  = this.labelPosition.y - Math.floor(this.calibrationLabel.clientHeight / 2) + 'px';\n            this.calibrationLabel.style.left = this.labelPosition.x - Math.floor(this.calibrationLabel.clientWidth / 2) + 'px' ;\n            this.calibrationLabel.point = point;\n\n            if (this.viewer.model.is2d()) {\n                this.alignLabelWithLine(this.calibrationLabel, this.p1, this.p2, this.calibrationLabel.clientHeight, this.viewer);\n            }\n        }\n    };\n\n    proto.drawMeasurementLineTip = function(point, direction, normal, flip) {\n\n        var tmpVec = new THREE.Vector3();\n        var geometry = new THREE.Geometry();\n        var p1Scale = this.setScale(point);\n\n        flip = flip ? -1 : 1;\n\n        var tipMaterial = (this.snapper.isSnapped() && !this.showMeasureResult) ? this.rubberbandSnappedMaterial : this.rubberbandTipMaterial;\n\n        // black tip\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kCrossLength * p1Scale));\n        geometry.vertices[0] = tmpVec.clone();\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kCrossLength * p1Scale));\n        geometry.vertices[1] = tmpVec.clone();\n        this.drawLineAsCylinder(geometry, tipMaterial, kCrossWidth, this.overlayName);\n\n        geometry.vertices[0] = point;\n        tmpVec.subVectors(point, direction.clone().multiplyScalar(kCrossLength * p1Scale * flip));\n        geometry.vertices[1] = tmpVec.clone();\n        this.drawLineAsCylinder(geometry, tipMaterial, kCrossWidth, this.overlayName);\n\n        // yellow tip\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.vertices[0] = tmpVec.clone();\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.vertices[1] = tmpVec.clone();\n        this.drawLineAsCylinder(geometry, this.rubberbandDefaultMaterial, kTipXWidth, this.overlayName);\n\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        tmpVec.addVectors(tmpVec, direction.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.vertices[0] = tmpVec.clone();\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        tmpVec.subVectors(tmpVec, direction.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.vertices[1] = tmpVec.clone();\n        this.drawLineAsCylinder(geometry, this.rubberbandDefaultMaterial, kTipXWidth, this.overlayName);\n    };\n\n    proto.renderDistanceMeasurement = function(p1, p2) {\n\n        this.viewer.impl.clearOverlay(this.overlayName);\n\n        if (!p1 || !p2)\n            return;\n\n        var geometry = new THREE.Geometry();\n        var lineDirection = new THREE.Vector3().subVectors(p2, p1).normalize();\n        var lineNormal = lineDirection.clone().cross(this.viewer.navigation.getEyeVector()).normalize();\n        var p1Scale = this.setScale(p1);\n        \n        var dashSize = kDashSize * p1Scale;\n        var gapSize = kGapSize * p1Scale;\n\n        // Main line\n        \n        var lineMaterial = ((Math.abs(p1.x - p2.x) <= 0.1 || Math.abs(p1.y - p2.y) <= 0.1 \n                            || this.snapper.getSnapResult().isPerpendicular) && !this.showMeasureResult) \n                            ? this.rubberbandSnappedMaterial : this.rubberbandDefaultMaterial;\n\n        if (this.showMeasureResult) {\n            // Single solid line.\n            geometry.vertices[0] = p1;\n            geometry.vertices[1] = p2;\n            this.drawLineAsCylinder(geometry, lineMaterial, kLineWidth, this.overlayName);\n        }\n        else {\n            this.drawDashedLine(p1, p2, dashSize, gapSize, lineMaterial, kLineWidth, this.overlayName); \n        }\n        \n        this.drawMeasurementLineTip(p1, lineDirection, lineNormal, false);\n        \n        if (this.showMeasureResult) {\n            this.drawMeasurementLineTip(p2, lineDirection, lineNormal, true);\n        }\n\n        this.p1 = p1;\n        this.p2 = p2;\n\n        this.renderCalibrationLabel();\n    };\n\n    proto.onCameraChange = function() {\n        if (this.measurement.isComplete()) {\n            this.renderDistanceMeasurement(this.p1, this.p2);\n        }   \n        this.updateLabelsPosition();         \n    };\n\n","\n\n    \"use strict\";\n\n    var av = Autodesk.Viewing,\n        ave = Autodesk.Viewing.Extensions,\n        avp = Autodesk.Viewing.Private,\n        avu = Autodesk.Viewing.UI,\n        MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    // This strange code is there because we \n    // don't want DockingPanel, which is used as a base class later\n    // to be undefined during headless mode.\n    // Simply deriving from undefined will cause an exception (from babel env preset) \n    // even if the class is never instantiated\n    const DockingPanel = (avu && avu.DockingPanel) || class {};\n    // et ViewerPanelMixin to a no-op in headless mode\n    const ViewerPanelMixin = (ave && ave.ViewerPanelMixin) || function () {};\n\n    const _gWindow = av.getGlobal();\n    const _gDocument = _gWindow.document;\n\n    //\n    // /** @constructor */\n    //\n    //\n    export var CalibrationPanel = function(calibrationTool, viewer, id, title, options)\n    {\n        var self = this;\n\n        options = options || {};\n        options.addFooter = false;\n\n        DockingPanel.call(this, viewer.container, id, title, options);\n\n        this.viewer = viewer;\n        this.calibrationTool = calibrationTool;\n        this.parentContainer = viewer.container;\n        this.container.style.left = '0px';\n        this.container.style.top = '0px';\n        this.container.style.resize = 'none';\n\n        this.container.classList.add('calibration-panel');\n\n        this.setGlobalManager && this.setGlobalManager(viewer.globalManager);\n\n        this.addEventListener( this.closer, \"click\", function(e) {\n            self.cancel();            \n        });\n\n        if (!options.heightAdjustment)\n            options.heightAdjustment = 40;\n        if (!options.marginTop)\n            options.marginTop = 0;\n        options.left = false;\n\n        this.createScrollContainer(options);\n\n        const _document = (this.getDocument && this.getDocument()) || _gDocument;\n\n        this.calibrationMenu = _document.createElement(\"div\");\n\n        this.scrollContainer.appendChild( this.calibrationMenu );\n\n        // Table\n        this.table = _document.createElement(\"table\");\n        this.table.className = \"adsk-lmv-tftable calibration-table\";\n        this.tbody = _document.createElement(\"tbody\");\n        this.table.appendChild(this.tbody);\n        this.calibrationMenu.appendChild(this.table);\n\n        // Define Size Row\n        this.row = this.tbody.insertRow(0);\n        this.requestedSizeTextbox = _document.createElement('input');\n        this.requestedSizeTextbox.className = 'docking-panel-textbox';\n        this.requestedSizeTextbox.type = 'text';\n        this.requestedSizeTextbox.autofocus= 'true';\n\n        this.addEventListener(this.requestedSizeTextbox, \"keyup\", function(e) {\n            var value = self.requestedSizeTextbox.value;\n            if (value !== \"\" && value.split(\".\")[0] === \"\") {\n                self.requestedSizeTextbox.value = \"0\" + value;\n            }\n            self.updateLabel();\n        });\n\n\n        this.addEventListener(this.requestedSizeTextbox, \"keypress\", function(e) {\n            var key = e.key || String.fromCharCode(e.keyCode);\n            // Handling backspace and arrows for firefox\n            if (key == \"Backspace\" || key == \"ArrowLeft\" || key == \"ArrowRight\"){\n                return;\n            }\n\n            // Escape (For IE11)\n            if (e.keyCode == av.KeyCode.ESCAPE) {\n                self.cancel();                \n                return;\n            }\n\n            if (e.keyCode == av.KeyCode.ENTER) {\n                var index = self.unitList.selectedIndex;\n                var requestedUnits = self.units[index].units;\n                self.calibrationTool.calibrate(requestedUnits, self.requestedSizeTextbox.value);\n            }\n\n            var requestedSize = self.requestedSizeTextbox.value;\n            var cursorIndex = self.requestedSizeTextbox.selectionStart;\n            requestedSize = [requestedSize.slice(0, cursorIndex), key, requestedSize.slice(cursorIndex)].join('');\n            \n            if (requestedSize == \".\") {\n                return;\n            }\n\n            var isSimple = self.units[self.unitList.selectedIndex].simpleInput;\n        \n            if (!isPositiveNumber(requestedSize) || (isSimple && (!isSimpleDecimal(requestedSize) || Autodesk.Viewing.Private.calculatePrecision(requestedSize) > self.calibrationTool.getMaxPrecision()))) {\n                    e.preventDefault();\n            }\n        });\n\n        var caption = \"Define Size\";\n        var cell = this.row.insertCell(0);\n        this.caption = _document.createElement(\"div\");\n        this.caption.setAttribute(\"data-i18n\", caption);\n        this.caption.textContent = av.i18n.translate(caption);\n        cell.appendChild(this.caption);\n\n        cell = this.row.insertCell(1);\n        cell.appendChild(this.requestedSizeTextbox);\n\n        // Unit Type Row\n        this.units = [\n            { name: 'Feet and fractional inches', units: 'ft-and-fractional-in', matches: ['ft-and-fractional-in', 'fractional-in'], simpleInput: false },\n            { name: 'Feet and decimal inches', units: 'ft-and-decimal-in', matches: ['ft', 'decimal-ft', 'in', 'decimal-in', 'ft-and-decimal-in'], simpleInput: false },\n            { name: 'Meters', units: 'm', matches: ['m', 'm-and-cm'], simpleInput: true },\n            { name: 'Centimeters', units: 'cm', matches: ['cm'], simpleInput: true },\n            { name: 'Millimeters', units: 'mm', matches: ['mm'], simpleInput: true }\n        ];\n\n        var unitNames = [];\n        for (var i = 0; i < this.units.length; ++i) {\n            unitNames.push(this.units[i].name);\n        }\n        this.unitList = new avp.OptionDropDown(\"Unit type\", this.tbody, unitNames, 0, null, undefined, { paddingLeft: 0, paddingRight: 0 });\n        this.unitList.setGlobalManager(this.globalManager);\n        this.addEventListener(this.unitList, \"change\", function(e) {\n            self.updateLabel();\n        });\n\n        var buttonsWrapper = _document.createElement('div');\n        buttonsWrapper.classList.add('docking-panel-footer');\n        this.calibrationMenu.appendChild(buttonsWrapper);        \n\n        // Cancel button\n        var cancel = _document.createElement('div');\n        cancel.classList.add('docking-panel-secondary-button');        \n\n        cancel.setAttribute(\"data-i18n\", \"Cancel\");\n        cancel.textContent = av.i18n.translate(\"Cancel\");\n\n        cancel.addEventListener('click', function () {\n            self.cancel();            \n        }, false);\n\n        buttonsWrapper.appendChild(cancel);\n\n        // Set Calibration button\n        var setCalibration = _document.createElement('div');\n        setCalibration.classList.add('docking-panel-primary-button');\n\n        setCalibration.setAttribute(\"data-i18n\", \"Calibrate\");\n        setCalibration.textContent = av.i18n.translate(\"Calibrate\");\n\n        setCalibration.addEventListener('click', function () {\n            var index = self.unitList.selectedIndex;\n            var requestedUnits = self.units[index].units;\n            self.calibrationTool.calibrate(requestedUnits, self.requestedSizeTextbox.value);\n        }, false);\n\n        buttonsWrapper.appendChild(setCalibration);\n    }; // end constructor\n\n    var isPositiveNumber = function (n) {\n        // The first character of the string has to be a digit.\n        return n.match(/^(\\d+)/);\n    };\n\n    var isSimpleDecimal = function (n) {\n        // Add \"0\" to the end of the string, to check if there are trailing spaces.\n        n += '0';\n        return !isNaN(parseFloat(n)) && !isNaN(+n) && parseFloat(n) >= 0;\n    };\n\n    CalibrationPanel.prototype = Object.create(DockingPanel.prototype);\n    ViewerPanelMixin.call(CalibrationPanel.prototype);\n\n\n    CalibrationPanel.prototype.uninitialize = function uninitialize() {\n        this.viewer = null;\n        DockingPanel.prototype.uninitialize.call(this);\n    };\n\n    CalibrationPanel.prototype.cancel = function cancel() {\n        this.setVisible(false);\n        this.calibrationTool.clearSize();\n        this.calibrationTool.showAddCalibrationLabel();\n    }\n\n    CalibrationPanel.prototype.findUnits = function findUnits() {\n        var i,\n            j,\n            selectedUnits = this.calibrationTool.getCurrentUnits();\n        for (i = 0; i < this.units.length; ++i) {\n            var matches = this.units[i].matches;\n            if (matches) {\n                for (j = 0; j < matches.length; ++j) {\n                    if (matches[j] === selectedUnits) {\n                        return i;\n                    }\n                }\n            }\n        }\n        return 0;\n    };\n\n    CalibrationPanel.prototype.setPanelValue = function(size) {\n        this.updateUnits();\n        this.requestedSizeTextbox.value = size;\n    };\n\n    CalibrationPanel.prototype.updateUnits = function() {\n        this.unitList.setSelectedIndex(this.findUnits());\n    }\n\n    CalibrationPanel.prototype.updateLabel = function() {\n        var index = this.unitList.selectedIndex;\n        var requestedUnits = this.units[index].units;\n        var size = this.requestedSizeTextbox.value;\n        var parsedNumber = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(size, requestedUnits);\n        var text = Autodesk.Viewing.Private.formatValueWithUnits(parsedNumber, requestedUnits, 3, Autodesk.Viewing.Private.calculatePrecision(size));\n\n        if (size === \"\") {\n            this.calibrationTool.updateLabelValue(null);\n        } else if (!isNaN(parsedNumber)) {\n            this.calibrationTool.updateLabelValue(text);\n        }\n    };\n\n    CalibrationPanel.prototype.updatePanelPosition = function (labelPosition, p1, p2, labelOffset) {\n\n        var width = parseInt(this.container.getBoundingClientRect().width);\n        var height = parseInt(this.container.getBoundingClientRect().height);\n\n        var cornerX;\n        var cornerY;\n\n        if (!labelPosition || !p1 || !p2) {\n            cornerX = Math.floor((this.viewer.canvas.clientWidth - width) / 2);\n            cornerY = Math.floor((this.viewer.canvas.clientHeight - height) / 2);\n        }\n        else {\n            p1 = MeasureCommon.project(p1, this.viewer);\n            p2 = MeasureCommon.project(p2, this.viewer);\n            var rubberbandDirection = new THREE.Vector2().copy(p1).sub(p2).normalize();\n\n            var normal;\n            if (p1.x < p2.x) {\n                normal = new THREE.Vector2(rubberbandDirection.y, -rubberbandDirection.x);\n            } else {\n                normal = new THREE.Vector2(-rubberbandDirection.y, rubberbandDirection.x);\n            }\n\n            var offset = labelOffset + Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)) / 2;\n\n            normal = normal.multiplyScalar(offset);\n            var pos =  labelPosition.sub(normal);\n\n            cornerX = pos.x - Math.floor(width / 2);\n            cornerY = pos.y - Math.floor(height / 2);\n\n            // if panel exceeds screen bounds, just put the panel in the center of the screen.\n            if ((cornerX < 0) || (cornerX + width > this.viewer.canvas.clientWidth) || (cornerY < 0) || (cornerY + height > this.viewer.canvas.clientHeight)) {\n                cornerX = Math.floor((this.viewer.canvas.clientWidth - width) / 2);\n                cornerY = Math.floor((this.viewer.canvas.clientHeight - height) / 2);\n            }\n        }\n\n        this.container.style.left = cornerX + 'px';\n        this.container.style.top  = cornerY + 'px';\n    };\n\n    //\n    // /** @constructor */\n    //\n    //\n    export var CalibrationRequiredDialog = function(measureExt, viewer, id, title, options)\n    {\n        var self = this;\n\n        options = options || {};\n        options.addFooter = false;\n\n        DockingPanel.call(this, viewer.container, id, title, options);\n\n        this.viewer = viewer;\n        this.measureExt = measureExt;\n        this.parentContainer = viewer.container;\n        this.container.classList.add('calibration-panel');\n        this.container.style.width = \"380px\";\n        this.container.style.height = \"190px\";\n        \n        this.setGlobalManager && this.setGlobalManager(viewer.globalManager);\n\n        if (!options.heightAdjustment)\n            options.heightAdjustment = 70;\n        if (!options.marginTop)\n            options.marginTop = 0;\n        options.left = false;\n\n        const _document = (this.getDocument && this.getDocument()) || _gDocument;\n\n        this.createScrollContainer(options);\n        this.dialogBox = _document.createElement(\"div\");\n        this.scrollContainer.appendChild( this.dialogBox );\n\n        // text\n        var calibrateNow = _document.createElement('div');\n        calibrateNow.className = 'calibration-text';\n        var text = \"Calibration Message\";\n        calibrateNow.setAttribute(\"data-i18n\", text);\n        calibrateNow.textContent = av.i18n.translate(text);\n        this.dialogBox.appendChild(calibrateNow);\n\n        var buttonsWrapper = _document.createElement('div');\n        buttonsWrapper.className = 'calibration-buttons-wrapper';\n        this.dialogBox.appendChild(buttonsWrapper);\n        \n        // Cancel button\n        var cancel = _document.createElement('div');\n        cancel.classList.add('docking-panel-secondary-button');\n        cancel.classList.add('calibration-button-left');\n        cancel.setAttribute(\"data-i18n\", \"Cancel\");\n        cancel.textContent = av.i18n.translate(\"Cancel\");\n        cancel.addEventListener('click', function () {\n            self.setVisible(false);\n        }, false);\n        buttonsWrapper.appendChild(cancel);\n\n        // Calibrate-Now button\n        var calibrateNowButton = _document.createElement('div');\n        calibrateNowButton.classList.add('docking-panel-primary-button');\n        calibrateNowButton.classList.add('calibration-button-right');\n        calibrateNowButton.setAttribute(\"data-i18n\", \"Calibrate Now\");\n        calibrateNowButton.textContent = av.i18n.translate(\"Calibrate Now\");\n        calibrateNowButton.addEventListener('click', function () {\n            self.measureExt.enableCalibrationTool(true);\n            self.setVisible(false);\n        }, false);\n        buttonsWrapper.appendChild(calibrateNowButton);\n        \n\n    }; // end constructor\n\n    CalibrationRequiredDialog.prototype = Object.create(DockingPanel.prototype);\n    ViewerPanelMixin.call(CalibrationRequiredDialog.prototype);\n\n\n    CalibrationRequiredDialog.prototype.uninitialize = function uninitialize() {\n        this.viewer = null;\n        DockingPanel.prototype.uninitialize.call(this);\n    };\n","import { CalibrationToolIndicator } from './CalibrationToolIndicator'\nimport { CalibrationPanel } from './CalibrationPanels'\n\nconst av = Autodesk.Viewing;\n\n//\n// /** @constructor */\n//\n//\nexport var CalibrationTool = function( viewer, options, sharedMeasureConfig, snapper)\n{   \n    var av = Autodesk.Viewing;\n    var avem = Autodesk.Viewing.Extensions.Measure;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    var _names  = [\"calibration\"];\n    var _priority = 50;\n    var _viewer  = viewer;\n    var _measurement = new MeasureCommon.Measurement(MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE);\n    var _options = options || {};\n\n    this.setGlobalManager(viewer.globalManager);\n\n    // Shared State with MeasureTool and Indicator\n    var _sharedMeasureConfig = sharedMeasureConfig;\n\n    var _maxPrecision = options.maxPrecision || 5;\n    var _isCalibrated = (sharedMeasureConfig.calibrationFactor != null); // True when the user set the calibration, or used a Previous calibration factor.\n    \n    var _snapper = snapper;\n\n    var _active = false;\n    var _isDragging = false;\n    var _isPressing = false;\n\n    var _distance = null; // The length of the current measurement.\n    var _calibrationTaken = false; // True when the user selected two valid points and set the calibration.\n    var _selectedSize = null;\n    var _selectedUnits = null;\n    var _selectedP1 = null;\n    var _selectedP2 = null;\n    var _waitingForInput = false; // True when the user selected two valid points.\n    var _picksBackup = [];\n    var _cursorPosition = null;\n\n    var _activePoint = 0;\n    \n    var _endpointMoved = false;\n\n    var _consumeSingleClick = false;\n    var _singleClickHandled = false;\n    var _downX = null;\n    var _downY = null;\n\n    // GUI.\n    var _calibrationPanel = null;\n    var _cursor = \"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAYCAYAAAD+vg1LAAAAAXNSR0IArs4c6QAAAwZJREFUSA2tVEtLW0EUvjGJefoqSY0x0WBSiY+oNWiUINkU6ioLaaAlG1eudNVFoT+grgopiCkEIbUK1o0lusmurRSEWmmKG6MNtNhNosWqyU2CZPpN8cr15nFD7YHDzHnON2fOGYZhmHkw4XEW+wD4xkT4lMvl6CE0+Y2ohh+dz+cZn89HVS/5+n/d/wVMkXq9Xor2v5SBgsmymQwZHx+vOqlKpXKDXWI3eU6Tg+kqSjSh3W4/s9lsvzUajaNcAK3xY7Dyci3nd6WXSCS60dHRvMfjSRcKBfWV4SYbrVarB8p0PB5nY7HYmdVq/aDX67WlckpKKcvpOjs7X09OTvoPDw8z2Wy2Bu+imJqa+npycnJXGHOt3YRGoSyVSvvMZrNkYWFBs7GxkaoBAXFJcDJhcCW5rq5ur62trQ/EOhyOBhDT2Nj4qVKMqA31ve1yub7Rfufo/PycDA4OxpuamhqECaouhVqtfuD3+1tqa2uZQCCQDoVCWTwknVQDDvIKE1clI1ja09Ozg0cjx8fHpL+/P+50OhMU8f7+Punt7f2I5NdqXRXi9fV1z9jYWCuIWV5eziSTyWAqlXq1urqaw6AwOMiCG4lOYtEturu732xubhK0FQHSvfr6+lsog4HWPIPvIBqNErRiqCiwkkKpVFowZd8xZSQYDLImk+kJ52+xWJ4tLS3hU8yTkZGRBD2Ms4mu6Nun4XA4f3p6SoaGhuJ0+rgg/Bsmt9udYFmWzM3NZdDT05ztWsE5JV0R1AqUCfTt0fb2tjESiRRmZmaOUOcI3w9DY5mdnb03PDzMoDQ/MZFRzM20lO/E38vl8vt46UdAq0WNJWixlEwmu8B1bXioOxwjpgXJ0hMTE1og1qysrDghf+HnKtoD7c7u7i5ZXFzMGY3GF7iFuRR3dHTMr62tXWxtbZH29vZ3RYmECozu54ODAzpdP2hphHZOVigUVjChvgMDA+85fdm1q6vrrU6n+4WR9Zd1ujQ0Nzc/NBgMScSExXwZ2j5oL5Wo46UD/ZvxUemo+AdW1zJzUYr16wAAAABJRU5ErkJggg==), auto\";\n    var _hasUI = Autodesk.Viewing.GuiViewer3D && viewer instanceof Autodesk.Viewing.GuiViewer3D;\n\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    function getActivePick()\n    {\n        switch (_activePoint) {\n            case 0:\n                return null;\n            case 1:\n            case 2:\n                return _measurement.getPick(_activePoint);\n            case 3:\n                return _measurement.getPick(_measurement.countPicks());\n        }\n    }\n\n    function getPreviousPick()\n    {\n        switch (_activePoint) {\n            case 0:\n                return null;\n            case 1:\n                return _measurement.getPick(_measurement.countPicks());\n            case 2:\n            case 3:\n                return _measurement.getPick(1);\n        }\n    }\n\n    function hasPreviousPick()\n    {\n        switch (_activePoint) {\n            case 0:\n                return false;\n            case 1:\n                return _measurement.hasPick(_measurement.countPicks());\n            case 2:\n            case 3:\n                return _measurement.hasPick(1);\n        }\n    }\n\n    function noPicksSet() {\n        _activePoint = 0;\n    }\n\n    function allPicksSet() {\n        _activePoint = 3;\n        _measurement.indicator.changeAllEndpointsEditableStyle(true);\n    }\n\n    function isNoPicksSet() {\n        return _activePoint === 0;\n    }\n\n    function areAllPicksSet() {\n        return _activePoint === 3;   \n    }\n\n    this.register = function()\n    {\n        if (_hasUI && !_calibrationPanel) {\n            _calibrationPanel = new CalibrationPanel( this, _viewer, \"calibration-panel\", \"Calibration\", _options );\n            _viewer.addPanel(_calibrationPanel);\n        }\n\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\n        this.screenSizeChangedBinded = this.screenSizeChanged.bind(this);\n    };\n\n    this.deregister = function()\n    {   \n        this.deactivate();\n        \n        if (_calibrationPanel) {\n            _viewer.removePanel( _calibrationPanel );\n            _calibrationPanel.uninitialize();\n            _calibrationPanel = null;\n        }\n    };\n\n    this.isActive = function()\n    {\n        return _active;\n    };\n\n    this.getNames = function()\n    {\n        return _names;\n    };\n\n    this.getName = function()\n    {\n        return _names[0];\n    };\n\n    this.getPriority = function()\n    {\n        return _priority;\n    };\n\n    this.getCursor = function() {\n        return _isDragging ? null : _cursor;\n    };\n\n    this.activate = function()\n    {\n        _active = true;\n        _isDragging = false;\n        this.isEditingEndpoint = false;\n        this.editByDrag = false;\n        noPicksSet();\n\n        _viewer.toolController.activateTool(_snapper.getName());\n        _viewer.toolController.activateTool(\"magnifyingGlass\");\n\n\n        if (!_measurement.indicator) {\n            _measurement.attachIndicator(_viewer, this, CalibrationToolIndicator);\n        }\n\n        _measurement.indicator.clear();\n\n        if (_calibrationTaken && _selectedP1 && _selectedP2) {\n            _measurement.setPick(1, _selectedP1.clone());\n            _measurement.setPick(2, _selectedP2.clone());\n\n            allPicksSet();\n\n            var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(_selectedSize, _selectedUnits);\n            _measurement.indicator.updateLabelValue(Autodesk.Viewing.Private.formatValueWithUnits(parsedRequestedSize, _selectedUnits, 3, _sharedMeasureConfig.precision));\n            _distance = _measurement.distanceXYZ;\n            _measurement.indicator.changeLabelClickableMode(false);\n            _waitingForInput = true;\n            var valid = this.render();\n            _measurement.indicator.changeAllEndpointsEditableStyle(true);\n\n            if (valid) {\n                if (_calibrationPanel) {\n                    _calibrationPanel.setPanelValue(_selectedSize);\n                }\n                \n                this.showPanel();\n            }\n        } else if (_hasUI) {\n            const message = {\n                messageKey    : \"Select two points\",\n                messageDefaultValue  : \"Select two points to calibrate drawing\",\n                position: \"top\"\n            };\n            Autodesk.Viewing.Private.HudMessage.displayMessage(_viewer.container, message)\n        }\n\n        _viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n        _viewer.addEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.screenSizeChangedBinded);\n    };\n\n    this.deactivate = function()\n    {   \n        if (!_active)\n            return;\n\n        _active = false;\n\n        Autodesk.Viewing.Private.HudMessage.dismiss();\n        this.hidePanel();\n        this.updateViewportId(true);\n        _waitingForInput = false;\n        _measurement.clearAllPicks();\n\n        if(_snapper && _snapper.isActive()) {\n            _viewer.toolController.deactivateTool(_snapper.getName());\n        }\n\n        _viewer.toolController.deactivateTool(\"magnifyingGlass\");\n\n        if (_measurement.indicator) {\n            _measurement.indicator.clear();\n            _measurement.indicator.destroy();\n            _measurement.indicator = null;\n        }\n\n        _viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n        _viewer.removeEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.screenSizeChangedBinded);\n    };\n\n    this.getActivePointIndex = function() {\n        return _activePoint;\n    };\n\n    this.setCalibrationFactor = function ( calibrationFactor ) {\n        _sharedMeasureConfig.calibrationFactor = calibrationFactor;\n    };\n\n    this.getCalibrationFactor = function () {\n        return _sharedMeasureConfig.calibrationFactor;\n    };\n\n    this.updateLabelValue = function (value) {\n        _measurement.indicator.updateLabelValue(value);\n    };\n\n    this.isCalibrationValid = function(requestedUnits, requestedSize) { \n        var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(requestedSize, requestedUnits); \n        return !isNaN(parsedRequestedSize); \n    };\n\n    this.calibrate = function(requestedUnits, requestedSize)\n    {\n\n        var calibrationFactor = null;\n        \n        var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(requestedSize, requestedUnits);\n\n        if (!isNaN(parsedRequestedSize)) {\n            var currentSize = Autodesk.Viewing.Private.convertUnits(_viewer.model.getUnitString(), requestedUnits, 1, _distance);\n            if (currentSize !== 0 && !isNaN(currentSize)) {\n                calibrationFactor = parsedRequestedSize / currentSize;\n                _sharedMeasureConfig.calibrationFactor = calibrationFactor;\n                _sharedMeasureConfig.units = requestedUnits;\n                var defualtPrecision = _viewer.model.is2d() ? 3 : 1;\n                var requestedPrecision = Autodesk.Viewing.Private.calculatePrecision(requestedSize);\n                _sharedMeasureConfig.precision = Math.max((_sharedMeasureConfig.precision ? _sharedMeasureConfig.precision : defualtPrecision), requestedPrecision);\n                _selectedSize = requestedSize;\n                _selectedUnits = requestedUnits;\n                _isCalibrated = true;\n                _calibrationTaken = true;\n                _selectedP1 = _measurement.getPick(1).clone();\n                _selectedP2 = _measurement.getPick(2).clone();\n            }\n        }\n        \n        if (calibrationFactor) {\n            _viewer.getExtension('Autodesk.Measure').enableCalibrationTool(false);\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.FINISHED_CALIBRATION , units: requestedUnits , scaleFactor: calibrationFactor, size: requestedSize});\n        }\n    };\n\n    this.calibrateByScale = function(requestedUnits, requestedScale) {\n        _sharedMeasureConfig.calibrationFactor = requestedScale;\n        \n        if (_sharedMeasureConfig.units !== requestedUnits ) {\n            _sharedMeasureConfig.units = requestedUnits;\n            _selectedUnits = requestedUnits;\n        }\n\n        _isCalibrated = true;\n    };\n\n    this.getCurrentUnits = function () {\n        return _sharedMeasureConfig.units;\n    };\n\n    this.hidePanel = function() {\n        if (_calibrationPanel) {\n            _calibrationPanel.setVisible(false);\n        }\n        else {\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.CLOSE_CALIBRATION_PANEL_EVENT });\n        }\n    };\n\n    this.showPanel = function() {\n\n        Autodesk.Viewing.Private.HudMessage.dismiss();\n\n        var self = this;\n        const _window = this.getWindow();\n\n        if (_calibrationPanel) {\n            _window.setTimeout(function () { _calibrationPanel.requestedSizeTextbox.focus();}, 0);\n            _calibrationPanel.setVisible(true);\n            _calibrationPanel.updatePanelPosition(_measurement.indicator.labelPosition, _measurement.indicator.p1, _measurement.indicator.p2, _measurement.indicator.calibrationLabel.clientHeight);\n            _calibrationPanel.updateUnits();\n            self.addWindowEventListener(\"keyup\", function onKeyUp(e){\n                var key = e.key || String.fromCharCode(e.keyCode);\n                if (key == \"Escape\" && self.isActive()) {\n                    self.hidePanel();\n                    self.clearSize();\n                    self.showAddCalibrationLabel();\n                    \n                    self.removeWindowEventListener(\"keyup\", onKeyUp);\n                }\n            });\n        }\n        else {\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.OPEN_CALIBRATION_PANEL_EVENT, data: {size: _selectedSize, units: _selectedUnits } });\n        }\n    };\n\n    this.updateCalibrationPanel = function() {\n        _calibrationPanel && _calibrationPanel.updateUnits();\n    }\n\n    this.showAddCalibrationLabel = function() {\n        _measurement.indicator.showAddCalibrationLabel();\n    };\n\n    this.isCalibrated = function() {\n        return _isCalibrated;\n    };\n\n    this.clearSize = function () {\n        _measurement.indicator.updateLabelValue(null);\n\n        if (_calibrationPanel) {\n            _calibrationPanel.requestedSizeTextbox.value = \"\";   \n        }\n        else {\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.CLEAR_CALIBRATION_SIZE_EVENT });\n        }\n    };\n\n    this.getMaxPrecision = function() {\n        return _maxPrecision;\n    };\n    \n    this.clearMeasurement = function() {\n\n        noPicksSet();\n\n        this.clearPick(1);\n        this.clearPick(2);\n\n        _measurement.indicator.clear();\n        \n        this.updateViewportId(true);\n        this.hidePanel();\n\n        _waitingForInput = false;\n    };\n\n    this.clearPick = function(pickNumber) {\n        if (_measurement.hasPick(pickNumber)) {\n            _measurement.clearPick(pickNumber);\n            _measurement.indicator.hideClick(pickNumber);\n        }\n    };\n\n    this.repickEndpoint = function(pickNumber) {\n        this.clearPick(pickNumber);\n        this.editEndpoint(null, pickNumber);\n    };\n\n    this.getSnapper = function() {\n        return _snapper;\n    };\n\n    this._handleMouseEvent = function (event) {\n\n        var valid = false;\n\n        if (_snapper.isSnapped()) {\n\n            // User picked a new point after two points where already set (or none) - Start a new measurement.\n            if (areAllPicksSet() || isNoPicksSet()) {\n                this.clearMeasurement();\n                _activePoint = 1;\n            }\n            \n            _snapper.copyResults(getActivePick());\n\n            valid = true;\n\n        } \n        else { \n            // In order to draw rubber-band, set the cursor position, so the indicator will use it as active point.\n            if (event && _viewer.model.is2d()) {\n                var viewport = _viewer.container.getBoundingClientRect();\n                var x = event.canvasX || event.clientX - viewport.left;\n                var y = event.canvasY || event.clientY - viewport.top;\n\n                if (x && y) {\n                    _cursorPosition = MeasureCommon.inverseProject({ x:x, y:y }, _viewer);\n                }\n            }\n\n            // In case a measurement is set, and the user clicks on a blank spot - don't do nothing.\n            if (_consumeSingleClick && _measurement && !this.isEditingEndpoint) {\n                if (_activePoint === _measurement.getMaxNumberOfPicks() + 1) {\n                    return true;\n                }\n            }\n\n            var lastPick = getActivePick();\n            if (lastPick) {\n                lastPick.clear();\n            }\n        }\n\n        this.correctPickPosition();\n\n        if (_consumeSingleClick) {\n            this._doConsumeSingleClick(valid);\n        }\n        \n        if (!isNoPicksSet()) {\n            var renderSucceeded = this.render();\n\n            // If it's the first pick, we don't expect the render of the rubberband to be succeeded.\n            // So enter here only if it's not the first pick.\n            if (_measurement.hasPick(2)) {\n                valid &= renderSucceeded;\n            }\n        }\n\n        if (_consumeSingleClick) {\n            if (_measurement.isComplete() && valid) {\n                _distance = _measurement.distanceXYZ;\n                this.clearSize();\n                this.showPanel();\n                _waitingForInput = true;\n            }\n            else {\n                this.hidePanel();\n                _measurement.indicator.updateLabelValue(null);\n                _waitingForInput = false;\n            }\n        }\n\n        // If valid is false, the last pick is not revelant, and will clear it in case of a click.\n        return valid;\n    };\n\n    this.updateViewportId = function(clear) {\n        if (_viewer.model && _viewer.model.is2d()) {\n            if (clear || isNoPicksSet()) {\n                viewer.impl.updateViewportId(0);\n                _snapper.setViewportId(null);\n            }\n            else if (!_isPressing) {\n                var viewport = getPreviousPick().viewportIndex2d || getActivePick().viewportIndex2d;\n                \n                // Pass viewport Id to LineShader to make all other geometries with different viewport transparent\n                viewer.impl.updateViewportId(viewport);\n                if (_snapper)\n                    _snapper.setViewportId(viewport);  \n            \n            }\n        }\n    };\n\n    this._doConsumeSingleClick = function(valid) {\n\n        this.updateViewportId(_measurement.isComplete());\n\n        _measurement.indicator.clear();\n    };\n\n\n    this.handleButtonDown = function (event, button) {\n        if (av.isMobileDevice()) \n            return false;\n\n        _isDragging = true;\n        if (button === 0 && !event.ctrlKey && !event.metaKey && !event.shiftKey && !event.altKey) {\n            _consumeSingleClick = true;\n            _downX = event.canvasX;\n            _downY = event.canvasY;\n        }\n        return false;\n    };\n\n    this.handleMouseMove = function (event) {\n        if (av.isMobileDevice())\n            return false;\n\n        if (event.canvasX !== _downX || event.canvasY !== _downY) {\n            _consumeSingleClick = false;    \n        }\n\n        _endpointMoved = this.isEditingEndpoint;    \n\n        if (!isNoPicksSet() && !areAllPicksSet()) {\n            this.clearPick(_activePoint);\n            this._handleMouseEvent(event);\n        }\n\n        _snapper.indicator.render();\n        \n        return false;\n    };\n\n    this.restoreMouseListeners = function () {\n\n        // When a press event has happend, the default behavior of firefly.js is to disable other mouse events,\n        // So they won't be triggered as well.\n        // The solution is to enable them after the end of the pressing.\n\n        _viewer.toolController.getTool(\"gestures\").controller.enableMouseButtons(true);\n    };\n\n    this.handlePressHold = function (event) {\n        _consumeSingleClick = false;\n\n        if (av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"press\":\n                    _isPressing = true;\n                    if (areAllPicksSet()) {\n                        this.clearMeasurement();\n                    } else {\n                        this.clearPick(_activePoint);\n                    }\n                    this._handleMouseEvent(event);\n                    _snapper.indicator.render();\n\n                    return true;\n\n                case \"pressup\":\n                    _consumeSingleClick = true;\n                    this.restoreMouseListeners();\n                    _singleClickHandled = !_singleClickHandled;\n                    this.handleSingleClick(event);\n                    _isPressing = false;\n                    return true;\n            }\n        }\n        return false;\n\n    };\n\n    this.correctPickPosition = function() {\n        \n        var active = getActivePick();\n            \n        if (active && !active.getGeometry() && _cursorPosition) {\n            active.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\n            active.geomVertex = _cursorPosition;\n            active.intersectPoint = _cursorPosition;\n        }\n\n        if (hasPreviousPick()) {\n            var passive = getPreviousPick();\n            MeasureCommon.correctPerpendicularPicks(passive, active, viewer, _snapper);\n        }\n    };\n\n    this.render = function() {\n\n        var hasResult = _measurement.computeResult(_measurement.picks, _viewer, _snapper);\n        _measurement.indicator.render(_measurement.picks, _consumeSingleClick || _waitingForInput);\n\n        return hasResult;\n    };\n\n    this.editEndpoint = function(event, endpointNumber) {\n        if (_activePoint === endpointNumber) {\n            _measurement.indicator.changeEndpointOnEditStyle(endpointNumber, false);\n            this.undoEditEndpoint();\n            return;\n        }\n\n        _activePoint = endpointNumber;\n        this.isEditingEndpoint = true;\n\n        _measurement.indicator.changeEndpointOnEditStyle(endpointNumber, true);\n        _measurement.indicator.changeAllEndpointsEditableStyle(false);\n\n        for (var key in _measurement.picks) {\n            if (_measurement.picks.hasOwnProperty(key)) {\n                _picksBackup[key] = _measurement.getPick(key).clone();\n            }\n        }\n\n        this.updateViewportId();\n\n        this.hidePanel();\n        _measurement.indicator.updateLabelValue(null);\n        _waitingForInput = false;\n\n        if(!av.isMobileDevice()) {\n            this._handleMouseEvent(event);\n        }\n    };\n\n    this.undoEditEndpoint = function() {\n        _measurement.indicator.clear();\n\n        for (var key in _measurement.picks) {\n            if (_measurement.picks.hasOwnProperty(key)) {\n                _measurement.setPick(key, _picksBackup[key].clone());\n            }\n        }\n        \n        this.updateViewportId(true);\n        this.isEditingEndpoint = false;\n        _waitingForInput = true;\n\n        allPicksSet();\n        var valid = this.render();\n        \n        if (valid) {\n            this.showPanel();\n        }\n    };\n\n    this.handleGesture = function(event)\n    {   \n        if (av.isTouchDevice()){\n            \n            _consumeSingleClick = false;\n        \n            if (_isPressing) {\n                \n                this.clearPick(_activePoint);\n\n                switch( event.type )\n                {\n                    case \"dragstart\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragmove\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragend\":\n                        _isPressing = false;\n                        _consumeSingleClick = true;\n\n                        if (!this.editByDrag) {\n                            _singleClickHandled = !_singleClickHandled;\n                            this.handleSingleClick(event);    \n                        }\n\n                        this.editByDrag = false;\n                        this.restoreMouseListeners();\n                        return true;\n\n                    case \"pinchend\":\n                        _consumeSingleClick = true;\n                        _singleClickHandled = !_singleClickHandled;\n                        this.handleSingleClick(event);\n                        this.restoreMouseListeners();\n                        return true;\n                }\n            }\n        }\n\n        return false;\n    };\n\n    this.handleButtonUp = function (event) {\n        _isDragging = false;\n        _downX = null;\n        _downY = null;\n        \n        if (_endpointMoved) {\n            _consumeSingleClick = true;\n            _singleClickHandled = !_singleClickHandled;\n            this.handleSingleClick(event);\n            _endpointMoved = false;\n        }\n\n        return false;\n    };\n\n    this.handleSingleClick = function (event) {\n        if (_consumeSingleClick) {\n            \n            _snapper.indicator.clearOverlays();\n\n            _measurement.indicator.changeEndpointOnEditStyle(_activePoint, false);\n\n            if (this._handleMouseEvent(event)) {\n                _measurement.indicator.showEndpoints();\n                _measurement.indicator.updateLabelsPosition();\n                _activePoint++;\n            }\n            else {\n                if (this.isEditingEndpoint) {\n                    this.undoEditEndpoint();\n                }\n                else {\n                    this.clearMeasurement();\n                }\n            }\n\n            if (_measurement.isComplete()) {\n                allPicksSet();\n            }\n\n            _consumeSingleClick = false;\n            _singleClickHandled = !_singleClickHandled;\n            this.isEditingEndpoint = false;\n\n            _snapper.clearSnapped();\n        }\n        return true;\n    };\n\n    this.handleDoubleClick = function() {\n        return true;\n    };\n\n    this.handleSingleTap = function (event) {\n        if (!_singleClickHandled) {\n            _consumeSingleClick = true;\n            _snapper.onMouseDown({x: event.canvasX, y:event.canvasY});\n            this.handleSingleClick(event);\n        }\n        _singleClickHandled = !_singleClickHandled;\n\n        return true;\n    };\n\n    this.handleDoubleTap = function() {\n        return true;\n    };\n\n    this.handleResize = function() {\n        if (_measurement.indicator) {\n            _measurement.indicator.handleResize();\n        }\n    };\n\n    this.onCameraChange = function() {\n        if (_snapper.indicator) {\n            _snapper.indicator.onCameraChange();\n        }\n    };\n\n    this.screenSizeChanged = function(event) {\n        this.onCameraChange();\n    };\n};\n\nav.GlobalManagerMixin.call(CalibrationTool.prototype);","\nconst av = Autodesk.Viewing;\n\nexport var MagnifyingGlass = function(viewer) {\n\n    var _viewer = viewer;\n    var _active = false;\n    var _names = [\"magnifyingGlass\"];\n    var _priority = 70;\n    var _isPressing = false;\n    var _radius = 60;\n    var _zoom = 2;\n    var _offset = 15;\n    var _magnifyingGlassCanvas = null;\n    var _imageData = null;\n    var _imageBuffer = null;\n    var _clientX = null;\n    var _clientY = null;\n    var _needsClear = false;\n    var av = Autodesk.Viewing;\n    \n    this.setGlobalManager(viewer.globalManager);\n\n    this.register = function() {\n        this.updateMagnifyingGlassBinded = this.updateMagnifyingGlass.bind(this);\n    };\n\n    this.isActive = function() {\n        return _active;\n    };\n\n    this.activate = function() {\n        _active = true;\n    };\n\n    this.updateMagnifyingGlass = function() {\n        const _window = this.getWindow();\n        const _document = this.getDocument();\n        if (_needsClear) {\n            _magnifyingGlassCanvas && _magnifyingGlassCanvas.classList.remove('visible');\n            _needsClear = false;\n        }\n        else {\n            var pixelRatio = _window.devicePixelRatio;\n            var diameter = 2 * _radius;\n            var normlizedDiameter = diameter * pixelRatio;\n            var x = pixelRatio * (_clientX - (_radius  / _zoom));\n            var y = pixelRatio * (_clientY - (_radius  / _zoom));\n            \n            if (!_magnifyingGlassCanvas) {\n                _magnifyingGlassCanvas = _document.createElement(\"canvas\");\n                _magnifyingGlassCanvas.className = 'magnifying-glass';\n                _magnifyingGlassCanvas.width = normlizedDiameter;\n                _magnifyingGlassCanvas.height = normlizedDiameter;\n                _magnifyingGlassCanvas.style.width = diameter + 'px';\n                _magnifyingGlassCanvas.style.height = diameter + 'px';\n\n                // Swap canvas\n                _magnifyingGlassCanvas.getContext(\"2d\").translate(0, normlizedDiameter);\n                _magnifyingGlassCanvas.getContext(\"2d\").scale(1,-1);\n\n                _viewer.container.appendChild(_magnifyingGlassCanvas);\n                _imageData = _magnifyingGlassCanvas.getContext(\"2d\").createImageData(Math.ceil(normlizedDiameter / _zoom), Math.ceil(normlizedDiameter / _zoom));\n                _imageBuffer = new Uint8Array(_imageData.data.buffer);\n            }\n\n            var ctx = _magnifyingGlassCanvas.getContext(\"2d\");\n\n            // Read the pixels from the frame buffer\n            var gl = _viewer.impl.glrenderer().getContext();\n            gl.readPixels(x, _viewer.canvas.height - y - _imageData.height, _imageData.width, _imageData.height, gl.RGBA, gl.UNSIGNED_BYTE, _imageBuffer);\n            // Put the pixel into the magnifying context.\n            ctx.putImageData(_imageData, 0, 0);\n            // Scale the image\n            ctx.drawImage(_magnifyingGlassCanvas, 0, 0, _imageData.width, _imageData.height, 0, 0, normlizedDiameter, normlizedDiameter);\n            this.setGlassPosition(_magnifyingGlassCanvas, _clientX, _clientY, diameter, _offset); \n\n            _magnifyingGlassCanvas.classList.toggle('visible', true);\n        }\n    };\n\n    this.deactivate = function() {\n        this.clearMagnifyingGlass();\n        _active = false;\n    };\n\n    this.getNames = function() {\n\n        return _names;\n    };\n\n    this.getName = function() {\n\n        return _names[0];\n    };\n\n    this.getPriority = function() {\n        return _priority;\n    };\n\n    this.setGlassPosition = function(canvas, x, y, diameter, offset) {\n            \n        // check the left border of canvas\n        canvas.style.left = (x - diameter/2) + 'px';\n\n        // check the top border of canvas\n        if (y - diameter - offset > 0) {\n            canvas.style.top  = (y - diameter - offset) + 'px';    \n        }\n        else {\n            canvas.style.top = (y + offset) + 'px';    \n        }\n    };\n\n    this.requestUpdate = function() {\n        if(!_viewer.hasEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.updateMagnifyingGlassBinded)) {\n           _viewer.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.updateMagnifyingGlassBinded, { once: true });\n        }\n    };\n\n    this.drawMagnifyingGlass = function(clientX, clientY) {\n        _needsClear = false;\n        _clientX = clientX;\n        _clientY = clientY;\n        _viewer.impl.invalidate(false, false, true);\n        this.requestUpdate();\n    };\n\n    this.clearMagnifyingGlass = function () {\n        _needsClear = true;\n        this.requestUpdate();\n    };\n\n    this.handlePressHold = function (event) {\n\n        if (av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"press\":\n                    _isPressing = true;\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"pressup\":\n                    this.clearMagnifyingGlass();\n                    _isPressing = false;\n                    break;\n            }\n        }\n        return false;\n\n    };\n\n    this.handleGesture = function(event) {\n\n        if (_isPressing && av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"dragstart\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"dragmove\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"dragend\":\n                    this.clearMagnifyingGlass();\n                    _isPressing = false;\n                    break;\n\n                case \"pinchstart\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"pinchmove\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"pinchend\":\n                    this.clearMagnifyingGlass();\n                    break;\n            }\n        }\n\n        return false;\n    };\n\n    this.handleMouseMove = function (event) {\n        return false;\n    };\n\n    this.handleWheelInput = function (delta) {\n        return false;\n    };\n\n    this.handleButtonUp = function (event, button) {\n        return false;\n    };\n\n};\n\nav.GlobalManagerMixin.call(MagnifyingGlass.prototype);\n","\n    var av = Autodesk.Viewing;\n    var avu = Autodesk.Viewing.UI;\n    var avp = Autodesk.Viewing.Private;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    // /** @constructor */\n    export function MeasureToolbar(measureExtension)\n    {\n        this.measureExtension = measureExtension;\n        this.measureTool = this.measureExtension.measureTool;\n        this.viewer = this.measureExtension.viewer;\n        this.setGlobalManager(this.viewer.globalManager);\n        this.visible = false;\n        this.buttonsList = [];\n    }\n\n    var proto = MeasureToolbar.prototype;\n    av.GlobalManagerMixin.call(MeasureToolbar.prototype);\n\n    proto.init = function() {\n        var self = this;\n\n        const _document = this.getDocument();\n        \n        // Add Measure tool toolbar to main toolbar\n        var toolbar = this.viewer.getToolbar();\n        var navigationBar = toolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);\n        var toolbarOptions = {};\n        toolbarOptions.index = toolbar.indexOf(navigationBar) + 1;\n        this.measureToolbar = new avu.ControlGroup(Autodesk.Viewing.TOOLBAR.MEASURETOOLSID);\n        this.measureToolbar.setGlobalManager(this.globalManager);\n        toolbar.addControl(this.measureToolbar, toolbarOptions);\n    \n\n        // Create a button for the measure simple distance.\n        this.measureSimpleDistanceBtn = new avu.Button(\"toolbar-measureTool-simple-distance\");\n        this.measureSimpleDistanceBtn.setGlobalManager(this.globalManager);\n        this.measureSimpleDistanceBtn.setToolTip(\"Distance\");\n        this.measureSimpleDistanceBtn.setIcon(\"adsk-icon-measure-distance-new\");\n        this.measureSimpleDistanceBtn.onClick = function() {\n            var enable = self.measureSimpleDistanceBtn.getState() !== avu.Button.State.ACTIVE;\n            if (enable) {\n                self.measureExtension.activate('distance');\n            } else {\n                self.measureTool.deselectAllMeasurements();\n            }\n        };\n\n        this.measureToolbar.addControl(this.measureSimpleDistanceBtn);\n        this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE] = this.measureSimpleDistanceBtn;\n\n\n        // Create a button for the measure Angle.\n        this.measureAngleBtn = new avu.Button(\"toolbar-measureTool-angle\");\n        this.measureAngleBtn.setGlobalManager(this.globalManager);\n        this.measureAngleBtn.setToolTip(\"Angle\");\n        this.measureAngleBtn.setIcon(\"adsk-icon-measure-angle-new\");\n        this.measureAngleBtn.onClick = function () {\n            var enable = self.measureAngleBtn.getState() !== avu.Button.State.ACTIVE;\n            if (enable) {\n                self.measureExtension.activate('angle');\n            } else {\n                self.measureTool.deselectAllMeasurements();\n            }\n        };\n        this.measureToolbar.addControl(this.measureAngleBtn);\n        this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE] = this.measureAngleBtn;\n\n        if (this.viewer.model && this.viewer.model.is2d()) {\n            // Create a button for the measure distance.\n            this.measureAreaBtn = new avu.Button(\"toolbar-measureTool-area\");\n            this.measureAreaBtn.setGlobalManager(this.globalManager);\n            this.measureAreaBtn.setToolTip(\"Area\");\n            this.measureAreaBtn.setIcon(\"adsk-icon-measure-area-new\");\n            this.measureAreaBtn.onClick = function() {\n                var enable = self.measureAreaBtn.getState() !== avu.Button.State.ACTIVE;\n                if (enable) {\n                    self.measureExtension.activate('area');\n                } else {\n                    self.measureTool.deselectAllMeasurements();\n                }\n            };\n\n            this.measureToolbar.addControl(this.measureAreaBtn);\n            this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_AREA] = this.measureAreaBtn;\n        }\n\n        if (this.viewer.model && this.viewer.model.is2d()) {\n          // Create a button for the arc measurement.\n          this.measureArcBtn = new avu.Button(\"toolbar-measureTool-arc\");\n          this.measureArcBtn.setGlobalManager(this.globalManager);\n          this.measureArcBtn.setToolTip(\"Arc\");\n          this.measureArcBtn.setIcon(\"adsk-icon-measure-arc-new\");\n          this.measureArcBtn.onClick = function() {\n              var enable = self.measureArcBtn.getState() !== avu.Button.State.ACTIVE;\n              if (enable) {\n                  self.measureExtension.activate('arc');\n              } else {\n                  self.measureTool.deselectAllMeasurements();\n              }\n          };\n\n          this.measureToolbar.addControl(this.measureArcBtn);\n          this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_ARC] = this.measureArcBtn;\n        }\n\n        // Create a button for the Calibration tool.\n        this.calibrationToolBtn = new avu.Button( \"toolbar-calibrationTool\");\n        this.calibrationToolBtn.setGlobalManager(this.globalManager);\n        this.calibrationToolBtn.setToolTip(\"Calibrate\");\n        this.calibrationToolBtn.setIcon(\"adsk-icon-measure-calibration\");\n        this.calibrationToolBtn.onClick = function(e) {\n            var enable = self.calibrationToolBtn.getState() !== avu.Button.State.ACTIVE;\n            if(enable) {\n                self.measureExtension.activate('calibrate');\n            } else  {\n                self.measureExtension.enableCalibrationTool(false);\n            }\n        };\n\n        this.measureToolbar.addControl(this.calibrationToolBtn);\n        this.buttonsList[MeasureCommon.MeasurementTypes.CALIBRATION] = this.calibrationToolBtn;\n\n        var separator = _document.createElement('div');\n        separator.className = 'measure-toolbar-seperator';\n\n        this.measureToolbar.container.appendChild(separator);\n        \n\n        // Create a button for the Trash.\n        this.deleteBtn = new avu.Button( \"toolbar-delete\");\n        this.deleteBtn.setGlobalManager(this.globalManager);\n        this.deleteBtn.setToolTip(\"Delete measurement\");\n        this.deleteBtn.setIcon(\"adsk-icon-measure-trash\");\n        this.deleteBtn.onClick = function() {\n            self.measureExtension.deleteCurrentMeasurement();\n        };\n\n        this.measureToolbar.addControl(this.deleteBtn);\n\n        // Create a button for the Settings panel.\n        this.settingsBtn = new avu.Button( \"toolbar-settings\");\n        this.settingsBtn.setGlobalManager(this.globalManager);\n        this.settingsBtn.setToolTip(\"Measure settings\");\n        this.settingsBtn.setIcon(\"adsk-icon-measure-settings\");\n\n        this.settingsControlPanel = _document.createElement('div');\n        this.settingsControlPanel.classList.add('docking-panel');\n        this.settingsControlPanel.classList.add('docking-panel-container-solid-color-b');\n        this.settingsControlPanel.classList.add('measure-settings-popup');\n        this.settingsControlPanel.classList.add('hide');\n\n        this.settingsBtn.onClick = function (event) {\n            if (this.settingsControlPanel.classList.contains('hide')) {\n                this.settingsControlPanel.classList.remove('hide');\n                this.setButtonActive(this.settingsBtn);\n            }\n            else {\n                this.settingsControlPanel.classList.add('hide');\n                this.setButtonInactive(this.settingsBtn);\n            }\n        }.bind(this);\n\n        this.measureToolbar.container.appendChild(this.settingsControlPanel);\n        this.settingsControlPanel.root = this.settingsBtn;\n        this.measureToolbar.addControl(this.settingsBtn);\n\n\n        // Settings Panel\n        this.table = _document.createElement(\"table\");\n        this.table.classList.add(\"adsk-lmv-tftable\");\n        this.table.classList.add(\"calibration-table\");\n\n        this.tbody = _document.createElement(\"tbody\");\n        this.table.appendChild(this.tbody);\n        this.settingsControlPanel.appendChild(this.table);\n\n        this.units = [\n            { name: 'Unknown', units: '', matches: [''] },                                      // localized in OptionDropDown() call below\n            { name: 'Decimal feet', units: 'decimal-ft', matches: ['ft', 'decimal-ft'] },             // localized in OptionDropDown() call below\n            { name: 'Feet and fractional inches', units: 'ft-and-fractional-in', matches: ['ft-and-fractional-in'] },         // localized in OptionDropDown() call below\n            { name: 'Feet and decimal inches', units: 'ft-and-decimal-in', matches: ['ft-and-decimal-in'] }, // localized in OptionDropDown() call below\n            { name: 'Decimal inches', units: 'decimal-in', matches: ['in', 'decimal-in'] },           // localized in OptionDropDown() call below\n            { name: 'Fractional inches', units: 'fractional-in', matches: ['fractional-in'] },  // localized in OptionDropDown() call below\n            { name: 'Meters', units: 'm', matches: ['m'] },                                     // localized in OptionDropDown() call below\n            { name: 'Centimeters', units: 'cm', matches: ['cm'] },                              // localized in OptionDropDown() call below\n            { name: 'Millimeters', units: 'mm', matches: ['mm'] },                              // localized in OptionDropDown() call below\n            { name: 'Meters and centimeters', units: 'm-and-cm', matches: ['m-and-cm'] },        // localized in OptionDropDown() call below\n            { name: 'Points', units: 'pt', matches: ['pt'] }                                    // localized in OptionDropDown() call below\n        ];\n\n        var initialIndex = this.findUnits(),\n            unitNames = [];\n        \n        // It is not possible to hide elements in Safari.\n        if (av.isSafari() && this.viewer.model && this.viewer.model.getDisplayUnit()){\n            // We will remove the 'Unknown' unit from the units array.\n            this.units.shift();\n        }\n        \n        for (var i = 0; i < this.units.length; ++i) {\n            unitNames.push(this.units[i].name);\n        }\n\n        this.unitList = new avp.OptionDropDown(\"Unit type\", this.tbody, unitNames, initialIndex, null, { paddingLeft: 0, paddingRight: 15 });\n        this.unitList.setGlobalManager(this.globalManager);\n        this.unitList.addEventListener(\"change\", function(e) {\n            var index = self.unitList.selectedIndex;\n            var toUnits = self.units[index].units;\n            self.measureTool.setUnits(toUnits);\n            self.setupPrecision();\n            avp.logger.track({ category: 'pref_changed', name: 'measure/units', value: toUnits });\n        });\n\n        this.precisionList = new avp.OptionDropDown(\"Precision\", this.tbody, [], -1, null, { paddingLeft: 0, paddingRight: 15 });\n        this.precisionList.setGlobalManager(this.globalManager);\n        this.precisionList.addEventListener(\"change\", function(e) {\n            var index = self.precisionList.selectedIndex;\n            self.measureTool.setPrecision(index);\n            avp.logger.track({ category: 'pref_changed', name: 'measure/precision', value: index });\n        });\n\n        this.isolate = new avp.OptionCheckbox(\"Isolate measurement\", this.tbody, false);\n        this.isolate.setGlobalManager(this.globalManager);\n        this.isolate.addEventListener(\"change\", function(e) {\n            var enable = self.isolate.checked;\n            self.measureTool.setIsolateMeasure(enable);\n            if (enable) {\n                self.measureTool.isolateMeasurement();\n            }\n            else {\n                self.measureTool.clearIsolate();\n            }\n            avp.logger.track({ category: 'pref_changed', name: 'measure/isolate', value: enable });\n        });\n\n        this.freeMeasure = new avp.OptionCheckbox(\"Enable free measure\", this.tbody, this.measureExtension.isFreeMeasureMode());\n        this.freeMeasure.setGlobalManager(this.globalManager);\n        this.freeMeasure.addEventListener(\"change\", function(e) {\n            var enable = self.freeMeasure.checked;\n            self.measureExtension.setFreeMeasureMode(enable)\n            avp.logger.track({ category: 'pref_changed', name: 'measure/freeMeasure', value: enable });\n        });\n\n        this.setupPrecision();\n\n        this.updateSettingsPanel();\n\n        if (this.viewer.model && this.viewer.model.is2d()) {\n            this.isolate.setVisibility(false);\n        }\n\n        if (!this.measureExtension.sharedMeasureConfig.units) {\n            this.disableUnitOption();\n        }\n        // Only disable option if the browser is not Safari\n        else if (!Autodesk.Viewing.isSafari()){\n            this.disableUnitOption(0);  // disable \"Unknown\" option when the model has units\n        }\n\n\n        // Create a button for 'Done'.\n        this.measureDoneBtn = new avu.Button(\"toolbar-measureTool-done\");\n        this.measureDoneBtn.setGlobalManager(this.globalManager);\n        var doneText = Autodesk.Viewing.i18n.translate('Done');\n        this.measureDoneBtn.setToolTip(doneText);\n        var cancelLabel = _document.createElement('label');\n        cancelLabel.textContent = doneText;\n        var btnContainer = this.measureDoneBtn.container;\n        btnContainer.appendChild(cancelLabel);\n        btnContainer.classList.add('adsk-label-button');\n        var iconEle = btnContainer.getElementsByClassName('adsk-button-icon');\n        iconEle && iconEle[0] && (iconEle[0].style.display = 'none');\n\n        this.measureDoneBtn.onClick = function() {\n            this.measureExtension.exitMeasurementMode();\n        }.bind(this);\n        this.measureToolbar.addControl(this.measureDoneBtn);\n\n        // this.settingsControlPanel.style.width = this.measureToolbar.container.getBoundingClientRect().width + 'px';\n        this.measureToolbar.setVisible(false);\n\n    };\n\n    proto.destroy = function() {\n\n        // If toolbar was open, close it first. Otherwise, we leave ModelTools toolbar in a broken state.\n        if (this.visible) {\n            this.closeToolbar();\n        }\n\n        if (this.measureToolbar) {\n            this.measureToolbar.removeFromParent();\n            this.measureToolbar = null;\n        }\n    };\n\n    proto.closeToolbar = function() {\n\n        this.measureExtension.enableMeasureTool(false);\n        this.measureExtension.enableCalibrationTool(false);\n        this.toggleVisible();\n\n        var toolbar = this.viewer.getToolbar();\n        var viewerToolbarContainer = toolbar.container;\n        var viewerContainerChildrenCount = viewerToolbarContainer.children.length;\n        \n        for(var i = 0; i < viewerContainerChildrenCount; ++i) {\n            viewerToolbarContainer.children[i].style.display = \"\";\n        }\n\n        var modelTools = toolbar.getControl(av.TOOLBAR.MODELTOOLSID);\n        modelTools.addControl(this.measureExtension.measurementToolbarButton, {index: this.measureExtension.measurementToolbarButton.index });\n    };\n\n    proto.toggleVisible = function() {\n        this.visible = !this.visible;\n        this.measureToolbar.setVisible(this.visible);\n        if (!this.visible) {\n            this.settingsControlPanel.classList.add('hide');\n            this.setButtonInactive(this.settingsBtn);\n        }\n    };\n\n    proto.setButtonActive = function(button) {\n        button.setState(avu.Button.State.ACTIVE);\n    };\n\n    proto.setButtonInactive = function(button) {\n        button.setState(avu.Button.State.INACTIVE);\n    };\n\n    proto.deactivateAllButtons = function() {\n        for (var key in this.buttonsList) {\n            if (this.buttonsList.hasOwnProperty(key)) {\n                var button = this.buttonsList[key];\n                this.setButtonInactive(button);   \n            }\n        }\n    };\n\n    proto.activateButtonByType = function(measurementType) {\n        // Check that toolbar button exists - some measurement types don't have UI\n        this.buttonsList[measurementType] && this.setButtonActive(this.buttonsList[measurementType]);\n    };            \n\n    proto.setupPrecision = function() {\n        const _document = this.getDocument();\n        while (this.precisionList.dropdownElement.lastChild) {\n            this.precisionList.dropdownElement.removeChild(this.precisionList.dropdownElement.lastChild);\n        }\n\n        var selectedUnits = this.measureTool.getUnits(),\n            precisions;\n\n        if (selectedUnits === 'ft-and-fractional-in' || selectedUnits === 'fractional-in') {\n            precisions = ['1', '1/2', '1/4', '1/8', '1/16', '1/32', '1/64'];\n        } else {\n            precisions = ['0', '0.1', '0.01', '0.001', '0.0001', '0.00001'];\n        }\n\n        for (var i = 0; i < precisions.length; ++i) {\n            var elem = _document.createElement('option');\n            elem.value = i;\n            elem.textContent = precisions[i];\n            this.precisionList.dropdownElement.appendChild(elem);\n        }\n\n        var selectedIndex = this.measureTool.getPrecision();\n        if (precisions.length <= selectedIndex) {\n            selectedIndex = precisions.length - 1;\n            this.measureTool.setPrecision(selectedIndex);\n        }\n        this.precisionList.dropdownElement.selectedIndex = selectedIndex;\n    };\n\n    proto.findUnits = function() {\n        var i,\n            j,\n            selectedUnits = this.measureTool.getUnits();\n        for (i = 0; i < this.units.length; ++i) {\n            var matches = this.units[i].matches;\n            if (matches) {\n                for (j = 0; j < matches.length; ++j) {\n                    if (matches[j] === selectedUnits) {\n                        return i;\n                    }\n                }\n            }\n        }\n        return 0;\n    };\n\n    proto.disableUnitOption = function( index ) {\n        if (index != null) {\n            this.unitList.dropdownElement.children[index].style.display = \"none\";\n            if (av.isIE11) {\n                // IE11 can't hide <option> elements...\n                this.unitList.dropdownElement.children[index].disabled = true;\n                this.unitList.dropdownElement.children[index].style.visibility = \"hidden\";\n            }\n        } else {  // disable all options\n            this.unitList.dropdownElement.disabled = true;\n        }\n    };\n\n    proto.updateSettingsPanel = function() {\n        this.unitList.dropdownElement.selectedIndex = this.findUnits();\n        this.precisionList.dropdownElement.selectedIndex = this.measureTool.getPrecision();\n        this.setupPrecision();\n    };\n\n\n","import { MeasureTool } from './MeasureTool';\nimport { CalibrationTool } from './CalibrationTool';\nimport { MagnifyingGlass } from './MagnifyingGlass';\nimport { CalibrationRequiredDialog } from './CalibrationPanels';\nimport { MeasureToolbar } from './MeasureToolbar';\n\n\nimport './Measure.css';       // IMPORTANT!!\nimport './Calibration.css';   // IMPORTANT!!\n\n'use strict';\n\nvar avem = AutodeskNamespace('Autodesk.Viewing.Extensions.Measure'),\n    av = Autodesk.Viewing,\n    avp = Autodesk.Viewing.Private,\n    avu = av.UI;\nvar MeasureCommon = Autodesk.Viewing.MeasureCommon; // Comes form main viewer bundle.\n\nvar NONE = 0;\nvar MEASURE_TOOL = 1;\nvar CALIBRATION_TOOL = 2;\n\nvar DEFAULT_MEASUREMENT_TYPE = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\n\n/**\n * Provides UI controls to perform distance and angle measurements for 2D and 3D models.\n *\n * The extension id is: `Autodesk.Measure`\n *\n * @param {Viewer3D} viewer - Viewer instance\n * @param {object} options - Configurations for the extension\n * @example \n * viewer.loadExtension('Autodesk.Measure')\n * @memberof Autodesk.Viewing.Extensions\n * @alias Autodesk.Viewing.Extensions.MeasureExtension\n * @see {@link Autodesk.Viewing.Extension} for common inherited methods.\n * @class\n */\nexport var MeasureExtension = function(viewer, options) {\n    Autodesk.Viewing.Extension.call(this, viewer, options);\n    this.modes = ['distance','angle','area','arc','calibrate'];\n    this.name = 'measure';\n    this._onModelLoaded = this._onModelLoaded.bind(this);\n    this._onDisplayUnitsPrefChanged = this._onDisplayUnitsPrefChanged.bind(this);\n    this._onPrecisionPrefChanged = this._onPrecisionPrefChanged.bind(this);\n};\n\nMeasureExtension.prototype = Object.create(Autodesk.Viewing.Extension.prototype);\nMeasureExtension.prototype.constructor = MeasureExtension;\n\n\n/**\n * Load the measure extension.\n *\n * @returns {boolean} True if measure extension is loaded successfully.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#load\n */\nMeasureExtension.prototype.load = async function() {\n\n    await this.viewer.loadExtension('Autodesk.Snapping');\n\n    var self   = this;\n    var viewer = this.viewer;\n    this.hasUI = Autodesk.Viewing.GuiViewer3D && viewer instanceof Autodesk.Viewing.GuiViewer3D;\n\n    this.escapeHotkeyId = 'Autodesk.Measure.Hotkeys.Escape';\n\n    // Register the Measure tool\n    if (!viewer.toolController){\n        return false;\n    }\n\n    this.options = this.options || {};\n    var measureToolOptions = {};\n\n    measureToolOptions.onCloseCallback = function() {\n        self.enableMeasureTool(false);\n    };\n\n    // Shared State with measureTool & calibrationTool.\n    // Gets populated when a model is received.\n    this.sharedMeasureConfig = { \n        units: null,\n        precision: null,\n        calibrationFactor: null\n    };\n\n\tmeasureToolOptions.snapperOptions = this.options.snapperOptions;\n\n    this.forceCalibrate = this.options.forceCalibrate;\n\n    this.snapper = new Autodesk.Viewing.Extensions.Snapping.Snapper(viewer, {\n        renderSnappedTopology: true\n    });\n    viewer.toolController.registerTool(this.snapper);\n\n    const onToolChangedCb = (enable) => {\n        this.setActive(enable);\n        if (!enable) {\n            this.deactivate();\n        }\n    };\n\n    this.measureTool = new MeasureTool(viewer, measureToolOptions, this.sharedMeasureConfig, this.snapper);\n    viewer.toolController.registerTool(this.measureTool, onToolChangedCb);\n\n    this.calibrationTool = new CalibrationTool(viewer, this.options, this.sharedMeasureConfig, this.snapper);\n    viewer.toolController.registerTool(this.calibrationTool, onToolChangedCb);\n\n    this.magnifyingGlass = new MagnifyingGlass(viewer);\n    viewer.toolController.registerTool(this.magnifyingGlass);\n\n    this.calibration = {};\n    this.onFinishedCalibration = function(event) {\n        if (self.measureToolbar) {\n            self.measureToolbar.updateSettingsPanel();\n        }\n\n        self.activateInitiator && self.activateInitiator();\n\n        // Set the calibration values\n        self.calibration.units = event.units;\n        self.calibration.scaleFactor = event.scaleFactor;\n        self.calibration.size = event.size;\n        self.calibration.precision = self.sharedMeasureConfig.precision;\n    };\n\n    viewer.addEventListener('finished-calibration', this.onFinishedCalibration);\n\n    this.onMeasurementChanged = function(event) {\n        var type = event.data.type;\n        self.changeMeasurementType(type);\n    };\n\n    viewer.addEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChanged);\n\n    if (viewer.model) {\n        this._onModelLoaded({ model: viewer.model });\n    } else {\n        viewer.addEventListener(av.MODEL_ROOT_LOADED_EVENT, this._onModelLoaded, { once: true });\n    }\n\n    // If there is no model anymore, interrupt any ongoing interaction.\n    // We need at least one model to derive things like is2d() and model units.\n    this.onModelRemoved = function() {\n        // If UI was not created yet or destroyed, we don't have to disable anything\n        if (!self.measurementToolbarButton) {\n            return;\n        }\n                \n        if (!self.viewer.model) {\n            self.measurementToolbarButton.setState(Autodesk.Viewing.UI.Button.State.DISABLED);\n            self.exitMeasurementMode();\n        }\n    };\n    this.onModelAdded = function() {\n\n        // If UI was not created yet or destroyed, the button will be enabled in next createUI() call\n        if (!self.measurementToolbarButton) {\n            return;\n        }\n\n        // On first model-add, re-enable measure toolbar again\n        var modelCount = self.viewer.getVisibleModels().length;\n        if (modelCount === 1 && self.measurementToolbarButton) {\n            self.measurementToolbarButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE);\n        }\n    };\n    viewer.addEventListener(av.MODEL_ADDED_EVENT, this.onModelAdded);\n    viewer.addEventListener(av.MODEL_REMOVED_EVENT, this.onModelRemoved);\n\n    this.viewer.prefs.addListeners(avp.Prefs.DISPLAY_UNITS, this._onDisplayUnitsPrefChanged, this._onDisplayUnitsPrefChanged);\n    this.viewer.prefs.addListeners(avp.Prefs.DISPLAY_UNITS_PRECISION, this._onPrecisionPrefChanged, this._onPrecisionPrefChanged);\n};\n\n/**\n * @param {string} value - unit\n * @private\n */\nMeasureExtension.prototype._onDisplayUnitsPrefChanged = function(value) {\n    if (value !== '') {\n        this.setUnits(value);\n        this.measureToolbar?.updateSettingsPanel();\n        // Also update the units in calibration panel\n        this.calibrationTool.updateCalibrationPanel();\n    }\n};\n\n/**\n * @param {string} value precision\n * @private\n */\nMeasureExtension.prototype._onPrecisionPrefChanged = function (value) {\n   if (typeof value === 'number') {\n       this.setPrecision(value);\n       this.measureToolbar?.updateSettingsPanel();\n   }\n};\n\nMeasureExtension.prototype._onModelLoaded = function(event) {\n    var model = event.model;\n\n    const setPdfUnits = !!model.isPdf(true) && !this.viewer.prefs.get(avp.Prefs2D.FORCE_PDF_CALIBRATION);\n    const setLeafletUnits = !!model.isLeaflet() && !this.viewer.prefs.get(avp.Prefs2D.FORCE_LEAFLET_CALIBRATION);\n\n    this.sharedMeasureConfig.units = this.options.calibrationUnits || this.viewer.prefs.get(avp.Prefs.DISPLAY_UNITS) || model.getDisplayUnit();\n\n    // Set the units to points only for pdf and leaflet models that do not contain model units in the metadata.\n    if ((setPdfUnits || setLeafletUnits) && !model.getMetadata('page_dimensions', 'model_units', null)) {\n        this.sharedMeasureConfig.units = 'pt';\n    }\n\n    const precisionPreference = this.viewer.prefs.get(avp.Prefs.DISPLAY_UNITS_PRECISION);\n    if (typeof precisionPreference === 'number') {\n        this.sharedMeasureConfig.precision = precisionPreference;\n    } else {\n        this.sharedMeasureConfig.precision = model.is2d() ? 3 : 1; \n    }\n\n    if (this.options.calibrationUnits && !isNaN(this.options.calibrationFactor)) {\n        this.calibrationTool.calibrateByScale(this.options.calibrationUnits, this.options.calibrationFactor);\n    }\n};\n\n/**\n * Unload the measure extension.\n *\n * @returns {boolean} True if measure extension is unloaded successfully.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#unload\n */\nMeasureExtension.prototype.unload = function () {\n    var viewer = this.viewer;\n\n    // Remove the ui from the viewer.\n    this.destroyUI();\n\n    viewer.removeEventListener('finished-calibration', this.onFinishedCalibration);\n    viewer.removeEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChanged);\n    viewer.removeEventListener(av.MODEL_ADDED_EVENT, this.onModelAdded);\n    viewer.removeEventListener(av.MODEL_REMOVED_EVENT, this.onModelRemoved);\n    viewer.removeEventListener(av.MODEL_ROOT_LOADED_EVENT, this._onModelLoaded);\n\n    viewer.toolController.deregisterTool(this.snapper);\n    this.snapper = null;\n\n    viewer.toolController.deregisterTool(this.measureTool);\n    this.measureTool = null;\n\n    viewer.toolController.deregisterTool(this.calibrationTool);\n    this.calibrationTool = null;\n\n    viewer.toolController.deregisterTool(this.magnifyingGlass);\n    this.magnifyingGlass = null;\n\n    this.unloaded = true;\n    \n    viewer.prefs.removeListeners(avp.Prefs.DISPLAY_UNITS, this._onDisplayUnitsPrefChanged, this._onDisplayUnitsPrefChanged);\n    viewer.prefs.removeListeners(avp.Prefs.DISPLAY_UNITS_PRECISION, this._onPrecisionPrefChanged, this._onPrecisionPrefChanged);\n    \n    return true;\n};\n\n/**\n * Enable/disable the measure tool.\n * It does not update the toolbar UI.\n * \n * @param {boolean} active - True to activate, false to deactivate.\n * @returns {boolean} True if a change in activeness occurred.\n */\nMeasureExtension.prototype.setActive = function(active) {\n    return this.enableMeasureTool(active);\n};\n\n/**\n * Toggles activeness of the measure tool.\n * It does not update the toolbar UI.\n * \n * @returns {boolean} Whether the tool is active.\n */\nMeasureExtension.prototype.toggle = function() {\n    if (this.isActive()) {\n        this.enableMeasureTool(false);\n    } else {\n        this.enableMeasureTool(true);\n    }\n    return this.isActive();\n};\n\n/**\n * Get the current measurement in the measure tool.\n *\n * @param {string} [unitType] - Either: \"decimal-ft\", \"ft\", \"ft-and-decimal-in\", \"decimal-in\", \"fractional-in\", \"m\", \"cm\", \"mm\" or \"m-and-cm\".\n * @param {number} [precision] - precision index (0: 0, 1: 0.1, 2: 0.01, 3: 0.001, 4: 0.0001, 5: 0.00001).\n * When units type is \"ft\", \"in\" or \"fractional-in\", then the precisions are 0: 1, 1: 1/2, 2: 1/4, 3: 1/8, 4: 1/16, 5: 1/32, 6: 1/64.\n * @returns {object|null} Object with properties of the current measurement, or null.\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#getMeasurement\n */\nMeasureExtension.prototype.getMeasurement = function(unitType, precision) {\n    var measurement = null;\n    if (this.measureTool.isActive()) {\n        measurement = this.measureTool.getMeasurement(unitType, precision);\n    }\n    return measurement;\n};\n\n/**\n * Get a list of all the measurements that are currently on the screen.\n *\n * @param {string} [unitType] - Either: \"decimal-ft\", \"ft\", \"ft-and-decimal-in\", \"decimal-in\", \"fractional-in\", \"m\", \"cm\", \"mm\" or \"m-and-cm\".\n * @param {number} [precision] - precision index (0: 0, 1: 0.1, 2: 0.01, 3: 0.001, 4: 0.0001, 5: 0.00001).\n * When units type is \"ft\", \"in\" or \"fractional-in\", then the precisions are 0: 1, 1: 1/2, 2: 1/4, 3: 1/8, 4: 1/16, 5: 1/32, 6: 1/64.\n * @returns {Array.<object>} An array of measurement objects with properties of the measurement.\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#getMeasurementList\n */\n\nMeasureExtension.prototype.getMeasurementList = function(unitType, precision) {\n  var measurementList = [];\n  if(this.measureTool.isActive()) {\n      measurementList = this.measureTool.getMeasurementList(unitType, precision);\n  }\n  return measurementList;\n};\n\n/**\n * Restores existing measurements. The `measurements` object should be generated by either the {@link Autodesk.Viewing.Extensions.MeasureExtension#getMeasurementList|getMeasurementList} or the {@link Autodesk.Viewing.Extensions.MeasureExtension#getMeasurement|getMeasurement} methods.\n *\n * @param {object[] | object} measurements - An array of measurement objects\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setMeasurements\n */\nMeasureExtension.prototype.setMeasurements = function(measurements) {\n    if (this.measureTool.isActive()) {\n        this.measureTool.setMeasurements(measurements);\n    }\n};\n\n\n/**\n * Get all available units in measure tool.\n *\n * @returns {object[]} Array of all available units.\n */\nMeasureExtension.prototype.getUnitOptions = function() {\n    var units = [\n        { name: 'Unknown', type: '' },\n        { name: 'Decimal feet', type: 'decimal-ft' },\n        { name: 'Feet and fractional inches', type: 'ft' },\n        { name: 'Feet and decimal inches', type: 'ft-and-decimal-in' },\n        { name: 'Decimal inches', type: 'decimal-in' },\n        { name: 'Fractional inches', type: 'fractional-in' },\n        { name: 'Meters', type: 'm' },\n        { name: 'Centimeters', type: 'cm' },\n        { name: 'Millimeters', type: 'mm' },\n        { name: 'Meters and centimeters', type: 'm-and-cm' },\n        { name: 'Points', type: 'pt' }\n    ];\n\n    return units;\n};\n\n/**\n * Get all available precisions in measure tool.\n *\n * @param {boolean} isFractional - Set true to get fractional precisions.\n * @returns {string[]} List of all available precisions.\n */\nMeasureExtension.prototype.getPrecisionOptions = function(isFractional) {\n\n    var precisions;\n\n    if (isFractional)\n        precisions = ['1', '1/2', '1/4', '1/8', '1/16', '1/32', '1/64'];\n    else\n        precisions = ['0', '0.1', '0.01', '0.001', '0.0001', '0.00001'];\n\n    return precisions;\n};\n\n/**\n * Get the default measure unit in measure tool.\n *\n * @returns {string} The default measure unit.\n */\nMeasureExtension.prototype.getDefaultUnit = function() {\n    var unit = this.viewer.model.getDisplayUnit();\n\n    return unit;\n};\n\nMeasureExtension.prototype.openCalibrationRequiredDialog = function (initiator) {\n    if (this.hasUI) {\n        if (!this.CalibrationRequiredDialog) {\n            this.CalibrationRequiredDialog = new CalibrationRequiredDialog(this, this.viewer, \"calibration-required\", \"Calibration Required\", this.options );\n        }\n\n        this.CalibrationRequiredDialog.setVisible(true);\n    }\n    else {\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.CALIBRATION_REQUIRED_EVENT });\n    }\n\n    if (initiator === 'measure') {\n        this.activateInitiator = function() {\n            this.enableMeasureTool(true, DEFAULT_MEASUREMENT_TYPE);\n            this.activateInitiator = null;\n        };\n    } else if (initiator === 'dimension') {\n        this.activateInitiator = function() {\n            this.viewer.dispatchEvent({ type: MeasureCommon.Events.FINISHED_CALIBRATION_FOR_DIMENSION_EVENT });\n            this.activateInitiator = null;\n        };\n    }\n};\n\n/**\n * Get the calibration size, unit type and the calibration Factor of the model\n *\n * @returns {object}\n */\nMeasureExtension.prototype.getCalibration = function() {\n    return this.calibration;\n};\n\n\n/**\n * @param mode Measurement Mode\n * @returns {boolean}\n */\n\n /**\n  * Activates the tool and UI to start measuring.\n  * \n  * @param {string} [mode] - Either 'distance', 'angle', 'area' (2D only), 'arc' (2D only) or 'calibrate'. Default is 'distance'.\n  * \n  * @alias Autodesk.Viewing.Extensions.MeasureExtension#activate\n  */\nMeasureExtension.prototype.activate = function (mode) {\n    if (this.activeStatus && this.mode === mode) {\n        return true;\n    }\n\n    this.enterMeasurementMode();\n\n    var success;\n\n    switch (mode) {\n        default:\n            mode = 'distance';\n            // falls through\n        case 'distance':\n            success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE);\n            break;\n        case 'angle':\n            success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE);\n            break;\n        case 'area':\n            if(!this.viewer.model.is2d()) {\n                console.warn('Area mode is applicable on 2D models only');\n            } else {\n                success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_AREA);\n            }\n            break;\n        case 'arc':\n            if(!this.viewer.model.is2d() || this.viewer.model.isPdf()) {\n                console.warn('Arc mode is applicable on 2D models only');\n            } else {\n                success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_ARC);\n            }\n            break;\n        case 'calibrate':\n            success = this.enableCalibrationTool(true);\n            break;\n\n    }\n\n    this.mode = success ? mode : '';\n    this.activeStatus = true;\n    return true;\n};\n\n/**\n * Deactivates measuring tool and UI.\n * \n * @returns {boolean}\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deactivate\n */\nMeasureExtension.prototype.deactivate = function () {\n    if(this.activeStatus) {\n        this.exitMeasurementMode();\n        this.enableMeasureTool(false);\n        this.activeStatus = false;\n    }\n    return true;\n};\n\n/**\n * Force the calibration panel for pdf models\n *\n * @param {boolean} enable - true to force the calibration panel\n */\nMeasureExtension.prototype.setForcePDFCalibrate = function(enable) {\n    this.viewer.prefs.set(avp.Prefs2D.FORCE_PDF_CALIBRATION, enable);\n};\n\n/**\n * Force the calibration panel for leaflet models\n *\n * @param {boolean} enable - true to force the calibration panel\n */\nMeasureExtension.prototype.setForceLeafletCalibrate = function(enable) {\n    this.viewer.prefs.set(avp.Prefs2D.FORCE_LEAFLET_CALIBRATION, enable);\n};\n\n/**\n * Restore session measurements when enabling the measure tool.\n *\n * @param {boolean} enable - true to restore session measurements. \n */\nMeasureExtension.prototype.setRestoreSessionMeasurements = function(enable) {\n    this.viewer.prefs.set(avp.Prefs.RESTORE_SESSION_MEASUREMENTS, enable);\n};\n\n/**\n * Enable/disable the measure tool.\n *\n * @param {boolean} enable - True to enable, false to disable.\n * @param measurementType\n * @returns {boolean} True if the tool state was changed.\n * @private\n */\nMeasureExtension.prototype.enableMeasureTool = function(enable, measurementType) {\n    if (measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && this.viewer.model && !this.viewer.model.is2d()) {\n        return false;\n    }\n\n    // arc measurement is not supported for 3D models\n    if (measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ARC && this.viewer.model && !this.viewer.model.is2d()) {\n        return false;\n    }\n\n    const snapToArc = (measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ARC && this.viewer.model?.is2d());\n    this.snapper.setSnapToArc(snapToArc);\n\n    var toolController = this.viewer.toolController,\n        isActive = (this.selectedTool === MEASURE_TOOL);\n\n    if (!this.viewer.model || (!enable && isActive)) {\n        if (this.measureTool.isActive()) {\n            toolController.deactivateTool(\"measure\");\n\n            if (this.measureToolbar) {\n                this.measureToolbar.deactivateAllButtons();\n            }\n\n            // No tool is active anymore. Only do this if measureTool was really the active one before.\n            // If not, changing selectedTool would produce an inconsistent state, e.g., CalibrationTool \n            // may still be active, but enableCalibrationTool(false) would not properly close it.\n            this.selectedTool = NONE;\n        }\n\n        return true;\n    }\n\n    const is2d = this.viewer.impl.is2d;\n    const forcePDFCalibration = is2d && this.viewer.model.isPdf(true) && this.viewer.prefs.get(avp.Prefs2D.FORCE_PDF_CALIBRATION);\n    const forceLeafletCalibration = is2d && this.viewer.model.isLeaflet() && this.viewer.prefs.get(avp.Prefs2D.FORCE_LEAFLET_CALIBRATION);\n\n    this.forceCalibrate |= forceLeafletCalibration || forcePDFCalibration;\n\n    if (!measurementType) {\n        measurementType = DEFAULT_MEASUREMENT_TYPE;\n    }\n\n    if (enable && !isActive) {\n        // Fetch topology when opening Measure tool for the first time.\n        this.checkAndFetchTopology(toolController.getTool('measure'));\n\n        if (!this.forceCalibrate || (this.forceCalibrate && this.calibrationTool.isCalibrated()) || measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE) {\n            if (this.calibrationTool.isActive()) {\n                toolController.deactivateTool(\"calibration\");\n            }\n            \n            if (this.measureToolbar) {\n                this.measureToolbar.updateSettingsPanel();\n            }\n\n            toolController.activateTool(\"measure\");\n\n            this.selectedTool = MEASURE_TOOL;\n\n            \n\n            this.changeMeasurementType(measurementType);\n            return true;\n        }\n        else {\n            this.viewer.addEventListener(avem.OPEN_TOOL_AFTER_CALIBRAION, function(){\n                this.enableMeasureTool(true);                \n            }.bind(this), {once: true});\n            \n            this.openCalibrationRequiredDialog('measure');\n            return false;\n        }\n\n    } else if (enable && isActive) {\n        if (!this.forceCalibrate || (this.forceCalibrate && this.calibrationTool.isCalibrated()) || measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE) {\n            this.changeMeasurementType(measurementType);\n            return true;\n        }\n        else {\n            this.openCalibrationRequiredDialog('measure');\n            return false;\n        }\n    }\n\n    return false;\n};\n\nMeasureExtension.prototype.changeMeasurementType = function(measurementType) {\n    this.measureTool.changeMeasurementType(measurementType);\n    if (this.measureToolbar) {\n        this.measureToolbar.deactivateAllButtons();\n        this.measureToolbar.activateButtonByType(measurementType);\n    }\n\n    switch (measurementType) {\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\n            this.mode = 'distance';\n            break;\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\n            this.mode = 'angle';\n            break;\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\n            this.mode = 'area';\n            break;\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_ARC:\n            this.mode = 'arc';\n            break;\n        default:\n            this.mode = '';\n    }\n};\n\n/**\n * When enabled, the Viewer will only render model parts that are included in\n * measurements.\n *\n * @param {boolean} enable - true to render only nodes being measured.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setIsolateMeasure\n */\nMeasureExtension.prototype.setIsolateMeasure = function(enable) {\n    this.measureTool.setIsolateMeasure(enable);\n    if (enable) {\n        this.measureTool.isolateMeasurement();\n    } else {\n        this.measureTool.clearIsolate();\n    }\n};\n\n/**\n * Enable/disable the measure tool.\n *\n * @param {boolean} enable - True to enable, false to disable.\n * @returns {boolean} True if the tool state was changed.\n * @private\n */\nMeasureExtension.prototype.enableCalibrationTool = function(enable) {\n    var toolController = this.viewer.toolController,\n        isActive = (this.selectedTool == CALIBRATION_TOOL);\n\n    if (enable && !isActive) {\n        if (this.measureTool.isActive()) {\n            toolController.deactivateTool(\"measure\");\n        }\n        \n        toolController.activateTool(\"calibration\");\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.UNITS_CALIBRATION_STARTS_EVENT });\n        \n        if (this.measureToolbar) {\n            this.measureToolbar.deactivateAllButtons();\n            this.measureToolbar.activateButtonByType(MeasureCommon.MeasurementTypes.CALIBRATION);\n        }\n\n        this.selectedTool = CALIBRATION_TOOL;\n        return true;\n\n    } else if (!enable && isActive) {\n        if (this.calibrationTool.isActive()) {\n            this.mode = '';\n            toolController.deactivateTool(\"calibration\");\n            if (this.measureToolbar) {\n                this.measureToolbar.deactivateAllButtons();\n            }\n        }\n\n        this.selectedTool = NONE;\n        return true;\n    }\n    return false;\n};\n\n/**\n * @private\n */\nMeasureExtension.prototype.enterMeasurementMode = function() {\n\n    if (this._measurementMode) return;\n    this._measurementMode = true;\n\n    this.viewer.dispatchEvent({type: MeasureCommon.Events.MEASUREMENT_MODE_ENTER});\n\n    if (!this.viewer.getToolbar) {\n        return; // Adds support for Viewer3D instance\n    }\n\n    var toolbar = this.viewer.getToolbar();    \n    var viewerToolbarContainer = toolbar.container;\n    var viewerContainerChildrenCount = viewerToolbarContainer.children.length;\n    for(var i = 0; i < viewerContainerChildrenCount; ++i) {\n        viewerToolbarContainer.children[i].style.display = \"none\";\n    }\n\n    this.navigationControls = toolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);\n    this.navigationControls.setVisible(true);\n    this.navigationControls.container.style.display = '';\n\n    this.measureControls = toolbar.getControl(Autodesk.Viewing.TOOLBAR.MEASURETOOLSID);\n    this.measureControls.setVisible(true);\n    this.measureControls.container.style.display = '';\n    \n    var measureButtonId = this.measurementToolbarButton.getId();\n    this.measurementToolbarButton.index = this.measurementToolbarButton.parent.indexOf(measureButtonId);\n    this.measurementToolbarButton.parent.removeControl(measureButtonId);\n\n    this.measureToolbar.toggleVisible();\n\n    if (this.viewer.centerToolBar) {\n        this.viewer.centerToolBar();\n    }\n\n    this.enableMeasureTool(true, DEFAULT_MEASUREMENT_TYPE);\n};\n\n/**\n * @private\n */\nMeasureExtension.prototype.exitMeasurementMode = function() {\n    if (!this._measurementMode) return;\n\n    this.viewer.dispatchEvent({type: MeasureCommon.Events.MEASUREMENT_MODE_LEAVE});\n\n    this.measureToolbar && this.measureToolbar.closeToolbar();\n    if (this.CalibrationRequiredDialog && this.CalibrationRequiredDialog.isVisible()) {\n        this.CalibrationRequiredDialog.setVisible(false);\n    }\n    this._measurementMode = false;\n};\n\n/**\n * Create measure button in toolbar.\n *\n * @param toolbar\n * @private\n */\nMeasureExtension.prototype.onToolbarCreated = function(toolbar)\n{\n    if (this.measureToolbar) {\n        return;\n    }\n\n    var self   = this;\n    var viewer = this.viewer;\n\n    // Add Measure button to toolbar\n    var modelTools = toolbar.getControl(av.TOOLBAR.MODELTOOLSID);\n    this.measurementToolbarButton = new avu.Button('toolbar-measurementSubmenuTool');\n    this.measurementToolbarButton.setToolTip('Measure');\n    this.measurementToolbarButton.setIcon(\"adsk-icon-measure\");\n    modelTools.measurementToolbarButton = this.measurementToolbarButton;\n    modelTools.addControl(this.measurementToolbarButton, {index:0});\n\n    // Set button enabled if and only if there is >=1 visible model. Otherwise, it will remain disabled until next model-add event.\n    var state = this.viewer.model ? Autodesk.Viewing.UI.Button.State.INACTIVE : Autodesk.Viewing.UI.Button.State.DISABLED;\n    this.measurementToolbarButton.setState(state);\n\n    this.measureToolbar = new MeasureToolbar(this);\n    this.measureToolbar.init();\n\n    this.measurementToolbarButton.onClick = this.activate.bind(this);\n\n    // Escape hotkey to exit tool.\n    //\n    var hotkeys = [{\n        keycodes: [\n            Autodesk.Viewing.KeyCode.ESCAPE\n        ],\n        onRelease: function () {\n            if (self._measurementMode) {\n                self.exitMeasurementMode();\n                return true;\n            }\n        }\n    }];\n    viewer.getHotkeyManager().pushHotkeys(this.escapeHotkeyId, hotkeys);\n};\n\n\n/**\n * @param tool\n * @private\n */\nMeasureExtension.prototype.checkAndFetchTopology = function(tool) {\n\n    if (this._checkedTopology) {\n        return;\n    }\n\n    this._checkedTopology = true;\n    if (!this.viewer.model.is3d()) {\n        tool && tool.setNoTopology();\n        return;\n    }\n\n    if (this.viewer.modelHasTopology()){\n        tool && tool.setTopologyAvailable();\n        return;\n    }\n\n    // Fetch topology from backend.\n    tool && tool.setFetchingTopology();\n    this.viewer.model.fetchTopology()\n    .then(function(){\n        tool && tool.setTopologyAvailable();\n    })\n    .catch(function(err){\n        avp.logger.log(err); // No topology\n        tool && tool.setNoTopology();\n    });\n};\n\n/**\n * Destroy measure button in toolbar.\n *\n * @private\n */\nMeasureExtension.prototype.destroyUI = function()\n{\n    var viewer = this.viewer;\n\n    if (this.measureToolbar) {\n         this.measureToolbar.destroy();\n         this.measureToolbar = null;\n    }\n\n    if (this.measurementToolbarButton) {\n        this.measurementToolbarButton.removeFromParent();\n        this.measurementToolbarButton = null;\n    }\n\n    viewer.getHotkeyManager().popHotkeys(this.escapeHotkeyId);\n};\n\nMeasureExtension.prototype.setUnits = function(units) {\n    this.measureTool.setUnits(units);\n};\n\nMeasureExtension.prototype.getUnits = function() {\n    return this.measureTool.getUnits();\n};\n\nMeasureExtension.prototype.setPrecision = function(precision) {\n    this.measureTool.setPrecision(precision);\n};\n\nMeasureExtension.prototype.getPrecision = function() {\n    return this.measureTool.getPrecision();\n};\n\nMeasureExtension.prototype.calibrate = function(requestedUnits, requestedSize) {\n    this.calibrationTool.calibrate(requestedUnits, requestedSize);\n};\n\nMeasureExtension.prototype.calibrateByScale = function(requestedUnits, requestedScale) {\n    this.calibrationTool.calibrateByScale(requestedUnits, requestedScale);\n};\n\nMeasureExtension.prototype.isCalibrationValid = function(requestedUnits, requestedSize) { \n    return this.calibrationTool.isCalibrationValid(requestedUnits, requestedSize); \n};\n\nMeasureExtension.prototype.getCalibrationFactor = function() {\n    return this.calibrationTool.getCalibrationFactor();\n};\n\nMeasureExtension.prototype.showAddCalibrationLabel = function() {\n    this.calibrationTool.showAddCalibrationLabel();\n};\n\n/**\n * Delete all measurements.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deleteAllMeasurements\n */\nMeasureExtension.prototype.deleteMeasurements = function() {\n    this.measureTool.deleteMeasurements();\n};\n\n/**\n * Deletes the selected measurement.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deleteCurrentMeasurement\n */\nMeasureExtension.prototype.deleteCurrentMeasurement = function() {\n    this.measureTool.deleteCurrentMeasurement();\n};\n\nMeasureExtension.prototype.selectMeasurementById = function(id) {\n    this.measureTool.selectMeasurementById(id);\n};\n\n/**\n * Enable measuring on non snapped locations.\n *\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setFreeMeasureMode\n * @param {boolean} allow - true to allow measuring on non snapped locations, otherwise false;\n * @param {boolean} useLastViewport - override the free measurement's viewport with a previously created measurement's viewport.\n */\nMeasureExtension.prototype.setFreeMeasureMode = function(allow, useLastViewport) {\n    this.snapper.setSnapToPixel(allow);\n    this.measureTool.setUseLastViewport(!!useLastViewport);\n};\n\n/**\n * Checks whether measuring can be performed from non snapped locations.\n *\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#isFreeMeasureMode\n *\n * @returns {boolean} true is users can measure from any location.\n */\nMeasureExtension.prototype.isFreeMeasureMode = function() {\n    return this.snapper.getSnapToPixel();\n};\n\nav.theExtensionManager.registerExtension('Autodesk.Measure', MeasureExtension);\n\n\n"],"sourceRoot":""}