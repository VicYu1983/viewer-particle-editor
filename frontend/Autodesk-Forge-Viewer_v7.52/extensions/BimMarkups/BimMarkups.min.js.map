{"version":3,"sources":["webpack://Autodesk.Extensions.[name]/webpack/bootstrap","webpack://Autodesk.Extensions.[name]/./node_modules/css-loader/lib/css-base.js","webpack://Autodesk.Extensions.[name]/./node_modules/style-loader/lib/addStyles.js","webpack://Autodesk.Extensions.[name]/./node_modules/style-loader/lib/urls.js","webpack://Autodesk.Extensions.[name]/(webpack)/buildin/global.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/isObject.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_root.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_Symbol.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/isObjectLike.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseGetTag.js","webpack://Autodesk.Extensions.[name]/./node_modules/uuid/index.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/isSymbol.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/debounce.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_freeGlobal.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/toNumber.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/now.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseTrim.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_trimmedEndIndex.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_getRawTag.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_objectToString.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/isArray.js","webpack://Autodesk.Extensions.[name]/(webpack)/buildin/module.js","webpack://Autodesk.Extensions.[name]/./node_modules/uuid/lib/rng-browser.js","webpack://Autodesk.Extensions.[name]/./node_modules/uuid/lib/bytesToUuid.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_getNative.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/throttle.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/keys.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_toKey.js","webpack://Autodesk.Extensions.[name]/./node_modules/uuid/v1.js","webpack://Autodesk.Extensions.[name]/./node_modules/uuid/v4.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_ListCache.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_assocIndexOf.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_nativeCreate.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_getMapData.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_copyObject.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_getTag.js","webpack://Autodesk.Extensions.[name]/./node_modules/mdn-polyfills/MouseEvent.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_Stack.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/eq.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_Map.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_MapCache.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/isBuffer.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_isIndex.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/isLength.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseUnary.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_nodeUtil.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_isPrototype.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/isArrayLike.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/keysIn.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_getSymbols.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_cloneArrayBuffer.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseIteratee.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseGet.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_castPath.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_isKey.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/isFunction.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_toSource.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_assignValue.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseAssignValue.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_arrayLikeKeys.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/isArguments.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/isTypedArray.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_overArg.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/stubArray.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_getSymbolsIn.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_arrayPush.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_getPrototype.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_getAllKeys.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseGetAllKeys.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_Uint8Array.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseIsEqual.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_equalArrays.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_isStrictComparable.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_matchesStrictComparable.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/ThirdParty/textarea-caret/textarea-caret.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/RendererHelpers/Shaders/MeshLineVert.glsl","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/RendererHelpers/Shaders/MeshLineFrag.glsl","webpack://Autodesk.Extensions.[name]/../node_modules/tslib/tslib.es6.js","webpack://Autodesk.Extensions.[name]/../node_modules/src/Util.ts","webpack://Autodesk.Extensions.[name]/../../src/css/layout/bounds.ts","webpack://Autodesk.Extensions.[name]/../../src/css/syntax/tokenizer.ts","webpack://Autodesk.Extensions.[name]/../node_modules/src/Trie.ts","webpack://Autodesk.Extensions.[name]/../node_modules/src/LineBreak.ts","webpack://Autodesk.Extensions.[name]/../node_modules/src/linebreak-trie.ts","webpack://Autodesk.Extensions.[name]/../../src/css/syntax/parser.ts","webpack://Autodesk.Extensions.[name]/../../src/css/types/length.ts","webpack://Autodesk.Extensions.[name]/../../src/css/types/length-percentage.ts","webpack://Autodesk.Extensions.[name]/../../src/css/types/angle.ts","webpack://Autodesk.Extensions.[name]/../../src/css/types/color.ts","webpack://Autodesk.Extensions.[name]/../../src/css/IPropertyDescriptor.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/background-clip.ts","webpack://Autodesk.Extensions.[name]/../../src/css/types/image.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/background-color.ts","webpack://Autodesk.Extensions.[name]/../../src/css/types/functions/gradient.ts","webpack://Autodesk.Extensions.[name]/../../src/css/types/functions/-prefix-linear-gradient.ts","webpack://Autodesk.Extensions.[name]/../../src/css/types/functions/-prefix-radial-gradient.ts","webpack://Autodesk.Extensions.[name]/../../src/css/types/functions/radial-gradient.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/background-repeat.ts","webpack://Autodesk.Extensions.[name]/../../src/css/types/functions/linear-gradient.ts","webpack://Autodesk.Extensions.[name]/../../src/css/types/functions/-webkit-gradient.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/background-image.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/background-origin.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/background-position.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/background-size.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/border-style.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/border-color.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/border-radius.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/float.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/border-width.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/color.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/display.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/line-break.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/letter-spacing.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/list-style-position.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/line-height.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/list-style-image.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/list-style-type.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/overflow.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/margin.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/overflow-wrap.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/text-align.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/padding.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/position.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/text-transform.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/text-shadow.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/visibility.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/transform.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/transform-origin.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/word-break.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/font-style.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/z-index.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/opacity.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/text-decoration-color.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/text-decoration-line.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/font-family.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/font-size.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/font-weight.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/font-variant.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/paint-order.ts","webpack://Autodesk.Extensions.[name]/../../src/core/bitwise.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/content.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/counter-increment.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/counter-reset.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/quotes.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/box-shadow.ts","webpack://Autodesk.Extensions.[name]/../../src/dom/document-cloner.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/webkit-text-stroke-color.ts","webpack://Autodesk.Extensions.[name]/../../src/css/property-descriptors/webkit-text-stroke-width.ts","webpack://Autodesk.Extensions.[name]/../../src/css/index.ts","webpack://Autodesk.Extensions.[name]/../../src/dom/element-container.ts","webpack://Autodesk.Extensions.[name]/../../src/core/features.ts","webpack://Autodesk.Extensions.[name]/../../src/css/layout/text.ts","webpack://Autodesk.Extensions.[name]/../../src/dom/text-container.ts","webpack://Autodesk.Extensions.[name]/../../src/dom/replaced-elements/image-element-container.ts","webpack://Autodesk.Extensions.[name]/../../src/dom/replaced-elements/canvas-element-container.ts","webpack://Autodesk.Extensions.[name]/../../src/dom/replaced-elements/svg-element-container.ts","webpack://Autodesk.Extensions.[name]/../../src/dom/elements/li-element-container.ts","webpack://Autodesk.Extensions.[name]/../../src/dom/elements/ol-element-container.ts","webpack://Autodesk.Extensions.[name]/../../src/dom/replaced-elements/input-element-container.ts","webpack://Autodesk.Extensions.[name]/../../src/dom/elements/select-element-container.ts","webpack://Autodesk.Extensions.[name]/../../src/dom/elements/textarea-element-container.ts","webpack://Autodesk.Extensions.[name]/../../src/dom/replaced-elements/iframe-element-container.ts","webpack://Autodesk.Extensions.[name]/../../src/dom/node-parser.ts","webpack://Autodesk.Extensions.[name]/../../src/css/types/functions/counter.ts","webpack://Autodesk.Extensions.[name]/../../src/render/path.ts","webpack://Autodesk.Extensions.[name]/../../src/core/cache-storage.ts","webpack://Autodesk.Extensions.[name]/../../src/render/bound-curves.ts","webpack://Autodesk.Extensions.[name]/../../src/render/vector.ts","webpack://Autodesk.Extensions.[name]/../../src/render/bezier-curve.ts","webpack://Autodesk.Extensions.[name]/../../src/render/effects.ts","webpack://Autodesk.Extensions.[name]/../../src/render/stacking-context.ts","webpack://Autodesk.Extensions.[name]/../../src/render/border.ts","webpack://Autodesk.Extensions.[name]/../../src/render/box-sizing.ts","webpack://Autodesk.Extensions.[name]/../../src/render/background.ts","webpack://Autodesk.Extensions.[name]/../../src/render/font-metrics.ts","webpack://Autodesk.Extensions.[name]/../../src/core/util.ts","webpack://Autodesk.Extensions.[name]/../../src/render/renderer.ts","webpack://Autodesk.Extensions.[name]/../../src/render/canvas/canvas-renderer.ts","webpack://Autodesk.Extensions.[name]/../../src/render/canvas/foreignobject-renderer.ts","webpack://Autodesk.Extensions.[name]/../../src/core/logger.ts","webpack://Autodesk.Extensions.[name]/../../src/core/context.ts","webpack://Autodesk.Extensions.[name]/../../src/index.ts","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/cloneDeep.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseClone.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_listCacheClear.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_listCacheDelete.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_listCacheGet.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_listCacheHas.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_listCacheSet.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_stackClear.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_stackDelete.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_stackGet.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_stackHas.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_stackSet.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseIsNative.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_isMasked.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_coreJsData.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_getValue.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_mapCacheClear.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_Hash.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_hashClear.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_hashDelete.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_hashGet.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_hashHas.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_hashSet.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_mapCacheDelete.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_isKeyable.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_mapCacheGet.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_mapCacheHas.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_mapCacheSet.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_arrayEach.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_defineProperty.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseAssign.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseTimes.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseIsArguments.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/stubFalse.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseIsTypedArray.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseKeys.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_nativeKeys.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseAssignIn.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseKeysIn.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_nativeKeysIn.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_cloneBuffer.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_copyArray.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_copySymbols.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_arrayFilter.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_copySymbolsIn.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_getAllKeysIn.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_DataView.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_Promise.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_Set.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_WeakMap.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_initCloneArray.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_initCloneByTag.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_cloneDataView.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_cloneRegExp.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_cloneSymbol.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_cloneTypedArray.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_initCloneObject.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseCreate.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/isMap.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseIsMap.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/isSet.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseIsSet.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/findLast.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_createFind.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseMatches.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseIsMatch.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseIsEqualDeep.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_SetCache.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_setCacheAdd.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_setCacheHas.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_arraySome.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_cacheHas.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_equalByTag.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_mapToArray.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_setToArray.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_equalObjects.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_getMatchData.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseMatchesProperty.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/get.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_stringToPath.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_memoizeCapped.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/memoize.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/toString.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseToString.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_arrayMap.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/hasIn.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseHasIn.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_hasPath.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/identity.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/property.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseProperty.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_basePropertyDeep.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/findLastIndex.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseFindIndex.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/toInteger.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/toFinite.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/remove.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_basePullAt.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseUnset.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/last.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_parent.js","webpack://Autodesk.Extensions.[name]/./node_modules/lodash/_baseSlice.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/FrameRenderer.css?9250","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/FrameRenderer.css","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Links/LinksRenderer.css?2d2e","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Links/LinksRenderer.css","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/RendererHelpers/TextRenderer.css?c7c8","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/RendererHelpers/TextRenderer.css","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupsEvents.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupsConstants.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Utils/GeometryUtils.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Utils/LodashUtils.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Utils/ActionManager/Action.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Actions/AddMarkupAction.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Actions/UpdateMarkupAction.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Actions/DeleteMarkupAction.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupsCommon.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/EditHandler.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/RectSelector.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/SelectionHandler.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/TranslationHandler.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/AnchorHandler.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/RotationHandler.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/ScaleHandler.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Utils/ActionManager/ActionManager.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/TextInputHandler.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/DimensionEditHandler.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandler.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerRectangle.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerPolyline.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerPolycloud.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerFreehand.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerArrow.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerText.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerDimension.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerCallout.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerCompound.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerArrowCallout.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerArrowCloudCallout.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/EditHandlers/CreationHandlers/CreationHandlerFactory.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/RendererHelpers/MeshLine.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/RendererHelpers/PenSmoothing.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/RendererHelpers/MarkupsGeometryManager.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/Markup.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupLines.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupArrow.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupPolyline.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupPolycloud.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupScalableShape.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupRectangle.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupCircle.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupCloud.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupPen.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupFreehand.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupHighlight.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupText.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupDimension.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupLine.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupCallout.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupGroup.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupArrowCallout.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupArrowCloudCallout.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupTypes/MarkupsTypesDictionary.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupsTool.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/UI/MarkupsUI.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupsLayerData.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Links/LinkEditHandler.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Links/LinkAnchorHandler.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Links/LinkSelectionHandler.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Links/Link.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupsLayer.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Links/LinkTypesDictionary.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Links/LinkAttachment.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupsSceneState.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupsDeserializer.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupsManager.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/FrameRenderer.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Links/LinksRenderer.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/RendererHelpers/MarkupsMaterialManager.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/RendererHelpers/TextRenderer.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Utils/CameraUtils.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupsRenderer.js","webpack://Autodesk.Extensions.[name]/./node_modules/date-fns/esm/_lib/toInteger/index.js","webpack://Autodesk.Extensions.[name]/./node_modules/date-fns/esm/_lib/requiredArgs/index.js","webpack://Autodesk.Extensions.[name]/./node_modules/date-fns/esm/parseISO/index.js","webpack://Autodesk.Extensions.[name]/./node_modules/date-fns/esm/toDate/index.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/FilterManager.js","webpack://Autodesk.Extensions.[name]/./node_modules/date-fns/esm/isWithinInterval/index.js","webpack://Autodesk.Extensions.[name]/./node_modules/date-fns/esm/startOfDay/index.js","webpack://Autodesk.Extensions.[name]/./node_modules/date-fns/esm/endOfDay/index.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupsPermissionManager.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupsMobileCallbacks.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/CacheObject.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Service/MarkupsServiceBase.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Service/MarkupServiceWeb.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Service/MarkupsServiceMobile.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/MarkupsSerializer.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/Service/MarkupsServiceOperator.js","webpack://Autodesk.Extensions.[name]/./extensions/BimMarkups/BimMarkups.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","useSourceMap","list","toString","this","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","push","fn","memo","stylesInDom","isOldIE","window","document","all","atob","apply","arguments","getTarget","target","parent","querySelector","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","options","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","style","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","undefined","attrs","type","nonce","getNonce","addAttrs","el","keys","forEach","setAttribute","obj","update","remove","result","transform","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","href","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","location","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","test","g","Function","freeGlobal","freeSelf","self","root","getRawTag","objectToString","symToStringTag","v1","v4","uuid","baseGetTag","isObjectLike","isObject","now","toNumber","nativeMax","Math","max","nativeMin","min","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","leadingEdge","setTimeout","timerExpired","shouldInvoke","timeSinceLastCall","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","clearTimeout","cancel","flush","global","baseTrim","isSymbol","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","other","valueOf","isBinary","slice","Date","trimmedEndIndex","reTrimStart","string","reWhitespace","charAt","objectProto","nativeObjectToString","isOwn","tag","unmasked","isArray","Array","webpackPolyfill","deprecate","paths","children","getRandomValues","crypto","msCrypto","rnds8","Uint8Array","rnds","random","byteToHex","substr","buf","offset","bth","baseIsNative","getValue","debounce","arrayLikeKeys","baseKeys","isArrayLike","_nodeId","_clockseq","rng","bytesToUuid","_lastMSecs","_lastNSecs","b","node","clockseq","seedBytes","msecs","getTime","nsecs","dt","tl","tmh","ii","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","entries","clear","entry","set","has","eq","array","nativeCreate","getNative","isKeyable","data","__data__","assignValue","baseAssignValue","props","customizer","isNew","newValue","DataView","Map","Promise","Set","WeakMap","toSource","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ArrayBuffer","resolve","Ctor","constructor","ctorString","MouseEvent","bubbles","cancelable","createEvent","initMouseEvent","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","Event","stackClear","stackDelete","stackGet","stackHas","stackSet","Stack","size","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","stubFalse","freeExports","nodeType","freeModule","Buffer","isBuffer","reIsUint","freeProcess","process","nodeUtil","types","require","binding","isFunction","isLength","baseKeysIn","arrayFilter","stubArray","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","getSymbols","symbol","arrayBuffer","byteLength","baseMatches","baseMatchesProperty","identity","castPath","toKey","path","isKey","stringToPath","reIsDeepProp","reIsPlainProp","funcToString","objValue","baseTimes","isArguments","isIndex","isTypedArray","inherited","isArr","isArg","isBuff","isType","skipIndexes","String","baseIsArguments","baseIsTypedArray","baseUnary","nodeIsTypedArray","arg","arrayPush","getPrototype","getSymbolsIn","values","overArg","getPrototypeOf","baseGetAllKeys","keysFunc","symbolsFunc","baseIsEqualDeep","baseIsEqual","bitmask","stack","SetCache","arraySome","cacheHas","equalFunc","isPartial","arrLength","othLength","arrStacked","othStacked","seen","arrValue","othValue","compared","othIndex","srcValue","properties","isBrowser","isFirefox","mozInnerScreenX","getCaretCoordinates","element","position","_document","ownerDocument","_window","defaultView","parentWindow","debug","div","body","computed","getComputedStyle","currentStyle","isInput","nodeName","whiteSpace","wordWrap","visibility","prop","lineHeight","height","scrollHeight","overflowY","overflow","textContent","substring","span","coordinates","top","offsetTop","left","offsetLeft","backgroundColor","setPrototypeOf","__proto__","__extends","__","assign","__awaiter","_arguments","P","generator","reject","fulfilled","step","next","rejected","done","then","__generator","f","y","_","label","sent","trys","ops","verb","iterator","v","op","pop","__spreadArray","to","from","pack","ar","SPACE","color","colorType","angle","angleType","loadSerializedSVG","baseClone","CLONE_DEEP_FLAG","arrayEach","baseAssign","baseAssignIn","cloneBuffer","copyArray","copySymbols","copySymbolsIn","getAllKeys","getAllKeysIn","initCloneArray","initCloneByTag","initCloneObject","isMap","isSet","keysIn","cloneableTags","isDeep","isFlat","isFull","isFunc","stacked","subValue","add","assocIndexOf","pairs","LARGE_ARRAY_SIZE","isMasked","reIsHostCtor","funcProto","reIsNative","RegExp","uid","coreJsData","maskSrcKey","exec","IE_PROTO","Hash","hashClear","hashDelete","hashGet","hashHas","hashSet","getMapData","iteratee","copyObject","typedArrayTags","isPrototype","nativeKeys","nativeKeysIn","isProto","allocUnsafe","buffer","copy","predicate","resIndex","input","cloneArrayBuffer","cloneDataView","cloneRegExp","cloneSymbol","cloneTypedArray","dataView","byteOffset","reFlags","regexp","lastIndex","symbolProto","symbolValueOf","typedArray","baseCreate","objectCreate","proto","baseIsMap","nodeIsMap","baseIsSet","nodeIsSet","findLast","createFind","baseIteratee","findIndexFunc","collection","fromIndex","iterable","baseIsMatch","getMatchData","matchesStrictComparable","matchData","noCustomizer","COMPARE_PARTIAL_FLAG","equalArrays","equalByTag","equalObjects","objectTag","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","setCacheAdd","setCacheHas","cache","mapToArray","setToArray","message","convert","objProps","objLength","objStacked","skipCtor","objCtor","othCtor","isStrictComparable","hasIn","baseGet","defaultValue","memoizeCapped","rePropName","reEscapeChar","charCodeAt","match","number","quote","subString","memoize","resolver","memoized","Cache","baseToString","arrayMap","symbolToString","baseHasIn","hasPath","hasFunc","baseProperty","basePropertyDeep","baseFindIndex","toInteger","fromRight","toFinite","remainder","basePullAt","indexes","baseUnset","previous","last","baseSlice","start","end","locals","MARKUPS_EVENTS","MARKUP_SESSION_START","MARKUP_SESSION_END","MARKUP_TOOL_ENABLED_CHANGED","MARKUP_REMOVED","MARKUP_DRAWING_START","MARKUP_DRAWING_END","MARKUP_DRAWING_CANCEL","MARKUP_EDIT_START","MARKUP_EDIT_END","MARKUP_SELECTED","MARKUP_DESELECTED","MARKUP_ENABLE_EDIT","MARKUP_DISABLE_EDIT","MARKUP_DIRTY","MARKUP_VISIBILITY_CHANGED","MARKUP_VIEW_ENTERED","MARKUP_VIEW_EXITED","TEXT_EDITING_STARTED","TEXT_EDITING_ENDED","LAYER_DIRTY","LAYER_SELECTED","LAYER_DESELECTED","LAYER_SELECTED_FROM_DIFFERENT_SHEET","LAYER_EDITED_FROM_DIFFERENT_SHEET","LAYER_DELETE","LAYER_DELETED","LAYER_PUBLISH","LAYER_ARCHIVE","LAYER_SYNCING","LAYER_SYNCED","LAYER_READY_TO_SAVE","LAYER_CREATED","DOCUMENT_ATTACHMENT_CREATION_START","DOCUMENT_ATTACHMENT_RENAME","DOCUMENT_ATTACHMENT_DELETE","LAYER_FETCHED","LAYER_RESOURCE_FETCHED","LAYER_THUMBNAIL_FETCHED","LAYER_METADATA_FETCHED","ATTACHMENT_THUMBNAIL_LOADED","ALL_MARKUPS_LOADED","PROJECT_USERS_FETCHED","LINK_DIRTY","LINK_SELECTED","LINK_DESELECTED","LINK_SYNCED","LINK_SYNCING","LINK_REMOVED","LINK_RENDERED","FILTER_CHANGED","BUTTON_DOWN","MARKUP_CREATION_TYPE_CHANGED","MARKUP_STYLE_PROPERTY_CHANGED","LAYER_DISCARD_PRESSED","LAYER_PUBLISH_PRESSED","LAYER_ARCHIVE_PRESSED","LAYER_DELETE_PRESSED","LAYER_DELETE_EMPTY_PRESSED","EXIT_VIEWER_PRESSED","RECT_SELECTOR_UPDATED","CALIBRATION_REQUIRED","COLORS","RED","GREEN","BLUE","ORANGE","YELLOW","CYAN","WHITE","BLACK","PINK","PURPLE","NO_COLOR","DEFAULT_COLORS","DEFAULT_FILL_COLORS","STYLE_PROPERTIES","COLOR","FILL_COLOR","THICKNESS","OPACITY","FILL_OPACITY","FONT_SIZE","FONT_WEIGHT","FONT_FAMILY","FONT_STYLE","FONT_COLOR","STROKE_LINEJOIN","FONT_SIZES","MESHLINE_PATH_START","MESHLINE_PATH_END","MESHLINE_PATH_DEFAULT","MESHLINE_PATH_ROUND_CAP","MESHLINE_PATH_FLAT_CAP","MARKUP_TYPE_ARROW","MARKUP_TYPE_RECTANGLE","MARKUP_TYPE_CIRCLE","MARKUP_TYPE_CLOUD","MARKUP_TYPE_FREEHAND","MARKUP_TYPE_HIGHLIGHT","MARKUP_TYPE_POLYLINE","MARKUP_TYPE_POLYCLOUD","MARKUP_TYPE_TEXT","MARKUP_TYPE_CALLOUT","MARKUP_TYPE_ARROW_CALLOUT","MARKUP_TYPE_ARROW_CLOUD_CALLOUT","MARKUP_TYPE_DIMENSION","MARKUP_TYPE_LINE","RECT_SELECTOR","MARKUP_STATUS_SAVE_FAILED","MARKUP_STATUS_SAVE_SUCCEED","MARKUP_STATUS_SAVING","MARKUP_STATUS_DELETING","MARKUP_STATUS_DELETE_SUCCEED","MARKUP_STATUS_DELETE_FAILED","MARKUP_STATUS_CREATED","MARKUP_STATUS_OPEN","MARKUP_STATUS_PRIVATE","MARKUP_STATUS_PUBLISHED","MARKUP_STATUS_PUBLISHING","MARKUP_STATUS_CLOSED","MARKUP_STATUS_ARCHIVED","MARKUP_STATUS_ARCHIVING","MARKUP_ATTACHMENT_LOADING","MARKUP_ATTACHMENT_SAVING","MARKUP_ATTACHMENT_SAVE_SUCCEED","MARKUP_ATTACHMENT_SAVE_FAILED","MARKUP_ATTACHMENT_RENAMING","MARKUP_ATTACHMENT_DELETEING","ATTACHMENT_DATA_TYPE_BINARY","ATTACHMENT_DATA_TYPE_TEXT","MARKUP_RESOURCE_TYPE_SVG","MARKUP_RESOURCE_TYPE_SCREEN_CAPTURE","DEFAULT_STATUSES_TO_LOAD","LINK_TYPE_ATTACHMENTS","LINK_TYPE_DOCUMENT_ATTACHMENT","DEFAULT_MARKUP","DEFAULT_COLOR","DEFAULT_FONT_COLOR","DEFAULT_FILL_COLOR","DEFAULT_THICKNESS","DEFAULT_OPACITY","DEFAULT_HIGHLIGHT_OPACITY","DEFAULT_FILL_OPACITY","DEFAULT_STROKE_IN_MM","DEFAULT_FONT_SIZE_IN_PIXELS","DEFAULT_FONT_SIZE_IN_MM","DEFAULT_FONT_WEIGHT","DEFAULT_FONT_FAMILY","DEFAULT_FONT_STYLE","SUB_MENU_VISIBLE_CLASS","isTouchDevice","navigator","maxTouchPoints","ARROW_TIP_LENGTH","EPSILON","TOUCH_RADIUS","ANCHOR_RADIUS","MIN_CHANGE_DISTANCE","SNAP_DISTANCE","MIN_FREEHAND_POINT_DISTANCE","MIN_ANGLE_CHANGE","ROTATION_ANCHOR_DISTANCE","ROTATION_SNAP_DEGREES","PASTE_OFFSET","ARROW_MOVE_OFFSET","CONTEXTUAL_MENU_OFFSET","LINK_POSITION_OFFSET","LINK_ICON_SIZE","SELECTION_ZOOM_MARGIN","MAX_THICKNESS","PERSPECTIVE_MODE_SCALE","FRAME_SIZE_SCALE","BOUNDING_BOX_MARGIN","devicePixelRatio","HIT_AREA_MARGIN","TEXT_DEBOUNCE","DIMENSION_TIP_LENGTH","DIMENSION_THICKNESS_FACTOR","DIMENSION_FONT_SIZE_FACTOR","DISABLED_OPACITY","MOBILE_GESTURES_MIN_THRESHOLD_TIME","SCREEN_MARGIN","TEXT_LENGTH_LIMIT","MINIMUM_THUMBNAIL_SIZE","WORLD_3D_SIZE","MAX_NORMA_PERCENTAGE","MAX_NORMA_TEXT_PERCENTAGE","NORMA_3D","NORMA_TEXT_3D","POINT_SIZE_IN_MM","TIMEOUT_TO_SELECT_AFTER_DRAWEND","MARKUP_CREATION_CURSORS","MARKUP_ERRORS","MARKUP_SAVE_FAILED","MARKUP_DELETE_FAILED","MARKUP_PUBLISH_FAILED","MARKUP_ARCHIVE_FAILED","MARKUP_ATTACHMENT_CREATE_FAILED","MARKUP_ATTACHMENT_DELETE_FAILED","MARKUP_ATTACHMENT_RENAME_FAILED","MARKUP_ATTACHMENT_UPDATE_FAILED","GeometryUtils","radians","PI","degrees","points","pivot","frontVector","point","sub","applyAxisAngle","v2","eyeVector","angleTo","clone","cross","normalize","dot","boundingBox","cloneDeep","LodashUtils","Action","actionManager","execute","AddMarkupAction","markupsManager","markup","layer","removeMarkupFromLayer","addMarkupToLayer","UpdateMarkupAction","newState","oldState","getState","setState","syncEditState","DeleteMarkupAction","av","Autodesk","Viewing","forAll","isEqualVectors","precision","MarkupsConstants","distanceTo","getObjectAsList","nearestPointInPointToLine","lineStart","lineEnd","param","X0","THREE","Vector3","X1","subVectors","multiplyScalar","applyTranslation","translation","x","z","getTextSize","getGlobal","measureDiv","pointerEvents","textRendering","text","hash","fontWeight","fontSize","fontFamily","fontStyle","width","innerText","overflowWrap","isIE11","getBoundingClientRect","createArc","radius","clockwise","steps","radiusInMM","bbox","dist","abs","floor","pow","nx","cos","ny","sin","_addFillingCircle","circles","begin","beginPoint","Vector2","endPoint","difVec","vecLength","mid","divideScalar","perpenLength","sqrt","perpenVec","newPoint","beginAng","atan2","endAng","newCircle","_hideIntersectionCircles","intersectionObjects","k","hide","insertInSortedArray","comparer","comp","locationInArray","checkLineIntersection","line1Start","line1End","line2Start","line2End","onLine1","onLine2","onBothLines","denominator","a","numerator1","numerator2","markupsOverlayRenderer","viewer","overlayRendererExtraOptions","ctx","screenshotCamera","onRenderDone","markupLayer","markupsExtension","getExtension","canvasBounds","impl","getCanvasBoundingClientRect","originalWidth","originalHeight","webglRenderer","glrenderer","pushViewport","setPixelRatio","setViewport","renderer","onResize","wasVisible","wasTransparent","cam","is2d","markupsCamera","visibleLayers","getVisibleLayers","setVisible","beforeRender","isVisible","isTransparent","changeTransparency","afterRender","render","popViewport","targetToCanvas","canvas","scaleRatio","textRenderer","renderTextToCanvas","simplify","tolerance","highestQuality","getSqSegDist","p1","p2","dx","dy","sqTolerance","simplified","simplifyDPStep","first","maxSqDist","sqDist","simplifyDouglasPeucker","prevPoint","newPoints","len","simplifyRadialDist","isPolygonSimple","q1","q2","executeAfterTransitionEnded","callback","navigation","getRequestTransition","getTransitionActive","addEventListener","CAMERA_TRANSITION_COMPLETED","once","isSheetNameEqual","nameA","nameB","startsWith","EditHandler","setGlobalManager","globalManager","getEditState","editState","changes","setEditState","anchors","updateEditState","getAnchors","prevCenter","center","anchor","applyMatrix4","scaleMatrix","rotation","getRotation","eyeDirection","getCameraEyeVector","applyRotation","isDuringEdit","action","belongsToGroup","submitGroupUpdate","getActiveLayer","syncState","markups","markupGroup","isGroupOpen","isActionGroupOpen","openActionGroup","closeActionGroup","dontSubmit","submitChanges","editEnd","previousPoint","pointProjected","worldToClient","previousPointProjected","direction","cameraAngle","getSignedAngle","absoluteUpVec","degreesToRadians","snap","newAngle","ceil","rotatedPoint","axis","clientToWorld","markupsTool","isSnappingAllowed","getSnappedPosition","lastMousePos","mouseMoved","sizeFromClientToWorld","dispatchEvent","handler","getMinChangeDistanceWorld","event","keyCode","GlobalManagerMixin","RectSelector","bounds","Box3","clean","buttonDownPoint","dragging","didMouseMove","makeEmpty","expandByVector","Infinity","expandByPoint","getEnabledMarkups","isSelected","markupBounds","getWorldBoundingBox","isIntersectionBox","setHover","selectMarkups","shiftDown","deselectAllMarkups","select","SelectionHandler","intersect","isMobileDevice","intersected","isMarkupSessionOpen","editLayer","ctrlDown","deselectAllLayers","selectLayer","TranslationHandler","keyTranslation","inEditMarkups","numGroups","numNonGroupMarkups","isGroupMarkup","translating","handleMouseTranslation","lastTranslationPoint","buttonDownPos","editStart","consumed","getInEditMarkups","cancelTransformEditing","translationHandler","KeyCode","BACKSPACE","DELETE","ESCAPE","UP","handleKeyTranslation","getCameraUpVector","DOWN","negate","RIGHT","getCameraRightVector","LEFT","snapPointToAxis","hasOneGroupInEdit","handleTranslation","multiplyByNormaStrokeWidth","translationAbs","state","AnchorHandler","activeAnchor","applyInverseRotation","applyInverseScaleAndTranslation","snapAxis","updateActiveAnchor","originalAnchor","cancelAnchorEditing","updateEditStateAnchors","handleCompensation","findIndex","find","isAnchorHandlingAllowed","RotationHandler","rotating","handleRotation","originalRotation","getClientCenter","vec","getClientBoundingBox","getCenter","getCameraRotation","absoluteEyeVec","getRotationAnchor","ScaleHandler","scaling","applyInverseCameraRotation","handleScaling","scaleAnchor","originalPoint","isSamePoint","cursor","lastIntersectPoint","rightVec","sign","radiansToDegrees","originalBoundingBox","swapBoundingBoxY","axisList","currentAnchorPos","getAnchorPosByAxisList","pointWithoutMargin","getMarginSize","resize","updateTranslation","axisSummed","reduce","acc","current","diffVector","multiply","deep","newAnchorPos","oppositeAnchor","getOppositePoint","distanceVector","lengthVector","currentLength","newLength","getMinimumSize","flipPoint","applyReflection","scaleAbs","addScalar","scale","scaleAnchors","getScaleAnchors","pProjected","anc","pos","pointToCenterDistance","pointToCenterDirection","onlyHorizontal","getEastAnchor","getWestAnchor","getNorthAnchor","getSouthAnchor","getNorthWestAnchor","getSouthWestAnchor","getNorthEastAnchor","getSouthEastAnchor","withMargin","corner","getAnchor","ActionManager","EventDispatcher","undoStack","redoStack","nextActionId","clearStack","redo","group","trigger","EXECUTE","notify","allowRedo","console","warn","undo","UNDO","REDO","actionGroup","HISTORY_CHANGED_EVENT","hasUndo","isUndoStackEmpty","hasRedo","isRedoStackEmpty","TextInputHandler","textboxActive","submitChangesDebounced","isIOSDevice","onMarkupEditEnabledBinded","onMarkupEditEnabled","onMarkupEditDisabledBinded","onMarkupEditDisabled","onMarkupEditStartBinded","onMarkupEditStart","onMarkupEditEndBinded","onMarkupEditEnd","onTouchEndBinded","onTouchEnd","isTextMarkup","containsPoint","getLabel","getUpdatedCaretPosition","lastCaretPosition","startTextEditing","endTextEditing","isEmpty","onEmptyTextMarkup","deleteEmptyTextMarkup","deleteMarkup","focus","markText","webkitUserSelect","userSelect","setCaretPosition","blur","getDocument","execCommand","onCameraChanged","isSafari","onCameraChangedDebounced","CAMERA_CHANGE_EVENT","onKeyDown","labelBounds","getTextStyle","spareSize","fontToWorldScale","getFontToWorldScale","fontToClient","sizeFromWorldToClient","isCaretOverBottomEdge","bottom","getWindow","ENTER","singleLine","preventDefault","getSelection","anchorNode","tagName","anchorOffset","enterPressed","backspacePressed","caretPosition","parentElement","caretRelativeClientPosition","right","isCaretOverRightEdge","addNewline","caretLength","onInput","onKeyUp","isKeyUpEvent","fromCharCode","expandBoundingBox","onPaste","clipboardData","getData","limit","sel","range","getRangeAt","frag","createDocumentFragment","insertNode","selectNodeContents","removeAllRanges","addRange","onMouseWheel","newEvent","wheelDelta","deltaY","toolController","domElement","defaultPrevented","onDOMMouseScroll","onMouseMove","onKeyPress","onHistoryChangedBinded","onHistoryChanged","endTextEditingBinded","onStyleChangedBinded","onStyleChanged","createRange","setStart","setEnd","caretPos","rangeCount","commonAncestorContainer","startOffset","endOffset","removeEventListener","getWorldBoundingBoxTextOnly","getTextWidthInFontScale","oldSize","newSize","offsetWorld","translateBoundingBox","delta","getBoundingBoxVerticalTranslation","hasEventListener","stopPropagation","textboxWasActive","removeSelection","DimensionEditHandler","eyeVec","normal","getPointOnNormal","CreationHandler","onCreationStartCB","onCreationStart","onCreationEndCB","onCreationEnd","creationStarted","deselectAllLinks","cameraRotation","rotationHandler","rotationNotAllowed","currentAction","getWorldCenter","setLocked","clonedState","fixInitialRotation","disableEdit","duringCreationMarkup","complete","anchorHandler","creationCancel","onEscape","CreationHandlerRectangle","creationStart","updateRectPoints","upVec","diagonal","creationEnd","handleMouseMove","CreationHandlerPolyline","popTemporaryPoint","isClosingLoop","needPop","closed","isNewLocation","getMinimumPoints","beforeCreationEnd","getMarkupById","doBeforeCreationEnd","snapDistance","CreationHandlerPolycloud","CreationHandlerFreehand","addPoint","CreationHandlerArrow","tailIndex","reverseHead","headIndex","CreationHandlerText","handleClick","calculateAnchorsByCenterPoint","textInputHandler","CreationHandlerDimension","measurement","MeasureCommon","Measurement","MeasurementTypes","MEASUREMENT_DISTANCE","snapper","measureExtension","error","updateViewportId","getPick","viewportIndex2d","pickSecondAnchor","getMeasureExtension","forceCalibrate","model","isLeaflet","isPdf","calibrationTool","isCalibrated","openCalibrationRequiredDialog","isSnapped","copyResults","getSnapResultPosition","getSnapResult","documentCameraToMarkupsCamera","dimensionEditHandler","handleButtonDown","projectedPoint","pick","geomType","SnapType","SNAP_VERTEX","geomVertex","intersectPoint","correctPerpendicularPicks","indicator","getDistance","viewportId","setViewportId","sharedMeasureConfig","computeResult","picks","distanceXYZ","Private","convertUnits","getUnitString","units","calibrationFactor","formatValueWithUnits","CreationHandlerCallout","classes","getTextIndex","arrow","getArrow","getText","halfThickness","halfHeight","halfWidth","arrowHead","getHead","arrowTail","getTail","getTextQuadrant","frameType","tailPoint","getVectorToClosestPointOnCloud","creationHandler","getArrowIndex","markupClasses","creationHandlers","currentStep","lastCompleted","componentsState","sort","groupOrder","generateUUID","numMarkups","markupType","class","_restoreFill","isLast","componentState","groupId","subMarkup","createMarkup","selectWhenCompleted","currentComponentState","markupClass","fillNotAllowed","handleButtonUp","handleDoubleClick","enableEdit","nextPoint","getStartPointForNextMarkup","requiresClick","afterNextMarkupCreated","closeGroup","CreationHandlerArrowCallout","tailHandlingNotAllowed","calloutFrameType","CreationHandlerArrowCloudCallout","headHandlingNotAllowed","CreationHandlerFactory","MeshLine","supportsInt32Index","MeshLineMaterial","parameters","check","Material","lineWidth","miter","Color","opacity","resolution","material","RawShaderMaterial","uniforms","vertexShader","fragmentShader","fragShader","attributes","side","counters","defines","IS_IE_11","MITER","setValues","getControlPoints","x0","y0","x1","y1","x2","y2","tension","d01","d12","fa","fb","p1x","p1y","p2x","p2y","calcQuadBezier","p0","tt","u","uu","calcCubicBezier","p3","ttt","uuu","geometry","BufferGeometry","dispose","positions","indices_array","setGeometry","sourceGeo","widthCB","connectivity","widthArray","widthCallback","sourceConnectivity","capType","joinType","useExactSize","isClosed","isPointNear","getSegmentDistSq","thresholdSq","matrixWorld","numPoints","fromArray","getPositionV3","aa","initArrays","capacity","Float32Array","indexSize","Uint32Array","Uint16Array","getWidth","ratio","srcLength","maxCount","addPosition","count","w","usedIndices","setAttributes","needsUpdate","BufferAttribute","endType","addPrevious","addNext","addIndices","offsets","calcPolygonLength","addQuadBezier","startPoint","control","segmentSize","widths","segments","round","addCubicBezier","control1","control2","penSmoothing","useVariableWidth","cp","finalAnchors","MarkupsGeometryManager","geoCache","equals","_isCacheSupported","_getCachedStrokeGeometry","areAllAnchorsEqual","_createPointGeometry","_createStrokeGeometry","fill","innerGeometry","_getFillInnerGeometryFromAnchors","meshLine","arcGeometry","_getFillCircleGeometry","fillGapGeometries","_getFillingGapsGeometry","_getFillRectangleGeometry","anchorPoint","beginCircle","endCircle","vertices","ShapeGeometry","Shape","hashName","CircleGeometry","PlaneBufferGeometry","_centerAndScaleLocations","_shiftAnchorsInsideBox","_createCachedStrokeGeometry","includes","_createRectangleStrokeGeometry","_createCircleStrokeGeometry","geo","_createCloudGeometry","_createLineGeometry","_createArrowGeometry","_createDimensionGeometry","mmToWorldUnitFactor","getNormaStrokeWidth","_createMeshLine","completed","MESHLINE","locations","limitDegrees","isPen","smoothie","prev","line","tipLength","withTip","lineDirection","boundingPoints","thickness","addSingleSegment","halfTip","sum","elements","isClockwise","reverse","getCloudMinimumRadius","leng","intersects","prevAnchor","currentAnchor","nextAnchor","angA","tangentA2","angB","tangentB2","vec1","vec2","crossVectors","asin","acos","handleIntersection","arcs","poly","overlap","incise","stretch","q","phi","gamma","curr","firstAngle","lastAngle","isAnchor","inciseInRadians","cir","createCloud","arc","prevPathLength","getArcAngleSize","invScaleMatrix","translate","minRadius","Markup","materialManager","meshContainer","strokeMaterial","fillMaterial","matrix","Matrix4","invMatrix","selected","inEdit","enabled","transparent","visible","hover","locked","getDefaultState","getDefaultAnchors","getDefaultStyle","updateMatrix","registerSelectionHandler","getCreationHandler","mesh","Mesh","frustumCulled","makeScale","setPosition","getInverse","updateCenter","getStyleProperty","LAST_COLOR","rotatedBoundingBox","prevState","isLocked","syncGroup","Group","addToScene","syncGroupMarkups","permissionManager","canEditMarkup","layerData","forceSet","invalidate","setDirty","scaleHandler","selectionHandler","rotate","applyScaleAndTranslation","applyRotationForAnchors","calculateWorldBoundingBox","margin","_point","inBoundingBox","hasFill","fillMesh","raycaster","intersectObject","isWithFillMarkup","removeMaterial","doDispatchEvent","strokeMesh","geometryManager","isCachedGeometry","traverse","child","removeFromScene","destroy","singleClickMarkup","withSnappingMarkup","useTimerBeforeSelection","MarkupLines","registerTranslationHandler","registerAnchorHandler","addMaterial","getStrokeGeometry","createMesh","createLine","recreateLines","hasThicknessChanged","newStrokeMaterial","editMaterial","MarkupArrow","MarkupPolyline","registerRotationHandler","registerScaleHandler","isPoint","fillGeometry","getFillGeometry","setRotation","createPolyline","recreate","newFillMaterial","removeFill","MarkupPolycloud","minSize","createFillMesh","shape","recreateCloud","MarkupScalableShape","createFill","setSize","createShape","MarkupRectangle","MarkupCircle","MarkupCloud","isCompleted","MarkupPen","createPen","MarkupFreehand","MarkupHighlight","MarkupText","registerTextInputHandler","isFrameUsed","frameMarkup","shouldRenderFrame","renderFrame","renderMarkup","removeFrame","markupsTypesDictionary","resetFrameBoundingBox","oldStyle","newStyle","oldFrameSize","calculateFrameSize","deltaFrameSize","deltaFrameVec","_rotateTranslationVector","preciseWidth","textBounds","unscaledWidth","_calculateWorldBoundingBoxText","frameSize","getWorldFrameSize","_rotateBoundingBox","padding","normalizeY","textStyle","isSingleLine","MarkupDimension","registerDimensionEditHandler","textMarkup","onSubmitChanges","originalEditStart","onTextMarkupEditStart","originalEditEnd","onTextMarkupEditEnd","textBoundingBox","union","textAnchors","dir","textTranslation","createDimension","recreateDimension","renderText","hasChanges","MarkupLine","MarkupCallout","getTextMarkup","limitAngle","getQuadrant","getShapeMarkup","closestDistance","closestVertex","vertex","distance","distanceToSquared","getArrowMarkup","origArrowTail","origArrowHead","getShapeQuadrant","sourceMarkup","applyArrowConstraints","selectedMarkup","hoveredMarkup","isHovered","applyConstraints","applyScale","applyStyle","applyTextChange","MarkupArrowCallout","applyArrowTextConstraint","MarkupArrowCloudCallout","applyShapeArrowConstraint","MarkupsTool","names","isActive","onCameraChangedBinded","onEditStartBinded","onEditStart","onEditEndBinded","onEditEnd","onDrawEndBinded","onDrawEnd","onCreationTypeChangedBinded","onCreationTypeChanged","onSelectionChangedBinded","onSelectionChanged","rectSelector","lastDrawEndTime","rearrangeByPriorities","handlerName","mousePos","isDragging","getCursor","getDuringCreationMarkup","selectableMarkups","activeLayer","hasSelection","editableLinks","getAllLinks","intersectHandler","visibleLinks","getVisibleLinks","creationType","getMarkupCreationType","isRectSelectorActive","Extensions","Snapping","Snapper","markupMode","registerTool","deregisterTool","getName","addDocumentEventListener","removeDocumentEventListener","getSelectedMarkups","isInEdit","updateCaretPosition","pointScreen","canvasX","canvasY","lastSnapPoint","originalEvent","items","eventName","getActiveNavigationTool","markupCreationType","isSessionOpen","getSelectedLayers","getSelectedLinks","clickStart","isToolEnabled","eventToWorld","updateRaycaster","consumeEvent","markupInEdit","performance","applyHandler","isNavigationToolActive","buttonDownConsumed","selectedOnDown","panning","isRightClick","isMiddleClick","handleMouseEvent","selectedMarkups","buttonUpConsumed","buttonUpCalled","wasMouseMoved","creationToolSelected","unhoverAllLayers","unhoverAllMarkups","handleKeyDown","links","CONTROL","SHIFT","selectAllMarkups","cut","paste","endMarkupSession","onConfirmCB","deleteInEditMarkups","handleKeyUp","clearOverlays","navigationEndTime","isNavigationJustEnded","MarkupsUI","createUI","uiClasses","uiContainer","className","container","ToolbarClass","toolbar","CreationToastClass","creationToast","ContextualMenuClass","contextualMenu","AttachmentsPreviewPanelClass","attachmentsPreviewPanel","MarkupsDialogModalsClass","MarkupsDialogModals","MarkupsVisibilityButtonClass","markupsVisibilityButton","ExitMarkupViewClass","exitMarkupView","registerEventListeners","unregisterEventListeners","onSessionStartBinded","onSessionStart","onSessionEndBinded","onSessionEnd","selectNavigationButton","handleNavButtonEvents","navigationToolBackup","getToolbar","getControl","TOOLBAR","NAVTOOLSID","_controls","onNavButtonClickBinded","onNavButtonClick","buttons","getNavigationControls","handleButtonEvents","UI","Button","CLICK","subMenu","subButton","_id","State","INACTIVE","changeMarkupCreationType","ACTIVE","toolName","setButtonState","toLowerCase","MarkupsLayerData","guid","resources","attachments","status","metadata","markup_metadata","hovered","grabbing","updatePosition","originalPosition","getLinkBasePosition","updateEditStatePosition","LinkEditHandler","selectLink","Link","dirty","layerBoundingBox","posProjected","setY","linkSize","verticalOffset","horizontalOffset","linksRenderer","getLinkBoundingBox","LinkSelectionHandler","LinkAnchorHandler","MarkupsLayer","markupId","deselect","linkId","deleteLink","getAllMarkups","enable","disable","linkTypesDictionary","applyOffsetToCamera","viewport","eye","Number","pivotPoint","getViewportData","globalOffset","clonedMarkupData","parse","invGlobalOffset","restoreMarkupViewState","immediate","cb","amendedData","restoreState","EventUtils","waitUntilTransitionEnded","camera","getCamera","updateCamera","updateMatrixWorld","sceneUpdated","doTransition","waitUntilGeometryLoaded","markupsToWorld","loadOptions","PDFUtils","getLeafletLoadOptions","getLeafletBoundingBox","modelData","texWidth","texHeight","dpiCorrection","originalDocumentResolution","wx","wy","worldPos","worldTopLeft","leafletToPdfWorld","documentCamera","isPerspective","bb","sizeFromMarkupsToWorld","parseMetadata","svgNode","dataModelVersion","meta","getMetaAttribute","attribute","getAttribute","isLegacyMarkup","output","getLocations","locStr","split","parseFloat","getAttributeVector","posVec","strPos","strRot","styleObj","getStyle","fixLegacyFontSize","is3d","parseMarkupLayer","svgString","markupString","DOMParser","parseFromString","err","stringToSvgNode","layerMetadata","versionAttr","getLayerDataModelVersion","viewerStateBackup","MarkupsManager","registerEvents","reset","onAllMarkupsLoadedBinded","onAllMarkupsLoaded","onMarkupLayerFetchedBinded","onMarkupLayerFetched","onMarkupResourceFetchedBinded","onMarkupResourceFetched","onMarkupLinkSyncedBinded","onMarkupLinkSynced","onLayerSyncedBinded","onLayerSynced","onLayerSyncingBinded","onLayerSyncing","onLayerSelectedBinded","onLayerSelected","onLayerDeselectedBinded","onLayerDeselected","onCalibrationEndedBinded","onCalibrationEnded","Events","FINISHED_CALIBRATION_FOR_DIMENSION_EVENT","onDrawingStartBinded","onDrawingStart","onDrawingEndBinded","onDrawingEnd","layerJson","nextLayerId","layers","layersJson","ignoreFilters","removeExistingLayers","removeAllLayers","markupsCache","cleanCache","layersFiltered","filterManager","filterLayers","getLayersAsList","getGuid","removeLayer","getLayerByGuid","createLayer","loadMarkupsToLayer","loadLinksToLayer","layerId","layerToDelete","isInMarkupView","deselectLayer","deleteAllMarkups","deleteAllLinks","exclude","layerGuid","getLayerById","addMarkup","addLink","optionalState","MarkupClass","nextMarkupId","linkMetadata","nextLinkId","amount","log","documentAttachment","polySaveDisabled","readyToSave","getReadyToSave","hasEmptyText","some","emptynessCondition","isMobileApp","canDeleteMarkup","getMarkupsByProperty","getLayersByProperty","res","getLinksByProperty","lockSettings","getNavigationLockSettings","setNavigationLockSettings","orbit","pan","zoom","roll","fov","gotoview","walk","setIsLocked","setNavigationLock","sheetNameInMarkup","sheetName","loadLayers","loadLayerIfHidden","onSelectionDone","wasSelected","marginBackup","horizontal","FIT_TO_VIEW_HORIZONTAL_MARGIN","vertical","FIT_TO_VIEW_VERTICAL_MARGIN","fitBounds","setActiveNavigationTool","lockNavigation","layerToSelect","loadRelevantSheet","hasMultiSheet","sheetList","sheet","search","loadDocumentCallback","loadDocumentNode","getDocumentNode","loadAsHidden","applyRefPoint","keepCurrentModels","doLoadSheet","doLoadSheetByName","unlockNavigation","sectionExt","getSectionPlanes","setSectionFromPlane","setCutPlaneSet","selectedLayer","getSelectedLayer","onMarkupsSyncCallback","deselectLink","sessionOpen","startMarkupSession","toolEnabled","enableAllMarkups","disableAllMarkups","markupsUI","renderToolbar","updateToolPriority","setActiveLayer","creationStatusType","defaultMarkupStatus","contextMenu","setContextMenu","pauseHighlight","disableSelection","gestureHandler","getTool","setGestureParameter","save","deleteLayer","restoreGestureParameterDefault","layerToEdit","changeAllLayersTransparency","markupsToDelete","markupsToCopy","pasteOffset","duplicateMarkup","getTranslationVector","translationSize","addToLayer","translationVec","newMarkup","component","getSvgResource","svgMetadata","markupMetadata","docAttachment","issue_id","attachment_type","createLinkMetadata","getLinksMetadata","attachment","newLink","createLink","addLinkToLayer","toUpperCase","creationStyleProperties","changeStyleProperty","styleProperty","setToolEnabled","ScreenShot","makeBoundsSquare","overlayRenderer","getCropBounds","markupsCameraBackup","clientBounds","setFromPoints","getScreenShotAtScreenSize","getScreenShotOfMarkup","img","selectedLayers","unregisterEvents","clearListeners","FrameRenderer","appendOrderedElementToViewer","markupFrames","layerFrames","rotationAxis","onMarkupDirtyBinded","onMarkupDirty","onLayerDirtyBinded","onLayerDirty","onLayerDeletedBinded","onLayerDeleted","onMarkupRemovedBinded","onMarkupRemoved","renderAllBinded","renderAll","onRectSelectorUpdatedBinded","onRectSelectorUpdated","RENDER_PRESENTED_EVENT","renderMarkups","renderLayers","renderLayerSelectionFrame","renderMarkupSelectionFrame","renderTransformAnchors","frame","entity","withFill","frameFill","fillElement","frameBorder","classList","contains","offsetHeight","createAnchorElement","rotationAnchorPos","createSegment","nameStart","removeAnchorVisibility","removeSegmentVisibility","segment","baseName","applyTransform","showPath","firstAnchor","existingAnchors","existingSegments","getExistingSegments","_renderScaleAnchors","_renderRotationAnchor","_renderAnchors","anchorElement","diameter","anchorFill","segmentElement","layerElement","markupElement","rectSelectorFrame","boundsProjected","transformOrigin","LinksRenderer","linksSizeCache","onLinkDirtyBinded","onLinkDirty","renderAllLinksBinded","renderAllLinks","onLinkDeletedBinded","onLinkDeleted","renderLink","isActiveLayer","icon","linkHalfSize","getPosition","linkElement","MarkupsMaterialManager","materials","isFill","_getHashName","blending","NoBlending","NormalBlending","CustomBlending","blendDst","ZeroFactor","blendSrc","OneFactor","blendEquation","AddEquation","blendEquationAlpha","MaxEquation","needsMiter","getResolution","FrontSide","_setStrokeBlending","matOpt","DoubleSide","wireframe","MeshBasicMaterial","_setFillBlending","setStyle","newMaterial","refCount","_createFillMaterial","_createStrokeMaterial","depthWrite","depthTest","newName","_editFillMaterial","_editStrokeMaterial","_setResolution","TextRenderer","labels","textMarkups","textSizeCache","onMarkupVisibilityChangedBinded","onMarkupVisibilityChanged","onResizeBinded","VIEWER_RESIZE_EVENT","renderTextMarkups","assignStyleProperty","styleCache","clientBoundingBox","getClientBoundingBoxTextOnly","clientCenter","clientSize","preciseSize","roundedSize","widthDiff","updateLabelPositionAndSize","afterCloneBeforeRender","afterCloneAfterRender","visibleTextMarkupsIds","logging","onclone","doc","documentCameraBackup","getElementsByClassName","html2canvas","textCanvas","getContext","drawImage","canvasCtx","globalCompositeOperation","CameraUtils","Vector4","matrixWorldInverse","projectionMatrix","viewportToClient","up","avp","ShaderPass","CopyShader","MarkupsRenderer","updateCameraMatrices","frameRenderer","Raycaster","clientWidth","clientHeight","viewSize","OrthographicCamera","copyPass","_tmpScene","Scene","_black","absoluteRightVec","tmpMatrix","frustum","Frustum","setMMtoUnitConversion","setNormaStrokeWidth","setNormaTextSize","updateCameraAndMaterialParameters","onRenderBinded","onRender","invalidateBinded","upVector","rightVector","pixelRatio","getPixelRatio","supportsElementIndexUint","_tmpTarget","disposeTmpTarget","WebGLRenderTarget","minFilter","LinearFilter","magFilter","format","RGBAFormat","stencilBuffer","depthBuffer","generateMipmaps","aspect","newRight","updateProjectionMatrix","createTempRenderTarget","updateScreenSize","getFinalTarget","multiplyMatrices","setFromMatrix","isInsideCamera","box","topRight","topLeft","setX","bottomLeft","bottomRight","intersectsBox","is2DBoxIntersection","box1","box2","normalMeshes","transparentMeshes","transparentProperties","flushNormalMeshes","flushTransparentMeshes","setClearColor","clearTarget","hasTransparentFill","hasTransparentStroke","currentBBox","containerBounds","getScreenViewport","project","unproject","normaStrokeWidth","getMetadata","worldUnits","getFitBounds","maxSizePercentange","norma","worldWidth","worldHeight","_fromMMtoWorldUnits","_calcNormaSize","normaTextSize","hasCreationDate","created_at","dateA","dateB","mouse","ray","origin","near","far","removeEventListeners","dirtyNumber","NaN","isNaN","requiredArgs","required","patterns","dateTimeDelimiter","timeZoneDelimiter","timezone","dateRegex","timeRegex","timezoneRegex","splitDateString","dateString","timeString","dateStrings","date","token","parseYear","additionalDigits","regex","captures","year","century","restDateString","parseDate","isWeekDate","dayOfYear","parseDateUnit","month","day","week","dayOfWeek","_year","validateWeekDate","isoWeekYear","setUTCFullYear","fourthOfJanuaryDay","getUTCDay","diff","setUTCDate","getUTCDate","dayOfISOWeekYear","daysInMonths","isLeapYearIndex","validateDate","validateDayOfYearDate","parseTime","hours","parseTimeUnit","minutes","seconds","validateTime","parseTimezone","timezoneString","_hours","validateTimezone","argument","argStr","FilterManager","filters","getInitialFilters","createdByFilter","createdAtStartFilter","createdAtEndFilter","showPrivateFilter","showPublishedFilter","showArchivedFilter","toggleMarkupViewFilter","layerList","filterForPanel","hideAllMarkups","filterByVersion","filterBySheet","filterByDate","filterPrivate","filterPublished","filterArchived","filterCreator","filterDeleted","dateTime","fromData","toData","dirtyDate","dirtyInterval","interval","startTime","endTime","RangeError","isWithinInterval","dirtyOptions","parseYearResult","timestamp","setFullYear","getUTCFullYear","getUTCMonth","setHours","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","parseISO","startOfDay","endOfDay","isDateInRange","allSheets","creator","created_by","startVersion","starting_version","documentVersion","MarkupsPermissionManager","userId","permitted_statuses","editableStatuses","currentRawDocumentVersion","isAdmin","deletableStatuses","MarkupMobileCallbacks","callbackName","dataObj","iosBridge","webkit","messageHandlers","callbackHandler","iosSend","messageName","postMessage","command","androidSend","JSINTERFACE","dataAsString","isAndroidDevice","onMarkupDeselected","onLayerSelectedDifferentSheet","onLayerEditDifferentSheet","onMarkupSessionStart","onMarkupSessionEnd","onMarkupDrawingStart","onMarkupDrawingEnd","onMarkupDrawingCancel","onLinkSelected","onLinkDeselected","onLayerReadyToSaveChangedBinded","onLayerReadyToSaveChanged","onMarkupViewEntered","onMarkupViewExited","onTextEditingStarted","onTextEditingEnded","updateContextualMenuBinded","updateContextualMenu","hideContextualMenuBinded","hideContextualMenu","updateContextualMenuDebouncedShort","updateContextualMenuDebouncedLong","send","correctPixelRatio","enableUndo","enableRedo","requestId","originalGuid","closeVersion","onMarkupSelected","CacheObject","currentUrn","urn","MarkupServiceBase","additionalHeaders","docAttachmentId","pageLimit","statuses","isBinaryData","throttle","MarkupServiceWeb","issueType","ISSUES_TYPE","config","ENV_TABLE","env","ISSUE_SERVICE_URL","ISSUE_SERVICE","OBJECT_STORAGE_SERVICE_URL","OBJECT_STORAGE","maxPageLimit","xhrReq","signedS3Requests","headers","acmNamespace","acmScopes","flushSignedS3DownloadRequestsThrottled","flushSignedS3DownloadRequests","getAccessToken","valid","issueProject","duration","url","callbacks","getAjaxCallback","xhr","createRequest","responseType","injectHeaders","bucketId","objectKey","bucketIdRequests","onLoad","response","currentTarget","results","requests","bodyString","uploadKey","checkValidation","documentUrn","endpoint","sendWithRetry","_requestMarkups","parseResponse","fetchLocationForNewOssAttachment","bucketData","responseText","ossPath","onError","onTimeout","extractOssBucketAndId","bucketKey","postAttachment","markupResources","originalMarkupGuid","fetchOSSBucketForAttachments","pa","fetchOSSBucketForAttachment","uploadAttachments","uploadAttachment","postMarkup","resource_urns","updateLayer","postMarkups","_postLayer","attachData","_publishLayer","close_version","_archiveLayer","dataParts","isSigned","getSignedS3DownloadUrl","_getAttachment","fileData","originalUrl","getSignedS3UploadUrl","urls","completeUpload","updateMarkupAttrs","_deleteLayer","ATTACHMENT","_postDocumentAttachment","_deleteDocumentAttachment","_renameDocumentAttachment","ossUrn","tmpArray","abort","exp","operation","contentType","noAuthorization","XMLHttpRequest","open","setRequestHeader","onload","removeXhr","onerror","ontimeout","onabort","addXhr","headerInfo","Local","Development","Qa","Staging","Production","issue","area_markup","area_status","MarkupServiceMobile","pendingRequests","mobileCallbacks","markupToolLoaded","getUUID","postLayer","returnDelayedPromise","publishLayer","archiveLayer","delayedPromise","isSuccess","removeUnnecessaryProperties","isGroup","leafletWorldToMarkups","pdfToLeafletWorld","leafletSizeFromWorldToMarkups","createSvgElement","createElementNS","generateSVGData","svg","metadataNode","dataVersionNode","addSvgMetadata","tail","secondAnchor","convertAnchorsToMarkupSpecificNodeNames","flatState","flattenObj","flattenObject","arr","convertCoordinatesToStrings","layerSVG","createMarkupPathSvg","addMarkupMetadata","domNode","XMLSerializer","serializeToString","svgNodeToString","MarkupsServiceOperator","savingCounter","serviceClass","service","errorHandler","onSessionEndedBinded","onSessionEnded","onDocumentAttachmentCreationStartBinded","onDocumentAttachmentCreationStart","renameDocumentAttachmentBinded","renameDocumentAttachment","deleteDocumentAttachmentBinded","deleteDocumentAttachment","onPublishLayerBinded","onPublishLayer","onArchiveLayerBinded","onArchiveLayer","saveLayer","numOfMarkupsLoaded","getMaxPageLimit","layersData","relatedResources","markupStatusFilter","requestFuncRecursive","requestMarkups","nextReq","catch","resultObj","included","tags","resourceEmbed","isTrueValue","cachedLayerData","markupSvgData","createEmptyResourceObject","markupScreenCapture","getAttachment","fetchedAllMarkups","getUserProfiles","getProjectUsers","getRevisions","getAttachedDocumentData","resource","resourceType","onGetAttachment","resourceData","layerAndAttachType","markupResource","getAttachedDocumentCallback","layerDatas","getAsList","filteredAttachments","at","getUserProfileCallback","getCache","oxygenId","userName","userInfo","getProjectUsersCallback","users","getRevisionCallback","versions","internalVersion","starting_revision","description","target_urn","sceneState","viewerState","sheetGUID","generateSceneMetadata","generateMarkupDescription","documentRevision","collectionUrn","collection_urn","tmpLayerData","tmpId","generateMetadata","getCreationStatusType","originalCreationTime","toISOString","generateScreenCapture","i18n","finally","documentAttachments","postDocumentAttachment","docAttachments","tmpName","markupGuid","prevStatus","updatedMetadata","cancelRequests","namespace","AutodeskNamespace","MarkupsExtension","Extension","onModelLoadedBinded","onModelLoaded","initialized","initCache","getRootNode","fileName","findViewableParent","prevLock","activateTool","setDefaultCreationStyleProperties","initMarkupsPanel","initServiceOperator","selectInitialLayer","setCurrentUrn","serviceOperator","fetchMarkups","panelContainer","MarkupPanelClass","markupsPanel","loadExtension","MODEL_ROOT_LOADED_EVENT","terminate","startSession","selectMarkup","deselectMarkup","getVisibleMarkups","changeCreationStatusType","updateFilters","theExtensionManager","registerExtension","Constants"],"mappings":"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","file":"BimMarkups/BimMarkups.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 828);\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n","var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/uuidjs/uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","!function(){try{return new MouseEvent(\"test\")}catch(e){}var e=function(e,t){t=t||{bubbles:!1,cancelable:!1};var n=document.createEvent(\"MouseEvent\");return n.initMouseEvent(e,t.bubbles,t.cancelable,window,0,t.screenX||0,t.screenY||0,t.clientX||0,t.clientY||0,t.ctrlKey||!1,t.altKey||!1,t.shiftKey||!1,t.metaKey||!1,t.button||0,t.relatedTarget||null),n};e.prototype=Event.prototype,window.MouseEvent=e}();\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","/* jshint browser: true */\n\n(function () {\n\n// We'll copy the properties below into the mirror div.\n// Note that some browsers, such as Firefox, do not concatenate properties\n// into their shorthand (e.g. padding-top, padding-bottom etc. -> padding),\n// so we have to list every single property explicitly.\n    var properties = [\n        'direction',  // RTL support\n        'boxSizing',\n        'width',  // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\n        'height',\n        'overflowX',\n        'overflowY',  // copy the scrollbar for IE\n\n        'borderTopWidth',\n        'borderRightWidth',\n        'borderBottomWidth',\n        'borderLeftWidth',\n        'borderStyle',\n\n        'paddingTop',\n        'paddingRight',\n        'paddingBottom',\n        'paddingLeft',\n\n        // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n        'fontStyle',\n        'fontVariant',\n        'fontWeight',\n        'fontStretch',\n        'fontSize',\n        'fontSizeAdjust',\n        'lineHeight',\n        'fontFamily',\n\n        'textAlign',\n        'textTransform',\n        'textIndent',\n        'textDecoration',  // might not make a difference, but better be safe\n\n        'letterSpacing',\n        'wordSpacing',\n\n        'tabSize',\n        'MozTabSize'\n\n    ];\n\n    var isBrowser = (typeof window !== 'undefined');\n    var isFirefox = (isBrowser && window.mozInnerScreenX != null);\n\n    function getCaretCoordinates(element, position, options) {\n        const _document = element.ownerDocument;\n        const _window = _document.defaultView || _document.parentWindow;\n        if (!isBrowser) {\n            throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');\n        }\n\n        var debug = options && options.debug || false;\n        if (debug) {\n            var el = _document.querySelector('#input-textarea-caret-position-mirror-div');\n            if (el) el.parentNode.removeChild(el);\n        }\n\n        // The mirror div will replicate the textarea's style\n        var div = _document.createElement('div');\n        div.id = 'input-textarea-caret-position-mirror-div';\n        _document.body.appendChild(div);\n\n        var style = div.style;\n        var computed = _window.getComputedStyle ? _window.getComputedStyle(element) : element.currentStyle;  // currentStyle for IE < 9\n        var isInput = element.nodeName === 'INPUT';\n\n        // Default textarea styles\n        style.whiteSpace = 'pre-wrap';\n        if (!isInput)\n            style.wordWrap = 'break-word';  // only for textarea-s\n\n        // Position off-screen\n        style.position = 'absolute';  // required to return coordinates properly\n        if (!debug)\n            style.visibility = 'hidden';  // not 'display: none' because we want rendering\n\n        // Transfer the element's properties to the div\n        properties.forEach(function (prop) {\n            if (isInput && prop === 'lineHeight') {\n                // Special case for <input>s because text is rendered centered and line height may be != height\n                style.lineHeight = computed.height;\n            } else {\n                style[prop] = computed[prop];\n            }\n        });\n\n        if (isFirefox) {\n            // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275\n            if (element.scrollHeight > parseInt(computed.height))\n                style.overflowY = 'scroll';\n        } else {\n            style.overflow = 'hidden';  // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'\n        }\n\n        div.textContent = element.value.substring(0, position);\n        // The second special handling for input type=\"text\" vs textarea:\n        // spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037\n        if (isInput)\n            div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n\n        var span = _document.createElement('span');\n        // Wrapping must be replicated *exactly*, including when a long word gets\n        // onto the next line, with whitespace at the end of the line before (#7).\n        // The  *only* reliable way to do that is to copy the *entire* rest of the\n        // textarea's content into the <span> created at the caret position.\n        // For inputs, just '.' would be enough, but no need to bother.\n        span.textContent = element.value.substring(position) || '.';  // || because a completely empty faux span doesn't render at all\n        div.appendChild(span);\n\n        var coordinates = {\n            top: span.offsetTop + parseInt(computed['borderTopWidth']),\n            left: span.offsetLeft + parseInt(computed['borderLeftWidth']),\n            height: parseInt(computed['lineHeight'])\n        };\n\n        if (debug) {\n            span.style.backgroundColor = '#aaa';\n        } else {\n            _document.body.removeChild(div);\n        }\n\n        return coordinates;\n    }\n\n    if (typeof module != 'undefined' && typeof module.exports != 'undefined') {\n        module.exports = getCaretCoordinates;\n    } else if(isBrowser) {\n        window.getCaretCoordinates = getCaretCoordinates;\n    }\n\n}());\n","module.exports = \"\\n#define MESHLINE_PATH_ROUND_CAP     2.\\n#define MESHLINE_PATH_FLAT_CAP      3.\\nattribute vec3 position;\\nattribute vec2 previous;\\nattribute vec2 next;\\nattribute float side;\\nattribute float width;\\nattribute float counters;\\nuniform mat4 projectionMatrix;\\nuniform mat4 modelViewMatrix;\\nuniform vec2 resolution;\\nuniform float lineWidth;\\nuniform float opacity;\\nvarying float vCounters;\\nvarying float vPointType;\\nvarying float vDistance;\\nvarying float aaRange;\\nvarying float totalWidth;\\nvarying vec2 center;\\nvarying vec2 finalPos;\\nfloat when_eq(float x, float y) {\\n  return 1.0 - abs(sign(x - y));\\n}\\nfloat when_neq(float x, float y) {\\n  return abs(sign(x - y));\\n}\\nvoid main() {\\n    float pixelsPerUnit = 0.5 * resolution.x * projectionMatrix[0][0];\\n    vCounters = counters;\\n    vPointType = abs(side);\\n    float sideSgn = sign(side);\\n    vec4 curPosition = modelViewMatrix * vec4(position.xy, 0.0, 1.0);\\n    vec2 prevPos = (modelViewMatrix * vec4(previous, 0.0, 1.0)).xy;\\n    vec2 nextPos = (modelViewMatrix * vec4(next, 0.0, 1.0)).xy;\\n#ifdef IS_IE_11\\n    aaRange = when_neq(width, 0.0) * when_eq(opacity, 1.0) * 1.0 / pixelsPerUnit;\\n#else\\n    aaRange = when_neq(width, 0.0) * 1.0 / pixelsPerUnit;\\n#endif\\n    \\n    float minSize = when_neq(width, 0.0) * 0.5 / pixelsPerUnit;    \\n   \\n    totalWidth = lineWidth * width;\\n    \\n    float w = max(.5 * totalWidth, minSize) + aaRange;\\n    \\n    vDistance = w * sideSgn;\\n    vec2 dir;\\n    if (nextPos == curPosition.xy) {\\n        dir = normalize(curPosition.xy - prevPos);\\n    } else if (prevPos == curPosition.xy) {\\n        dir = normalize(nextPos - curPosition.xy);\\n    } else {\\n#ifdef MITER\\n        vec2 dir1 = normalize(curPosition.xy - prevPos);\\n        vec2 dir2 = normalize(nextPos - curPosition.xy);\\n        dir = normalize(dir1 + dir2);\\n        vec2 perp = vec2(-dir1.y, dir1.x);\\n        vec2 miter = vec2(-dir.y, dir.x);\\n        w = clamp(w / dot(miter, perp), minSize + aaRange, 20. * w);\\n#else\\n        dir = normalize(curPosition.xy - prevPos);\\n#endif\\n    }\\n    vec2 normal = vec2(-dir.y, dir.x);\\n    normal *= w * sideSgn;\\n    \\n    if (vPointType == MESHLINE_PATH_ROUND_CAP) {\\n        center = curPosition.xy;\\n        curPosition.xy += normal;\\n    } else  {\\n        curPosition.xy += normal;\\n        center = curPosition.xy;\\n    }\\n    \\n    if (vCounters < 0.0 || vCounters > 1.0) {\\n        normal = vec2(dir.x, dir.y);\\n        normal *= sign(vCounters) * w;\\n        curPosition.xy += normal;\\n    }\\n  \\n    finalPos = curPosition.xy;\\n    gl_Position = projectionMatrix * curPosition;\\n}\\n\";","module.exports = \"#define MESHLINE_PATH_FLAT_CAP      3.0\\nuniform vec3 color;\\nuniform float opacity;\\nvarying float vCounters;\\nvarying float vDistance;\\nvarying float aaRange;\\nvarying float totalWidth;\\nvarying vec2 center;\\nvarying vec2 finalPos;\\nvarying float vPointType;\\nfloat when_eq(float x, float y) {\\n  return 1.0 - abs(sign(x - y));\\n}\\nfloat getSmoothStep(float t, float d) {\\n    return smoothstep(t - aaRange, t + aaRange, abs(d));\\n}\\nvoid main() {\\n    float t = totalWidth / 2.0;\\n    float d = vDistance;\\n    float aa = 1.0;\\n    if (vCounters < 0.0 || vCounters > 1.0) {\\n        d = length(finalPos - center);\\n        if (vPointType == MESHLINE_PATH_FLAT_CAP) {\\n            t = aaRange;\\n        }\\n        if (d > t + aaRange) {\\n            discard;\\n        }\\n        aa = 1.0 - getSmoothStep(t, d);       \\n    }\\n        \\n#ifdef IS_IE_11\\n    aa = (1.0 - when_eq(opacity, 1.0) * getSmoothStep(totalWidth / 2.0, vDistance)) * aa;\\n#else\\n    aa = (1.0 - getSmoothStep(totalWidth / 2.0, vDistance)) * aa;\\n#endif\\n    gl_FragColor = vec4(color, opacity * aa);\\n}\\n\";","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || from);\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = cloneDeep;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys'),\n    keysIn = require('./keysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","var root = require('./_root');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","var baseCreate = require('./_baseCreate'),\n    getPrototype = require('./_getPrototype'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n","var createFind = require('./_createFind'),\n    findLastIndex = require('./findLastIndex');\n\n/**\n * This method is like `_.find` except that it iterates over elements of\n * `collection` from right to left.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Collection\n * @param {Array|Object} collection The collection to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=collection.length-1] The index to search from.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * _.findLast([1, 2, 3, 4], function(n) {\n *   return n % 2 == 1;\n * });\n * // => 3\n */\nvar findLast = createFind(findLastIndex);\n\nmodule.exports = findLast;\n","var baseIteratee = require('./_baseIteratee'),\n    isArrayLike = require('./isArrayLike'),\n    keys = require('./keys');\n\n/**\n * Creates a `_.find` or `_.findLast` function.\n *\n * @private\n * @param {Function} findIndexFunc The function to find the collection index.\n * @returns {Function} Returns the new find function.\n */\nfunction createFind(findIndexFunc) {\n  return function(collection, predicate, fromIndex) {\n    var iterable = Object(collection);\n    if (!isArrayLike(collection)) {\n      var iteratee = baseIteratee(predicate, 3);\n      collection = keys(collection);\n      predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n    }\n    var index = findIndexFunc(collection, predicate, fromIndex);\n    return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n  };\n}\n\nmodule.exports = createFind;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * This method is like `_.findIndex` except that it iterates over elements\n * of `collection` from right to left.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=array.length-1] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': true },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': false }\n * ];\n *\n * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });\n * // => 2\n *\n * // The `_.matches` iteratee shorthand.\n * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n * // => 0\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findLastIndex(users, ['active', false]);\n * // => 2\n *\n * // The `_.property` iteratee shorthand.\n * _.findLastIndex(users, 'active');\n * // => 0\n */\nfunction findLastIndex(array, predicate, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = length - 1;\n  if (fromIndex !== undefined) {\n    index = toInteger(fromIndex);\n    index = fromIndex < 0\n      ? nativeMax(length + index, 0)\n      : nativeMin(index, length - 1);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index, true);\n}\n\nmodule.exports = findLastIndex;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","var baseIteratee = require('./_baseIteratee'),\n    basePullAt = require('./_basePullAt');\n\n/**\n * Removes all elements from `array` that `predicate` returns truthy for\n * and returns an array of the removed elements. The predicate is invoked\n * with three arguments: (value, index, array).\n *\n * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`\n * to pull elements from an array by value.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new array of removed elements.\n * @example\n *\n * var array = [1, 2, 3, 4];\n * var evens = _.remove(array, function(n) {\n *   return n % 2 == 0;\n * });\n *\n * console.log(array);\n * // => [1, 3]\n *\n * console.log(evens);\n * // => [2, 4]\n */\nfunction remove(array, predicate) {\n  var result = [];\n  if (!(array && array.length)) {\n    return result;\n  }\n  var index = -1,\n      indexes = [],\n      length = array.length;\n\n  predicate = baseIteratee(predicate, 3);\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result.push(value);\n      indexes.push(index);\n    }\n  }\n  basePullAt(array, indexes);\n  return result;\n}\n\nmodule.exports = remove;\n","var baseUnset = require('./_baseUnset'),\n    isIndex = require('./_isIndex');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * The base implementation of `_.pullAt` without support for individual\n * indexes or capturing the removed elements.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {number[]} indexes The indexes of elements to remove.\n * @returns {Array} Returns `array`.\n */\nfunction basePullAt(array, indexes) {\n  var length = array ? indexes.length : 0,\n      lastIndex = length - 1;\n\n  while (length--) {\n    var index = indexes[length];\n    if (length == lastIndex || index !== previous) {\n      var previous = index;\n      if (isIndex(index)) {\n        splice.call(array, index, 1);\n      } else {\n        baseUnset(array, index);\n      }\n    }\n  }\n  return array;\n}\n\nmodule.exports = basePullAt;\n","var castPath = require('./_castPath'),\n    last = require('./last'),\n    parent = require('./_parent'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.unset`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The property path to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n */\nfunction baseUnset(object, path) {\n  path = castPath(path, object);\n  object = parent(object, path);\n  return object == null || delete object[toKey(last(path))];\n}\n\nmodule.exports = baseUnset;\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n","var baseGet = require('./_baseGet'),\n    baseSlice = require('./_baseSlice');\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n}\n\nmodule.exports = parent;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./FrameRenderer.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./FrameRenderer.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./FrameRenderer.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".markup-frames-container{transform:translateZ(0);left:0;top:0;position:absolute}.markup-selection-frame-container{display:none}.markup-selection-frame-container.visible{display:block}.markup-selection-frame{transform:translateZ(0);position:absolute;pointer-events:none}.markup-selection-frame.fill{display:none;background-color:rgba(6,150,215,0.05)}.markup-selection-frame.fill.ios,.markup-selection-frame.border.ios{transform:translateZ(0);-webkit-transform:rotateZ(0deg)}.markup-selection-frame.fill.visible{display:block}.markup-selection-frame.border{background-color:rgba(6,150,215,0.6)}.markup-selection-frame.segment{display:none}.markup-selection-frame.segment.visible{display:block}.markup-anchor{transform:translateZ(0);display:none;position:absolute;background:#FFFFFF;box-shadow:0 0 0 1px rgba(107,120,127,0.7);pointer-events:none;border-radius:20px;z-index:1}.markup-anchor-fill.rectangle,.markup-anchor.rectangle{border-radius:0px}.markup-anchor-fill{display:none;width:100%;margin:1px;border-radius:20px;background:#0696D7}.markup-anchor-fill.visible{display:block}.markup-anchor.visible{display:flex}.rect-selector-frame{transform:translateZ(0);position:absolute;pointer-events:none;border:#222222 dashed 1px;border-radius:5px}.rect-selector-frame.visible{display:block}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/dist/cjs.js!./LinksRenderer.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/dist/cjs.js!./LinksRenderer.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/dist/cjs.js!./LinksRenderer.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".markup-links-container{transform:translateZ(0);left:0;top:0;position:absolute}.link{display:none;position:absolute;pointer-events:none;z-index:1}.link.visible{display:block}.link.transparent{opacity:0.3}.link-document-attachment{transform:translateZ(0);display:block;position:absolute;text-align:center;font-family:\\\"Artifakt Element\\\";background-color:#0696D7;border-radius:10.5px;color:white;cursor:pointer;font-size:13px;font-weight:500;line-height:19px;height:20px;width:40px}.link-document-attachment:before{font-family:\\\"bimviewericon\\\", sans-serif;content:\\\"\\\\E911\\\";font-size:11px;padding-right:4px}.link.selected .link-document-attachment{background-color:#0584BD}.link.hover .link-document-attachment{background-color:#38ABDF}.link.editable .link-document-attachment{outline:1px solid rgba(6,150,215,0.6)}\\n\", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/dist/cjs.js!./TextRenderer.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/dist/cjs.js!./TextRenderer.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js!../../../node_modules/sass-loader/dist/cjs.js!./TextRenderer.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".markup-text-container{left:0;top:0;width:100%;height:100%;position:absolute;pointer-events:none}.markup-text{will-change:contents;transform:translateZ(0);text-rendering:geometricPrecision;display:none;position:absolute;pointer-events:none;text-align:left;white-space:pre-wrap;overflow-wrap:break-word;word-wrap:break-word;outline:none;-webkit-user-select:none;user-select:none}.markup-text p{display:block;box-sizing:content-box;font-weight:inherit;font-size:inherit;font-family:inherit;font-style:inherit;word-wrap:inherit;white-space:inherit;line-height:inherit;text-rendering:geometricPrecision;-ms-text-size-adjust:100%;text-align:left;margin:0 0 0 0;padding:0 0 0 0;user-select:text}.markup-text.single-line br{display:none}.markup-text.visible{display:block}.markup-text-area{pointer-events:all;position:absolute;z-index:100}\\n\", \"\"]);\n\n// exports\n","export const MARKUPS_EVENTS = {\n    MARKUP_SESSION_START: 'markup.session.start',                               // Triggered when a markup session starts. Can be creation or edition of existing markup.\n    MARKUP_SESSION_END: 'markup.session.end',                                   // Triggered when a markup session ends. Can be creation or edition of existing markup.\n    MARKUP_TOOL_ENABLED_CHANGED: 'markup.tool.enabled.changed',                 // Triggered when tool enabled / disabled. When disabled, all user interactions disabled.\n    MARKUP_REMOVED: 'markup.removed',                                           // Triggered when markup has been removed from the canvas.\n    MARKUP_DRAWING_START: 'markup.drawing.start',                               // Triggered when markup drawing starts - The drawing itself.\n    MARKUP_DRAWING_END: 'markup.drawing.end',                                   // Triggered when markup drawing ends - When the user stops drawing.\n    MARKUP_DRAWING_CANCEL: 'markup.drawing.cancel',                             // Triggered when markup drawing has been canceled.\n    MARKUP_EDIT_START: 'markup.edit.start',                                     // Triggered when a markup edit has started.\n    MARKUP_EDIT_END: 'markup.edit.end',                                         // Triggered when a markup edit has ended.\n    MARKUP_SELECTED: 'markup.selected',                                         // Triggered when a markup has been selected.\n    MARKUP_DESELECTED: 'markup.deselected',                                     // Triggered when a markup has been deselected.\n    MARKUP_ENABLE_EDIT: 'markup.enable.edit',                                   // Triggered when a markup edit is enabled. Used for user interactions.\n    MARKUP_DISABLE_EDIT: 'markup.disable.edit',                                 // Triggered when a markup edit is disabled.\n    MARKUP_DIRTY: 'markup.dirty',                                               // Triggered when a markup is dirty. Used for rendering.\n    MARKUP_VISIBILITY_CHANGED: 'markup.visibility.changed',                     // Triggered when markup visibility changed. Invisible markups won't be rendered.\n    MARKUP_VIEW_ENTERED: 'markup.view.entered',                                 // Triggered when entering markup view (3D only). locks camera & navigation.\n    MARKUP_VIEW_EXITED: 'markup.view.exited',                                   // Triggered when exiting markup view (3D only). makes visible layers invisible, and unlock camera & navigation.\n    TEXT_EDITING_STARTED: 'text.editing.started',                               // Triggered when text editing has been enabled. Used to notify when mobile keyboard turns on.\n    TEXT_EDITING_ENDED: 'text.editing.ended',                                   // Triggered when text editing has been disabled. Used to notify when mobile keyboard turns off.\n\n    LAYER_DIRTY: 'layer.dirty',                                                 // Triggered when a layer is dirty. Used for rendering.\n    LAYER_SELECTED: 'layer.selected',                                           // Triggered when a layer has been selected.\n    LAYER_DESELECTED: 'layer.deselected',                                       // Triggered when a layer has been deselected.\n    LAYER_SELECTED_FROM_DIFFERENT_SHEET: 'layer.selected.from.different.sheet', // Triggered when a layer has been selected, but it's not from the current sheet. Used to let the viewer observer to switch sheet and then select the layer.\n    LAYER_EDITED_FROM_DIFFERENT_SHEET: 'layer.edited.from.different.sheet',     // Triggered when a layer has been selected for editing, but it's not from the current sheet. Used to let the viewer observer to switch sheet and then edit the layer.\n    LAYER_DELETE: 'layer.delete',                                               // Triggered in order to signal the service operator to start deleting a layer.\n    LAYER_DELETED: 'layer.deleted',                                             // Triggered when a layer has been deleted from the backend.\n    LAYER_PUBLISH: 'layer.publish',                                             // Triggered in order to signal the service operator to start publishing a layer.\n    LAYER_ARCHIVE: 'layer.archive',                                             // Triggered in order to signal the service operator to start archiving a layer.\n    LAYER_SYNCING: 'layer.syncing',                                             // Triggered when a layer syncing with the backend has been started. Could be saving, editing, deleting or updating status.\n    LAYER_SYNCED: 'layer.synced',                                               // Triggered when a layer sync with the backend has been completed.\n    LAYER_READY_TO_SAVE: 'layer.ready.to.save',                                 // Triggered when a layer is ready for being saved. Used to enable / disable save button.\n    LAYER_CREATED: 'layer.created',                                             // Triggered when a layer is created.\n\n    DOCUMENT_ATTACHMENT_CREATION_START: 'document.attachment.creation.start',   // Triggered in order to signal the service operator to start create a new document attachment.\n    DOCUMENT_ATTACHMENT_RENAME: 'document.attachment.rename',                   // Triggered in order to signal the service operator to start renaming a document attachment.\n    DOCUMENT_ATTACHMENT_DELETE: 'document.attachment.delete',                   // Triggered in order to signal the service operator to start deleting a document attachment.\n\n    LAYER_FETCHED: 'layer.fetched',                                             // Triggered when a layer has been downloaded from the backend.\n    LAYER_RESOURCE_FETCHED: 'layer.resource.fetched',                           // Triggered when a layer's resource has been downloaded from the backend.\n    LAYER_THUMBNAIL_FETCHED: 'layer.thumbnail.fetched',                         // Triggered when a layer's thumbnail has been downloaded from the backend.\n    LAYER_METADATA_FETCHED: 'layer.metadata.fetched',                           // Triggered when a layer's metadata has been downloaded from the backend.\n    ATTACHMENT_THUMBNAIL_LOADED: 'attachment.thumbnail.loaded',                 // Triggered when an attachment thumbnail has been downloaded from the backend.\n    ALL_MARKUPS_LOADED: 'all.markups.loaded',                                   // Triggered when all markups have been loaded from the backend.\n    PROJECT_USERS_FETCHED: 'project.users.fetched',                             // Triggered when the users' array has been fetched from the backend.\n\n    LINK_DIRTY: 'link.dirty',                                                   // Triggered when a link icon is dirty. Used for rendering.\n    LINK_SELECTED: 'link.selected',                                             // Triggered when a link has been selected.\n    LINK_DESELECTED: 'link.deselected',                                         // Triggered when a link has been deselected.\n    LINK_SYNCED: 'link.synced',                                                 // Triggered when a link sync with the backend has been completed.\n    LINK_SYNCING: 'link.syncing',                                               // Triggered when a link syncing with the backend has been started. Could be saving, editing, deleting or updating status.\n    LINK_REMOVED: 'link.removed',                                               // Triggered when link has been removed from the canvas.\n    LINK_RENDERED: 'link.rendered',                                             // Triggered after a link icon has been rendered.\n\n    FILTER_CHANGED: 'filter.changed',                                           // Triggered when a filter has been changed.\n    BUTTON_DOWN: 'button.down',                                                 // Triggered when the user clicked somewhere on the canvas. Used to notify menus to close submenus.\n    MARKUP_CREATION_TYPE_CHANGED: 'markup.creation.type.changed',               // Triggered when the selected markup tool has changed. (i.e. polyline, arrow).\n    MARKUP_STYLE_PROPERTY_CHANGED: 'markup.style.property.changed',             // Triggered when style property has been changed. Affect the toolbar and contextual menu style buttons.\n\n    LAYER_DISCARD_PRESSED: 'layer.discard.pressed',                             // Triggered when 'discard markup' has been selected by the user.\n    LAYER_PUBLISH_PRESSED: 'layer.publish.pressed',                             // Triggered when 'publish markup' has been selected by the user.\n    LAYER_ARCHIVE_PRESSED: 'layer.archive.pressed',                             // Triggered when 'archive markup' has been selected by the user.\n    LAYER_DELETE_PRESSED: 'layer.delete.pressed',                               // Triggered when 'delete markup' has been selected by the user.\n    LAYER_DELETE_EMPTY_PRESSED: 'layer.delete.empty.pressed',                   // Triggered when 'save markup' has been selected by the user, while the layer is empty.\n    EXIT_VIEWER_PRESSED: 'exit.viewer.pressed',                                 // Triggered when exiting the viewer, while the layer is still in saving process.\n\n    RECT_SELECTOR_UPDATED: 'rect.selector.updated',                             // Triggered when a rect selector frame changed.\n    CALIBRATION_REQUIRED: 'calibration.required'                                // Triggered when trying to create a measure markup, and the document requires calibration first\n};\n","export const COLORS = {\n    RED: '#FF0000',\n    GREEN: '#00F72C',\n    BLUE: '#103FFB',\n    ORANGE: '#FF9224',\n    YELLOW: '#FEF935',\n    CYAN: '#03FCFE',\n    WHITE: '#FFFFFF',\n    BLACK: '#000000',\n    PINK: '#FF4CFC',\n    PURPLE: '#922890',\n    NO_COLOR: '-1'\n};\n\nexport const DEFAULT_COLORS = [\n  {\n    color: COLORS.RED,\n    label: 'Red'\n  },\n  {\n    color: COLORS.BLUE,\n    label: 'Blue'\n  },\n  {\n    color: COLORS.PURPLE,\n    label: 'Purple'\n  },\n  {\n    color: COLORS.YELLOW,\n    label: 'Yellow'\n  },\n  {\n    color: COLORS.ORANGE,\n    label: 'Orange'\n  },\n  {\n    color: COLORS.CYAN,\n    label: 'Cyan'\n  },\n  {\n    color: COLORS.PINK,\n    label: 'Pink'\n  },\n  {\n    color: COLORS.GREEN,\n    label: 'Green'\n  },\n  {\n    color: COLORS.BLACK,\n    label: 'Black'\n  },\n  {\n    color: COLORS.WHITE,\n    label: 'White'\n  }\n];\n\nexport const DEFAULT_FILL_COLORS = [\n  {\n    color: COLORS.RED,\n    label: 'Red'\n  },\n  {\n    color: COLORS.BLUE,\n    label: 'Blue'\n  },\n  {\n    color: COLORS.PURPLE,\n    label: 'Purple'\n  },\n  {\n    color: COLORS.YELLOW,\n    label: 'Yellow'\n  },\n  {\n    color: COLORS.ORANGE,\n    label: 'Orange'\n  },\n  {\n    color: COLORS.CYAN,\n    label: 'Cyan'\n  },\n  {\n    color: COLORS.PINK,\n    label: 'Pink'\n  },\n  {\n    color: COLORS.GREEN,\n    label: 'Green'\n  },\n  {\n    color: COLORS.NO_COLOR,\n    label: 'No Fill'\n  },\n  {\n    color: COLORS.BLACK,\n    label: 'Black'\n  },\n  {\n    color: COLORS.WHITE,\n    label: 'White'\n  }\n];\n\nexport const STYLE_PROPERTIES = {\n    COLOR: 'stroke-color',\n    FILL_COLOR: 'fill-color',\n    THICKNESS: 'stroke-width',\n    OPACITY: 'stroke-opacity',\n    FILL_OPACITY: 'fill-opacity',\n    FONT_SIZE: 'font-size',\n    FONT_WEIGHT: 'font-weight',\n    FONT_FAMILY: 'font-family',\n    FONT_STYLE: 'font-style',\n    FONT_COLOR: 'font-color',\n    STROKE_LINEJOIN: 'stroke-linejoin'\n};\n\nexport const FONT_SIZES = [10, 12, 14, 16, 18, 20, 24, 28, 32, 36, 40, 44, 48, 52, 58, 64, 70, 76, 82, 88, 94, 100];\n\nexport const MESHLINE_PATH_START = 1;\nexport const MESHLINE_PATH_END = 2;\n\nexport const MESHLINE_PATH_DEFAULT = 1;\nexport const MESHLINE_PATH_ROUND_CAP = 2;\nexport const MESHLINE_PATH_FLAT_CAP = 3;\n\n// Markup types\nexport const MARKUP_TYPE_ARROW = 'arrow';\nexport const MARKUP_TYPE_RECTANGLE = 'rectangle';\nexport const MARKUP_TYPE_CIRCLE = 'ellipse';\nexport const MARKUP_TYPE_CLOUD = 'cloud';\nexport const MARKUP_TYPE_FREEHAND = 'freehand';\nexport const MARKUP_TYPE_HIGHLIGHT = 'highlight';\nexport const MARKUP_TYPE_POLYLINE = 'polyline';\nexport const MARKUP_TYPE_POLYCLOUD = 'polycloud';\nexport const MARKUP_TYPE_TEXT = 'label';\nexport const MARKUP_TYPE_CALLOUT = 'callout';\nexport const MARKUP_TYPE_ARROW_CALLOUT = 'simple-arrow-callout';\nexport const MARKUP_TYPE_ARROW_CLOUD_CALLOUT = 'arrow-cloud-callout';\nexport const MARKUP_TYPE_DIMENSION = 'dimension';\nexport const MARKUP_TYPE_LINE = 'line';\n\nexport const RECT_SELECTOR = 'selector';\n\n// Statuses\nexport const MARKUP_STATUS_SAVE_FAILED = 'save_failed';\nexport const MARKUP_STATUS_SAVE_SUCCEED = 'save_success';\nexport const MARKUP_STATUS_SAVING = 'markup_saving';\nexport const MARKUP_STATUS_DELETING = 'deleting';\nexport const MARKUP_STATUS_DELETE_SUCCEED = 'delete_success';\nexport const MARKUP_STATUS_DELETE_FAILED = 'delete_failed';\nexport const MARKUP_STATUS_CREATED = 'created';\nexport const MARKUP_STATUS_OPEN = 'open';\nexport const MARKUP_STATUS_PRIVATE = 'private';\nexport const MARKUP_STATUS_PUBLISHED = 'published';\nexport const MARKUP_STATUS_PUBLISHING = 'publishing';\nexport const MARKUP_STATUS_CLOSED = 'closed';\nexport const MARKUP_STATUS_ARCHIVED = 'archived';\nexport const MARKUP_STATUS_ARCHIVING = 'archiving';\nexport const MARKUP_ATTACHMENT_LOADING = 'attachment_loading';\nexport const MARKUP_ATTACHMENT_SAVING = 'attachment_saving';\nexport const MARKUP_ATTACHMENT_SAVE_SUCCEED = 'attachment_save_success';\nexport const MARKUP_ATTACHMENT_SAVE_FAILED = 'attachment_save_failed';\nexport const MARKUP_ATTACHMENT_RENAMING = 'attachment_renaming';\nexport const MARKUP_ATTACHMENT_DELETEING = 'attachment_deleting';\n\n// Metadata\nexport const ATTACHMENT_DATA_TYPE_BINARY = 'binary';\nexport const ATTACHMENT_DATA_TYPE_TEXT = 'text';\nexport const MARKUP_RESOURCE_TYPE_SVG = 'svg';\nexport const MARKUP_RESOURCE_TYPE_SCREEN_CAPTURE = 'screencapture';\nexport const DEFAULT_STATUSES_TO_LOAD = [MARKUP_STATUS_PRIVATE, MARKUP_STATUS_PUBLISHED, MARKUP_STATUS_ARCHIVED].join(',');\n\n// Link types\nexport const LINK_TYPE_ATTACHMENTS = 'attachments';\nexport const LINK_TYPE_DOCUMENT_ATTACHMENT = 'document';\n\n// Default Properties values\nexport const DEFAULT_MARKUP = MARKUP_TYPE_FREEHAND;\nexport const DEFAULT_COLOR = COLORS.RED;\nexport const DEFAULT_FONT_COLOR = COLORS.RED;\nexport const DEFAULT_FILL_COLOR = COLORS.NO_COLOR;\nexport const DEFAULT_THICKNESS = 10.0;\nexport const DEFAULT_OPACITY = 1.0;\nexport const DEFAULT_HIGHLIGHT_OPACITY = 0.5;\nexport const DEFAULT_FILL_OPACITY = 0.5;\nexport const DEFAULT_STROKE_IN_MM = 0.1;\nexport const DEFAULT_FONT_SIZE_IN_PIXELS = 36.0;\nexport const DEFAULT_FONT_SIZE_IN_MM = 10.0;\nexport const DEFAULT_FONT_WEIGHT = 'normal';\nexport const DEFAULT_FONT_FAMILY = 'Artifakt Element, Arial';\nexport const DEFAULT_FONT_STYLE = 'normal';\n\nexport const SUB_MENU_VISIBLE_CLASS = 'subMenuVisible';\n\n\nconst isTouchDevice = (typeof window !== 'undefined' && ('ontouchstart' in window || navigator.maxTouchPoints > 0));\n\n// Other constants\nexport const ARROW_TIP_LENGTH = 5;\nexport const EPSILON = 0.0001;\nexport const TOUCH_RADIUS = isTouchDevice ? 34 : 4;\nexport const ANCHOR_RADIUS = 4;\nexport const MIN_CHANGE_DISTANCE = 5;\nexport const SNAP_DISTANCE = 20;\nexport const MIN_FREEHAND_POINT_DISTANCE = 1;\nexport const MIN_ANGLE_CHANGE = 0.05;\nexport const ROTATION_ANCHOR_DISTANCE = isTouchDevice ? 30 : 20;\nexport const ROTATION_SNAP_DEGREES = 45;\nexport const PASTE_OFFSET = 20;\nexport const ARROW_MOVE_OFFSET = 20;\nexport const CONTEXTUAL_MENU_OFFSET = 60;\nexport const LINK_POSITION_OFFSET = 10;\nexport const LINK_ICON_SIZE = 20;\nexport const SELECTION_ZOOM_MARGIN = 0.05;\nexport const MAX_THICKNESS = 100;\nexport const PERSPECTIVE_MODE_SCALE = 1000; // Legacy constant - Don't change!\nexport const FRAME_SIZE_SCALE = 20; // Used in order to prevent render errors when changing browser's zoom.\nexport const BOUNDING_BOX_MARGIN = (window.devicePixelRatio * 4) + 10;\nexport const HIT_AREA_MARGIN = TOUCH_RADIUS + 10;\nexport const TEXT_DEBOUNCE = 200;\nexport const DIMENSION_TIP_LENGTH = 8;\nexport const DIMENSION_THICKNESS_FACTOR = 2 / 5;\nexport const DIMENSION_FONT_SIZE_FACTOR = 3 / 5;\nexport const DISABLED_OPACITY = 0.3;\nexport const MOBILE_GESTURES_MIN_THRESHOLD_TIME = 100;\nexport const SCREEN_MARGIN = 10;\nexport const TEXT_LENGTH_LIMIT = 3000;\nexport const MINIMUM_THUMBNAIL_SIZE = 92; // According to the markup's panel.\n\nexport const WORLD_3D_SIZE = 1000; // This needs to be constant so that markups appear consistently in the same place\n\nexport const MAX_NORMA_PERCENTAGE = 0.05 / 100; // Percentage of document diagonal. A boundary for the norma\nexport const MAX_NORMA_TEXT_PERCENTAGE = 20 * MAX_NORMA_PERCENTAGE;\nexport const NORMA_3D = 1;         // We chose a 3D world size (WORLD_3D_SIZE) such that 1 is the norma size there\nexport const NORMA_TEXT_3D = 20 * NORMA_3D;\n\nexport const POINT_SIZE_IN_MM = 0.005; // A point is created by drawing a minimal meshline with round caps. This is the distance between the points.\nexport const TIMEOUT_TO_SELECT_AFTER_DRAWEND = 700;\n\nexport const MARKUP_CREATION_CURSORS = {\n  [RECT_SELECTOR]: 'cell',\n  [MARKUP_TYPE_TEXT]: 'text',\n  [MARKUP_TYPE_CALLOUT]: 'text'\n};\n\nexport const MARKUP_ERRORS = {\n  MARKUP_SAVE_FAILED: 'MARKUP_SAVE_FAILED',\n  MARKUP_DELETE_FAILED: 'MARKUP_DELETE_FAILED',\n  MARKUP_PUBLISH_FAILED: 'MARKUP_PUBLISH_FAILED',\n  MARKUP_ARCHIVE_FAILED: 'MARKUP_ARCHIVE_FAILED',\n  MARKUP_ATTACHMENT_CREATE_FAILED: 'MARKUP_ATTACHMENT_CREATE_FAILED',\n  MARKUP_ATTACHMENT_DELETE_FAILED: 'MARKUP_ATTACHMENT_DELETE_FAILED',\n  MARKUP_ATTACHMENT_RENAME_FAILED: 'MARKUP_ATTACHMENT_RENAME_FAILED',\n  MARKUP_ATTACHMENT_UPDATE_FAILED: 'MARKUP_ATTACHMENT_UPDATE_FAILED'\n};\n","const GeometryUtils = {};\n\nGeometryUtils.radiansToDegrees = (radians) => {\n    return radians * (180 / Math.PI);\n};\n\nGeometryUtils.degreesToRadians = (degrees) => {\n    return degrees * (Math.PI / 180);\n};\n\nGeometryUtils.applyRotation = (points, angle, pivot, frontVector) => {\n    if (!(points instanceof Array)) {\n        points = [points];\n    }\n\n    points.forEach((point) => {\n        point.sub(pivot);\n        point.applyAxisAngle(frontVector, angle);\n        point.add(pivot);\n    });\n};\n\nGeometryUtils.getSignedAngle = (v1, v2, eyeVector) => {\n    const angle = v1.angleTo(v2);\n\n    const n = v1.clone().cross(v2).normalize();\n    const sign = eyeVector.dot(n) > 0 ? 1 : -1;\n\n    return angle * sign;\n};\n\nGeometryUtils.swapBoundingBoxY = (boundingBox) => {\n    [boundingBox.max.y, boundingBox.min.y] = [boundingBox.min.y, boundingBox.max.y];\n\n    return boundingBox;\n};\n\nexport default GeometryUtils;","const cloneDeep = require(\"lodash/cloneDeep\");\nconst findLast = require(\"lodash/findLast\");\nconst debounce = require(\"lodash/debounce\");\nconst remove = require(\"lodash/remove\");\n\nconst LodashUtils = {};\n\nLodashUtils.cloneDeep = (obj) => {\n    return cloneDeep(obj);\n};\n\nLodashUtils.findLast = (array, predicate) => {\n    return findLast(array, predicate);\n};\n\nLodashUtils.debounce = (func, wait, options) => {\n    return debounce(func, wait, options);\n};\n\nLodashUtils.remove = (array, predicate) => {\n    return remove(array, predicate); \n};\n\nexport default LodashUtils;","/**\n * Action\n *\n * A base class for a single Action.\n * You should implement undo and redo methods.\n */\n\nexport default class Action {\n    constructor(actionManager) {\n        this.actionManager = actionManager;\n    }\n\n    execute() {\n        this.actionManager.execute(this);\n    }\n\n    undo() {\n    }\n\n    redo() {\n    }\n}\n","import Action from '../Utils/ActionManager/Action';\n\nexport default class AddMarkupAction extends Action {\n    constructor(markupsManager, markup, layer) {\n        super(markupsManager.actionManager);\n\n        this.markupsManager = markupsManager;\n        this.markup = markup;\n        this.layer = layer;\n    }\n\n    undo() {\n        this.markupsManager.removeMarkupFromLayer(this.markup);\n    }\n\n    redo() {\n        this.markupsManager.addMarkupToLayer(this.markup, this.layer);\n    }\n}\n","import LodashUtils from '../Utils/LodashUtils';\nimport Action from '../Utils/ActionManager/Action';\n\nexport default class UpdateMarkupAction extends Action {\n    constructor(markupsManager, markup, newState) {\n        super(markupsManager.actionManager);\n\n        this.markupsManager = markupsManager;\n        this.markup = markup;\n        this.layer = this.markup.layer;\n\n        this.oldState = LodashUtils.cloneDeep(this.markup.getState());\n        this.newState = LodashUtils.cloneDeep(newState);\n    }\n\n    undo() {\n        this.markup.setState(this.oldState);\n        this.markup.syncEditState();\n    }\n\n    redo() {\n        this.markup.setState(this.newState);\n        this.markup.syncEditState();\n    }\n}\n","import Action from '../Utils/ActionManager/Action';\n\nexport default class DeleteMarkupAction extends Action {\n    constructor(markupsManager, markup) {\n        super(markupsManager.actionManager);\n\n        this.markupsManager = markupsManager;\n        this.markup = markup;\n        this.layer = this.markup.layer;\n    }\n\n    undo() {\n        this.markupsManager.addMarkupToLayer(this.markup, this.layer);\n    }\n\n    redo() {\n        this.markupsManager.removeMarkupFromLayer(this.markup);\n    }\n}\n","import GeometryUtils from './Utils/GeometryUtils';\nimport * as MarkupsConstants from './MarkupsConstants';\n\nconst av = Autodesk.Viewing;\n\nexport const forAll = (obj, func) => {\n    if (obj) {\n        Object.keys(obj).forEach((key) => {\n            const m = obj[key];\n            if (m) {\n                func(m);\n            }\n        });\n    }\n};\n\n// Converts a deep array to a flat array\nexport const flatten = list => list.reduce((a, b) => a.concat(Array.isArray(b) ? flatten(b) : b), []);\n\nexport const isEqualVectors = (v1, v2, precision) => {\n    if (!v1 || !v2) {\n        return false;\n    }\n\n    precision = precision || MarkupsConstants.EPSILON;\n\n    if (v1.distanceTo(v2) <= precision) {\n        return true;\n    }\n    return false;\n};\n\n// Converts the object into a flat list, keeping the same pointers for all items (shallow copy).\nexport const getObjectAsList = (object) => {\n    const list = [];\n\n    forAll(object, (item) => {\n      if (Array.isArray(item)) {\n        item.forEach((i) => {\n            list.push(i);\n        });\n      } else {\n        list.push(item);\n      }\n    });\n\n    return list;\n};\n\nexport const nearestPointInPointToLine = (point, lineStart, lineEnd) => {\n    var X0 = new THREE.Vector3();\n    var X1 = new THREE.Vector3();\n    var nearestPoint;\n    var param;\n\n    X0.subVectors(lineStart, point);\n    X1.subVectors(lineEnd, lineStart);\n    param = X0.dot(X1);\n    X0.subVectors(lineEnd, lineStart);\n    param = -param / X0.dot(X0);\n\n    X0.subVectors(lineEnd, lineStart);\n    X0.multiplyScalar(param);\n    nearestPoint = X0.add(lineStart);\n\n    return nearestPoint;\n};\n\nexport const applyTranslation = (points, translation) => {\n    if (!(points instanceof Array)) {\n        points = [points];\n    }\n\n    points.forEach((point) => {\n        point.x += translation.x;\n        point.y += translation.y;\n        point.z += translation.z;\n    });\n};\n\nexport const convertHexToRGBA = (hex, opacity) => {\n    if (!hex || hex === MarkupsConstants.COLORS.NO_COLOR || !opacity) {\n        return null;\n    }\n\n    hex = hex.replace('#', '');\n    const r = parseInt(hex.substring(0, 2), 16);\n    const g = parseInt(hex.substring(2, 4), 16);\n    const b = parseInt(hex.substring(4, 6), 16);\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + opacity + ')';\n};\n\nexport const getTextSize = (() => {\n    const _document = av.getGlobal().document;\n    const measureDiv = _document.createElement('div');\n    measureDiv.id = 'text-markup-measure-div';\n    measureDiv.style.position = 'absolute';\n    measureDiv.style.visibility = 'hidden';\n    measureDiv.style.pointerEvents = 'none';\n    measureDiv.style.textRendering = 'geometricPrecision';\n\n    _document.body.appendChild(measureDiv);\n    const cache = {};\n\n    return (text, style) => {\n        const hash = `${text}_${style.fontWeight}_${style.fontSize}_${style.fontFamily}_${style.fontStyle}_${style.width}`;\n\n        if (cache[hash]) {\n            return cache[hash];\n        }\n\n        measureDiv.innerText = text;\n        measureDiv.style.fontWeight = style.fontWeight;\n        measureDiv.style.fontSize = style.fontSize;\n        measureDiv.style.fontFamily = style.fontFamily;\n        measureDiv.style.fontStyle = style.fontStyle;\n        measureDiv.style.overflowWrap = style.overflowWrap || 'break-word';\n        measureDiv.style.wordWrap = style.wordWrap || 'break-word'; //IE11 \n        measureDiv.style.whiteSpace = style.whiteSpace || 'pre-wrap';\n        measureDiv.style.width = style.width || (Autodesk.Viewing.isIE11 ? 'auto' : 'unset');\n        measureDiv.style.lineHeight = style.lineHeight || 1;\n                \n        let {width, height} = measureDiv.getBoundingClientRect();\n        \n        cache[hash] = { width, height };\n        \n        return cache[hash];\n    };\n})();\n\nexport const createArc = (x, y, radius, start, end, clockwise, steps, path, radiusInMM = null, bbox = null) => {\n    if (!path)\n        path = [];\n\n    x = x || 0;\n    y = y || 0;\n    radius = radius || 0;\n    start = start || 0;\n    end = end || 0;\n\n    let dist = Math.abs(start-end);\n    if (dist > 2*Math.PI) dist -= 2*Math.PI;\n    if (!clockwise && start > end)\n        dist = 2*Math.PI - dist;\n    else if (clockwise && end > start)\n        dist = 2*Math.PI - dist;\n   \n    //approximate the # of steps using the cube root of the radius\n    if (typeof steps !== 'number') {\n        radiusInMM = radiusInMM || radius;\n        steps = Math.max(6, 2 * Math.floor(6 * Math.pow(radiusInMM, 1 / 3) * (dist / (Math.PI))));\n    }\n   \n    //ensure we have at least 3 steps\n    steps = Math.max(steps, 3);\n\n    let f = dist / (steps),\n        t = start;\n\n    //modify direction\n    f *= clockwise ? -1 : 1;\n\n    for (let i = 0; i < steps+1; i++) {\n        const nx = x + Math.cos(t)*radius;\n        const ny = y + Math.sin(t)*radius;\n\n        path.push({ x: nx, y: ny, z: 0 });\n\n        if (bbox) {\n            bbox.min.x = Math.min(bbox.min.x, nx);\n            bbox.min.y = Math.min(bbox.min.y, ny);\n            bbox.max.x = Math.max(bbox.max.x, nx);\n            bbox.max.y = Math.max(bbox.max.y, ny);\n        }\n\n        t += f;\n    }\n\n    return path;\n};\n\nconst _addFillingCircle = (circles, radius, begin, end) => {\n    const beginPoint = new THREE.Vector2(circles[begin].x + Math.cos(circles[begin].end) * radius, circles[begin].y + Math.sin(circles[begin].end) * radius);\n    const endPoint = new THREE.Vector2(circles[end].x + Math.cos(circles[end].begin) * radius, circles[end].y + Math.sin(circles[end].begin) * radius);\n\n    const difVec = beginPoint.clone().sub(endPoint);\n\n    const vecLength = difVec.length();\n\n    const mid = beginPoint.clone().add(endPoint).divideScalar(2);\n\n    difVec.normalize();\n    const perpenLength = Math.sqrt(Math.max(0, (radius * radius) - ((vecLength / 2) * (vecLength / 2))));\n    const perpenVec = new THREE.Vector2(difVec.y, -difVec.x);\n    perpenVec.multiplyScalar(perpenLength);\n\n    const newPoint = mid.clone().add(perpenVec);\n\n    const beginAng = Math.atan2(beginPoint.y - newPoint.y, beginPoint.x - newPoint.x);\n    const endAng = Math.atan2(endPoint.y - newPoint.y, endPoint.x - newPoint.x);\n\n    var newCircle = {\n        x: newPoint.x,\n        y: newPoint.y,\n        begin: beginAng,\n        end: endAng,\n    };\n\n    circles.splice(begin + 1, 0, newCircle);\n\n    return { newCircle, beginPoint, endPoint };\n};\n\nconst _hideIntersectionCircles = (circles, radius, intersectionObjects) => {\n    for (let t = 0; t < intersectionObjects.length; t++) {\n        let begin = null;\n        let end = 0;\n        for (let k = 0; k < circles.length; k++) {\n            if (circles[k]['isCurrentIntersection' + t]) {\n                for (let j = 0; j < circles.length; j++) {\n                    if (circles[j]['isNextIntersection' + t]) {\n                        const dist = Math.sqrt(((circles[k].x - circles[j].x) * (circles[k].x - circles[j].x)) + ((circles[k].y - circles[j].y) * (circles[k].y - circles[j].y)));\n                        if (dist < 2 * radius) {\n                            circles[k].hide = true;\n                            if (begin === null) begin = k - 1;\n                            circles[j].hide = true;\n                            if (end < j + 1) end = j + 1;\n                        }\n                    }\n                 }\n            }\n         }\n         intersectionObjects[t].begin = begin;\n         intersectionObjects[t].end = end;\n    }\n};\n\nexport const createCloud = (poly, radius, isClosed = false, intersectionObjects, overlap = 4/5, incise = 20, stretch = false) => {\n    /*\n     *      Global intersection angles of two circles of the same radius\n     */\n    function intersect(p, q, r) {\n        const dx = q.x - p.x;\n        const dy = q.y - p.y;\n\n        const len = Math.sqrt((dx * dx) + (dy * dy));\n        let a = (0.5 * len) / r;\n\n        if (a < -1) a = -1;\n        if (a > 1) a = 1;\n\n        const phi = Math.atan2(dy, dx);\n        const gamma = Math.acos(a);\n\n        return [phi - gamma, Math.PI + phi + gamma];\n    }\n\n    // Create a list of circles\n    let circles = [];\n    const delta = 2 * radius * overlap;\n    let prev = isClosed ? poly[poly.length - 1] : poly[0];\n    stretch = stretch || !isClosed;\n\n    for (let i = isClosed ? 0 : 1; i < poly.length; i++) {\n        const curr = poly[i];\n\n        let dx = curr.x - prev.x;\n        let dy = curr.y - prev.y;\n\n        let len = Math.sqrt((dx * dx) + (dy * dy));\n\n        dx /= len;\n        dy /= len;\n\n        let firstAngle = 0;\n        let lastAngle = 0;\n        if (!isClosed) {\n            if (i === 1) { // Start point\n                len -= radius;\n                prev.x += dx * radius;\n                prev.y += dy * radius;\n                firstAngle = Math.atan2(dy, dx) + Math.PI;\n            } else if (i === poly.length - 1) { // End point\n                lastAngle = Math.atan2(dy, dx);\n            }\n        }\n\n        let d = delta;\n\n        if (stretch) {\n            let n = (len / delta + 0.5) | 0;\n\n            if (n < 1) {\n                n = 1;\n            }\n\n            d = len / n;\n        }\n\n        for (let a = 0; a + (0.1 * d) < len; a += d) {\n            circles.push({\n                x: prev.x + (a * dx),\n                y: prev.y + (a * dy),\n                begin: firstAngle,\n                end: lastAngle,\n                isAnchor: a === 0,\n             });\n            \n            for (let j = 0; j < intersectionObjects.length; j++) {\n                circles[circles.length - 1]['isNextIntersection' + j] = curr['isNextIntersection' + j];\n                circles[circles.length - 1]['isCurrentIntersection' + j] = curr['isCurrentIntersection' + j];\n                if (curr['isNextIntersection' + j] && a === 0) {\n                    intersectionObjects[j].anchorPoint = circles[circles.length - 1];\n                }\n            }\n        }\n\n        prev = curr;\n    }\n\n    // Determine intersection angles of circles\n\n    const inciseInRadians = GeometryUtils.degreesToRadians(incise);\n\n    prev = circles[circles.length - 1];\n    for (let i = 0; i < circles.length; i++) {\n        const curr = circles[i];\n        const angle = intersect(prev, curr, radius);\n\n        if (isClosed || i !== 0) { // For open clouds, first and last angles were calculated in previous loop\n            prev.end = angle[0] + inciseInRadians;\n            curr.begin = angle[1];\n        }\n\n        prev = curr;\n    }\n\n     // Hide all circles that appear between the intersection point and the intersection anchor.\n    _hideIntersectionCircles(circles, radius, intersectionObjects);\n\n    // In case there is an intersection and arcs are hidden, insert a new arc to fill the gap that was created\n    for (let k = intersectionObjects.length - 1; k > -1; k--) {\n        if (circles[intersectionObjects[k].begin] && circles[intersectionObjects[k].end]) {\n            intersectionObjects[k].beginCircle = circles[intersectionObjects[k].begin];\n            intersectionObjects[k].endCircle = circles[intersectionObjects[k].end];\n            const { newCircle, beginPoint, endPoint } = _addFillingCircle(circles, radius, intersectionObjects[k].begin, intersectionObjects[k].end);\n            intersectionObjects[k].newCircle = newCircle;\n            intersectionObjects[k].beginPoint = beginPoint;\n            intersectionObjects[k].endPoint = endPoint;\n        }\n    }\n\n    // Remove all hidden arcs\n    circles = circles.filter(cir => !cir.hide);\n\n    return circles;\n};\n\nexport const isClockwise = (anchors, markup) => {\n    let sum = 0;\n    for (let i = 0; i < anchors.length; i++) {\n        const p1 = anchors[i];\n        const p2 = anchors[(i + 1) % anchors.length];\n        sum += (p2.x - p1.x) * (p2.y + p1.y);\n    }\n    return sum * markup.scaleMatrix.elements[0] * markup.scaleMatrix.elements[5] > 0;\n};\n\nexport const isTrueValue = (value) => {\n    return value === 'true' || value === true || value === 1;\n};\n\nconst locationInArray = (element, array, comparer) => {\n    if (array.length === 0) return -1;\n\n    let start = 0;\n    let end = array.length;\n    let pivot = Math.floor(end / 2);\n\n    while (end - start > 1) {\n        const comp = comparer(array[pivot], element);\n        if (comp === 0) return pivot;\n\n        if (comp > 0) {\n            end = pivot;\n        } else {\n            start = pivot;\n        }\n\n        pivot = Math.floor(start + (end - start) / 2);\n    }\n\n    return comparer(array[pivot], element) > 0 ? pivot - 1 : pivot;\n};\n\nexport const getArcAngleSize = (arc, clockwise) => {\n    let dist = Math.abs(arc.begin - arc.end);\n    if (dist > 2 * Math.PI) dist -= 2 * Math.PI;\n    if (!clockwise && arc.begin > arc.end) {\n        dist = 2 * Math.PI - dist;\n    } else if (clockwise && arc.end > arc.begin) {\n        dist = 2 * Math.PI - dist;\n    }\n    return dist;\n};\n\nexport const insertInSortedArray = (element, array, comparer) => {\n    array.splice(locationInArray(element, array, comparer) + 1, 0, element);\n    return array;\n};\n\n// if the lines intersect, the result contains the x and y of the intersection (treating the lines as infinite) and booleans for whether line segment 1 or line segment 2 contain the point\nexport const checkLineIntersection = (line1Start, line1End, line2Start, line2End) => {\n    const result = {\n        x: null,\n        y: null,\n        onLine1: false,\n        onLine2: false,\n        onBothLines: false\n    };\n    const denominator = ((line2End.y - line2Start.y) * (line1End.x - line1Start.x)) - ((line2End.x - line2Start.x) * (line1End.y - line1Start.y));\n\n    if (denominator === 0) {\n        return result;\n    }\n\n    let a = line1Start.y - line2Start.y;\n    let b = line1Start.x - line2Start.x;\n    const numerator1 = ((line2End.x - line2Start.x) * a) - ((line2End.y - line2Start.y) * b);\n    const numerator2 = ((line1End.x - line1Start.x) * a) - ((line1End.y - line1Start.y) * b);\n    a = numerator1 / denominator;\n    b = numerator2 / denominator;\n\n    // if we cast these lines infinitely in both directions, they intersect here:\n    result.x = line1Start.x + (a * (line1End.x - line1Start.x));\n    result.y = line1Start.y + (a * (line1End.y - line1Start.y));\n\n    // if line1 is a segment and line2 is infinite, they intersect if:\n    if (a > 0 && a < 1) {\n        result.onLine1 = true;\n    }\n    // if line2 is a segment and line1 is infinite, they intersect if:\n    if (b > 0 && b < 1) {\n        result.onLine2 = true;\n    }\n    \n    result.onBothLines = result.onLine1 && result.onLine2;\n    \n    // if line1 and line2 are segments, they intersect if both of the above are true\n    return result;\n};\n\nexport const handleIntersection = (anchors, radius, markup) => {\n    const leng = anchors.length;\n    const intersects = [];\n    for (let i = 0; i < leng; i++) {\n        const ind = i === 0 ? leng - 1 : i - 1;\n        const prevAnchor = anchors[ind];\n        const currentAnchor = anchors[i];\n        const nextAnchor = anchors[(i + 1) % leng];\n\n        if (!currentAnchor || !nextAnchor) {\n            break;\n        }\n\n        const angA = Math.atan2(currentAnchor.y - prevAnchor.y, currentAnchor.x - prevAnchor.x);\n\n        const tangentA2 = {};\n        tangentA2.p1 = new THREE.Vector3(prevAnchor.x + Math.cos(angA - Math.PI / 2) * radius, prevAnchor.y + Math.sin(angA - Math.PI / 2) * radius, 1);\n        tangentA2.p2 = new THREE.Vector3(currentAnchor.x + Math.cos(angA - Math.PI / 2) * radius, currentAnchor.y + Math.sin(angA - Math.PI / 2) * radius, 1);\n\n        const angB = Math.atan2(nextAnchor.y - currentAnchor.y, nextAnchor.x - currentAnchor.x);\n\n        const tangentB2 = {};\n        tangentB2.p1 = new THREE.Vector3(currentAnchor.x + Math.cos(angB - Math.PI / 2) * radius, currentAnchor.y + Math.sin(angB - Math.PI / 2) * radius, 1);\n        tangentB2.p2 = new THREE.Vector3(nextAnchor.x + Math.cos(angB - Math.PI / 2) * radius, nextAnchor.y + Math.sin(angB - Math.PI / 2) * radius, 1);\n\n        const intersect = checkLineIntersection(tangentA2.p1, tangentA2.p2, tangentB2.p1, tangentB2.p2);\n        \n        // if there is an intersection point on the lines\n        if (intersect.onBothLines) {\n            var vec1 = new THREE.Vector3(currentAnchor.x - prevAnchor.x, currentAnchor.y - prevAnchor.y, 0);\n            var vec2 = new THREE.Vector3(nextAnchor.x - currentAnchor.x, nextAnchor.y - currentAnchor.y, 0);\n            vec1.normalize();\n            vec2.normalize();\n            vec1.multiplyScalar(-1);\n\n            var cross = new THREE.Vector3().crossVectors(vec1, vec2);\n\n            var asin = Math.asin(cross.z);\n\n            var acos = vec1.dot(vec2);\n\n            var diff = Math.atan2(asin, acos);\n\n            if (diff < Math.PI / 2) {\n                currentAnchor['isCurrentIntersection' + intersects.length] = true;\n                nextAnchor['isNextIntersection' + intersects.length] = true;\n\n                currentAnchor.intersects = intersects;\n                nextAnchor.intersects = intersects;\n\n                intersects.push(intersect);\n            }\n        }\n    }\n    return intersects;\n};\n\nexport const markupsOverlayRenderer = (viewer, options, overlayRendererExtraOptions = {}) => {\n    const { width, height, ctx, target, screenshotCamera, onRenderDone } = options;\n    const { markupLayer } = overlayRendererExtraOptions;\n\n    const markupsExtension = viewer.getExtension('Autodesk.BIM360.Markups');\n\n    if (!markupsExtension) {\n        onRenderDone(ctx.targetToCanvas(target).canvas);\n        return;\n    }\n\n    const canvasBounds = viewer.impl.getCanvasBoundingClientRect();\n    const originalWidth = canvasBounds.width;\n    const originalHeight = canvasBounds.height;\n\n    const webglRenderer = viewer.impl.glrenderer();\n    webglRenderer.pushViewport();\n    webglRenderer.setPixelRatio(1.0);\n    webglRenderer.setViewport(0, 0, width, height);\n    markupsExtension.renderer.onResize({ width, height });\n\n    const cam = viewer.impl.is2d ? screenshotCamera : markupsExtension.renderer.markupsCamera;\n    const visibleLayers = markupsExtension.markupsManager.getVisibleLayers();\n\n    if (markupLayer) {\n        visibleLayers.forEach(layer => layer !== markupLayer && layer.setVisible(false));\n    }\n\n    let wasVisible;\n    let wasTransparent;\n\n    // Make sure the current layer is fully visible before rendering.\n    const beforeRender = () => {\n        if (markupLayer) {\n            wasVisible = markupLayer.isVisible();\n            wasTransparent = markupLayer.isTransparent();\n\n            markupLayer.setVisible(true);\n            markupLayer.changeTransparency(false);\n        }\n    };\n\n    const afterRender = () => {\n        if (markupLayer) {\n            markupLayer.setVisible(wasVisible);\n            markupLayer.changeTransparency(!wasTransparent);\n        }\n    };\n\n    beforeRender();\n\n    markupsExtension.renderer.render(target, cam);\n\n    afterRender();\n\n    // Restore previous state\n    webglRenderer.popViewport();\n    webglRenderer.setPixelRatio();\n    markupsExtension.renderer.onResize({ width: originalWidth, height: originalHeight });\n\n    const { canvas } = ctx.targetToCanvas(target);\n    const scaleRatio = width / originalWidth;\n\n    markupsExtension.renderer.textRenderer.renderTextToCanvas(canvas, cam, scaleRatio, beforeRender, afterRender, onRenderDone);\n\n    if (markupLayer) {\n        visibleLayers.forEach(layer => layer !== markupLayer && layer.setVisible(true));\n    }\n};\n\nexport const getScreenShotOfMarkup = (viewer, callback, markupLayer) => {\n    const markupsExtension = viewer.getExtension('Autodesk.BIM360.Markups');\n    let bounds;\n\n    if (markupLayer && viewer.impl.is2d) {\n        bounds = markupLayer.getWorldBoundingBox();\n        Autodesk.Viewing.ScreenShot.makeBoundsSquare(bounds);\n    }\n\n    const getCropBounds = (viewer, camera) => {\n        bounds = markupLayer.getWorldBoundingBox();\n        Autodesk.Viewing.ScreenShot.makeBoundsSquare(bounds);\n\n        const markupsCameraBackup = markupsExtension.renderer.markupsCamera;\n\n        if (viewer.impl.is2d) {\n            markupsExtension.renderer.markupsCamera = camera;\n        }\n\n        const min = markupsExtension.renderer.worldToClient(bounds.min);\n        const max = markupsExtension.renderer.worldToClient(bounds.max);\n\n        markupsExtension.renderer.markupsCamera = markupsCameraBackup;\n\n        const clientBounds = new THREE.Box3().setFromPoints([min, max]);\n        Autodesk.Viewing.ScreenShot.makeBoundsSquare(clientBounds, MarkupsConstants.MINIMUM_THUMBNAIL_SIZE);\n\n        const size = clientBounds.size().x;\n        clientBounds.expandByVector(new THREE.Vector3(size * MarkupsConstants.SELECTION_ZOOM_MARGIN, size * MarkupsConstants.SELECTION_ZOOM_MARGIN, 0));\n\n        return clientBounds;\n    };\n\n    const options = {\n        bounds,\n        margin: markupLayer ? MarkupsConstants.SELECTION_ZOOM_MARGIN : 0,\n        overlayRenderer: markupsOverlayRenderer,\n        overlayRendererExtraOptions: { markupLayer },\n        getCropBounds: markupLayer && getCropBounds\n    };\n\n    Autodesk.Viewing.ScreenShot.getScreenShotAtScreenSize(viewer, callback, options);\n};\n\nexport const setCustomGestureValues = (viewer) => {\n    const gestureHandler = viewer.toolController.getTool('gestures');\n    if (gestureHandler) {\n        gestureHandler.setGestureParameter('singletap', 'time', 250);\n        gestureHandler.setGestureParameter('drag', 'threshold', 0);\n    }\n};\n\nexport const restoreGestureValues = (viewer) => {\n    const gestureHandler = viewer.toolController.getTool('gestures');\n    if (gestureHandler) {\n        gestureHandler.restoreGestureParameterDefault('singletap', 'time');\n        gestureHandler.restoreGestureParameterDefault('drag', 'threshold');\n    }\n};\n/*\n * Taken from Simplify.js, a high-performance JS polyline simplification library\n * (c) 2013, Vladimir Agafonkin\n * mourner.github.io/simplify-js\n */\nexport const simplify = function(points, tolerance, highestQuality) {\n\n    if (points.length <= 2) return points;\n\n    // square distance between 2 points\n    function getSqDist(p1, p2) {\n        const dx = p1.x - p2.x,\n             dy = p1.y - p2.y;\n\n        return dx * dx + dy * dy;\n    }\n\n    // square distance from a point to a segment\n    function getSqSegDist(p, p1, p2) {\n        let x = p1.x,\n            y = p1.y,\n            dx = p2.x - x,\n            dy = p2.y - y;\n\n        if (dx !== 0 || dy !== 0) {\n            const t = ((p.x - x) * dx + (p.y - y) * dy) / (dx * dx + dy * dy);\n\n            if (t > 1) {\n                x = p2.x;\n                y = p2.y;\n\n            } else if (t > 0) {\n                x += dx * t;\n                y += dy * t;\n            }\n        }\n\n        dx = p.x - x;\n        dy = p.y - y;\n\n        return dx * dx + dy * dy;\n    }\n  \n    // basic distance-based simplification\n    function simplifyRadialDist(points, sqTolerance) {\n\n        let prevPoint = points[0],\n            newPoints = [prevPoint],\n            point;\n\n        for (let i = 1, len = points.length; i < len; i++) {\n            point = points[i];\n\n            if (getSqDist(point, prevPoint) > sqTolerance) {\n                newPoints.push(point);\n                prevPoint = point;\n            }\n        }\n\n        if (prevPoint !== point) newPoints.push(point);\n\n        return newPoints;\n    }\n\n    function simplifyDPStep(points, first, last, sqTolerance, simplified) {\n        let maxSqDist = sqTolerance,\n            index;\n\n        for (let i = first + 1; i < last; i++) {\n            const sqDist = getSqSegDist(points[i], points[first], points[last]);\n\n            if (sqDist > maxSqDist) {\n                index = i;\n                maxSqDist = sqDist;\n            }\n        }\n\n        if (maxSqDist > sqTolerance) {\n            if (index - first > 1) simplifyDPStep(points, first, index, sqTolerance, simplified);\n            simplified.push(points[index]);\n            if (last - index > 1) simplifyDPStep(points, index, last, sqTolerance, simplified);\n        }\n    }\n\n    // simplification using Ramer-Douglas-Peucker algorithm\n    function simplifyDouglasPeucker(points, sqTolerance) {\n        const last = points.length - 1;\n\n        const simplified = [points[0]];\n        simplifyDPStep(points, 0, last, sqTolerance, simplified);\n        simplified.push(points[last]);\n\n        return simplified;\n    }\n\n    // both algorithms combined for awesome performance\n    const sqTolerance = tolerance !== undefined ? tolerance * tolerance : 1;\n\n    points = highestQuality ? points : simplifyRadialDist(points, sqTolerance);\n    points = simplifyDouglasPeucker(points, sqTolerance);\n\n    return points;\n};\n\n// A polygon is a simple polygon if there are no intersection between its edges.\t\nexport function isPolygonSimple(points) {\t\n    var n = points.length;\t\n\n    if (n === 3) {\t\n        return true;\t\n    }\t\n\n    for (var i = 0; i < n; i++) {\n\n        var p1 = points[i];\t\n        var p2 = points[(i + 1) % n];\t\n\n        for (var j = i + 2; j < n; j++) {\t\n\n            var q1 = points[(j) % n];\t\n            var q2 = points[(j + 1) % n];\t\n\n                if (q2 === p1) {\t\n                break;\t\n            }\t\n\n            const intersect = checkLineIntersection(p1, p2, q1, q2);\n        \n            // if there is an intersection point on the lines\n            if (intersect.onBothLines) {\n                return false;\n            }\n        }\t\n    }\t\n\n    return true;\t\n}\n\nexport const executeAfterTransitionEnded = (viewer, callback) => {\n    if (!viewer.navigation.getRequestTransition() && !viewer.navigation.getTransitionActive()) {\n        callback();\n    } else {\n        // Try again in case there is a requestTransition, but CAMERA_TRANSITION_COMPLETED won't get fired.\n        // It can happen in case there is a requestTransition to the same camera position exactly.\n        setTimeout(() => {\n            if (!viewer.navigation.getRequestTransition() && !viewer.navigation.getTransitionActive()) {\n                callback();\n            } else {\n                viewer.addEventListener(Autodesk.Viewing.CAMERA_TRANSITION_COMPLETED, () => {\n                    callback();\n                }, { once: true });\n            }\n        }, 1);\n    }\n};\n\nexport const isSheetNameEqual = (nameA, nameB) => {\n    if (nameA === nameB) {\n        return true;\n    }\n\n    // Same length but not equal - nothing more to check...\n    if (!nameA || !nameB || nameA.length === nameB.length) {\n        return false;\n    }\n\n    // In some cases, PDF sheets are being exported with/without parentheses.\n    if (nameA.startsWith('(')) {\n       return nameA === `(${nameB})`;\n    } else {\n       return nameB === `(${nameA})`;\n    }\n};\n","import GeometryUtils from '../Utils/GeometryUtils';\nimport LodashUtils from '../Utils/LodashUtils';\nimport AddMarkupAction from '../Actions/AddMarkupAction';\nimport UpdateMarkupAction from '../Actions/UpdateMarkupAction';\nimport DeleteMarkupAction from '../Actions/DeleteMarkupAction';\nimport { MARKUPS_EVENTS } from '../MarkupsEvents';\nimport { isEqualVectors } from '../MarkupsCommon';\nimport * as MarkupsConstants from '../MarkupsConstants';\n\nconst av = Autodesk.Viewing;\n\nexport default class EditHandler {\n    constructor(markupsExtension, markup, options = {}) {\n        this.setGlobalManager(markupsExtension.globalManager);\n        this.markupsExtension = markupsExtension;\n        this.viewer = markupsExtension.viewer;\n        this.markup = markup;\n        this.options = options;\n    }\n\n    getEditState() {\n        return this.markup.getEditState();\n    }\n\n    setEditState(editState, changes) {\n        this.markup.setEditState(editState, changes, this);\n    }\n\n    getAnchors() {\n        return this.getEditState().anchors;\n    }\n\n    // Use updateEditState whenever there are changes you want to update in the markup's edit state.\n    updateEditState(changes) {\n        this.setEditState(this.getEditState(), changes);\n    }\n\n    // Use updateEditStateAnchors whenever there are changes you want to update in the markup's edit state's anchors.\n    updateEditStateAnchors(anchors = this.getEditState().anchors) {\n        this.updateEditState({ anchors });\n    }\n\n    handleCompensation() {\n        if (!this.markup.layer) {\n            return;\n        }\n\n        // Move anchors so center stays same as before. Add translation to offset to new center\n        const anchors = this.markup.getAnchors();\n\n        if (!this.prevCenter) {\n            this.prevCenter = this.markup.center.clone();\n        }\n\n        const translation = this.markup.center.clone().sub(this.prevCenter);\n        anchors.forEach((anchor) => {\n            anchor.sub(translation);\n        });\n\n        // Add scale/rotation to new offset\n        translation.applyMatrix4(this.markup.scaleMatrix);\n        const rotation = this.markup.getRotation();\n        if (rotation !== 0) {\n            const eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();\n            GeometryUtils.applyRotation(translation, rotation, new THREE.Vector3(), eyeDirection);\n        }\n        translation.add(this.markup.editState.translation);\n\n        this.updateEditState({ anchors, translation });\n\n        this.prevCenter.copy(this.markup.center);\n    }\n\n    // Use submitChanges to update the markup with the recent changes of the edit handler.\n    // Using this will change the history of the markups, and will add an undo / redo actions.\n    // Use it only after you committed changes to the editState, using updateEditState.\n    // isDuringEdit: set to true when we don't want to update the UI after submitting changes.\n    //              Useful when many changes are submitted together which can slow down the UI.\n    submitChanges(isDuringEdit) {\n        let action;\n\n        const isNewMarkup = !this.markup.layer;\n\n        if (isNewMarkup) {\n            const layer = this.markupsExtension.markupsManager.getActiveLayer();\n\n            this.markup.syncState();\n            action = new AddMarkupAction(this.markupsExtension.markupsManager, this.markup, layer);\n        } else {            \n            if (this.markup.belongsToGroup()) {\n                this.submitGroupUpdate(isDuringEdit);\n                return;\n            } else {\n                action = new UpdateMarkupAction(this.markupsExtension.markupsManager, this.markup, this.getEditState());\n            }\n        }\n        action.isDuringEdit = isDuringEdit;\n        action.execute();\n    }\n    \n    submitGroupUpdate(isDuringEdit) {\n        const markups = this.markup.markupGroup.markups;\n\n        const isGroupOpen = this.markupsExtension.markupsManager.isActionGroupOpen();\n        \n        if (!isGroupOpen) {\n            this.markupsExtension.markupsManager.openActionGroup();\n        }\n        \n        markups.forEach((markup, i) => {\n            const action = new UpdateMarkupAction(this.markupsExtension.markupsManager, markup, markup.getEditState());\n            action.isDuringEdit = i < markups.length - 1 ? true : isDuringEdit;\n            action.execute();\n        });\n\n        if (!isGroupOpen) {\n            this.markupsExtension.markupsManager.closeActionGroup();\n        }\n    }\n\n    deleteMarkup() {\n        const action = new DeleteMarkupAction(this.markupsExtension.markupsManager, this.markup);\n        action.execute();\n    }\n\n    changeStyleProperty(key, value, dontSubmit) {\n        const editState = LodashUtils.cloneDeep(this.getEditState());\n        editState.style[key] = value;\n\n        this.updateEditState({ style: Object.assign({}, editState.style) });\n\n        if (!dontSubmit) {\n            this.submitChanges(true);\n            this.editEnd(true);\n        }\n    }\n\n    snapPointToAxis(point, previousPoint, degrees, offset = 0) {\n        if (isEqualVectors(point, previousPoint)) {\n            return;\n        }\n\n        const pointProjected = this.markupsExtension.renderer.worldToClient(point);\n        const previousPointProjected = this.markupsExtension.renderer.worldToClient(previousPoint);\n\n        const direction = pointProjected.clone().sub(previousPointProjected).normalize();\n\n        const cameraAngle = GeometryUtils.getSignedAngle(this.markupsExtension.renderer.absoluteUpVec, direction, this.markupsExtension.renderer.getCameraEyeVector());\n        const angle = cameraAngle + GeometryUtils.degreesToRadians(offset);\n        const snap = GeometryUtils.degreesToRadians(degrees);\n        const newAngle = Math.ceil((angle - GeometryUtils.degreesToRadians(degrees / 2)) / snap) * snap;\n        const eyeDirection = new THREE.Vector3(0, 0, -1);\n        const rotatedPoint = pointProjected.clone();\n        GeometryUtils.applyRotation(rotatedPoint, newAngle - angle, previousPointProjected, eyeDirection);\n\n        const axis = rotatedPoint.clone().sub(previousPointProjected).normalize();\n        const length = pointProjected.clone().sub(previousPointProjected).dot(axis);\n        const newPoint = previousPointProjected.add(axis.multiplyScalar(length));\n\n        point.copy(this.markupsExtension.renderer.clientToWorld(newPoint));\n    }\n\n    getSnappedPosition() {\n        if (this.markupsExtension.markupsTool.isSnappingAllowed()) {\n            return this.markupsExtension.markupsTool.getSnappedPosition();\n        } else {\n            return this.markupsExtension.markupsTool.lastMousePos;\n        }\n    }\n\n    didMouseMove() {\n        return this.markupsExtension.markupsTool.mouseMoved;\n    }\n\n    getTouchRadiusWorld() {\n        return this.markupsExtension.renderer.sizeFromClientToWorld(MarkupsConstants.TOUCH_RADIUS);\n    }\n\n    getMinChangeDistanceWorld() {\n        return this.markupsExtension.renderer.sizeFromClientToWorld(MarkupsConstants.MIN_CHANGE_DISTANCE);\n    }\n\n    snapDistance() {\n        return this.markupsExtension.renderer.sizeFromClientToWorld(MarkupsConstants.SNAP_DISTANCE);\n    }\n\n    intersect(point) {\n        return null;\n    }\n\n    // Default creation cursor.\n    getCursor() {\n        return 'crosshair';\n    }\n\n    isDragging() {\n        return false;\n    }\n\n    editStart() {\n        this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_EDIT_START, markup: this.markup, handler: this });\n    }\n\n    // See submitChanges above for isDuringEdit usage\n    editEnd(isDuringEdit) {\n        this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_EDIT_END, markup: this.markup, isDuringEdit, handler: this });\n    }\n\n    isSamePoint(p1, p2) {\n        return isEqualVectors(p1, p2, this.getMinChangeDistanceWorld());\n    }\n\n    isSamePointClient(p1, p2) {\n        return isEqualVectors(p1, p2, MarkupsConstants.MIN_CHANGE_DISTANCE);\n    }\n\n    handleDoubleClick(event, button) {\n    }\n\n    handleButtonDown(event, button) {\n    }\n\n    handleButtonUp(event, button) {\n    }\n\n    handleKeyDown(event, keyCode) {\n    }\n\n    handleKeyUp(event, keyCode) {\n    }\n\n    handleMouseMove(event) {\n    }\n\n    handleGesture(event) {\n    }\n\n    handleResize() {\n    }\n\n    destroy() {\n        this.markupsExtension = null;\n        this.viewer = null;\n        this.markup = null;\n    }\n}\n\nav.GlobalManagerMixin.call(EditHandler.prototype);","import { MARKUPS_EVENTS } from '../MarkupsEvents';\nimport EditHandler from './EditHandler';\n\nexport default class RectSelector extends EditHandler {\n    constructor(markupsExtension, options = {}) {\n        super(markupsExtension, null, options);\n\n        this.bounds = new THREE.Box3();\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_SESSION_END, this.clean.bind(this));\n    }\n\n    handleMouseMove(point) {\n        if (this.buttonDownPoint && this.markupsExtension.markupsTool.dragging && this.didMouseMove()) {\n            this.bounds.makeEmpty();\n\n            // Ignore difference in z coordinate.\n            this.bounds.expandByVector(new THREE.Vector3(0, 0, Infinity));\n\n            this.bounds.expandByPoint(point);\n            this.bounds.expandByPoint(this.buttonDownPoint);\n\n            const selectableMarkups = this.markupsExtension.markupsManager.getEnabledMarkups().filter(m => !m.isSelected());\n\n            selectableMarkups.forEach((markup) => {\n                const markupBounds = markup.getWorldBoundingBox(true);\n\n                if (this.bounds.isIntersectionBox(markupBounds)) {\n                    markup.setHover(true);\n                }\n            });\n\n            this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.RECT_SELECTOR_UPDATED, bounds: this.bounds });\n            return true;\n        }\n\n        return false;\n    }\n\n    clean() {\n        this.buttonDownPoint = null;\n        this.bounds.makeEmpty();\n        this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.RECT_SELECTOR_UPDATED, bounds: this.bounds });\n    }\n\n    handleButtonDown(point, button) {\n        this.clean();\n        this.buttonDownPoint = point;\n        return true;\n    }\n\n    handleButtonUp(point, button) {\n        const selected = false;\n\n        this.selectMarkups();\n\n        this.clean();\n\n        return selected;\n    }\n\n    selectMarkups() {\n        if (!this.markupsExtension.markupsTool.shiftDown) {\n            this.markupsExtension.markupsManager.deselectAllMarkups();\n        }\n\n        const selectableMarkups = this.markupsExtension.markupsManager.getEnabledMarkups().filter(m => !m.isSelected());\n\n        selectableMarkups.forEach((markup) => {\n            const markupBounds = markup.getWorldBoundingBox(true);\n            if (this.bounds.isIntersectionBox(markupBounds)) {\n                markup.select();\n            }\n        });\n    }\n}\n","import EditHandler from './EditHandler';\n\nexport default class SelectionHandler extends EditHandler {\n  getCursor() {\n    return 'pointer';\n  }\n\n  intersect(point) {\n    return this.markup.intersect(point);\n  }\n\n  handleMouseMove(point) {\n    if (this.markupsExtension.markupsTool.dragging || Autodesk.Viewing.isMobileDevice()) {\n      return false;\n    }\n\n    const intersected = this.markup.intersect(point);\n\n    if (intersected) {\n      if (this.markup.layer === this.markupsExtension.markupsManager.getActiveLayer()) {\n        this.markup.setHover(true);\n      } else {\n        this.markup.layer.setHover(true);\n      }\n    }\n\n    return intersected;\n  }\n\n  handleDoubleClick(point, button) {\n    if (this.didMouseMove()) {\n      return false;\n    }\n\n    if (this.markup.intersect(point)) {\n      if (!this.markupsExtension.markupsManager.isMarkupSessionOpen() && this.markup.layer !== this.markupsExtension.markupsManager.getActiveLayer()) {\n        this.markupsExtension.markupsManager.editLayer(this.markup.layer, false, false, false);\n      }\n\n      if (!this.markupsExtension.markupsTool.shiftDown && !this.markupsExtension.markupsTool.ctrlDown) {\n        this.markupsExtension.markupsManager.deselectAllMarkups([this.markup]);\n      }\n\n      this.markup.select();\n\n      return true;\n    }\n\n    return false;\n  }\n\n  handleButtonDown(point, button) {\n    return false;\n  }\n\n  handleButtonUp(point, button) {\n    if (this.didMouseMove()) {\n      return false;\n    }\n\n    if (this.markup.intersect(point)) {\n      this.markupsExtension.markupsManager.deselectAllLayers([this.markup.layer]);\n      this.markupsExtension.markupsManager.selectLayer(this.markup.layer, false, false);\n\n      if (this.markupsExtension.markupsManager.isMarkupSessionOpen()) {\n        if (!this.markupsExtension.markupsTool.shiftDown && !this.markupsExtension.markupsTool.ctrlDown) {\n          this.markupsExtension.markupsManager.deselectAllMarkups([this.markup]);\n        }\n\n        this.markup.select();\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n}\n","import EditHandler from './EditHandler';\nimport { isEqualVectors } from '../MarkupsCommon';\nimport * as MarkupsConstants from '../MarkupsConstants';\n\nexport default class TranslationHandler extends EditHandler {\n  constructor(markupsExtension, markup, options = {}) {\n    super(markupsExtension, markup, options);\n\n    this.keyTranslation = new THREE.Vector3();\n  }\n\n  handleMouseMove(point) {\n    if (this.translating) {\n      this.handleMouseTranslation(point);\n    }\n\n    return this.translating;\n  }\n\n  handleButtonDown(point, button) {\n    if (!this.translating) {\n      this.translating = this.intersect(point);\n\n      if (this.translating) {\n        this.lastTranslationPoint = point;\n        this.buttonDownPos = point;\n        this.editStart();\n      }\n\n      return this.translating;\n    }\n\n    return true;\n  }\n\n  handleButtonUp(point, button) {\n    if (this.translating) {\n      const inEditMarkups = this.markupsExtension.markupsManager.getInEditMarkups();\n\n      this.markupsExtension.markupsManager.openActionGroup();\n      let consumed;\n\n      if (isEqualVectors(point, this.lastTranslationPoint, this.getMinChangeDistanceWorld())) {\n        this.cancelTransformEditing();\n        consumed = false;\n      } else {\n        // submit translation for all in-edit markups.\n        inEditMarkups.forEach((markup, i) => {\n          if (markup.translationHandler) {\n            markup.translationHandler.submitChanges(i < inEditMarkups.length - 1);\n          }\n        });\n\n        this.editEnd();\n        consumed = true;\n      }\n\n      this.markupsExtension.markupsManager.closeActionGroup();\n\n      this.translating = false;\n      this.lastTranslationPoint = null;\n      \n      return consumed;\n    }\n\n    return false;\n  }\n\n  handleKeyDown(event, keyCode) {\n    switch (keyCode) {\n      case Autodesk.Viewing.KeyCode.BACKSPACE:\n      case Autodesk.Viewing.KeyCode.DELETE:\n      case Autodesk.Viewing.KeyCode.ESCAPE:\n        if (this.translating) {\n          this.cancelTransformEditing();\n          return true;\n        }\n        break;\n      case Autodesk.Viewing.KeyCode.UP:\n        this.handleKeyTranslation(this.markupsExtension.renderer.getCameraUpVector());\n        return true;\n      case Autodesk.Viewing.KeyCode.DOWN:\n        this.handleKeyTranslation(this.markupsExtension.renderer.getCameraUpVector().negate());\n        return true;\n      case Autodesk.Viewing.KeyCode.RIGHT:\n        this.handleKeyTranslation(this.markupsExtension.renderer.getCameraRightVector());\n        return true;\n      case Autodesk.Viewing.KeyCode.LEFT:\n        this.handleKeyTranslation(this.markupsExtension.renderer.getCameraRightVector().negate());\n        return true;\n      default:\n        break;\n    }\n\n    return false;\n  }\n\n  handleKeyUp(event, keyCode) {\n    switch (keyCode) {\n      case Autodesk.Viewing.KeyCode.UP:\n      case Autodesk.Viewing.KeyCode.DOWN:\n      case Autodesk.Viewing.KeyCode.RIGHT:\n      case Autodesk.Viewing.KeyCode.LEFT:\n        this.keyTranslation.set(0, 0, 0);\n        this.submitChanges(event.isDuringEdit);\n        return true;\n      default:\n        break;\n    }\n\n    return false;\n  }\n\n  handleDoubleClick(event, button) {\n    return this.translating;\n  }\n\n  getCursor() {\n    return 'move';\n  }\n\n  cancelTransformEditing() {\n    const inEditMarkups = this.markupsExtension.markupsManager.getInEditMarkups();\n\n    inEditMarkups.forEach((markup) => {\n      markup.syncEditState();\n    });\n\n    this.translating = false;\n    this.lastTranslationPoint = null;\n    this.editEnd();\n  }\n\n  static hasOneGroupInEdit(inEditMarkups) {\n    let numGroups = 0, numNonGroupMarkups = 0;\n    \n    inEditMarkups.forEach((markup) => {\n      if (markup.isGroupMarkup()) {\n        numGroups++;\n      } else if (!markup.belongsToGroup()) {\n        numNonGroupMarkups++;\n      }\n    });    \n    \n    return numGroups === 1 && numNonGroupMarkups === 0;\n  }\n  \n  handleMouseTranslation(point) {\n    if (this.markupsExtension.markupsTool.shiftDown) {\n      point = point.clone();\n      this.snapPointToAxis(point, this.buttonDownPos, 90);\n    }\n\n    const translation = point.clone().sub(this.lastTranslationPoint);\n\n    // Apply translation for all in-edit markups.\n    const inEditMarkups = this.markupsExtension.markupsManager.getInEditMarkups();\n    \n    // Find if we are translating only one group and nothing else    \n    if (TranslationHandler.hasOneGroupInEdit(inEditMarkups)) {\n      // When translating only one group, apply the translation only to the currently selected markup, and let the other markups move\n      // according to the group's constraints\n      this.handleTranslation(this.markup, translation);\n    } else {    \n      inEditMarkups.forEach((markup) => {           \n        this.handleTranslation(markup, translation);\n      });\n    }\n  }\n\n  handleKeyTranslation(direction) {\n    const translation = direction.multiplyScalar(this.markupsExtension.renderer.multiplyByNormaStrokeWidth(MarkupsConstants.ARROW_MOVE_OFFSET));\n    this.keyTranslation.add(translation);\n    this.handleTranslation(this.markup, this.keyTranslation);\n  }\n\n  handleTranslation(markup, translation) {\n    if (markup.translationHandler) {\n      const translationAbs = translation.clone().add(markup.state.translation);\n      markup.translationHandler.updateEditState({ translation: translationAbs });\n    }\n  }\n\n  intersect(point) {\n    return this.markup.intersect(point);\n  }\n\n  isDragging() {\n    return this.translating;\n  }\n}\n","import { isEqualVectors } from '../MarkupsCommon';\nimport EditHandler from './EditHandler';\nimport * as MarkupsConstants from '../MarkupsConstants';\n\nexport default class AnchorHandler extends EditHandler {\n    handleMouseMove(point) {\n        if (this.activeAnchor) {\n            point = this.getSnappedPosition();\n\n            this.markup.applyInverseRotation(point);\n            this.markup.applyInverseScaleAndTranslation(point);\n\n            if (this.markupsExtension.markupsTool.shiftDown) {\n                this.snapAxis(point);\n            }\n\n            this.updateActiveAnchor(point);\n\n            return true;\n        }\n\n        return false;\n    }\n\n    handleButtonDown(point, button) {\n        if (!this.activeAnchor) {\n            this.activeAnchor = this.intersect(point);\n\n            if (this.activeAnchor) {\n                this.originalAnchor = this.activeAnchor.clone();\n                this.editStart();\n            }\n\n            return !!this.activeAnchor;\n        }\n\n        return true;\n    }\n\n    handleButtonUp(point, button) {\n        if (this.activeAnchor) {\n            point = this.getSnappedPosition();\n\n            this.markup.applyInverseRotation(point);\n            this.markup.applyInverseScaleAndTranslation(point);\n\n            if (this.markupsExtension.markupsTool.shiftDown) {\n                this.snapAxis(point);\n            }\n\n            this.updateActiveAnchor(point);\n\n            if (isEqualVectors(this.activeAnchor, this.originalAnchor, this.getMinChangeDistanceWorld())) {\n                this.cancelAnchorEditing();\n            } else {\n                this.submitChanges();\n                this.editEnd();\n            }\n            \n            this.activeAnchor = null;\n\n            return true;\n        }\n\n        return false;\n    }\n\n    handleKeyDown(event, keyCode) {\n        if (this.activeAnchor) {\n            switch (keyCode) {\n                case Autodesk.Viewing.KeyCode.BACKSPACE:\n                case Autodesk.Viewing.KeyCode.DELETE:\n                case Autodesk.Viewing.KeyCode.ESCAPE:\n                    this.cancelAnchorEditing();\n                    return true;\n                default:\n                    break;\n            }\n        }\n\n        return false;\n    }\n\n    handleKeyUp(event, keyCode) {\n    }\n\n    handleDoubleClick(event, button) {\n    }\n\n    updateActiveAnchor(point) {\n        this.activeAnchor.copy(point);\n        this.updateEditStateAnchors();\n        this.handleCompensation();\n    }\n\n    cancelAnchorEditing() {\n        this.activeAnchor = null;\n        this.markup.syncEditState();\n        this.updateEditStateAnchors();\n        this.editEnd();\n    }\n\n    isDragging() {\n        return !!this.activeAnchor;\n    }\n\n    snapAxis(point) {\n        const anchors = this.markup.getAnchors();\n        const index = anchors.findIndex(anchor => anchor === this.activeAnchor);\n\n        if (anchors[index - 1]) {\n            this.snapPointToAxis(point, anchors[index - 1], MarkupsConstants.ROTATION_SNAP_DEGREES);\n        } else if (anchors[index + 1]) {\n            this.snapPointToAxis(point, anchors[index + 1], MarkupsConstants.ROTATION_SNAP_DEGREES);\n        }\n    }\n\n    intersect(point) {\n        point = point.clone();\n        this.markup.applyInverseRotation(point);\n        this.markup.applyInverseScaleAndTranslation(point);\n\n        const p = this.markupsExtension.renderer.worldToClient(point);\n\n        const anchors = this.markup.getAnchors();\n\n        return anchors.find((anchor) => {\n            if (!this.markup.isAnchorHandlingAllowed(anchor)) return;\n            \n            const a = this.markupsExtension.renderer.worldToClient(anchor);\n            return a.distanceTo(p) <= MarkupsConstants.TOUCH_RADIUS;\n        });\n    }\n\n    getCursor() {\n        if (this.activeAnchor) {\n            return 'grabbing';\n        } else {\n            return 'grab';\n        }\n    }\n}\n","import GeometryUtils from '../Utils/GeometryUtils';\nimport EditHandler from './EditHandler';\nimport * as MarkupsConstants from '../MarkupsConstants';\n\nexport default class RotationHandler extends EditHandler {\n  handleMouseMove(point) {\n    if (this.rotating) {\n      this.handleRotation(point);\n    }\n\n    return this.rotating;\n  }\n\n  handleButtonDown(point, button) {\n    if (!this.rotating) {\n      this.rotating = this.intersect(point);\n\n      if (this.rotating) {\n        this.originalRotation = this.markup.getRotation();\n        this.handleRotation(point);\n        this.editStart();\n      }\n    }\n\n    return this.rotating;\n  }\n\n  handleButtonUp(point, button) {\n    if (this.rotating) {\n      this.rotating = false;\n\n      if (Math.abs(this.originalRotation - this.markup.getRotation()) < MarkupsConstants.MIN_ANGLE_CHANGE) {\n        this.cancelTransformEditing();\n      } else {\n        this.submitChanges();\n        this.editEnd();\n      }\n\n      this.originalRotation = null;\n\n      return true;\n    }\n\n    return false;\n  }\n\n  handleKeyDown(event, keyCode) {\n    switch (keyCode) {\n      case Autodesk.Viewing.KeyCode.BACKSPACE:\n      case Autodesk.Viewing.KeyCode.DELETE:\n      case Autodesk.Viewing.KeyCode.ESCAPE:\n        if (this.rotating) {\n          this.cancelTransformEditing();\n          return true;\n        }\n        break;\n      default:\n        break;\n    }\n\n    return false;\n  }\n\n  handleKeyUp(event, keyCode) {\n    return false;\n  }\n\n  handleDoubleClick(event, button) {\n    return this.rotating;\n  }\n\n  getCursor() {\n    return 'url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjAgMCAyMCAyMCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDx0aXRsZT5tb3VzZSBjdXJzb3Ivcm90YXRlPC90aXRsZT4gICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+ICAgIDxkZWZzPiAgICAgICAgPHBhdGggZD0iTTMsOCBMMSw4IEw0LDQgTDcsOCBMNSw4IEM1LDEwLjQ4NTI4MTQgNy41MTQ3MTg2MywxMyAxMCwxMyBDMTIuNDg1MjgxNCwxMyAxNSwxMC40ODUyODE0IDE1LDggTDEzLDggTDE2LDQgTDE5LDggTDE3LDggQzE3LDExLjU4OTg1MDkgMTMuNTg5ODUwOSwxNSAxMCwxNSBDNi40MTAxNDkxMywxNSAzLDExLjU4OTg1MDkgMyw4IFoiIGlkPSJwYXRoLTEiPjwvcGF0aD4gICAgICAgIDxmaWx0ZXIgeD0iLTMzLjMlIiB5PSItNjkuNyUiIHdpZHRoPSIxNjYuNyUiIGhlaWdodD0iMTk3LjAlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJmaWx0ZXItMiI+ICAgICAgICAgICAgPGZlTW9ycGhvbG9neSByYWRpdXM9IjEiIG9wZXJhdG9yPSJkaWxhdGUiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dTcHJlYWRPdXRlcjEiPjwvZmVNb3JwaG9sb2d5PiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9Ii0yIiBpbj0ic2hhZG93U3ByZWFkT3V0ZXIxIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4gICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIxIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+ICAgICAgICAgICAgPGZlQ29tcG9zaXRlIGluPSJzaGFkb3dCbHVyT3V0ZXIxIiBpbjI9IlNvdXJjZUFscGhhIiBvcGVyYXRvcj0ib3V0IiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVDb21wb3NpdGU+ICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggdmFsdWVzPSIwIDAgMCAwIDAgICAwIDAgMCAwIDAgICAwIDAgMCAwIDAgIDAgMCAwIDAuNSAwIiB0eXBlPSJtYXRyaXgiIGluPSJzaGFkb3dCbHVyT3V0ZXIxIj48L2ZlQ29sb3JNYXRyaXg+ICAgICAgICA8L2ZpbHRlcj4gICAgPC9kZWZzPiAgICA8ZyBpZD0ibW91c2UtY3Vyc29yL3JvdGF0ZSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+ICAgICAgICA8ZyBpZD0iQ29tYmluZWQtU2hhcGUiIGZpbGwtcnVsZT0ibm9uemVybyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTAuMDAwMDAwLCA5LjUwMDAwMCkgcm90YXRlKC0xODAuMDAwMDAwKSB0cmFuc2xhdGUoLTEwLjAwMDAwMCwgLTkuNTAwMDAwKSAiPiAgICAgICAgICAgIDx1c2UgZmlsbD0iYmxhY2siIGZpbGwtb3BhY2l0eT0iMSIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0yKSIgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+ICAgICAgICAgICAgPHBhdGggc3Ryb2tlPSIjRkZGRkZGIiBzdHJva2Utd2lkdGg9IjEiIGQ9Ik0yLjUyMDExNDgzLDguNSBMMy40MjUyNjAwOGUtMTIsOC41IEw0LDMuMTY2NjY2NjcgTDgsOC41IEw1LjUzODA0MjA3LDguNSBDNS44NDQ5MzkyOCwxMC41NDE1MjMyIDcuOTU3NDAyMDYsMTIuNSAxMCwxMi41IEMxMi4wNDI1OTc5LDEyLjUgMTQuMTU1MDYwNywxMC41NDE1MjMyIDE0LjQ2MTk1NzksOC41IEwxMiw4LjUgTDE2LDMuMTY2NjY2NjcgTDIwLDguNSBMMTcuNDc5ODg1Miw4LjUgQzE3LjE4NTI0NywxMi4xNzM1MTU3IDEzLjY5ODgwMSwxNS41IDEwLDE1LjUgQzYuMzAxMTk5MDIsMTUuNSAyLjgxNDc1MzAzLDEyLjE3MzUxNTcgMi41MjAxMTQ4Myw4LjUgWiIgZmlsbD0iIzAwMDAwMCIgZmlsbC1ydWxlPSJldmVub2RkIj48L3BhdGg+ICAgICAgICA8L2c+ICAgIDwvZz48L3N2Zz4=) 10 10, auto';\n  }\n\n  cancelTransformEditing() {\n    this.markup.syncEditState();\n\n    this.rotating = false;\n    this.editEnd();\n  }\n\n  handleRotation(point) {\n    const p = this.markupsExtension.renderer.worldToClient(point);\n    const center = this.markup.getClientCenter();\n    const vec = p.clone().sub(center).normalize();\n\n    let angle = GeometryUtils.getSignedAngle(vec, this.markupsExtension.renderer.getCameraUpVector(), this.markupsExtension.renderer.getCameraEyeVector());\n\n    if (this.markupsExtension.markupsTool.shiftDown) {\n      const snap = GeometryUtils.degreesToRadians(MarkupsConstants.ROTATION_SNAP_DEGREES);\n      angle = Math.ceil((angle - GeometryUtils.degreesToRadians(MarkupsConstants.ROTATION_SNAP_DEGREES / 2)) / snap) * snap;\n    }\n\n    this.updateEditState({ rotation: angle });\n  }\n\n  getRotationAnchor() {\n    const boundingBox = this.markup.getClientBoundingBox(true);\n    const vec = boundingBox.getCenter().add(new THREE.Vector3(0, MarkupsConstants.ROTATION_ANCHOR_DISTANCE + (boundingBox.size().y / 2), 0));\n    const pivot = boundingBox.getCenter();\n    const rotation = this.markup.getRotation() + this.markupsExtension.renderer.getCameraRotation();\n    GeometryUtils.applyRotation(vec, rotation, pivot, this.markupsExtension.renderer.absoluteEyeVec);\n    return vec;\n  }\n\n  intersect(point) {\n    point = point.clone();\n    const p = this.markupsExtension.renderer.worldToClient(point);\n\n    const rotationAnchor = this.getRotationAnchor();\n\n    return rotationAnchor.distanceTo(p) <= MarkupsConstants.TOUCH_RADIUS;\n  }\n\n  isDragging() {\n    return this.rotating;\n  }\n}\n","import GeometryUtils from '../Utils/GeometryUtils';\nimport EditHandler from './EditHandler';\nimport { nearestPointInPointToLine } from '../MarkupsCommon';\nimport * as MarkupsConstants from '../MarkupsConstants';\n\nexport default class ScaleHandler extends EditHandler {\n  handleMouseMove(point) {\n    if (this.scaling) {\n      const p = point.clone();\n      this.markup.applyInverseRotation(p);\n      this.markup.applyInverseCameraRotation(p);\n\n      this.handleScaling(p);\n    }\n\n    return this.scaling;\n  }\n\n  handleButtonDown(point, button) {\n    if (!this.scaling) {\n      this.scaleAnchor = this.intersect(point);\n      this.scaling = !!this.scaleAnchor;\n\n      if (this.scaling) {\n        this.originalPoint = point.clone();\n        this.editStart();\n      }\n    }\n\n    return this.scaling;\n  }\n\n  handleButtonUp(point, button) {\n    if (this.scaling) {\n      this.scaleAnchor = null;\n      this.scaling = false;\n\n      if (this.isSamePoint(point, this.originalPoint)) {\n        this.cancelTransformEditing();\n      } else {\n        this.submitChanges();\n        this.editEnd();\n      }\n      \n      return true;\n    }\n\n    return false;\n  }\n\n  handleKeyDown(event, keyCode) {\n    switch (keyCode) {\n      case Autodesk.Viewing.KeyCode.BACKSPACE:\n      case Autodesk.Viewing.KeyCode.DELETE:\n      case Autodesk.Viewing.KeyCode.ESCAPE:\n        if (this.scaling) {\n          this.cancelTransformEditing();\n          return true;\n        }\n        break;\n      default:\n        break;\n    }\n\n    return false;\n  }\n\n  handleDoubleClick(event, button) {\n    return this.scaling;\n  }\n\n  getCursor() {\n    if (this.cursor && this.scaling) {\n      return this.cursor;\n    }\n\n    const p = this.markup.getClientCenter();\n\n    const direction = this.lastIntersectPoint.clone().sub(p).normalize();\n    const rightVec = new THREE.Vector3(1, 0, 0);\n    const sign = this.lastIntersectPoint.y < p.y ? 1 : -1;\n    const angle = GeometryUtils.radiansToDegrees(direction.angleTo(rightVec)) * sign;\n    const newAngle = Math.ceil((angle - 22.5) / 45) * 45;\n\n    this.cursor = null;\n\n    switch (newAngle) {\n      case 180:\n      case -180:\n      case 0:\n        this.cursor = 'ew-resize';\n        break;\n      case 90:\n      case -90:\n        this.cursor = 'ns-resize';\n        break;\n      case 135:\n      case -45:\n        this.cursor = 'nwse-resize';\n        break;\n      case -135:\n      case 45:\n        this.cursor = 'nesw-resize';\n        break;\n      default:\n    }\n\n    return this.cursor;\n  }\n\n  cancelTransformEditing() {\n    this.markup.syncEditState();\n    this.scaleAnchor = null;\n    this.scaling = false;\n    this.editEnd();\n  }\n\n  handleScaling(point) {\n    const pointProjected = this.markupsExtension.renderer.worldToClient(point);\n\n    this.originalBoundingBox = GeometryUtils.swapBoundingBoxY(this.markup.getWorldBoundingBox().clone());\n\n    this.scaleAnchor.axisList.forEach((axis) => {\n      const currentAnchorPos = this.getAnchorPosByAxisList([axis], false);\n      const pointWithoutMargin = pointProjected.clone().sub(axis.clone().multiplyScalar(this.markup.getMarginSize()));\n      this.resize(pointWithoutMargin, currentAnchorPos, axis);\n    });\n\n    this.updateTranslation();\n  }\n\n  updateTranslation() {\n    const axisSummed = this.scaleAnchor.axisList.reduce((acc, current) => {\n      return acc.clone().add(current);\n    });\n\n    const newBoundingBox = GeometryUtils.swapBoundingBoxY(this.markup.getWorldBoundingBox().clone());\n\n    const diffVector = newBoundingBox.size().sub(this.originalBoundingBox.size()).multiply(axisSummed).multiplyScalar(0.5);\n    const eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();\n    GeometryUtils.applyRotation(diffVector, this.markup.getRotation(), new THREE.Vector3(), eyeDirection);\n    const translation = diffVector.add(this.markup.editState.translation);\n\n    this.updateEditState({ translation });\n\n    this.originalBoundingBox = GeometryUtils.swapBoundingBoxY(this.markup.getWorldBoundingBox().clone());\n  }\n\n  resize(point, currentAnchorPos, axis, deep) {\n    const p2 = currentAnchorPos.clone().add(axis);\n    const newAnchorPos = nearestPointInPointToLine(point, currentAnchorPos, p2);\n\n    const boundingBox = this.markup.getClientBoundingBox(false);\n    const oppositeAnchor = this.getOppositePoint(currentAnchorPos, boundingBox);\n    const distanceVector = newAnchorPos.clone().sub(oppositeAnchor);\n    const lengthVector = axis.clone().multiply(distanceVector);\n\n    const currentLength = boundingBox.size().multiply(axis).length();\n    const newLength = distanceVector.length();\n\n    // Don't let markup's size be smaller than the bounding box\n    if (!deep && newLength < this.markup.getMinimumSize()) {\n      return;\n    }\n\n    // // Flip to other side.\n    if (!deep && lengthVector.x + lengthVector.y < 0) {\n      const flipPoint = oppositeAnchor.clone().add(axis);\n      this.resize(flipPoint, currentAnchorPos, axis, true);\n      this.updateTranslation();\n      axis.negate();\n      this.applyReflection(axis);\n      this.resize(point, flipPoint, axis, true);\n      return;\n    }\n\n    const scaleRatio = ((newLength / currentLength) - 1);\n\n    const axisMask = this.markupsExtension.markupsTool.shiftDown ? new THREE.Vector3(1, 1, 0) : new THREE.Vector3(Math.abs(axis.x), Math.abs(axis.y), Math.abs(axis.z));\n    const scaleVector = axisMask.clone().multiplyScalar(scaleRatio).addScalar(1);\n\n    const scaleAbs = scaleVector.clone().multiply(this.markup.editState.scale);\n\n    this.updateEditState({ scale: scaleAbs });\n  }\n\n  intersect(point) {\n    const scaleAnchors = this.getScaleAnchors();\n    const p = point.clone();\n    this.markup.applyInverseRotation(p);\n    this.markup.applyInverseCameraRotation(p);\n\n    const pProjected = this.markupsExtension.renderer.worldToClient(p);\n    this.lastIntersectPoint = pProjected;\n\n    return scaleAnchors.find((anc) => {\n      return anc.pos.distanceTo(pProjected) <= MarkupsConstants.TOUCH_RADIUS;\n    });\n  }\n\n  isDragging() {\n    return this.scaling;\n  }\n\n  getOppositePoint(point, boundingBox) {\n    const center = boundingBox.getCenter();\n    const pointToCenterDistance = point.clone().distanceTo(center);\n    const pointToCenterDirection = point.clone().sub(center).normalize();\n    return point.clone().sub(pointToCenterDirection.multiplyScalar(pointToCenterDistance * 2));\n  }\n\n  applyReflection(axis) {\n    const v = new THREE.Vector3(1, 1, 1).sub(axis.clone().multiply(axis).multiplyScalar(2));\n    const scale = this.markup.editState.scale.clone();\n    scale.multiply(v);\n    this.updateEditState({ scale });\n  }\n\n  /**\n   *\n   * Scale Anchors\n   *\n  */\n\n  getScaleAnchors() {\n    const { anchors } = this.getEditState();\n    if (anchors.length < 2) {\n      return [];\n    }\n    \n    if (this.options.onlyHorizontal) {\n      return [\n        this.getEastAnchor(), this.getWestAnchor()\n      ];\n    } else {\n      return [\n        this.getEastAnchor(), this.getWestAnchor(), this.getNorthAnchor(), this.getSouthAnchor(),\n        this.getNorthWestAnchor(), this.getSouthWestAnchor(), this.getNorthEastAnchor(), this.getSouthEastAnchor()\n      ];\n    }\n  }\n\n  getAnchorPosByAxisList(axisList, withMargin) {\n    const boundingBox = this.markup.getClientBoundingBox(withMargin);\n    const pos = boundingBox.getCenter();\n\n    axisList.forEach((axis) => {\n      const corner = axis.clone().multiply(boundingBox.size().multiplyScalar(0.5));\n      pos.add(corner);\n    });\n\n    return pos;\n  }\n\n  getAnchor(axisList, id) {\n    const pos = this.getAnchorPosByAxisList(axisList, !this.markup.belongsToGroup());\n\n    return {\n      pos, axisList, id\n    };\n  }\n\n  getNorthAnchor() {\n    return this.getAnchor([new THREE.Vector3(0, 1, 0)], 'n');\n  }\n\n  getSouthAnchor() {\n    return this.getAnchor([new THREE.Vector3(0, -1, 0)], 's');\n  }\n\n  getEastAnchor() {\n    return this.getAnchor([new THREE.Vector3(1, 0, 0)], 'e');\n  }\n\n  getWestAnchor() {\n    return this.getAnchor([new THREE.Vector3(-1, 0, 0)], 'w');\n  }\n\n  getNorthWestAnchor() {\n    return this.getAnchor([new THREE.Vector3(0, 1, 0), new THREE.Vector3(-1, 0, 0)], 'nw');\n  }\n\n  getSouthWestAnchor() {\n    return this.getAnchor([new THREE.Vector3(0, -1, 0), new THREE.Vector3(-1, 0, 0)], 'sw');\n  }\n\n  getNorthEastAnchor() {\n    return this.getAnchor([new THREE.Vector3(0, 1, 0), new THREE.Vector3(1, 0, 0)], 'ne');\n  }\n\n  getSouthEastAnchor() {\n    return this.getAnchor([new THREE.Vector3(0, -1, 0), new THREE.Vector3(1, 0, 0)], 'se');\n  }\n}\n","import Action from './Action';\n\n/**\n * ActionManager\n *\n * Implementation of Command Pattern - https://en.wikipedia.org/wiki/Command_pattern.\n * Use in order to manage actions with undo and redo operations.\n *\n * This class extends EventDispatcher, so for every action, it triggers an event.\n */\n\nexport default class ActionManager extends Autodesk.Viewing.EventDispatcher {\n    constructor() {\n        super();\n\n        this.undoStack = [];\n        this.redoStack = [];\n\n        this.isGroupOpen = false;\n        this.nextActionId = 0;\n    }\n\n    execute(action) {\n        this.clearStack(this.redoStack);\n\n        action.id = this.nextActionId;\n        this.nextActionId += 1;\n\n        action.redo();\n\n        if (this.isGroupOpen) {\n            this.group.push(action);\n        } else {\n            this.undoStack.push(action);\n        }\n\n        action.trigger = ActionManager.EXECUTE;\n        this.notify(action);\n    }\n\n    undo(allowRedo = true) {\n        if (this.undoStack.length === 0) {\n            return;\n        }\n\n        if (this.isGroupOpen) {\n            console.warn('Cannot undo while action group is open!');\n            return;\n        }\n\n        const action = this.undoStack.pop();\n        if (allowRedo) {\n            this.redoStack.push(action);\n        }\n\n        if (action instanceof Action) {\n            action.undo();\n        } else {\n            // Action group\n            for (let i = action.length - 1; i >= 0; i--) {\n                action[i].undo();\n            }\n        }\n\n        action.trigger = ActionManager.UNDO;\n        this.notify(action);\n    }\n\n    redo() {\n        if (this.redoStack.length === 0) {\n            return;\n        }\n\n        if (this.isGroupOpen) {\n            console.warn('Cannot redo while action group is open!');\n            return;\n        }\n\n        const action = this.redoStack.pop();\n        this.undoStack.push(action);\n\n        if (action instanceof Action) {\n            action.redo();\n        } else {\n            // Action group\n            for (let i = 0; i < action.length; i++) {\n                action[i].redo();\n            }\n        }\n\n        action.trigger = ActionManager.REDO;\n        this.notify(action);\n    }\n\n    clear() {\n        this.clearStack(this.undoStack);\n        this.clearStack(this.redoStack);\n\n        this.isGroupOpen = false;\n        this.group = [];\n\n        this.notify([]);\n    }\n\n    clearStack(stack) {\n        stack.splice(0, stack.length);\n    }\n\n    isUndoStackEmpty() {\n        return this.undoStack.length === 0;\n    }\n\n    isRedoStackEmpty() {\n        return this.redoStack.length === 0;\n    }\n\n    notify(actionGroup) {\n        actionGroup = actionGroup instanceof Action ? [actionGroup] : actionGroup;\n\n        this.dispatchEvent({\n            type: ActionManager.HISTORY_CHANGED_EVENT,\n            actionGroup,\n            hasUndo: !this.isUndoStackEmpty(),\n            hasRedo: !this.isRedoStackEmpty()\n        });\n    }\n\n    openActionGroup() {\n        if (this.isGroupOpen) {\n            console.warn('Cannot open a new action group while another one is still open');\n            return;\n        }\n\n        this.group = [];\n        this.undoStack.push(this.group);\n        this.isGroupOpen = true;\n    }\n\n    closeActionGroup() {\n        if (this.group.length === 0) {\n            this.undoStack.pop();\n        }\n\n        this.isGroupOpen = false;\n    }\n}\n\n// ActionManager Events\nActionManager.HISTORY_CHANGED_EVENT = 'action-manager.history.changed.event';\nActionManager.UNDO = 'action-manager.undo';\nActionManager.REDO = 'action-manager.redo';\nActionManager.EXECUTE = 'action-manager.execute';\n","import GeometryUtils from '../Utils/GeometryUtils';\nimport ActionManager from '../Utils/ActionManager/ActionManager';\nimport LodashUtils from '../Utils/LodashUtils';\nimport getCaretCoordinates from '../ThirdParty/textarea-caret/textarea-caret';\nimport EditHandler from './EditHandler';\nimport { MARKUPS_EVENTS } from '../MarkupsEvents';\nimport { getTextSize } from '../MarkupsCommon';\nimport * as MarkupsConstants from '../MarkupsConstants';\nimport RotationHandler from '../EditHandlers/RotationHandler';\nimport \"mdn-polyfills/MouseEvent\";\n\n\nexport default class TextInputHandler extends EditHandler {\n  constructor(markupsExtension, markup, options) {\n    super(markupsExtension, markup, options);\n\n    this.textboxActive = false;\n    this.submitChangesDebounced = LodashUtils.debounce(this.options.submitChanges || this.submitChanges, MarkupsConstants.TEXT_DEBOUNCE);\n\n    // Relevent for iOS only. Look at the methods at the end of this file.\n    if (Autodesk.Viewing.isIOSDevice()) {\n        this.onMarkupEditEnabledBinded = this.onMarkupEditEnabled.bind(this);\n        this.onMarkupEditDisabledBinded = this.onMarkupEditDisabled.bind(this);\n        this.onMarkupEditStartBinded = this.onMarkupEditStart.bind(this);\n        this.onMarkupEditEndBinded = this.onMarkupEditEnd.bind(this);\n        this.onTouchEndBinded = this.onTouchEnd.bind(this);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_ENABLE_EDIT, this.onMarkupEditEnabledBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_DISABLE_EDIT, this.onMarkupEditDisabledBinded);\n    }\n  }\n\n  intersect(point) {\n    if (!this.markup.isTextMarkup()) {\n      return false;\n    }\n\n    point = point.clone();\n    this.markup.applyInverseRotation(point);\n    this.markup.applyInverseCameraRotation(point);\n    const p = this.markupsExtension.renderer.worldToClient(point);\n    const boundingBox = this.markup.getClientBoundingBox(true);\n    return boundingBox.containsPoint(p);\n  }\n\n  updateCaretPosition() {\n   const label = this.markupsExtension.renderer.textRenderer.getLabel(this.markup);\n   const pos = this.getUpdatedCaretPosition(label);\n   if (pos.start !== 0 || pos.end !== 0) {\n     this.lastCaretPosition = pos;\n   }\n  }\n\n  getCursor() {\n    return 'pointer';\n  }\n\n  handleDoubleClick(point, button) {\n    if (Autodesk.Viewing.isIOSDevice()) {\n      return false;\n    }\n\n    if (this.intersect(point)) {\n        const label = this.markupsExtension.renderer.textRenderer.getLabel(this.markup);\n        this.lastCaretPosition = { start: label.innerText.length, end: label.innerText.length };\n        this.startTextEditing();\n        return true;\n    }\n    return false;\n  }\n\n  handleButtonDown(point) {\n    if (this.textboxActive) {\n      this.submitChangesDebounced.flush();\n      this.endTextEditing();\n      return true;\n    }\n    return this.isEmpty();\n  }\n\n  handleButtonUp(point) {\n    if (this.isEmpty()) {\n      this.onEmptyTextMarkup();\n      return true;\n    }\n\n    return false;\n  }\n\n  isEmpty() {\n    return (this.markup.editState.text.trim() === '');\n  }\n\n  onEmptyTextMarkup() {\n    if (this.options.onEmptyTextMarkup) {\n      this.textboxActive = false;\n      this.options.onEmptyTextMarkup();\n    } else {\n      this.deleteEmptyTextMarkup();\n    }\n  }\n\n  deleteEmptyTextMarkup() {\n    this.textboxActive = false;\n    this.markupsExtension.markupsManager.actionManager.undo();\n    this.markupsExtension.markupsManager.deleteMarkup(this.markup);\n  }\n\n  onCameraChanged(e) {\n    const label = this.markupsExtension.renderer.textRenderer.getLabel(this.markup);\n    label.focus();\n  }\n\n  startTextEditing(markText) {\n\n    const label = this.markupsExtension.renderer.textRenderer.getLabel(this.markup);\n    this.label = label;\n    if (!label) {\n      return;\n    }\n\n    this.textboxActive = true;\n\n    // changing position to 'fixed' solves the 'out of screen' text expansion, but cause the text be visible on top of other element.\n    label.style.position = 'fixed';\n\n    label.setAttribute('contenteditable', true);\n    label.style.webkitUserSelect = 'text';\n    label.style.userSelect = 'text';\n    label.style.pointerEvents = 'auto';\n    label.setAttribute('spellcheck', false);\n    this.setCaretPosition(label);\n    \n    label.blur();\n    label.focus();\n\n    const _document = this.getDocument();\n    if (markText) {\n      _document.execCommand('selectAll', false, null);\n    }\n\n    this.onCameraChanged = () => {\n      // When the div is outside of canvas, Safari doesn't fire events unless it's focused.\n      label.focus();\n    };\n\n    const isSafari = Autodesk.Viewing.isSafari() || Autodesk.Viewing.isIOSDevice();\n\n    this.onCameraChangedDebounced = LodashUtils.debounce(this.onCameraChanged, 5);\n\n    if (isSafari) {\n      this.markupsExtension.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangedDebounced);\n    }\n\n    this.onKeyDown = (e) => {\n      label.focus();\n\n      const labelBounds = label.getBoundingClientRect();\n      const canvasBounds = this.markupsExtension.viewer.impl.getCanvasBoundingClientRect();\n      const style = this.markup.getTextStyle();\n      const spareSize = getTextSize('AA', style);\n      const fontToWorldScale = this.markupsExtension.renderer.getFontToWorldScale();\n      const fontToClient = this.markupsExtension.renderer.sizeFromWorldToClient(fontToWorldScale);\n      const canvasMargin = 30;\n\n      const isCaretOverBottomEdge = () => {\n        return labelBounds.bottom + (spareSize.height * fontToClient) > canvasBounds.bottom - canvasMargin;\n      };\n\n      const isCaretOverRightEdge = () => {\n        const caretPosition = this.getUpdatedCaretPosition(label);\n        const _window = this.getWindow();\n        const div = _window.getSelection().anchorNode.parentElement;\n        div.value = div.innerText;\n        const caretRelativeClientPosition = getCaretCoordinates(div, caretPosition.end);\n\n        return labelBounds.left + (caretRelativeClientPosition.left + (spareSize.width * fontToClient)) > canvasBounds.right - canvasMargin;\n      };\n\n      const _window = this.getWindow();\n      switch (e.keyCode) {\n        case Autodesk.Viewing.KeyCode.ESCAPE:\n          this.submitChangesDebounced.flush();\n          this.endTextEditing();\n          this.textboxActive = true;\n          break;\n\n        case Autodesk.Viewing.KeyCode.ENTER:\n          // Prevent text caret to be out of screen in Safari\n          if (isSafari && isCaretOverBottomEdge()) {\n            e.preventDefault();\n          } else if (this.options.singleLine) {\n            e.preventDefault();\n            // Preventing multiple BRs in a row, because of browser bug that adds extra spaces.\n          } else if ((_window.getSelection().anchorNode.firstChild && _window.getSelection().anchorNode.firstChild.tagName === 'BR') || _window.getSelection().anchorOffset === 0) {\n            e.preventDefault();\n            if (Autodesk.Viewing.isIE11) {\n              this.enterPressed = true; // workaround for double enter click;\n            }\n          } else {\n            this.enterPressed = true;\n          }\n          break;\n\n        case Autodesk.Viewing.KeyCode.BACKSPACE:\n          this.backspacePressed = true;\n          break;\n\n        default:\n          if (isSafari) {\n            // Prevent text caret to be out of screen in Safari\n            if (isCaretOverRightEdge()) {\n              if (isCaretOverBottomEdge() || this.options.singleLine) {\n                // Reached the bottom edge of the canvas. No more space to write.\n                e.preventDefault();\n              } else if (labelBounds.right < canvasBounds.right) {\n                // Add a new line and continue writing.\n                this.addNewline = true;\n              } else {\n                // Label is already out of canvas. Don't write anything.\n                e.preventDefault();\n              }\n            } else if (isCaretOverBottomEdge()) {\n              // Reached the bottom edge of the canvas. No more space to write.\n              e.preventDefault();\n            }\n          }\n      }\n\n      // Text limitation.\n      const caretLength = this.lastCaretPosition.end - this.lastCaretPosition.start;\n      if (!e.metaKey && e.keyCode > 47 && label.innerText.length - caretLength > MarkupsConstants.TEXT_LENGTH_LIMIT) {\n        e.preventDefault();\n      }\n\n      if (Autodesk.Viewing.isIE11) {\n        this.onInput(true);\n      }\n    };\n\n    this.onKeyUp = () => {\n      this.onInput(true);\n    };\n\n    this.onInput = (isKeyUpEvent) => {\n      if (!label.innerText) {\n        label.innerText = Autodesk.Viewing.isIE11 ? \" \" : String.fromCharCode(10);\n      }\n\n      this.lastCaretPosition = this.getUpdatedCaretPosition(label);\n\n      let text = label.innerText;\n\n      if (this.addNewline) {\n        text = text + \"\\r\\n\";\n      }\n\n      if (Autodesk.Viewing.isIE11 && isKeyUpEvent === true) {\n        //IE innerText creates \\r\\n\\r\\n after a <p> tag element, replacing it with single break line.\n        //also handles case when pressing enter in middle of content - 2+ occurrences \n        text = text.replace(/(\\r\\n){2,}/g,\"\\r\\n\");\n        if (this.enterPressed) {\n          //using keyup event instead of input, event is fired before content\n          //is changed with enter key. This way we simulate it enter press.\n          text = text + \"\\r\\n\\r\\n\";\n        }\n      }\n\n      if (!this.options.singleLine) {\n          this.expandBoundingBox(text);\n      }\n\n      this.updateEditState({ text });\n      this.submitChangesDebounced();\n\n      this.enterPressed = false;\n      this.addNewline = false;\n      this.backspacePressed = false;\n    };\n\n    this.onPaste = (e) => {\n      // Paste the text without style.\n      e.preventDefault();\n      const _window = this.getWindow();\n      const _document = this.getDocument();\n      let text = (e.clipboardData && e.clipboardData.getData('text')) || (_window.clipboardData && _window.clipboardData.getData && _window.clipboardData.getData('Text')); // window.clipboardData needed for IE\n      if (text) {\n        const caretLength = this.lastCaretPosition.end - this.lastCaretPosition.start;\n        const limit = MarkupsConstants.TEXT_LENGTH_LIMIT + caretLength - label.innerText.length;\n\n        if (text.length > limit) {\n          // trim text and add ellipsis at the end.\n          text = text.substr(0, limit) + '\\u2026';\n        }\n\n        if (Autodesk.Viewing.isIE11) {\n            const sel = _window.getSelection();\n            const range = sel.getRangeAt(0);\n            const frag = _document.createDocumentFragment();\n            frag.appendChild(_document.createElement('br'));\n            const span = _document.createElement('span');\n            span.innerText = text;\n            frag.appendChild(span);\n            range.insertNode(frag);\n            range.selectNodeContents(span);\n            sel.removeAllRanges();\n            sel.addRange(range);\n            _document.execCommand('ms-endUndoUnit', false, null);\n        } else {\n          _document.execCommand('insertText', false, text);\n        }\n      }\n    };\n    \n    this.onMouseWheel = (e) => {\n      const newEvent = new MouseEvent(e.type, e);\n      \n      newEvent.wheelDelta = e.wheelDelta;\n      newEvent.deltaY = e.deltaY;\n      \n      this.markupsExtension.viewer.toolController.domElement.dispatchEvent(newEvent);\n\n      if (newEvent.defaultPrevented) {\n        e.preventDefault();\n      }\n    };\n\n    this.onDOMMouseScroll = (e) => {\n      const newEvent = new MouseEvent(e.type, e);\n\n      newEvent.wheelDelta = e.wheelDelta;\n      newEvent.deltaY = e.deltaY;\n      \n      this.markupsExtension.viewer.toolController.domElement.dispatchEvent(newEvent);\n      \n      if (newEvent.defaultPrevented) {\n          e.preventDefault();\n      }\n    };\n\n    this.onMouseMove = (e) => {\n      const newEvent = new MouseEvent(e.type, e);\n      this.markupsExtension.viewer.toolController.domElement.dispatchEvent(newEvent);\n\n      if (newEvent.defaultPrevented) {\n        e.preventDefault();\n      }\n    };\n\n    label.addEventListener('keydown', this.onKeyDown);\n    label.addEventListener('keypress', this.onKeyPress);\n    label.addEventListener('input', this.onInput);\n    label.addEventListener('paste', this.onPaste);\n\n    if (Autodesk.Viewing.isIE11) {\n      label.addEventListener('keyup', this.onKeyUp);\n    }\n\n    label.addEventListener('mousewheel', this.onMouseWheel);\n    label.addEventListener('DOMMouseScroll', this.onDOMMouseScroll); // Firefox\n    label.addEventListener('mousemove', this.onMouseMove);\n    label.addEventListener('mouseup', () => {\n      setTimeout(() => {\n        this.lastCaretPosition = this.getUpdatedCaretPosition(label);\n      }, 25);\n    });\n    label.addEventListener('touchend', () => {\n      setTimeout(() => {\n        this.lastCaretPosition = this.getUpdatedCaretPosition(label);\n      }, 25);\n    });\n\n    this.onHistoryChangedBinded = this.onHistoryChanged.bind(this);\n    this.endTextEditingBinded = this.endTextEditing.bind(this);\n    this.onStyleChangedBinded = this.onStyleChanged.bind(this);\n    this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_DISABLE_EDIT, this.endTextEditingBinded, { once: true });\n    this.markupsExtension.markupsManager.addEventListener(ActionManager.HISTORY_CHANGED_EVENT, this.onHistoryChangedBinded);\n    this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_STYLE_PROPERTY_CHANGED, this.onStyleChangedBinded);\n\n    this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.TEXT_EDITING_STARTED });\n  }\n\n  removeSelection() {\n    const _window = this.getWindow();\n    _window.getSelection().removeAllRanges(); // deselect text.\n    this.label.style.position = 'absolute';\n    this.label.style.pointerEvents = 'none';\n    this.label.setAttribute('contenteditable', false);\n    this.label.style.webkitUserSelect = 'none';\n    this.label.style.userSelect = 'none';\n  }\n\n  setCaretPosition(label) {\n    if (!this.lastCaretPosition) {\n      this.lastCaretPosition = { start: 0, end: label.innerText.length };\n    }\n    const _window = this.getWindow();\n    const _document = this.getDocument();\n    var range = _document.createRange();\n    var sel = _window.getSelection();\n    const start = Math.min(this.lastCaretPosition.start, label.childNodes[0].length); // Clamp values\n    const end = Math.min(this.lastCaretPosition.end, label.childNodes[0].length);\n    range.setStart(label.childNodes[0], start);\n    range.setEnd(label.childNodes[0], end);\n    sel.removeAllRanges();\n    sel.addRange(range);\n  }\n\n  getUpdatedCaretPosition(label) {\n    let caretPos = { start: 0, end: 0 };\n    let sel;\n    let range;\n    const _window = this.getWindow();\n    if (_window.getSelection) {\n      sel = _window.getSelection();\n      if (sel.rangeCount) {\n        range = sel.getRangeAt(0);\n        if (range.commonAncestorContainer.parentNode === label) {\n          caretPos = { start: range.startOffset, end: range.endOffset };\n        } else if (range.commonAncestorContainer.parentNode.parentNode === label) {\n          caretPos = { start: range.startOffset, end: range.endOffset };\n        }\n      }\n    } else {\n        caretPos = { start: label.innerText.length, end: label.innerText.length };\n    }\n    return caretPos;\n  }\n\n  onHistoryChanged({ actionGroup }) {\n    actionGroup.forEach((action) => {\n      if (action.trigger === ActionManager.UNDO || action.trigger === ActionManager.REDO) {\n        if (this.markupsExtension.renderer && this.markupsExtension.renderer.textRenderer.getLabel(this.markup)) {\n          this.endTextEditing();\n        }\n      }\n    });\n  }\n\n  endTextEditing() {\n    if (!this.textboxActive) {\n      return;\n    }\n\n    if (!this.markupsExtension.renderer) {\n      return;\n    }\n\n    const label = this.markupsExtension.renderer.textRenderer.getLabel(this.markup);\n\n    label.removeEventListener('keydown', this.onKeyDown);\n    label.removeEventListener('input', this.onInput);\n    label.removeEventListener('paste', this.onPaste);\n\n    if (Autodesk.Viewing.isIE11) {\n      label.removeEventListener('keyup', this.onKeyUp);\n    }\n\n    label.removeEventListener('mousewheel', this.onMouseWheel);\n    label.removeEventListener('DOMMouseScroll', this.onDOMMouseScroll); // Firefox\n    label.removeEventListener('mousemove', this.onMouseMove);\n\n    this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_DISABLE_EDIT, this.endTextEditingBinded);\n    this.markupsExtension.markupsManager.removeEventListener(ActionManager.HISTORY_CHANGED_EVENT, this.onHistoryChangedBinded);\n    this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_STYLE_PROPERTY_CHANGED, this.onStyleChangedBinded);\n    this.markupsExtension.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangedDebounced);\n\n    const _window = this.getWindow();\n    _window.getSelection().removeAllRanges(); // deselect text.\n    label.style.position = 'absolute';\n    label.style.pointerEvents = 'none';\n    label.blur();\n    label.setAttribute('contenteditable', false);\n    label.style.webkitUserSelect = 'none';\n    label.style.userSelect = 'none';\n\n    this.textboxActive = false;\n\n    if (this.isEmpty()) {\n      this.onEmptyTextMarkup();\n    } else {\n      this.markup.syncEditState();\n      this.editEnd();\n    }\n\n    this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.TEXT_EDITING_ENDED });\n  }\n\n  onStyleChanged() {\n    if (this.textboxActive) {\n      this.onCameraChanged();\n    }\n  }\n\n  handleKeyDown(event, keyCode) {\n    if (this.textboxActive && event.keyCode === Autodesk.Viewing.KeyCode.ESCAPE) {\n      if (this.isEmpty()) {\n        this.onEmptyTextMarkup();\n      }\n\n      this.textboxActive = false;\n      return true;\n    }\n\n    return false;\n  }\n\n  // When typing text, instead of expanding the textbox height, we want to expand its width.\n  expandBoundingBox(text) {\n    const { translation, scale } = this.getEditState();\n    const style = this.markup.getTextStyle();\n\n    const size = this.markup.getWorldBoundingBoxTextOnly().size();\n    const fontToWorldScale = this.markupsExtension.renderer.getFontToWorldScale(); // Font to World conversion\n    const { width } = this.markup.getTextWidthInFontScale();\n    style.width = `${width}px`;\n\n    const oldSize = getTextSize(this.markup.editState.text, style);\n    const newSize = getTextSize(text, style);\n\n    if ((this.enterPressed || this.backspacePressed || this.addNewline) && newSize.height !== oldSize.height) {\n      const offsetWorld = (newSize.height - oldSize.height) * fontToWorldScale;\n      this.translateBoundingBox(offsetWorld);\n      return;\n    }\n\n    if (newSize.height > oldSize.height) {\n      style.width = null;\n      const letterSize = getTextSize('A', style).width;\n      const offset = letterSize * fontToWorldScale;\n      scale.multiply(new THREE.Vector3((size.x + offset) / size.x, 1, 1));\n\n      const rotation = this.markup.getRotation();\n      const delta = new THREE.Vector3(offset / 2, 0, 0);\n      if (rotation !== 0) {\n          const eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();\n          GeometryUtils.applyRotation(delta, rotation, new THREE.Vector3(), eyeDirection);\n      }\n\n      translation.add(delta);\n      this.updateEditState({ scale, translation });\n    }\n  }\n\n  translateBoundingBox(offsetWorld) {\n    const { translation } = this.getEditState();\n    const delta = this.markup.getBoundingBoxVerticalTranslation(offsetWorld);\n    \n    translation.add(delta);\n    this.updateEditState({ translation });\n  }\n\n  destroy() {\n    this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_ENABLE_EDIT, this.onMarkupEditStartBinded);\n    this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_EDIT_END, this.onMarkupEditEndBinded);\n  }\n\n  /** \n   * These methods are being used only by iOS devices.\n   * The reason is that iOS text input can't be focused programatically.\n   * So, in order to select and edit the text area, we have to allow tapping on the div first.\n   */\n  onMarkupEditEnabled(event) {\n    if (event.markup === this.markup) {\n      if (!this.markupsExtension.markupsManager.hasEventListener(MARKUPS_EVENTS.MARKUP_EDIT_START, this.onMarkupEditStartBinded)) {\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_EDIT_START, this.onMarkupEditStartBinded);\n      }\n      if (!this.markupsExtension.markupsManager.hasEventListener(MARKUPS_EVENTS.MARKUP_EDIT_END, this.onMarkupEditEndBinded)) {\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_EDIT_END, this.onMarkupEditEndBinded);\n      }\n\n      setTimeout(() => {\n        const label = this.markupsExtension.renderer.textRenderer.getLabel(this.markup);\n\n        if (label) {\n          label.addEventListener('touchend', this.onTouchEndBinded);\n          label.style.pointerEvents = 'auto';\n        }\n      }, 10);\n    }\n  }\n\n  onTouchEnd(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.startTextEditing();\n  }\n\n  onMarkupEditDisabled(event) {\n    if (event.markup === this.markup) {\n      const label = this.markupsExtension.renderer.textRenderer.getLabel(this.markup);\n\n      if (label) {\n        label.removeEventListener('touchend', this.onTouchEndBinded);\n        label.style.pointerEvents = 'none';\n      }\n    }\n  }\n\n  onMarkupEditStart(event) {\n    if (this.textboxActive) {\n      this.textboxWasActive = true;\n    }\n    if (event.markup === this.markup && event.handler instanceof RotationHandler) {\n      this.removeSelection();\n    }\n  }\n\n  onMarkupEditEnd(event) {\n    if (event.handler instanceof TextInputHandler) {\n      return;\n    }\n    if (event.markup === this.markup && this.textboxWasActive && event.handler instanceof RotationHandler) {\n      this.textboxWasActive = false;\n      this.startTextEditing();\n    }\n  }\n\n}\n","import EditHandler from './EditHandler';\nimport { isEqualVectors, nearestPointInPointToLine } from '../MarkupsCommon';\n\nexport default class DimensionEditHandler extends EditHandler {\n  constructor(markupsExtension, markup, options = {}) {\n    super(markupsExtension, markup, options);\n  }\n\n  handleMouseMove(point) {\n    if (this.translating) {\n      this.handleMouseTranslation(point);\n    }\n\n    return this.translating;\n  }\n\n  handleButtonDown(point, button) {\n    if (!this.translating) {\n      this.translating = this.intersect(point);\n\n      if (this.translating) {\n        const anchors = this.markup.getAnchors();\n\n        const direction = anchors[1].clone().sub(anchors[0]).normalize();\n        const eyeVec = this.markupsExtension.renderer.getCameraEyeVector();\n        this.normal = direction.clone().cross(eyeVec).normalize();\n\n        this.editStart();\n      }\n\n      return this.translating;\n    }\n\n    return true;\n  }\n\n  getPointOnNormal(point) {\n    const anchors = this.markup.getAnchors();\n    const p2 = anchors[0].clone().add(this.normal);\n    const newPoint = nearestPointInPointToLine(point, anchors[0], p2);\n    return newPoint;\n  }\n\n  handleButtonUp(point, button) {\n    if (this.translating) {\n        const newPoint = this.getPointOnNormal(point);\n      if (isEqualVectors(newPoint, this.lastTranslationPoint, this.getMinChangeDistanceWorld())) {\n        this.cancelTransformEditing();\n      } else if (this.lastTranslationPoint) {\n        this.submitChanges();\n        this.editEnd();\n      }\n\n      this.translating = false;\n      this.lastTranslationPoint = null;\n\n      return true;\n    }\n\n    return false;\n  }\n\n  handleDoubleClick(event, button) {\n    return this.translating;\n  }\n\n  getCursor() {\n    return 'move';\n  }\n\n  cancelTransformEditing() {\n    this.markup.syncEditState();\n    this.translating = false;\n    this.lastTranslationPoint = null;\n    this.editEnd();\n  }\n\n  handleMouseTranslation(point) {\n    const newPoint = this.getPointOnNormal(point);\n\n    if (!this.lastTranslationPoint) {\n        this.lastTranslationPoint = newPoint;\n    }\n\n    const translation = newPoint.clone().sub(this.lastTranslationPoint);\n    const translationAbs = translation.clone().add(this.markup.state.translation);\n\n    this.updateEditState({ translation: translationAbs });\n  }\n\n  intersect(point) {\n    point = point.clone();\n    this.markup.applyInverseRotation(point);\n    const p = this.markupsExtension.renderer.worldToClient(point);\n    const boundingBox = this.markup.getClientBoundingBox(true);\n    return boundingBox.containsPoint(p);\n  }\n\n  isDragging() {\n    return this.translating;\n  }\n\n  handleKeyDown(event, keyCode) {\n    switch (keyCode) {\n      case Autodesk.Viewing.KeyCode.BACKSPACE:\n      case Autodesk.Viewing.KeyCode.DELETE:\n      case Autodesk.Viewing.KeyCode.ESCAPE:\n        if (this.translating) {\n          this.cancelTransformEditing();\n          return true;\n        }\n        break;\n      default:\n        break;\n    }\n\n    return false;\n  }\n}\n","import GeometryUtils from '../../Utils/GeometryUtils';\nimport LodashUtils from '../../Utils/LodashUtils';\nimport EditHandler from '../EditHandler';\nimport { MARKUPS_EVENTS } from '../../MarkupsEvents';\nimport * as MarkupsConstants from '../../MarkupsConstants';\n\nexport default class CreationHandler extends EditHandler {\n    constructor(markupsExtension, markup, options = {}) {\n        super(markupsExtension, markup, options);\n\n        // Used for compound markups.\n        this.onCreationStartCB = options.onCreationStart;\n        this.onCreationEndCB = options.onCreationEnd;\n    }\n\n    // Use creationStart when markup creation begins (First click).\n    creationStart() {\n        this.creationStarted = true;\n        \n        if (this.onCreationStartCB) {\n            this.onCreationStartCB();\n        } else {\n            this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_DRAWING_START, markup: this.markup });\n            this.markupsExtension.markupsManager.deselectAllMarkups();\n            this.markupsExtension.markupsManager.deselectAllLinks();\n\n            this.editStart();\n        }\n    }\n\n    // TODO: Replace this logic with initial rotation of the markup.\n\n    // Initial markup's bounding box should always be aligned with the screen.\n    // In case the camera's rotation is not 0 in markup's creation time, we have to rotate it accordingly.\n    // The process is not trivial when the markup has several creation steps (like polyline). In this scenario,\n    // What we need to do is modifying the rotation for all the history of the markup's creation.\n    // In order to do that, we traverse through all the actions that's relevant to the markup's creation, and change their history.\n    fixInitialRotation() {\n        // rotationNotAllowed check: for group components not allowed to rotate through interaction\n        if (this.markup.rotationHandler || this.markup.options.rotationNotAllowed) {\n            const cameraRotation = this.markupsExtension.renderer.getCameraRotation();\n\n            if (Math.abs(cameraRotation) > MarkupsConstants.EPSILON) {\n                const eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();\n\n                const { actionManager } = this.markupsExtension.markupsManager;\n\n                while (!actionManager.isUndoStackEmpty()) {\n                    let currentAction = actionManager.undoStack[actionManager.undoStack.length - 1];\n\n                    if (Array.isArray(currentAction)) {\n                        currentAction = currentAction[currentAction.length - 1];\n                    }\n                    \n                    if (currentAction.markup !== this.markup) {\n                        break;\n                    }\n\n                    // Modify markup's anchors, so the rotation won't affect the final result, except of the bounding box.\n                    const { anchors } = this.getEditState();\n                    anchors.forEach((anchor) => {\n                        GeometryUtils.applyRotation(anchor, cameraRotation, this.markup.getWorldCenter(), eyeDirection);\n                    });\n\n                    this.prevCenter = this.markup.center.clone();\n\n                    this.markup.setLocked(true);\n                    this.updateEditStateAnchors();\n                    this.updateEditState({ rotation: -cameraRotation });\n                    this.markup.setLocked(false);\n                    \n                    // In order to prevent a jump in the markup's position, we call handleCompensation.\n                    this.handleCompensation();\n\n                    // Override history\n                    const clonedState = LodashUtils.cloneDeep(this.getEditState());\n\n                    currentAction.markup.state = clonedState;\n                    currentAction.markup.editState = clonedState;\n\n                    if (currentAction.newState) {\n                        currentAction.newState = clonedState;\n                    }\n\n                    if (!actionManager.isRedoStackEmpty()) {\n                        actionManager.redoStack[actionManager.redoStack.length - 1].oldState = clonedState;\n                    }\n\n                    if (actionManager.isGroupOpen) {\n                        // Can't undo while group is open, so break to avoid infinite loop\n                        // Furthermore, this case will happen when creating a group markup\n                        break;\n                    }\n                    actionManager.undo();\n                }\n\n                while (!actionManager.isRedoStackEmpty()) {\n                    actionManager.redo();\n                }\n            }\n        }\n    }\n\n    // Use creationEnd when the markup creation / edition is complete.\n    creationEnd(point) {\n        this.fixInitialRotation();\n\n        if (this.onCreationEndCB) {\n            this.onCreationEndCB(point);\n        } else {\n            this.markup.disableEdit();\n\n            this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_DRAWING_END, markup: this.markup });\n            this.markupsExtension.markupsManager.duringCreationMarkup = null;\n            this.editEnd();\n\n            this.markup.complete();\n        }\n    }\n\n    creationCancel() {\n        if (this.markup.anchorHandler) {\n            this.markup.anchorHandler.cancelAnchorEditing();\n        }\n\n        this.markup.disableEdit();\n\n        this.markup.remove();\n\n        this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_DRAWING_CANCEL, markup: this.markup });\n        this.markupsExtension.markupsManager.duringCreationMarkup = null;\n        this.editEnd();\n    }\n\n    handleKeyDown(event, keyCode) {\n        switch (keyCode) {\n            case Autodesk.Viewing.KeyCode.BACKSPACE:\n            case Autodesk.Viewing.KeyCode.DELETE:\n                this.creationCancel();\n                return true;\n            case Autodesk.Viewing.KeyCode.ESCAPE:\n                return this.onEscape();\n            default:\n                break;\n        }\n\n        return false;\n    }\n\n    onEscape() {\n        this.creationCancel();\n        \n        return true;\n    }\n}\n","import CreationHandler from './CreationHandler';\n\nexport default class CreationHandlerRectangle extends CreationHandler {\n    handleMouseMove(point) {\n        const { anchors } = this.getEditState();\n\n        if (anchors[0]) {\n            if (!this.creationStarted) {\n                this.creationStart();\n            }\n\n            this.updateRectPoints(anchors, point);\n        }\n\n        return true;\n    }\n\n    updateRectPoints(anchors, point) {\n        if (this.markupsExtension.markupsTool.shiftDown) {\n            this.snapPointToAxis(point, anchors[0], 90, 45);\n        }\n\n        const rightVec = this.markupsExtension.renderer.getCameraRightVector();\n        const upVec = this.markupsExtension.renderer.getCameraUpVector();\n\n        anchors[2] = point;\n\n        const diagonal = anchors[2].clone().sub(anchors[0]);\n        const width = diagonal.dot(rightVec);\n        anchors[1] = anchors[0].clone().add(rightVec.multiplyScalar(width));\n\n        const height = diagonal.dot(upVec);\n        anchors[3] = anchors[0].clone().add(upVec.multiplyScalar(height));\n\n        this.updateEditStateAnchors();\n    }\n\n    handleButtonDown(point, button) {\n        const { anchors } = this.getEditState();\n\n        if (!anchors[0]) {\n            anchors[0] = point;\n            this.updateEditStateAnchors();\n        }\n\n        return true;\n    }\n\n    handleButtonUp(point, button) {\n        const { anchors } = this.getEditState();\n\n        if (!anchors[1]) {\n            return this.handleMouseMove(point, button);\n        } else if (!this.isSamePoint(point, anchors[0])) {\n            this.updateRectPoints(anchors, point);\n\n            this.submitChanges();\n\n            this.creationEnd(point);\n        } else {\n            this.creationCancel();\n            return false;\n        }\n\n        return true;\n    }\n}\n","import CreationHandler from './CreationHandler';\nimport { isEqualVectors } from '../../MarkupsCommon';\nimport * as MarkupsConstants from '../../MarkupsConstants';\n\nexport default class CreationHandlerPolyline extends CreationHandler {\n    handleMouseMove(point) {\n        const { anchors } = this.getEditState();\n\n        if (!this.creationStarted) {\n            this.creationStart();\n        }\n\n        if (anchors.length > 0) {\n            this.popTemporaryPoint();\n\n            if (this.markupsExtension.markupsTool.shiftDown && anchors.length > 0) {\n                this.snapPointToAxis(point, anchors[anchors.length - 1], MarkupsConstants.ROTATION_SNAP_DEGREES);\n            }\n\n            const isClosingLoop = this.isClosingLoop(point);\n            if (!isClosingLoop) {\n                anchors.push(point);\n                this.needPop = true;\n            }\n\n            this.updateEditState({ anchors, closed: isClosingLoop });\n        }\n\n        return true;\n    }\n\n    handleButtonDown(point, button) {\n        const { anchors } = this.getEditState();\n        if (anchors.length === 0) {\n            anchors.push(point);\n            this.updateEditStateAnchors();\n        }\n\n        return true;\n    }\n\n    handleButtonUp(point, button) {\n        const { anchors } = this.getEditState();\n\n        if (!this.creationStarted) {\n            this.creationStart();\n        }\n\n        this.popTemporaryPoint();\n\n        const isClosingLoop = this.isClosingLoop(point);\n\n        if (isClosingLoop || this.isNewLocation(point)) {\n            if (this.markupsExtension.markupsTool.shiftDown && anchors.length > 0) {\n                this.snapPointToAxis(point, anchors[anchors.length - 1], MarkupsConstants.ROTATION_SNAP_DEGREES);\n            }\n\n            if (!isClosingLoop) {\n                anchors.push(point);\n            }\n\n            this.updateEditState({ anchors, closed: isClosingLoop });\n\n            if (anchors.length > 1) {\n                this.submitChanges();\n            }\n\n            if (isClosingLoop) {\n                this.creationEnd(point);\n            }\n        }\n\n        return true;\n    }\n\n    beforeCreationEnd() {\n        return true;\n    }\n\n    handleDoubleClick(point, button) {\n        const { anchors } = this.getEditState();\n\n        if (anchors.length >= this.getMinimumPoints()) {\n            this.popTemporaryPoint();\n\n            // Got an extra point from handleButtonUp.\n            // anchors.pop(); // TODO maybe do this only for mobile\n\n            this.beforeCreationEnd();\n            this.creationEnd(point);\n        } else if (this.markupsExtension.markupsManager.getMarkupById(this.markup.id)) {\n            this.deleteMarkup();\n        } else {\n            this.creationCancel();\n        }\n\n        return true;\n    }\n\n    getMinimumPoints() {\n        return 2;\n    }\n\n    handleKeyDown(event, keyCode) {\n        switch (keyCode) {\n            case Autodesk.Viewing.KeyCode.BACKSPACE:\n            case Autodesk.Viewing.KeyCode.DELETE: {\n                const { anchors } = this.getEditState();\n                \n                if (anchors.length > 0) {\n                    this.popTemporaryPoint();\n\n                    anchors.pop();\n\n                    this.updateEditStateAnchors();\n\n                    if (anchors.length > 1) {\n                        this.submitChanges();\n                    } else if (this.markupsExtension.markupsManager.getMarkupById(this.markup.id)) {\n                        this.deleteMarkup();\n                    } else {\n                        this.creationCancel();\n                    }\n                }\n\n                return true;\n            }\n            case Autodesk.Viewing.KeyCode.ESCAPE:\n                return this.onEscape();\n            default:\n                break;\n        }\n\n        return false;\n    }\n    \n    onEscape(doBeforeCreationEnd = true) {\n        const { anchors } = this.getEditState();\n        \n        if (anchors.length > 0) {\n            this.popTemporaryPoint();\n\n            if (anchors.length >= this.getMinimumPoints()) {\n                if (doBeforeCreationEnd) {\n                    this.beforeCreationEnd();\n                }\n                this.creationEnd();\n            } else if (this.markupsExtension.markupsManager.getMarkupById(this.markup.id)) {\n                this.deleteMarkup();\n            } else {\n                this.creationCancel();\n            }\n            \n            return true;\n        }\n        \n        return false;\n    }\n\n    isClosingLoop(point) {\n        const { anchors } = this.getEditState();\n        return anchors.length > 2 && isEqualVectors(point, anchors[0], this.snapDistance());\n    }\n\n    isNewLocation(point) {\n        const { anchors } = this.getEditState();\n\n        if (anchors.length > 0) {\n            return !this.isSamePoint(point, anchors[anchors.length - 1]);\n        }\n\n        return true;\n    }\n\n    popTemporaryPoint() {\n        if (this.needPop) {\n            const { anchors } = this.getEditState();\n            anchors.pop();\n            this.needPop = false;\n            this.updateEditStateAnchors();\n        }\n    }\n}\n","import CreationHandlerPolyline from './CreationHandlerPolyline';\n\nexport default class CreationHandlerPolycloud extends CreationHandlerPolyline {\n    // CreationHandlerPolycloud is the same as CreationHandlerPolyline.\n\n    beforeCreationEnd() {\n        this.updateEditState({ closed: true });\n        this.submitChanges();\n    }\n\n    getMinimumPoints() {\n        return 3;\n    }\n}\n","import CreationHandler from './CreationHandler';\nimport {isEqualVectors, simplify} from '../../MarkupsCommon';\nimport * as MarkupsConstants from '../../MarkupsConstants';\n\nexport default class CreationHandlerFreehand extends CreationHandler {\n    handleMouseMove(point) {\n        const { anchors } = this.getEditState();\n\n        if (anchors.length === 1) {\n            this.creationStart();\n        }\n\n        this.addPoint(point);\n\n        return true;\n    }\n\n    handleButtonDown(point, button) {\n        this.addPoint(point);\n\n        return true;\n    }\n\n    handleButtonUp(point, button) {\n        this.addPoint(point);\n\n        this.submitChanges();\n        this.creationEnd(point);\n\n        return true;\n    }\n\n    addPoint(point) {\n        let { anchors } = this.getEditState();\n        \n        if (anchors.length === 0 || !isEqualVectors(point, anchors[anchors.length - 1], this.markupsExtension.renderer.sizeFromClientToWorld(MarkupsConstants.MIN_FREEHAND_POINT_DISTANCE))) {\n            // WIP for variable width. Needs further tweaking\n            // if (anchors.length > 0) {\n            //     const VELOCITY_WEIGHT = 0.8;\n            //     const MIN_WIDTH = 0.1;\n            //     const newStamp = performance.now();\n            //     const deltaTime = newStamp - this.prevStamp;\n            //     const distance = this.markupsExtension.renderer.sizeFromWorldToClient(point.distanceTo(anchors[anchors.length - 1]));\n            //     let speed = distance / deltaTime * 1000; // px per second\n            //     if (this.prevSpeed !== null) { // Low pass filter to \n            //         speed = VELOCITY_WEIGHT * speed + (1 - VELOCITY_WEIGHT) * this.prevSpeed;\n            //     }\n            //     point.width = Math.max(Math.min(1000 / speed, 1), MIN_WIDTH);\n            //     this.prevStamp = newStamp;\n            //     this.prevSpeed = speed;\n            // } else {\n            //     point.width = 1.0;\n            //     this.prevStamp = performance.now();\n            //     this.prevSpeed = null;\n            // }\n            \n            anchors.push(point);\n\n            anchors = simplify(anchors, this.markupsExtension.renderer.sizeFromClientToWorld(0.5), true);\n            \n            this.updateEditStateAnchors(anchors);\n        }\n    }\n\n    handleKeyDown(event, keyCode) {\n        const { anchors } = this.getEditState();\n\n        switch (keyCode) {\n            case Autodesk.Viewing.KeyCode.BACKSPACE:\n            case Autodesk.Viewing.KeyCode.DELETE:\n            case Autodesk.Viewing.KeyCode.ESCAPE:\n                if (anchors.length > 0) {\n                    this.creationCancel();\n                }\n\n                return true;\n            default:\n                break;\n        }\n\n        return false;\n    }\n}\n","import CreationHandler from './CreationHandler';\nimport * as MarkupsConstants from '../../MarkupsConstants';\n\nexport default class CreationHandlerArrow extends CreationHandler {\n    constructor(markupsExtension, markup, options = {}) {\n        super(markupsExtension, markup, options);\n        \n        this.tailIndex = options.reverseHead ? 1 : 0;\n        this.headIndex = options.reverseHead ? 0 : 1;\n    }\n    \n    handleMouseMove(point) {\n        const { anchors } = this.getEditState();\n\n        if (!anchors[this.headIndex]) {\n            anchors[this.headIndex] = anchors[this.tailIndex]; // For the case when creation starts at index 1 (reverseHead=true)\n        }\n        \n        if (!this.creationStarted) {\n            this.creationStart();\n        }\n\n        if (anchors[this.tailIndex]) {\n            if (this.markupsExtension.markupsTool.shiftDown) {\n                this.snapPointToAxis(point, anchors[this.tailIndex], MarkupsConstants.ROTATION_SNAP_DEGREES);\n            }\n\n            anchors[this.headIndex] = point;\n            this.updateEditStateAnchors();\n        }\n\n        return true;\n    }\n\n    handleButtonDown(point, button) {\n        const { anchors } = this.getEditState();\n\n        if (!anchors[this.tailIndex]) {\n            anchors[this.tailIndex] = point;\n            this.updateEditStateAnchors();\n        }\n\n        return true;\n    }\n\n    handleButtonUp(point, button) {\n        const { anchors } = this.getEditState();\n\n        if (!anchors[this.headIndex]) {\n            return this.handleMouseMove(point, button);\n        } else if (!this.isSamePoint(point, anchors[this.tailIndex])) {\n            if (this.markupsExtension.markupsTool.shiftDown) {\n                this.snapPointToAxis(point, anchors[this.tailIndex], MarkupsConstants.ROTATION_SNAP_DEGREES);\n            }\n\n            anchors[this.headIndex] = point;\n\n            this.updateEditStateAnchors();\n\n            this.submitChanges();\n\n            this.creationEnd(point);\n        } else {\n            this.creationCancel();\n            return false;\n        }\n\n        return true;\n    }\n}\n","import CreationHandler from './CreationHandler';\nimport { getTextSize } from '../../MarkupsCommon';\n\nexport default class CreationHandlerText extends CreationHandler {\n    calculateAnchorsByCenterPoint(point) {\n        const { anchors, text } = this.getEditState();\n\n        const rightVec = this.markupsExtension.renderer.getCameraRightVector();\n        const upVec = this.markupsExtension.renderer.getCameraUpVector();\n\n        const style = this.markup.getTextStyle();\n\n        const size = getTextSize(text, style);\n        const fontToWorldScale = this.markupsExtension.renderer.getFontToWorldScale();\n        const width = Math.ceil(size.width) * fontToWorldScale;\n        const height = size.height * fontToWorldScale;\n\n        anchors[0] = point.clone().sub(upVec.clone().multiplyScalar(height / 2)).sub(rightVec.clone().multiplyScalar(width / 2));\n        anchors[1] = anchors[0].clone().add(rightVec.multiplyScalar(width));\n        anchors[2] = anchors[1].clone().add(upVec.clone().multiplyScalar(height));\n        anchors[3] = anchors[0].clone().add(upVec.clone().multiplyScalar(height));\n    }\n\n    handleButtonDown(point, button) {\n        return true;\n    }\n\n    handleButtonUp(point, button) {\n        if (!this.didMouseMove()) {\n            return this.handleClick(point, button);\n        }\n\n        return false;\n    }\n    \n    handleClick(point, button) {\n        this.calculateAnchorsByCenterPoint(point);\n        this.creationStart();\n        this.updateEditStateAnchors();\n        this.submitChanges();\n        this.creationEnd(point);\n\n        // iOS text input can't be focused programatically.\n        if (!Autodesk.Viewing.isIOSDevice()) {\n            this.markup.textInputHandler.startTextEditing(true);\n        }\n\n        return true;\n    }\n}\n","import CreationHandler from './CreationHandler';\nimport { MARKUPS_EVENTS } from '../../MarkupsEvents';\n\nexport default class CreationHandlerDimension extends CreationHandler {\n    constructor(markupsExtension, markup, options) {\n        super(markupsExtension, markup, options);\n\n        this.measurement = new Autodesk.Viewing.MeasureCommon.Measurement(Autodesk.Viewing.MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE);\n\n        this.snapper = this.markupsExtension.markupsTool.snapper;\n        this.viewer = this.markupsExtension.viewer;\n    }\n\n    getMeasureExtension() {\n        if (!this.measureExtension) {\n            this.measureExtension = this.markupsExtension.viewer.getExtension('Autodesk.Measure');\n\n            if (!this.measureExtension) {\n                console.error('Measure extension not available!');\n            }\n        }\n\n        return this.measureExtension;\n    }\n\n    handleMouseMove(point) {\n        const { anchors } = this.getEditState();\n\n        if (!this.creationStarted) {\n            this.creationStart();\n        }\n\n        if (anchors[0]) {\n            if (this.markupsExtension.markupsTool.shiftDown && this.viewer.impl.is2d) {\n                this.snapPointToAxis(point, anchors[0], 90);\n            }\n\n            // No need to update viewportId for each mousemove. Only for the first time.\n            if (!anchors[1]) {\n                this.updateViewportId(this.measurement.getPick(1).viewportIndex2d);\n            }\n\n            this.pickSecondAnchor(point);\n        }\n\n        return true;\n    }\n\n    handleButtonDown(point, button) {\n        const measureExtension = this.getMeasureExtension();\n\n        // If PDF, force calibration\n        if ((measureExtension.forceCalibrate || this.viewer.model.isLeaflet() || this.viewer.model.isPdf(true)) && !measureExtension.calibrationTool.isCalibrated()) {\n            measureExtension.openCalibrationRequiredDialog('dimension');\n            this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.CALIBRATION_REQUIRED });\n\n            this.creationCancel();\n            return true;\n        }\n\n        const { anchors } = this.getEditState();\n\n        if (!anchors[0]) {\n            if (this.snapper.isSnapped()) {\n                this.snapper.copyResults(this.measurement.getPick(1));\n                const p = Autodesk.Viewing.MeasureCommon.getSnapResultPosition(this.snapper.getSnapResult(), this.viewer);\n\n                anchors[0] = this.markupsExtension.renderer.documentCameraToMarkupsCamera(p);\n\n                this.updateEditStateAnchors();\n            } else {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    handleButtonUp(point, button) {\n        const { anchors } = this.getEditState();\n\n        if (!anchors[1]) {\n            return this.handleMouseMove(point, button);\n        } else if (!this.isSamePoint(point, anchors[0])) {\n            if (this.markupsExtension.markupsTool.shiftDown && this.viewer.impl.is2d) {\n                this.snapPointToAxis(point, anchors[0], 90);\n            }\n\n            const isSnapped = this.pickSecondAnchor(point);\n\n            if (isSnapped) {\n                this.updateViewportId();\n                \n                this.submitChanges();\n                this.creationEnd(point);\n\n                if (this.markup.dimensionEditHandler) {\n                    this.markup.dimensionEditHandler.handleButtonDown(point, button);\n                }\n            } else {\n                return false;\n            }\n        } else {\n            this.creationCancel();\n\n            return false;\n        }\n\n        return true;\n    }\n\n    pickSecondAnchor(point) {\n        const { anchors } = this.getEditState();\n\n        // After changing the point position with shiftDown, try to snap again.\n        if (this.markupsExtension.markupsTool.shiftDown && this.viewer.impl.is2d) {\n            const projectedPoint = this.markupsExtension.renderer.worldToClient(point);\n            this.snapper.onMouseMove({ x: projectedPoint.x, y: projectedPoint.y });\n        }\n\n        const pick = this.measurement.getPick(2);\n        const isSnapped = this.snapper.isSnapped();\n\n        if (isSnapped) {\n            this.snapper.copyResults(pick);\n            anchors[1] = Autodesk.Viewing.MeasureCommon.getSnapResultPosition(this.snapper.getSnapResult(), this.viewer);\n        } else {\n            anchors[1] = point;\n            pick.geomType = Autodesk.Viewing.MeasureCommon.SnapType.SNAP_VERTEX;\n            pick.geomVertex = point;\n            pick.intersectPoint = point;\n        }\n\n        // Correct Perpendicular\n        if (Autodesk.Viewing.MeasureCommon.correctPerpendicularPicks(this.measurement.getPick(1), this.measurement.getPick(2), this.viewer, this.snapper)) {\n            anchors[1] = Autodesk.Viewing.MeasureCommon.getSnapResultPosition(this.measurement.getPick(2), this.viewer);\n            this.snapper.indicator.render();\n        }\n\n        if (isSnapped) {\n            anchors[1] = this.markupsExtension.renderer.documentCameraToMarkupsCamera(anchors[1]);\n        }\n\n        const text = isSnapped || this.viewer.impl.is2d ? this.getDistance() : '';\n\n        this.updateEditState({ text, anchors });\n\n        return isSnapped;\n    }\n    \n    creationCancel() {\n        super.creationCancel();\n        this.updateViewportId();\n    }\n\n    updateViewportId(viewportId) {\n        if (this.viewer.model && this.viewer.impl.is2d) {\n            if (!viewportId) {\n                this.viewer.impl.updateViewportId(0);\n                this.snapper.setViewportId(null);\n            } else {\n                // Pass viewport Id to LineShader to make all other geometries with different viewport transparent\n                this.viewer.impl.updateViewportId(viewportId);\n                this.snapper.setViewportId(viewportId);\n            }\n        }\n    }\n\n    getDistance() {\n        const distance = null;\n        const measureExtension = this.getMeasureExtension();\n        const { sharedMeasureConfig } = measureExtension;\n\n        this.measurement.computeResult(this.measurement.picks, this.markupsExtension.viewer);\n\n        if (this.markupsExtension.viewer.model && this.measurement.distanceXYZ) {\n            var d = Autodesk.Viewing.Private.convertUnits(this.markupsExtension.viewer.model.getUnitString(), sharedMeasureConfig.units, sharedMeasureConfig.calibrationFactor, this.measurement.distanceXYZ);\n            return Autodesk.Viewing.Private.formatValueWithUnits(d, sharedMeasureConfig.units, 3, sharedMeasureConfig.precision);\n        }\n\n        return distance;\n    }\n}\n","import CreationHandlerCompound from './CreationHandlerCompound';\nimport * as MarkupsConstants from \"../../MarkupsConstants\";\n\nexport default class CreationHandlerCallout extends CreationHandlerCompound {\n    constructor(markupsExtension, markup, options, classes) {\n        super(markupsExtension, markup, options, classes);\n    }\n    \n    afterNextMarkupCreated(step) {\n        if (step !== this.getTextIndex()) {\n            return; \n        }\n\n        const arrow = this.getArrow();\n        const text = this.getText();\n        \n        const bbox = text.getWorldBoundingBox(true);\n        const halfThickness = text.editState.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS] / 2;\n        const halfHeight = bbox.size().y / 2 - halfThickness;\n        const halfWidth = bbox.size().x / 2 - halfThickness;\n\n        const arrowHead = arrow.getHead();\n        const arrowTail = arrow.getTail();\n\n        const angle = Math.atan2(arrowHead.y - arrowTail.y, arrowHead.x - arrowTail.x);\n\n        let translation;\n        switch (this.markup.getTextQuadrant(angle)) {\n            case 1:\n                translation = new THREE.Vector3(0, halfHeight, 0);\n                break;\n            case 2:\n                translation = new THREE.Vector3(-halfWidth, 0, 0);\n                break;\n            case 3:\n                translation = new THREE.Vector3(0, -halfHeight, 0);\n                break;\n            case 4:\n                translation = new THREE.Vector3(halfWidth, 0, 0);\n                break;\n        }\n\n        if (text.editState.frameType === MarkupsConstants.MARKUP_TYPE_CLOUD) {\n            const tailPoint = translation.clone().negate();\n            const delta = this.markup.getVectorToClosestPointOnCloud(tailPoint);\n            translation.add(delta);\n        }\n\n        text.creationHandler.updateEditState({ translation });\n        text.creationHandler.submitChanges();\n    }\n\n    getArrowIndex() {\n        throw new Error('getArrowIndex needs implementation');\n    }\n\n    getTextIndex() {\n        throw new Error('getTextIndex needs implementation');\n    }\n\n    getArrow() {\n        return this.markup.markups[this.getArrowIndex()];\n    }\n\n    getText() {\n        return this.markup.markups[this.getTextIndex()];\n    }\n}","import CreationHandler from './CreationHandler';\nimport * as MarkupsConstants from \"../../MarkupsConstants\";\n\nexport default class CreationHandlerCompound extends CreationHandler {\n    constructor(markupsExtension, markup, options, markupClasses = []) {\n        super(markupsExtension, markup, options);\n\n        this.creationHandlers = [];\n        this.currentStep = 0;\n        this.lastCompleted = -1;\n        \n        this.markup.markups = [];\n        \n        let componentsState = [];\n        // The uuid is used to connect the group markup with its components\n        // They will have this same number saved under groupId\n        if (this.markup.state.uuid) {\n            // uuid already exists, so markup is being loaded\n            componentsState = this.markup.state.componentsState.sort((a, b) => a.groupOrder - b.groupOrder);\n        } else {\n            this.markup.state.uuid = this.markup.editState.uuid = THREE.Math.generateUUID();\n        }\n        \n        this.markupClasses = markupClasses;\n        this.numMarkups = markupClasses.length;\n\n        for (let i = 0; i < this.numMarkups; i++) {\n            const markupType = markupClasses[i].class;\n            const options = markupClasses[i].options || {};\n            \n            this._restoreFill(componentsState[i], markupClasses[i], componentsState);\n\n            const isLast = (i === markupClasses.length - 1);\n            options.onCreationEnd = (point) => { this.onCreationEnd(point); };\n            options.onCreationStart = () => { this.onCreationStart(); };\n\n            const componentState = Object.assign({}, componentsState[i], { groupId: this.markup.state.uuid, groupOrder: i });\n            const subMarkup = this.markupsExtension.markupsManager.createMarkup(markupType, componentState, options);\n            \n            if (!isLast) {\n                subMarkup.selectWhenCompleted = () => { return false; };\n            }\n\n            subMarkup.markupGroup = this.markup;\n            \n            this.markup.markups.push(subMarkup);\n            \n            this.creationHandlers.push(subMarkup.creationHandler);\n        }\n        \n        delete this.markup.state.componentsState; // Used only for loading\n    }\n    \n    _restoreFill(currentComponentState, markupClass, componentsState) {\n        if (currentComponentState && markupClass.options.fillNotAllowed) {\n            // Get the fill values from another markup class. We set it to none only for export purposes\n            // To keep things consistent in the UI, all markups should have the same values\n            for (let j = 0; j < this.numMarkups; j++) {\n                if (markupClass !== this.markupClasses[j] && (!this.markupClasses[j].options || !this.markupClasses[j].options.fillNotAllowed)) {\n                    currentComponentState.style[MarkupsConstants.STYLE_PROPERTIES.FILL_OPACITY] = componentsState[j].style[MarkupsConstants.STYLE_PROPERTIES.FILL_OPACITY];\n                    currentComponentState.style[MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR] = componentsState[j].style[MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR];\n                    break;\n                }\n            }\n        }\n    }\n\n    handleMouseMove(point) {\n        return this.creationHandlers[this.currentStep].handleMouseMove(point);\n    }\n\n    handleButtonDown(point, button) {\n        return this.creationHandlers[this.currentStep].handleButtonDown(point, button);\n    }\n\n    handleButtonUp(point, button) {\n        return this.creationHandlers[this.currentStep].handleButtonUp(point, button);\n    }\n\n    handleDoubleClick(point, button) {\n        return this.creationHandlers[this.currentStep].handleDoubleClick(point, button);\n    }\n    \n    creationCancel() {\n        super.creationCancel();\n        \n        this.markupsExtension.markupsManager.closeActionGroup();\n        \n        while (this.currentStep-- > 0) {\n            this.markupsExtension.markupsManager.actionManager.undo(false);\n        }\n    }\n\n    onCreationStart() {\n        if (this.currentStep === 0) {\n            this.markupsExtension.markupsManager.openActionGroup();\n            this.creationStart();\n        }\n        this.markup.markups[this.currentStep].setVisible(true);\n        this.markup.markups[this.currentStep].enableEdit();\n    }\n    \n    closeGroup() {\n        // For the case when the last markup requires a click, the last onCreationEnd will be called \n        // before the previous one finishes. This check assures that Whichever ends last will close the group.\n        // (lastCompleted will always lag one step behind currentStep until the end)\n        if (this.lastCompleted === this.currentStep) {\n            this.markupsExtension.markupsManager.closeActionGroup();\n        }\n        this.lastCompleted = this.currentStep;\n    }\n    \n    onCreationEnd(point) {\n        this.markup.markups[this.currentStep].disableEdit();\n        this.markup.markups[this.currentStep].complete();\n        \n        if (this.currentStep === this.numMarkups - 1) {\n            this.submitChanges();\n            this.creationEnd(point);\n        } else {\n            const nextPoint = this.markup.markups[this.currentStep].getStartPointForNextMarkup();\n            this.currentStep += 1;\n            \n            if (this.markupClasses[this.currentStep].options.requiresClick) {\n                this.creationHandlers[this.currentStep].handleClick(nextPoint);\n            } else {\n                this.creationHandlers[this.currentStep].handleButtonDown(nextPoint);\n            }\n            \n            this.afterNextMarkupCreated(this.currentStep);\n        }\n\n        this.closeGroup();\n    }\n\n    // For optionally locating the markups in the correct position after creating\n    // (to take into account constraints)\n    afterNextMarkupCreated(step) {\n        \n    }\n}\n","import CreationHandlerCallout from './CreationHandlerCallout';\nimport * as MarkupsConstants from \"../../MarkupsConstants\";\n\nexport default class CreationHandlerArrowCallout extends CreationHandlerCallout {\n    constructor(markupsExtension, markup, options) {\n        super(markupsExtension, markup, options, [\n            {\n                class: MarkupsConstants.MARKUP_TYPE_ARROW,\n                options: { reverseHead: true, tailHandlingNotAllowed: true }\n            },\n            {\n                class: MarkupsConstants.MARKUP_TYPE_CALLOUT,\n                options: { requiresClick: true, rotationNotAllowed: true, frameType: options.calloutFrameType ? options.calloutFrameType : MarkupsConstants.MARKUP_TYPE_RECTANGLE }\n            }\n        ]);\n    }\n\n    getArrowIndex() {\n        return 0;\n    }\n\n    getTextIndex() {\n        return 1;\n    }\n}\n","import CreationHandlerCallout from './CreationHandlerCallout';\nimport * as MarkupsConstants from \"../../MarkupsConstants\";\n\nexport default class CreationHandlerArrowCloudCallout extends CreationHandlerCallout {\n    constructor(markupsExtension, markup, options) {\n        super(markupsExtension, markup, options, [\n            {\n                class: MarkupsConstants.MARKUP_TYPE_CLOUD,\n                options: { fillNotAllowed: true, rotationNotAllowed: true }\n            },\n            {\n                class: MarkupsConstants.MARKUP_TYPE_ARROW,\n                options: { reverseHead: true, headHandlingNotAllowed: true, tailHandlingNotAllowed: true }\n            },\n            {\n                class: MarkupsConstants.MARKUP_TYPE_CALLOUT,\n                options: { requiresClick: true, rotationNotAllowed: true, frameType: options.calloutFrameType ? options.calloutFrameType : MarkupsConstants.MARKUP_TYPE_RECTANGLE }\n            }\n        ]);\n    }\n    \n    getArrowIndex() {\n        return 1;\n    }\n    \n    getTextIndex() {\n        return 2;\n    }\n}\n","import * as MarkupsConstants from '../../MarkupsConstants';\nimport CreationHandlerRectangle from './CreationHandlerRectangle';\nimport CreationHandlerPolyline from './CreationHandlerPolyline';\nimport CreationHandlerPolycloud from './CreationHandlerPolycloud';\nimport CreationHandlerFreehand from './CreationHandlerFreehand';\nimport CreationHandlerArrow from './CreationHandlerArrow';\nimport CreationHandlerText from './CreationHandlerText';\nimport CreationHandlerDimension from './CreationHandlerDimension';\nimport CreationHandlerArrowCallout from './CreationHandlerArrowCallout';\nimport CreationHandlerArrowCloudCallout from './CreationHandlerArrowCloudCallout';\n\nexport default class CreationHandlerFactory {\n    static getCreationHandler(type, markupsExtension, markup, options = {}) {\n        switch (type) {\n            case MarkupsConstants.MARKUP_TYPE_ARROW:\n            case MarkupsConstants.MARKUP_TYPE_LINE:\n                return new CreationHandlerArrow(markupsExtension, markup, options);\n            case MarkupsConstants.MARKUP_TYPE_RECTANGLE:\n            case MarkupsConstants.MARKUP_TYPE_CIRCLE:\n            case MarkupsConstants.MARKUP_TYPE_CLOUD:\n                return new CreationHandlerRectangle(markupsExtension, markup, options);\n            case MarkupsConstants.MARKUP_TYPE_FREEHAND:\n            case MarkupsConstants.MARKUP_TYPE_HIGHLIGHT:\n                return new CreationHandlerFreehand(markupsExtension, markup, options);\n            case MarkupsConstants.MARKUP_TYPE_POLYCLOUD:\n                return new CreationHandlerPolycloud(markupsExtension, markup, options);\n            case MarkupsConstants.MARKUP_TYPE_POLYLINE:\n                return new CreationHandlerPolyline(markupsExtension, markup, options);\n            case MarkupsConstants.MARKUP_TYPE_CALLOUT:\n                return new CreationHandlerText(markupsExtension, markup, options);\n            case MarkupsConstants.MARKUP_TYPE_DIMENSION:\n                return new CreationHandlerDimension(markupsExtension, markup, options);\n            case MarkupsConstants.MARKUP_TYPE_ARROW_CALLOUT:\n                return new CreationHandlerArrowCallout(markupsExtension, markup, options);\n            case MarkupsConstants.MARKUP_TYPE_ARROW_CLOUD_CALLOUT:\n                return new CreationHandlerArrowCloudCallout(markupsExtension, markup, options);\n\n            default:\n        }\n\n        throw new Error(`${type} creation handler does not exist`);\n    }\n}\n","import vertexShader from './Shaders/MeshLineVert.glsl';\nimport fragShader from './Shaders/MeshLineFrag.glsl';\nimport * as MarkupsConstants from '../MarkupsConstants';\n\nexport function MeshLine(supportsInt32Index) {\n    this.supportsInt32Index = supportsInt32Index;\n}\n\nMeshLine.prototype.create = function() {\n    this.geometry = new THREE.BufferGeometry();\n};\n\nMeshLine.prototype.dispose = function() {\n    if (this.geometry) {\n        this.geometry.dispose();\n        this.geometry = null;\n    }\n    \n    if (this.attributes) {\n        for (const key in this.attributes ) {\n            delete this.attributes[key].array;\n        }\n        this.attributes = null;\n    }\n    \n    this.positions = null;\n    this.previous = null;\n    this.next = null;\n    this.side = null;\n    this.width = null;\n    this.counters = null;\n    this.indices_array = null;\n};\n\nMeshLine.prototype.setGeometry = function(sourceGeo, widthCB, connectivity, options) {\n    this.sourceGeo = sourceGeo;\n    \n    if (Array.isArray(widthCB)) {\n        this.widthArray = widthCB;\n        this.widthCallback = i => this.widthArray[i];\n    } else {\n        this.widthCallback = widthCB;\n    }\n\n    this.sourceConnectivity = connectivity || [];\n    this.connectivity = {};\n\n    this.options = Object.assign({}, {\n        capType: MarkupsConstants.MESHLINE_PATH_FLAT_CAP,\n        joinType: MarkupsConstants.MESHLINE_PATH_FLAT_CAP,\n        useExactSize: false\n    }, options);\n    \n    this.isClosed = !!this.options.isClosed;\n\n    this.process();\n};\n\nMeshLine.prototype.isPointNear = (function() {\n    const a = new THREE.Vector3();\n    const b = new THREE.Vector3();\n\n    // get squared distance from a point to a segment\n    function getSegmentDistSq(p) {\n        let x = a.x;\n        let y = a.y;\n        let dx = b.x - x;\n        let dy = b.y - y;\n\n        if (dx !== 0 || dy !== 0) {\n\n            const t = ((p.x - x) * dx + (p.y - y) * dy) / (dx * dx + dy * dy);\n\n            if (t > 1) {\n                x = b.x;\n                y = b.y;\n\n            } else if (t > 0) {\n                x += dx * t;\n                y += dy * t;\n            }\n        }\n\n        dx = p.x - x;\n        dy = p.y - y;\n\n        return dx * dx + dy * dy;\n    }\n\n    return function(point, thresholdSq, matrixWorld) {\n        for (let i = 0, l = this.numPoints - 1; i < l; i++) {\n            if (this.connectivity[i] === MarkupsConstants.MESHLINE_PATH_END) {\n                continue;\n            }\n            \n            a.fromArray(this.positions, 6 * i).applyMatrix4(matrixWorld);\n            b.fromArray(this.positions, 6 * (i + 1)).applyMatrix4(matrixWorld);\n\n            if (getSegmentDistSq(point) < thresholdSq) {\n                return true;\n            }\n        }\n\n        return false;\n    };\n}());\n\nMeshLine.prototype.getPositionV3 = function(a) {\n    const aa = a * 6;\n\n    return [ this.positions[ aa ], this.positions[ aa + 1 ], this.positions[ aa + 2 ] ];\n};\n\nMeshLine.prototype.initArrays = function(numPoints) {\n    // Factors explanation:\n    // For position 6 because: (x, y, z) times 2 vertices per position\n    // For prev and next 4 because: (x, y) times 2 vertices per position\n    // It'd be preferable to use only x,y for position as well, but since this an attribute that threejs access to do things like\n    // calculate bounding sphere, it could break some things (we could get away by calculating the bounding sphere ourselves,\n    // but would need to check first that other things can't break as well. Probably not worth the effort)\n    const useExactSize = this.options.useExactSize;\n    if (!this.capacity || this.capacity < numPoints || (useExactSize && this.capacity !== numPoints)) {\n        this.dispose();\n        const capacity = useExactSize ? numPoints : Math.ceil(1.5 * numPoints);\n        this.positions = new Float32Array(6 * capacity);\n        this.previous = new Float32Array(4 * capacity);\n        this.next = new Float32Array(4 * capacity);\n\n        this.side = new Float32Array(2 * capacity);  // Side joined with pointType\n        this.width = new Float32Array(2 * capacity);\n        this.counters = new Float32Array(2 * capacity);\n\n        // 6 because 2 triangles times 3 vertices per 2 points. So if capacity is 2 --> 6*(2-1) = 6 indices for 2 triangles\n        const indexSize = 6 * (capacity - 1);\n        this.indices_array = (this.supportsInt32Index && indexSize > 65535) ? new Uint32Array(indexSize) : new Uint16Array(indexSize);\n\n        this.capacity = capacity;\n    }\n\n    this.numPoints = numPoints;\n};\n\nMeshLine.prototype.getWidth = function(idx, ratio) {\n    if (this.widthCallback) {\n        return this.widthCallback(idx, ratio);\n    }\n\n    return 1;\n};\n\nMeshLine.prototype.process = function() {\n    const srcLength = this.sourceGeo.length;\n    const maxCount = Math.max(1, srcLength - 1);\n    \n    const addPosition = (from, to, count, type) => {\n        const v = this.sourceGeo[from];\n        this.positions.set([v.x, v.y, v.z, v.x, v.y, v.z], to * 6);\n\n        this.counters.set([count, count], to * 2);\n\n        this.side.set([type, -type], to * 2);\n\n        const w = this.getWidth(from, from / maxCount);\n        this.width.set([w, w], to * 2);\n    };\n    \n    const addPrevious = () => {\n        let v;\n        if (this.isClosed) {\n            v = this.getPositionV3(l - 2 );\n        } else {\n            v = this.getPositionV3(0);\n        }\n        this.previous.set([v[0], v[1], v[0], v[1]], 0);\n\n        for (let j = 1; j < l; j++) {\n            if (this.connectivity[j] === MarkupsConstants.MESHLINE_PATH_START) {\n                v = this.getPositionV3(j);\n            } else if (this.connectivity[j] === MarkupsConstants.MESHLINE_PATH_END) {\n                v = this.getPositionV3(j - 2);\n            } else {\n                v = this.getPositionV3(j - 1);\n            }\n            this.previous.set([v[0], v[1], v[0], v[1]], j * 4);\n        }\n    };\n    \n    const addNext = () => {\n        let v;\n        for (let j = 0; j < l - 1; j++) {\n            if (this.connectivity[j] === MarkupsConstants.MESHLINE_PATH_END) {\n                v = this.getPositionV3(j);\n            } else if (this.connectivity[j] === MarkupsConstants.MESHLINE_PATH_START) {\n                v = this.getPositionV3(j + 2);\n            } else {\n                v = this.getPositionV3(j + 1);\n            }\n            this.next.set([v[0], v[1], v[0], v[1]], j * 4);\n        }\n\n        if (this.isClosed) {\n            v = this.getPositionV3(1);\n        } else {\n            v = this.getPositionV3(l - 1);\n        }\n        this.next.set([v[0], v[1], v[0], v[1]], (l - 1) * 4);\n    };\n    \n    let usedIndices = 0;\n    const addIndices = () => {\n        for (let j = 0; j < l - 1; j++) {\n            if (this.connectivity[j] === MarkupsConstants.MESHLINE_PATH_END) {\n                continue;   // Do not add the rect between a path end and a path start\n            }\n            const n = j * 2;\n            this.indices_array.set(\n                [n, n + 1, n + 2,\n                n + 2, n + 1, n + 3], usedIndices);\n\n            usedIndices += 6;\n        }\n    };\n    \n    const setAttributes = () => {\n        if (!this.attributes) {\n            this.create();\n            this.attributes = {\n                position: new THREE.BufferAttribute(this.positions, 3),\n                previous: new THREE.BufferAttribute(this.previous, 2),\n                next: new THREE.BufferAttribute(this.next, 2),\n                side: new THREE.BufferAttribute(this.side, 1),\n                width: new THREE.BufferAttribute(this.width, 1),\n                index: new THREE.BufferAttribute(this.indices_array, 1),\n                counters: new THREE.BufferAttribute(this.counters, 1),\n            };\n\n            this.geometry.setAttribute('position', this.attributes.position);\n            this.geometry.setAttribute('previous', this.attributes.previous);\n            this.geometry.setAttribute('next', this.attributes.next);\n            this.geometry.setAttribute('side', this.attributes.side);\n            this.geometry.setAttribute('width', this.attributes.width);\n            this.geometry.setAttribute('index', this.attributes.index);\n            this.geometry.setAttribute('counters', this.attributes.counters);\n        } else {\n            this.attributes.position.array = this.positions;\n            this.attributes.position.needsUpdate = true;\n            this.attributes.previous.array = this.previous;\n            this.attributes.previous.needsUpdate = true;\n            this.attributes.next.array = this.next;\n            this.attributes.next.needsUpdate = true;\n            this.attributes.side.array = this.side;\n            this.attributes.side.needsUpdate = true;\n            this.attributes.width.array = this.width;\n            this.attributes.width.needsUpdate = true;\n            this.attributes.index.array = this.indices_array;\n            this.attributes.index.needsUpdate = true;\n            this.attributes.counters.array = this.counters;\n            this.attributes.counters.needsUpdate = true;\n        }\n    };\n    \n    if (srcLength === 0) {\n        setAttributes();\n        return;\n    }\n    \n    // If open (or joinType === MarkupsConstants.MESHLINE_PATH_ROUND_CAP, like polyline, because there are no endcaps when closed),\n    // need to add 1 vertex for each endcap.\n    if (!this.isClosed || this.options.joinType === MarkupsConstants.MESHLINE_PATH_ROUND_CAP) {\n        this.sourceConnectivity[0] = MarkupsConstants.MESHLINE_PATH_START;\n        this.sourceConnectivity[srcLength - 1] = MarkupsConstants.MESHLINE_PATH_END;\n    }\n\n    // Calculate number of vertices needed\n    // For each start / end in the middle, add another position\n    const l = srcLength + this.sourceConnectivity.reduce(x => x + 1, 0);\n\n    // Now init array beforehand.\n    // If array already exists, check if it's big enough, and if not, use heuristic to increase size\n    this.initArrays(l);\n\n    // Iterate through geoSource. Add multiple points when connectivity calls for it\n    // In the end, add prev, next, indices.\n    let j = 0;\n    for (let i = 0; i < srcLength; i++) {\n        if (this.sourceConnectivity[i] === MarkupsConstants.MESHLINE_PATH_START) {\n            const endType = (i === 0 && !this.isClosed) ? this.options.capType : this.options.joinType;\n            this.connectivity[j] = MarkupsConstants.MESHLINE_PATH_START;\n            addPosition(i, j++, -1, endType);\n            addPosition(i, j++, 0, endType);\n        } else if (this.sourceConnectivity[i] === MarkupsConstants.MESHLINE_PATH_END) {\n            const endType = (i === srcLength - 1 && !this.isClosed) ? this.options.capType : this.options.joinType;\n            addPosition(i, j++, 1, endType);\n            this.connectivity[j] = MarkupsConstants.MESHLINE_PATH_END;\n            addPosition(i, j++, 2, endType);\n        } else {\n            addPosition(i, j++, i / maxCount, MarkupsConstants.MESHLINE_PATH_DEFAULT);\n        }\n    }\n\n    addPrevious();\n    addNext();\n    addIndices();\n    setAttributes();\n\n    this.geometry.offsets[0] = {\n        index: 0,\n        start: 0,\n        count: usedIndices\n    };\n};\n\nexport function MeshLineMaterial( parameters ) {\n\n    function check( v, d ) {\n        if (v === undefined) return d;\n        return v;\n    }\n\n    THREE.Material.call( this );\n\n    parameters = parameters || {};\n\n    this.lineWidth = check( parameters.lineWidth, 1 );\n    this.miter = check( parameters.miter, true);\n    this.color = check( parameters.color, new THREE.Color( 0xffffff ) );\n    this.opacity = check( parameters.opacity, 1 );\n    this.resolution = check( parameters.resolution, new THREE.Vector2( 1, 1 ) );\n\n    const material = new THREE.RawShaderMaterial( {\n        uniforms:{\n            lineWidth: { type: 'f', value: this.lineWidth },\n            color: { type: 'c', value: this.color },\n            opacity: { type: 'f', value: this.opacity },\n            resolution: { type: 'v2', value: this.resolution },\n        },\n        vertexShader: vertexShader,\n        fragmentShader: fragShader,\n        attributes: {\n            previous: { type: 'v2', value: new THREE.Vector2() },\n            next: { type: 'v2', value: new THREE.Vector2() },\n            side: { type: 'f', value: 0 },\n            width: { type: 'f', value: 0 },\n            counters: { type: 'f', value: 0 }\n        }\n    });\n\n    material.type = 'MeshLineMaterial';\n    if (Autodesk.Viewing.isIE11) {\n        material.defines.IS_IE_11 = 1;\n    }\n    if (this.miter) {\n        material.defines.MITER = 1;\n    }\n    \n    delete parameters.lineWidth;\n    delete parameters.color;\n    delete parameters.opacity;\n    delete parameters.resolution;\n    delete parameters.miter;\n    \n    material.setValues( parameters );\n\n    return material;\n}\n\nMeshLineMaterial.prototype = Object.create( THREE.Material.prototype );\nMeshLineMaterial.prototype.constructor = MeshLineMaterial;\n\nMeshLineMaterial.prototype.copy = function(source) {\n\n    THREE.Material.prototype.copy.call(this, source);\n\n    this.lineWidth = source.lineWidth;\n    this.color.copy(source.color);\n    this.opacity = source.opacity;\n    this.resolution.copy(source.resolution);\n    this.miter = source.miter;\n\n    return this;\n};\n\n\n","// Reference: http://scaledinnovation.com/analytics/splines/aboutSplines.html\nfunction getControlPoints(x0, y0, x1, y1, x2, y2, tension = 0.333) {\n    //  x0,y0,x1,y1 are the coordinates of the end (knot) pts of this segment\n    //  x2,y2 is the next knot -- not connected here but needed to calculate p2\n    //  p1 is the control point calculated here, from x1 back toward x0.\n    //  p2 is the next control point, calculated here and returned to become the \n    //  next segment's p1.\n    //  t is the 'tension' which controls how far the control points spread.\n\n    //  Scaling factors: distances from this knot to the previous and following knots.\n    const d01 = Math.sqrt(Math.pow(x1 - x0,2) + Math.pow(y1 - y0,2));\n    const d12 = Math.sqrt(Math.pow(x2 - x1,2) + Math.pow(y2 - y1,2));\n\n    const fa = tension * d01 / (d01 + d12);\n    const fb = tension - fa;\n\n    const p1x = x1 + fa * (x0 - x2);\n    const p1y = y1 + fa * (y0 - y2);\n\n    const p2x = x1 - fb * (x0 - x2);\n    const p2y = y1 - fb * (y0 - y2);\n\n    return [{x: p1x, y: p1y}, {x: p2x, y: p2y}];\n}\n\nfunction calcQuadBezier(p0, p1, p2, t) {\n    const tt = t * t;\n    const u = 1 - t;\n    const uu = u * u;\n\n    let x = uu * p0.x;\n    x += 2 * u * t * p1.x;\n    x += tt * p2.x;\n    let y = uu * p0.y;\n    y += 2 * u * t * p1.y;\n    y += tt * p2.y;\n\n    return {x, y, z: 0};\n}\n\nfunction calcCubicBezier(p0, p1, p2, p3, t) {\n    const tt = t * t;\n    const ttt = tt * t;\n    const u = 1 - t;\n    const uu = u * u;\n    const uuu = uu * u;\n\n    let x = uuu * p0.x;\n    x += 3 * uu * t * p1.x;\n    x += 3 * u * tt * p2.x;\n    x += ttt * p3.x;\n    let y = uuu * p0.y;\n    y += 3 * uu * t * p1.y;\n    y += 3 * u * tt * p2.y;\n    y += ttt * p3.y;\n\n    return {x, y, z: 0};\n}\n\nconst calcPolygonLength = (() => {\n    const calcDistance = (p1 ,p2) => {\n        const dx = p1.x - p2.x;\n        const dy = p1.y - p2.y;\n        return Math.sqrt(dx * dx + dy * dy);\n    };\n    \n    return (points) => {\n        let length = 0;\n        \n        for (let i = 1; i < points.length; i++) {\n            length += calcDistance(points[i], points[i - 1]);\n        }\n\n        return length;\n    };\n})();\n\nfunction addQuadBezier(startPoint, control, endPoint, segmentSize, points, widths) {\n    const segments = Math.max(Math.round(calcPolygonLength([startPoint, control, endPoint]) / segmentSize), 4);\n    for (let i = 0; i < segments; i++) {\n        // Calculate the Bezier (x, y) coordinate for this step.\n        const t = i / segments;\n        const point = calcQuadBezier(startPoint, control, endPoint, t);\n        points.push(point);\n        widths && widths.push(startPoint.width + t * t * (endPoint.width - startPoint.width));\n    }\n}\n\nfunction addCubicBezier(startPoint, control1, control2, endPoint, segmentSize, points, widths) {\n    const segments = Math.max(Math.round(calcPolygonLength([startPoint, control1, control2, endPoint]) / segmentSize), 4);\n    for (let i = 0; i < segments; i++) {\n        // Calculate the Bezier (x, y) coordinate for this step.\n        const t = i / segments;\n        const point = calcCubicBezier(startPoint, control1, control2, endPoint, t);\n        points.push(point);\n        widths && widths.push(startPoint.width + t * t * t * (endPoint.width - startPoint.width));\n    }\n}\n\nexport default function penSmoothing(anchors, segmentSize, useVariableWidth) {\n    if (anchors.length < 3) {\n        return { anchors };\n    }\n    \n    let cp = [];\n    const finalAnchors = [];\n    const widths = useVariableWidth ? [] : null;\n    const n = anchors.length;\n    // Low pass filter to smooth uneven input - doesn't seem necessary when using simplify. Leaving it just in case.\n    // const alpha = 0.9;\n    // for (let i = 1; i < n - 1; i++){\n    //     anchors[i].x = anchors[i].x * alpha + (1 - alpha) * anchors[i - 1].x;\n    //     anchors[i].y = anchors[i].y * alpha + (1 - alpha) * anchors[i - 1].y;\n    // }\n    \n    // Calculate control points for bezier curves\n    for (let i = 0; i < n - 2; i++) {\n        cp = cp.concat(getControlPoints(anchors[i].x, anchors[i].y, anchors[i + 1].x, anchors[i + 1].y, anchors[i + 2].x, anchors[i + 2].y));\n    }\n\n    // First 2 points get a quadratic bezier (because need at least 3 points for a cubic one)\n    addQuadBezier(anchors[0], cp[0], anchors[1], segmentSize, finalAnchors, widths);\n\n    // Middle points get cubic beziers\n    for (let i = 1; i < n - 3; i++) {\n        addCubicBezier(anchors[i], cp[2 * i - 1], cp[2 * i], anchors[i + 1], segmentSize, finalAnchors, widths);\n    }\n\n    // Last 2 points get a quadratic bezier again\n    addQuadBezier(anchors[n - 2], cp[2 * n - 5], anchors[n - 1], segmentSize, finalAnchors, widths);\n    \n    // Since it's continuous, the quad and cubic functions don't add the last point\n    // (to avoid duplicating with the first point of the next curve), so need to add the very last point here.\n    finalAnchors.push(anchors[n - 1]);\n    widths && widths.push(anchors[n - 1].width);\n    \n    return { anchors: finalAnchors, widths };\n}","import GeometryUtils from '../Utils/GeometryUtils';\nimport LodashUtils from '../Utils/LodashUtils';\nimport * as MarkupsConstants from \"../MarkupsConstants\";\nimport * as MESHLINE from \"./MeshLine\";\nimport { isEqualVectors, createArc, createCloud, isClockwise, getArcAngleSize, handleIntersection } from \"../MarkupsCommon\";\nimport penSmoothing from \"./PenSmoothing\";\n\nexport default class MarkupsGeometryManager {\n    constructor(markupsExtension) {\n        this.markupsExtension = markupsExtension;\n\n        this.geoCache = {};\n    }\n\n    getStrokeGeometry(markup) {\n        if (this._isCacheSupported(markup.type)) {\n            return this._getCachedStrokeGeometry(markup.type);\n        } else {\n            if (MarkupsGeometryManager.areAllAnchorsEqual(markup.editState.anchors)) {\n                return this._createPointGeometry(markup);\n            }\n            return this._createStrokeGeometry(markup);\n        }\n    }\n\n    getFillGeometry(markup) {\n        switch (markup.type) {\n            case MarkupsConstants.MARKUP_TYPE_CLOUD:\n            case MarkupsConstants.MARKUP_TYPE_POLYCLOUD: {\n                const fill = { innerGeometry: this._getFillInnerGeometryFromAnchors(markup) };\n                if (markup.meshLine.type !== MarkupsConstants.MARKUP_TYPE_CIRCLE) {\n                    fill.arcGeometry = this._getFillCircleGeometry(markup.meshLine.radius);\n                    fill.fillGapGeometries = this._getFillingGapsGeometry(markup);\n                }\n                return fill;\n            }\n            case MarkupsConstants.MARKUP_TYPE_POLYLINE:\n                return this._getFillInnerGeometryFromAnchors(markup);\n            case MarkupsConstants.MARKUP_TYPE_CIRCLE:\n                return this._getFillCircleGeometry(0.5, 72);\n            case MarkupsConstants.MARKUP_TYPE_RECTANGLE:\n                return this._getFillRectangleGeometry();\n            default:\n                return null;\n        }\n    }\n\n    _getFillingGapsGeometry(markup) {\n        const fillGapGeometries = [];\n        for (let i = 0; i < markup.meshLine.intersectionObjects.length; i++) {\n            const { beginPoint, endPoint, newCircle, anchorPoint, beginCircle, endCircle } = markup.meshLine.intersectionObjects[i];\n\n            if (!beginPoint || !endPoint || !anchorPoint || !beginCircle || !endCircle || !newCircle) {\n                return null;\n            }\n\n            const vertices = [];\n            vertices.push(new THREE.Vector3(anchorPoint.x, anchorPoint.y, 0));\n            vertices.push(new THREE.Vector3(beginCircle.x, beginCircle.y, 0));\n            vertices.push(new THREE.Vector3(beginPoint.x, beginPoint.y, 0));\n            vertices.push(new THREE.Vector3(newCircle.x, newCircle.y, 0));\n            vertices.push(new THREE.Vector3(endPoint.x, endPoint.y, 0));\n            vertices.push(new THREE.Vector3(endCircle.x, endCircle.y, 0));\n\n            fillGapGeometries.push(new THREE.ShapeGeometry(new THREE.Shape(vertices)));\n        }\n        return fillGapGeometries;\n    }\n\n    _getFillCircleGeometry(radius, segments = 12) {\n        const hashName = 'circle-fill|r:' + radius + '|s:' + segments;\n        if (!this.geoCache[hashName]) {\n            this.geoCache[hashName] = new THREE.CircleGeometry(radius, segments);\n        }\n        return this.geoCache[hashName];\n    }\n\n    _getFillRectangleGeometry() {\n        const hashName = 'rectangle-fill';\n        if (!this.geoCache[hashName]) {\n            this.geoCache[hashName] = new THREE.PlaneBufferGeometry(1, 1, 1, 1);\n        }\n        return this.geoCache[hashName];\n    }    \n\n    _getFillInnerGeometryFromAnchors(markup) {\n        if (markup.meshLine.type === MarkupsConstants.MARKUP_TYPE_CIRCLE) {\n            return this._getFillCircleGeometry(0.5, 10);\n        }\n        var anchors = LodashUtils.cloneDeep(markup.getAnchors());\n        this._centerAndScaleLocations(anchors, markup.center, markup.scaleMatrix);\n        if (markup.meshLine.type === MarkupsConstants.MARKUP_TYPE_CLOUD) {\n            this._shiftAnchorsInsideBox(markup, anchors, markup.meshLine.radius);\n        }\n        return anchors.length > 2 ? new THREE.ShapeGeometry(new THREE.Shape(anchors)) : null;\n    }\n\n    _getCachedStrokeGeometry(type) {\n        const hashName = type;\n        if (!this.geoCache[hashName]) {\n            this.geoCache[hashName] = this._createCachedStrokeGeometry(type);\n        }\n\n        return this.geoCache[hashName];\n    }\n\n    _isCacheSupported(type) {\n        const supportedTypes = [MarkupsConstants.MARKUP_TYPE_RECTANGLE, MarkupsConstants.MARKUP_TYPE_CIRCLE];\n        return supportedTypes.includes(type);\n    }\n\n    isCachedGeometry(meshLine) {\n        for (const key in this.geoCache) {\n            if (meshLine === this.geoCache[key]) {\n                return true;\n            }\n        }\n        \n        return false;\n    }\n\n    _createCachedStrokeGeometry(type) {\n        switch (type) {\n            case MarkupsConstants.MARKUP_TYPE_RECTANGLE:\n                return this._createRectangleStrokeGeometry();\n            case MarkupsConstants.MARKUP_TYPE_CIRCLE:\n                return this._createCircleStrokeGeometry();\n            default:\n                return null;\n        }\n    }\n \n    _createStrokeGeometry(markup) {\n        switch (markup.type) {\n            case MarkupsConstants.MARKUP_TYPE_CLOUD:\n            case MarkupsConstants.MARKUP_TYPE_POLYCLOUD: {\n                let geo = this._createCloudGeometry(markup);\n                if (!geo) {\n                    geo = this._getCachedStrokeGeometry(MarkupsConstants.MARKUP_TYPE_CIRCLE);\n                }\n                return geo;\n            }\n            case MarkupsConstants.MARKUP_TYPE_POLYLINE:\n            case MarkupsConstants.MARKUP_TYPE_LINE:\n                return this._createLineGeometry(markup, 179);\n            case MarkupsConstants.MARKUP_TYPE_FREEHAND:\n            case MarkupsConstants.MARKUP_TYPE_HIGHLIGHT:\n                return this._createLineGeometry(markup, 120);\n            case MarkupsConstants.MARKUP_TYPE_ARROW:\n                return this._createArrowGeometry(markup);\n            case MarkupsConstants.MARKUP_TYPE_DIMENSION:\n                return this._createDimensionGeometry(markup);\n            default:\n                return null;\n        }\n    }\n\n    _createPointGeometry(markup) {\n        let capType, width;\n        \n        switch (markup.type) {\n            case MarkupsConstants.MARKUP_TYPE_CLOUD:\n            case MarkupsConstants.MARKUP_TYPE_POLYCLOUD:\n            case MarkupsConstants.MARKUP_TYPE_FREEHAND:\n            case MarkupsConstants.MARKUP_TYPE_HIGHLIGHT:\n                capType = MarkupsConstants.MESHLINE_PATH_ROUND_CAP;\n                width = MarkupsConstants.POINT_SIZE_IN_MM * this.markupsExtension.renderer.mmToWorldUnitFactor;\n                break;\n            default:\n                capType = MarkupsConstants.MESHLINE_PATH_FLAT_CAP;\n                width = this.markupsExtension.renderer.getNormaStrokeWidth();\n                break;\n        }\n\n        const geometry = [\n            { x: 0.0, y: 0.0, z: 0.0 },\n            { x: width, y: 0.0, z: 0.0 }\n        ];\n\n        return this._createMeshLine(geometry, markup.type, markup, null, { capType });\n    }\n\n    _createMeshLine(geometry, type, markup, connectivity, options = {}, widthCB = null) {\n        let meshLine;\n        if (markup) {\n            meshLine = markup.meshLine;\n            options.useExactSize = markup.completed;\n        } else {\n            options.useExactSize = true; // For a cached geometry\n        }\n\n        if (!meshLine || meshLine.type !== type) {\n            meshLine = new MESHLINE.MeshLine(this.markupsExtension.renderer.supportsInt32Index());\n        }\n        \n        meshLine.type = type;\n        meshLine.setGeometry(geometry, widthCB, connectivity, options);\n        \n        return meshLine;\n    }\n\n    _createRectangleStrokeGeometry() {\n        const geometry = [\n            { x: -0.5, y: -0.5, z: 0},\n            { x: 0.5, y: -0.5, z: 0},\n            { x: 0.5, y: 0.5, z: 0},\n            { x: -0.5, y: 0.5, z: 0},\n            { x: -0.5, y: -0.5, z: 0}\n        ];\n\n        return this._createMeshLine(geometry, MarkupsConstants.MARKUP_TYPE_RECTANGLE, null, null, { isClosed: true });\n    }\n\n    _createCircleStrokeGeometry() {\n        const geometry = createArc(0, 0, 0.5, 0, 2 * Math.PI, false, 72);\n        return this._createMeshLine(geometry, MarkupsConstants.MARKUP_TYPE_CIRCLE, null, null, { isClosed: true });\n    }\n    \n    _centerAndScaleLocations(locations, center, scale) {\n        locations.forEach((location) => {\n            location.sub(center);\n            location.applyMatrix4(scale);\n        });\n    }\n\n    _createLineGeometry(markup, limitDegrees = 29) {\n        const isPen = markup.type === MarkupsConstants.MARKUP_TYPE_FREEHAND || markup.type === MarkupsConstants.MARKUP_TYPE_HIGHLIGHT;\n        let anchors = LodashUtils.cloneDeep(markup.getEditState().anchors);\n        \n        this._centerAndScaleLocations(anchors, markup.center, markup.scaleMatrix);\n\n        let connectivity = [], widths = null;\n        if (markup.editState.closed) {\n            anchors.push(anchors[0]);\n        }\n\n        if (isPen) {\n            const segmentSize = 0.5 * markup.markupsExtension.renderer.mmToWorldUnitFactor;\n            const useVariableWidth = false; //markup.type === MarkupsConstants.MARKUP_TYPE_FREEHAND && anchors[0] && anchors[0].width !== undefined; // TODO define width location in state\n            const smoothie = penSmoothing(anchors, segmentSize, useVariableWidth);\n            anchors = smoothie.anchors;\n            widths = smoothie.widths;\n        }\n        \n        // Use a joinType if miter will be too long. Default limit taken from:\n        // https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-miterlimit\n        const prev = new THREE.Vector3();\n        const next = new THREE.Vector3();\n        const limit = Math.cos(limitDegrees * Math.PI / 180);\n\n        for (let i = 1; i < anchors.length - 1; i++) {\n            prev.copy(anchors[i - 1]).sub(anchors[i]).normalize();\n            next.copy(anchors[i + 1]).sub(anchors[i]).normalize();\n            if (next.dot(prev) > limit) {\n                anchors.splice(i, 0, anchors[i]); // Adding a repeated point for the join\n                widths && widths.splice(i, 0, widths[i]);\n                connectivity[i] = MarkupsConstants.MESHLINE_PATH_END;\n                i++;\n            }\n        }\n\n        if (markup.editState.closed) {\n            prev.copy(anchors[anchors.length - 2]).sub(anchors[anchors.length - 1]).normalize();\n            next.copy(anchors[1]).sub(anchors[0]).normalize();\n            if (next.dot(prev) > limit) {\n                anchors.push(anchors[0]);\n                widths && widths.push(widths[0]);\n            }\n        }        \n\n        return this._createMeshLine(anchors, markup.type, markup, connectivity, { \n            capType: isPen ? MarkupsConstants.MESHLINE_PATH_ROUND_CAP : MarkupsConstants.MESHLINE_PATH_FLAT_CAP,\n            joinType: MarkupsConstants.MESHLINE_PATH_ROUND_CAP,\n            isClosed: markup.editState.closed }, widths);\n    }\n\n    _createArrowGeometry(markup) { // Can probably be cached\n        const t = markup.editState.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS];\n\n        const anchors = LodashUtils.cloneDeep(markup.getEditState().anchors);\n        // Actual anchors\n        anchors[0].sub(markup.center); // Tail\n        anchors[1].sub(markup.center); // Head\n\n        const line = anchors[1].clone().sub(anchors[0]);\n\n        const eyeVec = this.markupsExtension.renderer.getCameraEyeVector();\n        const tipLength = Math.min(t * MarkupsConstants.ARROW_TIP_LENGTH, line.length() / 2); // If the line length is short, then reduce tip length.\n\n        let connectivity = [];\n\n        // If the tip length is smaller than the thickness, don't render it at all.\n        const withTip = tipLength > t;\n        if (withTip) {\n            const lineDirection = line.clone().normalize();\n            const p = anchors[1].clone().sub(lineDirection.multiplyScalar(tipLength));\n            const angle = GeometryUtils.degreesToRadians(30);\n\n            anchors[2] = p.clone();\n            GeometryUtils.applyRotation(anchors[2], angle, anchors[1], eyeVec);\n\n            anchors[3] = anchors[1].clone();\n\n            anchors[4] = p.clone();\n            GeometryUtils.applyRotation(anchors[4], -angle, anchors[1], eyeVec);\n            \n            connectivity[1] = MarkupsConstants.MESHLINE_PATH_END;\n            connectivity[2] = MarkupsConstants.MESHLINE_PATH_START;\n        }\n\n        const meshLine = this._createMeshLine(anchors, markup.type, markup, connectivity);\n\n        // Find bounding points (for accurate bounding box). Needs to take into the account the arrow head\n        if (withTip) {\n            anchors[0].add(markup.center);\n            anchors[1].add(markup.center);\n            anchors[2].add(markup.center);\n            anchors[4].add(markup.center);\n\n            meshLine.boundingPoints = [anchors[0], anchors[2], anchors[1], anchors[4]];\n        }\n\n        return meshLine;\n    }\n\n    _createDimensionGeometry(markup) {\n        const thickness = markup.editState.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS] * MarkupsConstants.DIMENSION_THICKNESS_FACTOR;\n\n        const anchors = LodashUtils.cloneDeep(markup.getEditState().anchors);\n\n        let points = [];\n        let connectivity = [];\n\n        function addSingleSegment(p1, p2) {\n            points = points.concat([p1, p2]);\n            connectivity = connectivity.concat([\n                MarkupsConstants.MESHLINE_PATH_START,\n                MarkupsConstants.MESHLINE_PATH_END\n            ]);\n        }\n\n        // Actual anchors\n        anchors[0].sub(markup.center); // firstAnchor\n        anchors[1].sub(markup.center); // secondAnchor\n\n        addSingleSegment(anchors[0], anchors[1]);\n\n        const lineDirection = anchors[0].clone().sub(anchors[1]);\n        const eyeVec = this.markupsExtension.renderer.getCameraEyeVector();\n        const normal = lineDirection.clone().cross(eyeVec).normalize();\n        const tipLength = thickness * MarkupsConstants.DIMENSION_TIP_LENGTH;\n        const halfTip = normal.clone().multiplyScalar(tipLength);\n        const angle = GeometryUtils.degreesToRadians(45);\n\n        // diagonal tip\n        anchors[2] = anchors[0].clone().add(halfTip);\n        anchors[3] = anchors[0].clone().sub(halfTip);\n        GeometryUtils.applyRotation([anchors[2], anchors[3]], angle, anchors[0], eyeVec);\n        addSingleSegment(anchors[2], anchors[3]);\n\n        // diagonal tip\n        anchors[4] = anchors[1].clone().add(halfTip);\n        anchors[5] = anchors[1].clone().sub(halfTip);\n        GeometryUtils.applyRotation([anchors[4], anchors[5]], angle, anchors[1], eyeVec);\n        addSingleSegment(anchors[4], anchors[5]);\n\n        // Dashed line\n        anchors[6] = anchors[0].clone();\n        markup.applyInverseScaleAndTranslation(anchors[6]); // Dashed line start\n        if (!isEqualVectors(anchors[6], anchors[0])) {\n            anchors[7] = anchors[0].clone().sub(anchors[0].clone().sub(anchors[6]).normalize().multiplyScalar(tipLength)); // Dashed line end\n            addSingleSegment(anchors[6], anchors[7]);\n        }\n\n        // Dashed line\n        anchors[8] = anchors[1].clone();\n        markup.applyInverseScaleAndTranslation(anchors[8]); // Dashed line start\n        if (!isEqualVectors(anchors[8], anchors[1])) {\n            anchors[9] = anchors[1].clone().sub(anchors[1].clone().sub(anchors[8]).normalize().multiplyScalar(tipLength)); // Dashed line end\n            addSingleSegment(anchors[8], anchors[9]);\n        }\n\n        // straight tip\n        anchors[10] = anchors[0].clone().add(halfTip);\n        anchors[11] = anchors[0].clone().sub(halfTip);\n        addSingleSegment(anchors[10], anchors[11]);\n\n        // straight tip\n        anchors[12] = anchors[1].clone().add(halfTip);\n        anchors[13] = anchors[1].clone().sub(halfTip);\n        addSingleSegment(anchors[12], anchors[13]);\n\n        return this._createMeshLine(points, markup.type, markup, connectivity);\n    }\n\n    _createCloudGeometry(markup) {\n        const anchors = LodashUtils.cloneDeep(markup.getEditState().anchors);\n\n        if (isClockwise(anchors, markup)) {\n            anchors.reverse();\n        }\n\n        const radius = this.getCloudMinimumRadius(markup.editState.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS]);\n        const radiusInMM = radius / this.markupsExtension.renderer.mmToWorldUnitFactor;\n\n        this._centerAndScaleLocations(anchors, markup.center, markup.scaleMatrix);\n\n        let isClosed = markup.editState.closed;\n        let boundingBox;\n        if (markup.type === MarkupsConstants.MARKUP_TYPE_CLOUD) {\n            isClosed = true;\n            const isShift = this._shiftAnchorsInsideBox(markup, anchors, radius);\n            if (!isShift) {\n                return null;\n            }\n        } else { // Polycloud\n            boundingBox = new THREE.Box3();\n            boundingBox.min.z = boundingBox.max.z = 0;\n        }\n\n        var intersectionObjects = handleIntersection(anchors, radius);\n\n        const arcs = createCloud(anchors, radius, isClosed, intersectionObjects);\n\n        if (arcs.length === 0) {\n            return null;\n        }\n\n        const path = [];\n        const connectivity = [];\n        let prevPathLength = 0;\n\n        for (let i = 0; i < arcs.length; i++) {\n            const curr = arcs[i];\n            // Hide circle if an anchor's circle is larger that 342 degrees\n            if (curr.isAnchor) {\n                const angleSize = getArcAngleSize(curr);\n                if (angleSize > Math.PI * 1.9) {\n                    curr.begin = curr.end;\n                }\n            }\n            createArc(curr.x, curr.y, radius, curr.begin, curr.end, false, null, path, radiusInMM, boundingBox);\n            const length = path.length - prevPathLength;\n            connectivity[prevPathLength] = MarkupsConstants.MESHLINE_PATH_START;\n            connectivity[prevPathLength + length - 1] = MarkupsConstants.MESHLINE_PATH_END;\n            prevPathLength += length;\n        }\n\n        const meshLine = this._createMeshLine(path, markup.type, markup, connectivity, {\n            capType: MarkupsConstants.MESHLINE_PATH_ROUND_CAP,\n            joinType: MarkupsConstants.MESHLINE_PATH_ROUND_CAP\n        });\n        meshLine.arcs = arcs;\n        meshLine.radius = radius;\n        meshLine.intersectionObjects = intersectionObjects;\n\n        if (boundingBox) { // Polycloud\n            boundingBox.applyMatrix4(markup.invScaleMatrix);\n            boundingBox.translate(markup.center);\n            // Store the 4 corners of the bounding box, so if it's rotated later on we get the proper bounds\n            meshLine.boundingPoints = [boundingBox.min.clone(), boundingBox.max.clone(), boundingBox.max.clone(), boundingBox.min.clone()];\n            meshLine.boundingPoints[1].y = boundingBox.min.y;\n            meshLine.boundingPoints[3].y = boundingBox.max.y;\n        }\n\n        return meshLine;\n    }\n\n    _shiftAnchorsInsideBox(markup, anchors, radius) {\n        const rightVec = anchors[0].clone().sub(anchors[1]).normalize();\n        const upVec = anchors[2].clone().sub(anchors[1]).normalize();\n\n        const width = anchors[0].distanceTo(anchors[1]) / 2;\n        const height = anchors[2].distanceTo(anchors[1]) / 2;\n\n        if (height < radius || width < radius) {\n            return false;\n        }\n\n        for (let i = 0; i < anchors.length; i++) {\n            // Shift anchors inside bounding box\n            const anchor = anchors[i];\n\n            let dist = radius * Math.sign(anchor.dot(upVec));\n            anchor.sub(upVec.clone().multiplyScalar(dist));\n\n            dist = radius * Math.sign(anchor.dot(rightVec));\n            anchor.sub(rightVec.clone().multiplyScalar(dist));\n        }\n\n        return true;\n    }\n\n    getCloudMinimumRadius(thickness) {\n        const minRadius = this.markupsExtension.renderer.mmToWorldUnitFactor * (this.markupsExtension.viewer.impl.is2d ? 1 : 10);\n        return Math.max(thickness * 3, minRadius);\n    }\n    \n    static areAllAnchorsEqual(anchors) {\n        const first = anchors[0];\n\n        for (let i = 1; i < anchors.length; i++) {\n            if (!anchors[i].equals(first)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    destroy() {\n        for (const key in this.geoCache) {\n            this.geoCache[key].dispose();\n        }\n        this.geoCache = null;\n    }\n}\n","import GeometryUtils from '../Utils/GeometryUtils';\nimport LodashUtils from '../Utils/LodashUtils';\nimport * as MarkupsConstants from '../MarkupsConstants';\nimport { MARKUPS_EVENTS } from '../MarkupsEvents';\nimport SelectionHandler from '../EditHandlers/SelectionHandler';\nimport TranslationHandler from '../EditHandlers/TranslationHandler';\nimport AnchorHandler from '../EditHandlers/AnchorHandler';\nimport RotationHandler from '../EditHandlers/RotationHandler';\nimport ScaleHandler from '../EditHandlers/ScaleHandler';\nimport TextInputHandler from '../EditHandlers/TextInputHandler';\nimport DimensionEditHandler from '../EditHandlers/DimensionEditHandler';\nimport CreationHandlerFactory from '../EditHandlers/CreationHandlers/CreationHandlerFactory';\nimport MarkupsGeometryManager from \"../RendererHelpers/MarkupsGeometryManager\";\n\nconst av = Autodesk.Viewing;\n\nexport default class Markup {\n    constructor(markupsExtension, id, type, state, options = {}) {\n        this.setGlobalManager(markupsExtension.globalManager);\n        this.id = id;\n        this.type = type;\n        this.options = options;\n        this.markupsExtension = markupsExtension;\n        this.materialManager = this.markupsExtension.renderer.materialManager;\n\n        this.layer = null;\n\n        this.meshContainer = null;\n        this.strokeMaterial = null;\n        this.fillMaterial = null;\n        this.center = new THREE.Vector3();\n\n        this.matrix = new THREE.Matrix4();\n        this.invMatrix = new THREE.Matrix4();\n        this.scaleMatrix = new THREE.Matrix4();\n        this.invScaleMatrix = new THREE.Matrix4();\n\n        // Whether the markup creation has been ended successfully.\n        this.completed = false;\n\n        // Whether the markup is selected.\n        this.selected = false;\n\n        // Whether the markup is in edit mode.\n        this.inEdit = false;\n\n        // Whether the markup is enabled for touch.\n        this.enabled = true;\n\n        // Whether the markup is transparent.\n        this.transparent = false;\n\n        // Whether the markup is visible.\n        this.visible = false;\n\n        // Whether the markup is being hovered or not.\n        this.hover = false;\n        \n        // To prevent infinite recursion when changing group's edit state\n        this.locked = false;\n\n        this.state = this.getDefaultState();\n        this.state.anchors = this.getDefaultAnchors();\n        this.state.style = this.getDefaultStyle();\n\n        if (state) {\n            Object.assign(this.state, state);\n        }\n\n        this.state.translation = this.state.translation || new THREE.Vector3();\n        this.state.rotation = this.state.rotation || 0;\n        this.state.scale = this.state.scale || new THREE.Vector3(1.0, 1.0, 1.0);\n\n        this.editState = LodashUtils.cloneDeep(this.state);\n        this.updateMatrix();\n\n        this.registerSelectionHandler();\n\n        this.creationHandler = CreationHandlerFactory.getCreationHandler(this.type, this.markupsExtension, this, options);\n    }\n\n    updateMatrix() {\n        this.scaleMatrix.makeScale(this.editState.scale.x, this.editState.scale.y, this.editState.scale.z);\n\n        this.matrix.copy(this.scaleMatrix);\n        this.matrix.setPosition(this.editState.translation);\n        this.invMatrix.getInverse(this.matrix);\n        this.invScaleMatrix.getInverse(this.scaleMatrix);\n        this.updateCenter();\n    }\n\n    updateCenter() {\n        if (this.editState.anchors.length === 0) { return; }\n\n        let max = new THREE.Vector3().set(-Infinity, -Infinity, -Infinity);\n        let min = new THREE.Vector3().set(Infinity, Infinity, Infinity);\n        this.editState.anchors.forEach((anchor) => {\n            max = max.max(anchor);\n            min = min.min(anchor);\n        });\n\n        this.center.x = (max.x + min.x) / 2;\n        this.center.y = (max.y + min.y) / 2;\n    }\n\n    getDefaultState() {\n        return {};\n    }\n\n    getDefaultAnchors() {\n        return [];\n    }\n\n    getDefaultStyle() {\n        return {\n            [MarkupsConstants.STYLE_PROPERTIES.COLOR]: this.markupsExtension.getStyleProperty(MarkupsConstants.STYLE_PROPERTIES.LAST_COLOR),\n            [MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE]: this.markupsExtension.getStyleProperty(MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE),\n            [MarkupsConstants.STYLE_PROPERTIES.FONT_WEIGHT]: this.markupsExtension.getStyleProperty(MarkupsConstants.STYLE_PROPERTIES.FONT_WEIGHT),\n            [MarkupsConstants.STYLE_PROPERTIES.FONT_FAMILY]: this.markupsExtension.getStyleProperty(MarkupsConstants.STYLE_PROPERTIES.FONT_FAMILY),\n            [MarkupsConstants.STYLE_PROPERTIES.FONT_STYLE]: this.markupsExtension.getStyleProperty(MarkupsConstants.STYLE_PROPERTIES.FONT_STYLE),\n            [MarkupsConstants.STYLE_PROPERTIES.FONT_COLOR]: this.markupsExtension.getStyleProperty(MarkupsConstants.STYLE_PROPERTIES.FONT_COLOR),\n            [MarkupsConstants.STYLE_PROPERTIES.THICKNESS]: this.markupsExtension.getStyleProperty(MarkupsConstants.STYLE_PROPERTIES.THICKNESS),\n            [MarkupsConstants.STYLE_PROPERTIES.FILL_OPACITY]: this.markupsExtension.getStyleProperty(MarkupsConstants.STYLE_PROPERTIES.FILL_OPACITY),\n            [MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR]: this.markupsExtension.getStyleProperty(MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR),\n            [MarkupsConstants.STYLE_PROPERTIES.OPACITY]: this.markupsExtension.getStyleProperty(MarkupsConstants.STYLE_PROPERTIES.OPACITY),\n        };\n    }\n\n    getState() {\n        return this.state;\n    }\n\n    setState(state) {\n        this.state = LodashUtils.cloneDeep(state);\n\n        this.rotatedBoundingBox = null;\n        this.boundingBox = null;\n    }\n\n    getEditState() {\n        return this.editState;\n    }\n\n    setEditState(editState, changes, source) {\n        const prevState = this.editState;\n        \n        if (changes) {\n            this.editState = Object.assign({}, editState, changes);\n        } else {\n            this.editState = LodashUtils.cloneDeep(editState);\n        }\n\n        this.updateMatrix();\n        \n        this.rotatedBoundingBox = null;\n        this.boundingBox = null;\n        \n        if (this.visible && this.markupsExtension.renderer) {\n            this.render(changes);\n        }\n\n        if (this.belongsToGroup() && !this.isLocked()) {\n            this.syncGroup(prevState, this.editState, changes, source);\n        }\n    }\n    \n    isLocked() {\n        return this.locked;\n    }\n    \n    setLocked(isLocked) {\n        this.locked = isLocked;\n    }    \n\n    render(state) {\n        if (!this.meshContainer) {\n            this.meshContainer = new THREE.Group();\n            this.markupsExtension.renderer.addToScene(this);\n        }\n    }\n\n    syncEditState() {\n        this.setEditState(this.getState());\n    }\n\n    syncState() {\n        this.setState(this.getEditState());\n    }\n    \n    syncGroup(prevState, newState, changes, source) {\n        this.markupGroup.rotatedBoundingBox = null;\n        this.markupGroup.boundingBox = null;\n        if (changes) {\n            this.markupGroup.syncGroupMarkups(this, prevState, newState, changes, source);\n        }\n    }\n\n    select() {\n        if (this.layer && !this.markupsExtension.permissionManager.canEditMarkup(this.layer.layerData)) {\n            return;\n        }\n\n        this.selected = true;\n        this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_SELECTED, markup: this });\n\n        this.enableEdit();\n        \n        if (this.belongsToGroup() && !this.markupGroup.locked) {\n            this.markupGroup.select(this);\n        }\n    }\n\n    deselect() {\n        this.selected = false;\n        this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_DESELECTED, markup: this });\n\n        this.disableEdit();\n    }\n\n    setVisible(isVisible, forceSet) {\n        if (this.visible !== isVisible || forceSet) {\n            this.visible = isVisible;\n\n            if (this.meshContainer) {\n                this.meshContainer.visible = isVisible;\n            }\n    \n            if (this.markupsExtension.renderer) {\n                if (this.visible) {\n                    this.render();\n                } else {\n                    this.markupsExtension.renderer.invalidate();\n                }\n            }\n    \n            this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_VISIBILITY_CHANGED, markup: this, visible: isVisible });\n        }\n    }\n\n    isVisible() {\n        return this.visible;\n    }\n\n    isSelected() {\n        return this.selected;\n    }\n\n    enableEdit() {\n        this.inEdit = true;\n        this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_ENABLE_EDIT, markup: this });\n        this.setDirty();\n    }\n\n    disableEdit() {\n        this.inEdit = false;\n        this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_DISABLE_EDIT, markup: this });\n        this.setDirty();\n    }\n\n    enable() {\n        this.enabled = true;\n\n        this.changeTransparency(false);\n    }\n\n    disable() {\n        this.enabled = false;\n\n        this.changeTransparency(true);\n    }\n\n    isEnabled() {\n        return this.enabled;\n    }\n\n    changeTransparency(transparent) {\n        if (this.transparent !== transparent) {\n            this.transparent = transparent;\n\n            if (this.visible && this.markupsExtension.renderer) {\n                this.render({ style: {} });\n            }\n\n            this.setDirty();\n        }\n    }\n\n    isTransparent() {\n        return this.transparent;\n    }\n\n    setHover(hover) {\n        if (this.hover !== hover) {\n            this.hover = hover;\n\n            if (this.belongsToGroup() && !this.markupGroup.locked) {\n                this.markupGroup.setHover(hover, this);\n            }\n            this.setDirty();\n        }\n    }\n\n    isHovered() {\n        return this.hover;\n    }\n\n    isInEdit() {\n        return this.inEdit;\n    }\n\n    setDirty() {\n        this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_DIRTY, markup: this });\n    }\n\n    isCompleted() {\n        return this.completed;\n    }\n\n    complete() {\n        this.completed = true;\n\n        if (this.selectWhenCompleted()) {\n            this.select();\n        } else {\n            this.setDirty();\n        }\n\n        if (this.visible && this.markupsExtension.renderer) {\n            this.render();\n        }\n\n        this.markupsExtension.markupsManager.selectLayer(this.layer, false, false);\n    }\n\n    selectWhenCompleted() {\n        return true;\n    }\n\n    registerAnchorHandler(options) {\n        this.anchorHandler = new AnchorHandler(this.markupsExtension, this, options);\n    }\n\n    registerTranslationHandler(options) {\n        this.translationHandler = new TranslationHandler(this.markupsExtension, this, options);\n    }\n\n    registerRotationHandler(options) {\n        this.rotationHandler = new RotationHandler(this.markupsExtension, this, options);\n    }\n\n    registerScaleHandler(options) {\n        this.scaleHandler = new ScaleHandler(this.markupsExtension, this, options);\n    }\n\n    registerSelectionHandler(options) {\n        this.selectionHandler = new SelectionHandler(this.markupsExtension, this, options);\n    }\n\n    registerTextInputHandler(options) {\n        this.textInputHandler = new TextInputHandler(this.markupsExtension, this, options);\n    }\n\n    registerDimensionEditHandler(options) {\n        this.dimensionEditHandler = new DimensionEditHandler(this.markupsExtension, this, options);\n    }\n\n    applyCameraRotation(point) {\n        const cameraRotation = this.markupsExtension.renderer.getCameraRotation();\n        const eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();\n        GeometryUtils.applyRotation(point, cameraRotation, this.getWorldCenter(), eyeDirection);\n    }\n\n    applyInverseCameraRotation(point) {\n        const cameraRotation = this.markupsExtension.renderer.getCameraRotation();\n        const eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();\n        GeometryUtils.applyRotation(point, -cameraRotation, this.getWorldCenter(), eyeDirection);\n    }\n\n    applyInverseRotation(point) {\n        const rotation = this.getRotation();\n        if (rotation === 0) {\n            return;\n        }\n\n        const eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();\n        GeometryUtils.applyRotation(point, -rotation, this.getWorldCenter(), eyeDirection);\n    }\n\n    applyRotation(point) {\n        const rotation = this.getRotation();\n        if (rotation === 0) {\n            return;\n        }\n\n        const eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();\n        GeometryUtils.applyRotation(point, rotation, this.getWorldCenter(), eyeDirection);\n    }\n\n    applyRotationForAnchors(anchors) {\n        const rotation = this.getRotation();\n        if (rotation === 0) {\n            return;\n        }\n\n        const eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();\n        const center = this.getWorldCenter();\n        anchors.forEach((anchor) => {\n            GeometryUtils.applyRotation(anchor, rotation, center, eyeDirection);\n        });\n    }\n\n    applyScaleAndTranslation(point) {\n        point.sub(this.center);\n        point.applyMatrix4(this.matrix);\n        point.add(this.center);\n    }\n\n    applyInverseScaleAndTranslation(point) {\n        point.sub(this.center);\n        point.applyMatrix4(this.invMatrix);\n        point.add(this.center);\n    }\n\n    calculateWorldBoundingBox(rotate) {\n        const boundingBox = new THREE.Box3();\n        let anchors;\n        if (this.meshLine && this.meshLine.boundingPoints) {\n            anchors = LodashUtils.cloneDeep(this.meshLine.boundingPoints);\n        } else {\n            anchors = LodashUtils.cloneDeep(this.editState.anchors);\n        }\n\n        anchors.forEach((anchor) => {\n            this.applyScaleAndTranslation(anchor);\n        });\n\n        if (rotate) {\n            this.applyRotationForAnchors(anchors);\n        }\n\n        anchors.forEach((anchor) => {\n            boundingBox.expandByPoint(anchor);\n        });\n\n        const halfThickness = this.editState.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS] / 2;\n        boundingBox.expandByVector(new THREE.Vector3(halfThickness, halfThickness, 0));\n\n        return boundingBox;\n    }\n\n    // If you need to change the bounding box after getting it, make sure to clone it first!\n    getWorldBoundingBox(rotate) {\n        if (rotate) {\n            if (!this.rotatedBoundingBox) {\n                this.rotatedBoundingBox = this.calculateWorldBoundingBox(rotate);\n            }\n            return this.rotatedBoundingBox;\n        } else {\n            if (!this.boundingBox) {\n                this.boundingBox = this.calculateWorldBoundingBox(rotate);\n            }\n            return this.boundingBox;\n        }\n    }\n\n    getClientBoundingBox(withMargin, rotate) {\n        const boundingBox = this.getWorldBoundingBox(rotate).clone();\n\n        boundingBox.min = this.markupsExtension.renderer.worldToClient(boundingBox.min);\n        boundingBox.max = this.markupsExtension.renderer.worldToClient(boundingBox.max);\n\n        const eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();\n        const center = boundingBox.getCenter();\n\n        const cameraRotation = this.markupsExtension.renderer.getCameraRotation();\n\n        GeometryUtils.applyRotation(boundingBox.min, cameraRotation, center, eyeDirection);\n        GeometryUtils.applyRotation(boundingBox.max, cameraRotation, center, eyeDirection);\n\n        GeometryUtils.swapBoundingBoxY(boundingBox);\n\n        if (withMargin) {\n            const margin = this.getMarginSize();\n            boundingBox.expandByVector(new THREE.Vector3(margin, margin, 0));\n        }\n\n        boundingBox.min.z = 0;\n        boundingBox.max.z = 0;\n\n        return boundingBox;\n    }\n\n    getMarginSize() {\n        return MarkupsConstants.BOUNDING_BOX_MARGIN;\n    }\n\n    // Returns minimum size in client coordinates\n    getMinimumSize() {\n        return Math.max(this.markupsExtension.renderer.sizeFromWorldToClient(this.editState.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS]), this.getMarginSize()); \n    }\n\n    getCenter() {\n        return this.center;\n    }\n\n    setPosition() {\n        const translation = this.center.clone().add(this.editState.translation);\n        this.meshContainer.position.copy(translation);\n    }\n\n    setRotation() {\n        this.meshContainer.rotation.z = this.editState.rotation * this.markupsExtension.renderer.getCameraEyeVector().z;\n    }\n\n    getWorldCenter() {\n        return this.center.clone().add(this.editState.translation);\n    }\n\n    getClientCenter() {\n        return this.markupsExtension.renderer.worldToClient(this.getWorldCenter());\n    }\n\n    getRotation() {\n        return this.editState.rotation;\n    }\n\n    getScale() {\n        return this.editState.scale;\n    }\n\n    getAnchors() {\n        return this.editState.anchors;\n    }\n\n    isAnchorHandlingAllowed(anchor) {\n        return true;\n    }\n\n    getTail() {\n        return this.editState.anchors[this.editState.anchors.length - 1];\n    }\n\n    getHead() {\n        return this.editState.anchors[0];\n    }\n    \n    // For group markups, returns a points suitable to place the next markup\n    getStartPointForNextMarkup() {\n        return new THREE.Vector3();\n    }\n\n    intersect(_point) {\n        const point = _point.clone();\n        this.applyInverseRotation(point);\n        const p = this.markupsExtension.renderer.worldToClient(point);\n\n        const boundingBox = this.getClientBoundingBox(true);\n\n        const eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();\n        const cameraRotation = this.markupsExtension.renderer.getCameraRotation();\n        GeometryUtils.applyRotation(p, cameraRotation, boundingBox.getCenter(), eyeDirection);\n        p.z = 0;\n\n        const inBoundingBox = boundingBox.containsPoint(p);\n\n        if (!inBoundingBox || this.isTextMarkup()) {\n            return inBoundingBox;\n        }\n        \n        if (this.hasFill() && this.fillMesh) {\n            const intersects = this.markupsExtension.renderer.raycaster.intersectObject(this.fillMesh);\n            if (intersects.length > 0) {\n                return true;\n            }\n        }\n\n        let halfWidth = this.strokeMaterial.uniforms.lineWidth.value / 2;\n\n        halfWidth += this.markupsExtension.renderer.sizeFromClientToWorld(MarkupsConstants.HIT_AREA_MARGIN);\n\n        return this.meshLine.isPointNear(_point, halfWidth * halfWidth, this.meshContainer.matrixWorld);\n    }\n    \n    isGroupMarkup() {\n        return false;\n    }\n    \n    belongsToGroup() {\n        return !!this.markupGroup;\n    }\n\n    // A text markup\n    isTextMarkup() {\n        return false;\n    }\n\n    // A geometric shape with thickness\n    isGeometricMarkup() {\n        return true;\n    }\n\n    isWithFillMarkup() {\n        return false;\n    }\n    \n    isPoint() {\n        return this.editState.anchors.length < 2 || MarkupsGeometryManager.areAllAnchorsEqual(this.editState.anchors);\n    }\n\n    hasFill() {\n        return this.isWithFillMarkup() && !this.options.fillNotAllowed && \n            this.editState.style[MarkupsConstants.STYLE_PROPERTIES.FILL_OPACITY] > 0 &&\n            this.editState.style[MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR] !== MarkupsConstants.COLORS.NO_COLOR;\n    }\n    \n    needsMiter() {\n        return true;\n    }\n\n    showPath() {\n        return false;\n    }\n    \n    hasThicknessChanged() {\n        return this.strokeMaterial && this.strokeMaterial.uniforms.lineWidth.value !== this.editState.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS];\n    }\n\n    removeFill() {\n        if (this.fillMaterial) {\n            this.materialManager.removeMaterial(this.fillMaterial);\n            this.fillMaterial = null;\n        }\n        \n        if (this.fillMesh) {\n            this.meshContainer.remove(this.fillMesh);\n            this.fillMesh = null;\n        }\n    }\n\n    remove(doDispatchEvent = true) {\n        if (!this.markupsExtension.renderer) {\n            return;\n        }\n\n        if (this.strokeMaterial) {\n            this.materialManager.removeMaterial(this.strokeMaterial);\n            this.strokeMaterial = null;\n        }\n\n        if (this.strokeMesh) {\n            this.meshContainer.remove(this.strokeMesh);\n            this.strokeMesh = null;\n        }\n        \n        if (this.meshLine && !this.markupsExtension.renderer.geometryManager.isCachedGeometry(this.meshLine)) {\n            this.meshLine.dispose();\n            this.meshLine = null;\n        }\n\n        if (this.fillMaterial) {\n            this.materialManager.removeMaterial(this.fillMaterial);\n            this.fillMaterial = null;\n        }\n\n        if (this.fillMesh) {\n            if (!this.markupsExtension.renderer.geometryManager.isCachedGeometry(this.fillMesh.geometry)) {\n                this.fillMesh.traverse(child => { if (child.geometry) child.geometry.dispose(); });\n            }\n            this.meshContainer.remove(this.fillMesh);\n            this.fillMesh = null;\n        }\n\n        if (this.meshContainer) {\n            this.markupsExtension.renderer.removeFromScene(this);\n            this.meshContainer = null;\n        }\n\n        if (doDispatchEvent) {\n            this.markupsExtension.markupsManager.dispatchEvent({type: MARKUPS_EVENTS.MARKUP_REMOVED, markup: this});\n        }\n    }\n\n    destroy() {\n        if (this.anchorHandler) {\n            this.anchorHandler.destroy();\n            this.anchorHandler = null;\n        }\n\n        if (this.translationHandler) {\n            this.translationHandler.destroy();\n            this.translationHandler = null;\n        }\n\n        if (this.rotationHandler) {\n            this.rotationHandler.destroy();\n            this.rotationHandler = null;\n        }\n\n        if (this.scaleHandler) {\n            this.scaleHandler.destroy();\n            this.scaleHandler = null;\n        }\n\n        if (this.selectionHandler) {\n            this.selectionHandler.destroy();\n            this.selectionHandler = null;\n        }\n\n        if (this.textInputHandler) {\n            this.textInputHandler.destroy();\n            this.textInputHandler = null;\n        }\n\n        this.markupsExtension = null;\n        this.state = null;\n        this.editState = null;\n        this.layer = null;\n    }\n    \n    static createMesh(geometry, material) {\n        const mesh = new THREE.Mesh(geometry, material);\n        mesh.frustumCulled = false; // We do our own culling in MarkupsRenderer\n        \n        return mesh;\n    }\n}\n\nav.GlobalManagerMixin.call(Markup.prototype);\n\nMarkup.singleClickMarkup = false;\nMarkup.withSnappingMarkup = false;\nMarkup.useTimerBeforeSelection = false;\n","import Markup from './Markup';\n\nexport default class MarkupLines extends Markup {\n    constructor(markupsExtension, id, type, state, options = {}) {\n        super(markupsExtension, id, type, state, options);\n        \n        this.registerTranslationHandler();\n        this.registerAnchorHandler();\n    }\n\n\n    createLine() {\n        if (this.strokeMesh) {\n            this.meshContainer.remove(this.strokeMesh);\n        }\n\n        if (!this.strokeMaterial) {\n            this.strokeMaterial = this.materialManager.addMaterial(this, false);\n        }\n\n        this.meshLine = this.markupsExtension.renderer.geometryManager.getStrokeGeometry(this);\n\n        this.strokeMesh = Markup.createMesh(this.meshLine.geometry, this.strokeMaterial);\n\n        this.setPosition();\n\n        this.meshContainer.add(this.strokeMesh);\n    }\n\n    render(changes = this.editState) {\n        super.render();\n\n        const anchors = changes.anchors;\n        if (anchors && anchors.length > 1) {\n            this.createLine();\n        }\n\n        if (!this.strokeMesh) {\n            return;\n        }\n\n        if (changes.style) {\n            const recreateLines = this.hasThicknessChanged();\n            \n            const newStrokeMaterial = this.materialManager.editMaterial(this.strokeMaterial, this, false);\n\n            if (newStrokeMaterial) {\n                this.strokeMaterial = newStrokeMaterial;\n                this.strokeMesh.material = newStrokeMaterial;\n                if (recreateLines) {\n                    this.createLine();\n                }\n            }\n        }\n\n        if (changes.translation) {\n            this.setPosition();\n        }\n\n        this.markupsExtension.renderer.invalidate();\n    }\n}\n\nMarkupLines.withSnappingMarkup = true;\n","import * as MarkupsConstants from '../MarkupsConstants';\nimport MarkupLines from './MarkupLines';\n\nexport default class MarkupArrow extends MarkupLines {\n    constructor(markupsExtension, id, state, options = {}) {\n        super(markupsExtension, id, MarkupsConstants.MARKUP_TYPE_ARROW, state, options);\n    }\n    \n    getTail() {\n        return this.editState.anchors[0];\n    }\n    \n    getHead() {\n        return this.editState.anchors[1];\n    }\n\n    getStartPointForNextMarkup() {\n        return this.getTail().clone();\n    }\n\n    isAnchorHandlingAllowed(anchor) {\n        if ((this.options.headHandlingNotAllowed && anchor === this.getHead()) ||\n            (this.options.tailHandlingNotAllowed && anchor === this.getTail())) {\n            return false;\n        }\n        \n        return true;\n    }\n}\n","import * as MarkupsConstants from '../MarkupsConstants';\nimport { isPolygonSimple } from '../MarkupsCommon';\nimport Markup from './Markup';\n\nexport default class MarkupPolyline extends Markup {\n    constructor(markupsExtension, id, state, options = {}) {\n      super(markupsExtension, id, MarkupsConstants.MARKUP_TYPE_POLYLINE, state, options);\n    \n      this.registerTranslationHandler();\n      this.registerAnchorHandler();\n      this.registerRotationHandler();\n      this.registerScaleHandler();\n    }\n\n    getDefaultState() {\n      return {\n        closed: false\n      };\n    }\n\n    createPolyline() {\n        if (this.strokeMesh) {\n            this.meshContainer.remove(this.strokeMesh);\n        }\n        if (this.fillMesh) {\n            this.meshContainer.remove(this.fillMesh);\n            this.fillMesh = null;\n        }\n\n        // stroke mesh\n        if (!this.strokeMaterial) {\n            this.strokeMaterial = this.materialManager.addMaterial(this, false);\n        }\n        \n        this.meshLine = this.markupsExtension.renderer.geometryManager.getStrokeGeometry(this);\n        this.strokeMesh = Markup.createMesh(this.meshLine.geometry, this.strokeMaterial);\n\n        // fill mesh\n        if (this.hasFill() && !this.isPoint() && isPolygonSimple(this.editState.anchors)) {\n            if (!this.fillMaterial) {\n                this.fillMaterial = this.materialManager.addMaterial(this, true);\n            }\n            \n            const fillGeometry = this.markupsExtension.renderer.geometryManager.getFillGeometry(this);\n            if (fillGeometry) {\n                this.fillMesh = Markup.createMesh(fillGeometry, this.fillMaterial);\n                this.meshContainer.add(this.fillMesh);\n            }\n        }\n        \n        this.meshContainer.add(this.strokeMesh);\n\n        this.setPosition();\n        this.setRotation();\n     }\n\n    render(changes = this.editState) {\n        super.render();\n        \n\n        const anchors = changes.anchors;\n        if (anchors && anchors.length > 0 || (this.editState.anchors.length > 0 && changes.scale)) { // Scale recreates the mesh as well\n            this.createPolyline();\n        }\n\n        if (!this.strokeMesh) {\n            return;\n        }\n\n        if (changes.style) {\n            const newStrokeMaterial = this.materialManager.editMaterial(this.strokeMaterial, this, false);\n\n            if (newStrokeMaterial) {\n                this.strokeMaterial = newStrokeMaterial;\n                this.strokeMesh.material = newStrokeMaterial;\n            }\n\n            let recreate = false;\n            if (this.hasFill()) {\n                if (this.fillMesh) {\n                    const newFillMaterial = this.materialManager.editMaterial(this.fillMaterial, this, true);\n\n                    if (newFillMaterial) {\n                        this.fillMaterial = newFillMaterial;\n                        this.fillMesh.material = newFillMaterial;\n                    }\n                } else {\n                    recreate = true; // To trigger re-creation\n                }\n            } else {\n                this.removeFill();\n            }\n            \n            if (recreate) {\n                this.createPolyline();\n            }\n        }\n\n        if (changes.translation) {\n            this.setPosition();\n        }\n\n        if (changes.rotation !== undefined) {\n            this.setRotation();\n        }\n\n        this.markupsExtension.renderer.invalidate();\n    }\n\n    isWithFillMarkup() {\n        return this.editState.closed;\n    }\n\n    showPath() {\n        return true;\n    }\n}\n\nMarkupPolyline.withSnappingMarkup = true;\n","import * as MarkupsConstants from '../MarkupsConstants';\nimport { isPolygonSimple } from '../MarkupsCommon';\nimport Markup from './Markup';\n\nexport default class MarkupPolycloud extends Markup {\n    constructor(markupsExtension, id, state, options = {}) {\n        super(markupsExtension, id, MarkupsConstants.MARKUP_TYPE_POLYCLOUD, state, options);\n\n        this.registerTranslationHandler();\n        this.registerAnchorHandler();\n        this.registerRotationHandler();\n        this.registerScaleHandler();\n    }\n\n    getDefaultState() {\n        return {\n            closed: false\n        };\n    }\n\n    needsMiter() {\n        return false;\n    }\n\n    createCloud() {\n        if (this.strokeMesh) {\n            this.meshContainer.remove(this.strokeMesh);\n        }\n        if (this.fillMesh) {\n            this.meshContainer.remove(this.fillMesh);\n            this.fillMesh = null;\n        }\n\n        // stroke mesh\n        if (!this.strokeMaterial) {\n            this.strokeMaterial = this.materialManager.addMaterial(this, false);\n        }\n        \n        this.meshLine = this.markupsExtension.renderer.geometryManager.getStrokeGeometry(this);\n        if (this.meshLine.type === MarkupsConstants.MARKUP_TYPE_CIRCLE) {\n            const minSize = this.markupsExtension.renderer.getNormaStrokeWidth();\n            this.meshContainer.scale.x = minSize;\n            this.meshContainer.scale.y = minSize;\n        } else {\n            this.meshContainer.scale.x = 1.0;\n            this.meshContainer.scale.y = 1.0;\n        }\n\n        this.strokeMesh = Markup.createMesh(this.meshLine.geometry, this.strokeMaterial);\n\n        if (this.hasFill() && !this.isPoint() && isPolygonSimple(this.editState.anchors)) {\n            this.createFillMesh();\n        }\n        this.meshContainer.add(this.strokeMesh);\n\n        this.setPosition();\n        this.setRotation();\n    }\n\n    createFillMesh() {\n        const fill = this.markupsExtension.renderer.geometryManager.getFillGeometry(this);\n        if (!fill.innerGeometry) {\n            return;\n        }\n        \n        if (!this.fillMaterial) {\n            this.fillMaterial = this.materialManager.addMaterial(this, true);\n        }\n\n        this.fillMesh = Markup.createMesh(fill.innerGeometry, this.fillMaterial);\n        this.meshContainer.add(this.fillMesh);\n\n        if (fill.arcGeometry) {\n            this.meshLine.arcs.forEach((arc) => {\n                const mesh = Markup.createMesh(fill.arcGeometry, this.fillMaterial);\n                this.fillMesh.add(mesh);\n                mesh.position.x = arc.x;\n                mesh.position.y = arc.y;\n            });\n        }\n\n        if (fill.fillGapGeometries) {\n            fill.fillGapGeometries.forEach((shape) => {\n                const mesh = Markup.createMesh(shape, this.fillMaterial);\n                this.fillMesh.add(mesh);\n            });\n        }\n    }\n\n    render(changes = this.editState) {\n        super.render();\n       \n        const anchors = changes.anchors;\n        if (anchors && anchors.length > 0 || (this.editState.anchors.length > 0 && changes.scale)) { // Scale recreates the mesh as well\n           this.createCloud();\n        }\n\n        if (!this.strokeMesh) {\n            return;\n        }\n\n        if (changes.style) {\n            let recreateCloud = this.hasThicknessChanged();\n            \n            const newStrokeMaterial = this.materialManager.editMaterial(this.strokeMaterial, this, false);\n\n            if (newStrokeMaterial) {\n                this.strokeMaterial = newStrokeMaterial;\n                this.strokeMesh.material = newStrokeMaterial;\n            }\n\n            if (this.hasFill()) {\n                if (this.fillMesh) {\n                    const newFillMaterial = this.materialManager.editMaterial(this.fillMaterial, this, true);\n\n                    if (newFillMaterial) {\n                        this.fillMaterial = newFillMaterial;\n                        this.fillMesh.traverse(child => child.material = newFillMaterial);\n                    }\n                } else {\n                    recreateCloud = true; // To trigger re-creation\n                }\n            } else {\n                this.removeFill();\n            }\n            \n            if (recreateCloud) {\n                this.createCloud();\n            }\n        }\n\n        if (changes.translation) {\n            this.setPosition();\n        }\n\n        if (changes.rotation !== undefined) {\n            this.setRotation();\n        }\n\n        this.markupsExtension.renderer.invalidate();\n    }\n\n    showPath() {\n        return true;\n    }\n\n    isWithFillMarkup() {\n        return this.editState.closed;\n    }\n}\n\nMarkupPolycloud.withSnappingMarkup = true;\n","import Markup from './Markup';\n\nexport default class MarkupScalableShape extends Markup {\n    constructor(markupsExtension, id, type, state, options = {}) {\n        super(markupsExtension, id, type, state, options);\n\n        this.width = 0;\n        this.height = 0;\n\n        this.registerTranslationHandler();\n        this.registerRotationHandler();\n        this.registerScaleHandler();\n    }\n\n    setSize() {\n        const minSize = this.markupsExtension.renderer.getNormaStrokeWidth();\n        this.meshContainer.scale.x = Math.max(Math.abs(this.width * this.editState.scale.x), minSize) * Math.sign(this.editState.scale.x);\n        this.meshContainer.scale.y = Math.max(Math.abs(this.height * this.editState.scale.y), minSize) * Math.sign(this.editState.scale.y);\n    }\n\n    createShape(anchors) {\n        if (!this.strokeMesh) {\n            if (!this.strokeMaterial) {\n                this.strokeMaterial = this.materialManager.addMaterial(this, false);\n            }\n\n            // stroke mesh\n            this.meshLine = this.markupsExtension.renderer.geometryManager.getStrokeGeometry(this);\n            this.strokeMesh = Markup.createMesh(this.meshLine.geometry, this.strokeMaterial);\n\n            this.meshContainer.add(this.strokeMesh);\n\n            // Set the initial rotation to be according to camera rotation.\n            this.meshContainer.rotation.z = -this.markupsExtension.renderer.getCameraRotation() * this.markupsExtension.renderer.getCameraEyeVector().z;\n        }\n\n        if (!this.fillMesh && this.hasFill()) {\n            this.createFill();\n        }\n\n        this.width = anchors[0].distanceTo(anchors[1]);\n        this.height = anchors[2].distanceTo(anchors[1]);\n\n        this.setPosition();\n        this.setSize();\n    }\n\n    createFill() {\n        this.fillGeometry = this.markupsExtension.renderer.geometryManager.getFillGeometry(this);\n        \n        if (this.fillGeometry) {\n            if (!this.fillMaterial) {\n                this.fillMaterial = this.materialManager.addMaterial(this, true);\n            }\n\n            this.fillMesh = Markup.createMesh(this.fillGeometry, this.fillMaterial);\n\n            // Make sure fill is first in order\n            this.meshContainer.add(this.fillMesh);\n            this.meshContainer.add(this.strokeMesh);\n        }\n    }\n\n    render(changes = this.editState) {\n        super.render();\n\n        const anchors = changes.anchors;\n        if (anchors && anchors.length > 1) {\n            this.createShape(anchors);\n        }\n\n        if (!this.strokeMesh) {\n            return;\n        }\n\n        if (changes.style) {\n            const newStrokeMaterial = this.materialManager.editMaterial(this.strokeMaterial, this, false);\n\n            if (newStrokeMaterial) {\n                this.strokeMaterial = newStrokeMaterial;\n                this.strokeMesh.material = newStrokeMaterial;\n            }\n\n            if (this.hasFill()) {\n                if (this.fillMesh) {\n                    const newFillMaterial = this.materialManager.editMaterial(this.fillMaterial, this, true);\n\n                    if (newFillMaterial) {\n                        this.fillMaterial = newFillMaterial;\n                        this.fillMesh.material = newFillMaterial;\n                    }\n                } else {\n                    this.createFill();\n                }\n            } else {\n                this.removeFill();\n            }\n        }\n\n        if (changes.translation) {\n            this.setPosition();\n        }\n\n        if (changes.rotation !== undefined) {\n            this.setRotation();\n        }\n\n        if (changes.scale) {\n            this.setSize();\n        }\n\n        this.markupsExtension.renderer.invalidate();\n    }\n\n    isWithFillMarkup() {\n        return true;\n    }\n}\n","import * as MarkupsConstants from '../MarkupsConstants';\nimport MarkupScalableShape from \"./MarkupScalableShape\";\n\nexport default class MarkupRectangle extends MarkupScalableShape {\n    constructor(markupsExtension, id, state, options = {}) {\n        super(markupsExtension, id, MarkupsConstants.MARKUP_TYPE_RECTANGLE, state, options);\n    }\n\n    isWithFillMarkup() {\n        return true;\n    }\n}\n","import * as MarkupsConstants from '../MarkupsConstants';\nimport MarkupScalableShape from \"./MarkupScalableShape\";\n\nexport default class MarkupCircle extends MarkupScalableShape {\n    constructor(markupsExtension, id, state, options = {}) {\n        super(markupsExtension, id, MarkupsConstants.MARKUP_TYPE_CIRCLE, state, options);\n    }\n\n    isWithFillMarkup() {\n        return true;\n    }\n\n    needsMiter() {\n        return false;\n    }\n}\n","import * as MarkupsConstants from '../MarkupsConstants';\nimport Markup from './Markup';\n\nexport default class MarkupCloud extends Markup {\n    constructor(markupsExtension, id, state, options = {}) {\n        super(markupsExtension, id, MarkupsConstants.MARKUP_TYPE_CLOUD, state, options);\n\n        this.registerTranslationHandler();\n        if (!options.rotationNotAllowed) {\n            this.registerRotationHandler();\n        }\n        this.registerScaleHandler();\n    }\n\n    createCloud() {\n        if (this.strokeMesh) {\n            this.meshContainer.remove(this.strokeMesh);\n        }\n        if (this.fillMesh) {\n            this.meshContainer.remove(this.fillMesh);\n            this.fillMesh = null;\n        }\n\n        // stroke mesh\n        if (!this.strokeMaterial) {\n            this.strokeMaterial = this.materialManager.addMaterial(this, false);\n        }\n        \n        this.meshLine = this.markupsExtension.renderer.geometryManager.getStrokeGeometry(this);\n        this.strokeMesh = Markup.createMesh(this.meshLine.geometry, this.strokeMaterial);\n\n        // fill mesh\n        if (this.hasFill() && !this.isPoint()) {\n            this.createFillMesh();\n        }\n        \n        this.meshContainer.add(this.strokeMesh);\n\n        if (this.meshLine.type === MarkupsConstants.MARKUP_TYPE_CIRCLE) {\n            const width = this.editState.anchors[0].distanceTo(this.editState.anchors[1]);\n            const height = this.editState.anchors[2].distanceTo(this.editState.anchors[1]);\n            const minSize = this.markupsExtension.renderer.getNormaStrokeWidth();\n            this.meshContainer.scale.x = Math.max(Math.abs(width * this.editState.scale.x), minSize) * Math.sign(this.editState.scale.x);\n            this.meshContainer.scale.y = Math.max(Math.abs(height * this.editState.scale.y), minSize) * Math.sign(this.editState.scale.y);\n\n            // Set the initial rotation to be according to camera rotation.\n            if (this.isCompleted()) {\n                this.setRotation();\n            } else {\n                this.meshContainer.rotation.z = -this.markupsExtension.renderer.getCameraRotation() * this.markupsExtension.renderer.getCameraEyeVector().z;\n            }\n        } else {\n            this.meshContainer.scale.x = 1.0;\n            this.meshContainer.scale.y = 1.0;\n            this.setRotation();\n        }\n\n        this.setPosition();\n    }\n\n    createFillMesh() {\n        const fill = this.markupsExtension.renderer.geometryManager.getFillGeometry(this);\n        if (!fill.innerGeometry) {\n            return;\n        }\n        if (!this.fillMaterial) {\n            this.fillMaterial = this.materialManager.addMaterial(this, true);\n        }\n\n        this.fillMesh = Markup.createMesh(fill.innerGeometry, this.fillMaterial);\n        this.meshContainer.add(this.fillMesh);\n\n        if (fill.arcGeometry) {\n            this.meshLine.arcs.forEach((arc) => {\n                const mesh = Markup.createMesh(fill.arcGeometry, this.fillMaterial);\n                this.fillMesh.add(mesh);\n                mesh.position.x = arc.x;\n                mesh.position.y = arc.y;\n            });\n        }\n    }\n\n    render(changes = this.editState) {\n        super.render();\n\n        const anchors = changes.anchors;\n        if (anchors && anchors.length > 1 || (this.editState.anchors.length > 1 && changes.scale)) { // Scale recreates the mesh as well\n            this.createCloud();\n        }\n\n        if (!this.strokeMesh) {\n            return;\n        }\n\n        if (changes.style) {\n            let recreateCloud = this.hasThicknessChanged();\n            \n            const newStrokeMaterial = this.materialManager.editMaterial(this.strokeMaterial, this, false);\n            \n            if (newStrokeMaterial) {\n                this.strokeMaterial = newStrokeMaterial;\n                this.strokeMesh.material = newStrokeMaterial;\n            }\n\n            if (this.hasFill()) {\n                if (this.fillMesh) {\n                    const newFillMaterial = this.materialManager.editMaterial(this.fillMaterial, this, true);\n\n                    if (newFillMaterial) {\n                        this.fillMaterial = newFillMaterial;\n                        this.fillMesh.traverse(child => child.material = newFillMaterial);\n                    }\n                } else {\n                    recreateCloud = true;\n                }\n            } else {\n                this.removeFill();\n            }\n            \n            if (recreateCloud) {\n                this.createCloud();\n            }\n        }\n\n        if (changes.translation) {\n            this.setPosition();\n        }\n\n        if (changes.rotation !== undefined) {\n            this.setRotation();\n        }\n\n        this.markupsExtension.renderer.invalidate();\n    }\n\n    isWithFillMarkup() {\n        return true;\n    }\n\n    needsMiter() {\n        return false;\n    }\n}\n\nMarkupCloud.withSnappingMarkup = true;\n","import Markup from './Markup';\n\nexport default class MarkupPen extends Markup {\n    constructor(markupsExtension, id, type, state, options = {}) {\n        super(markupsExtension, id, type, state, options);\n        \n        this.registerTranslationHandler();\n        this.registerRotationHandler();\n        this.registerScaleHandler();\n    }\n\n    selectWhenCompleted() {\n        return false;\n    }\n\n    needsMiter() {\n        return true;\n    }\n\n    createPen() {\n        if (this.strokeMesh) {\n            this.meshContainer.remove(this.strokeMesh);\n        }\n\n        if (!this.strokeMaterial) {\n            this.strokeMaterial = this.materialManager.addMaterial(this, false);\n        }\n\n        this.meshLine = this.markupsExtension.renderer.geometryManager.getStrokeGeometry(this);\n\n        this.strokeMesh = Markup.createMesh(this.meshLine.geometry, this.strokeMaterial);\n\n        this.meshContainer.add(this.strokeMesh);\n\n        this.setPosition();\n        this.setRotation();\n    }\n\n    render(changes = this.editState) {\n        super.render();\n       \n        const anchors = changes.anchors;\n        if (anchors && anchors.length > 0 || (this.editState.anchors.length > 0 && changes.scale)) { // Scale recreates the mesh as well\n            this.createPen();\n        }\n\n        if (!this.strokeMesh) {\n            return;\n        }\n\n        if (changes.style) {\n            const newStrokeMaterial = this.materialManager.editMaterial(this.strokeMaterial, this, false);\n\n            if (newStrokeMaterial) {\n                this.strokeMaterial = newStrokeMaterial;\n                this.strokeMesh.material = newStrokeMaterial;\n            }\n        }\n\n        if (changes.translation) {\n            this.setPosition();\n        }\n\n        if (changes.rotation !== undefined) {\n            this.setRotation();\n        }\n\n        this.markupsExtension.renderer.invalidate();\n    }\n}\n\nMarkupPen.singleClickMarkup = true;\nMarkupPen.useTimerBeforeSelection = true;","import * as MarkupsConstants from '../MarkupsConstants';\nimport MarkupPen from \"./MarkupPen\";\n\nexport default class MarkupFreehand extends MarkupPen {\n    constructor(markupsExtension, id, state, options = {}) {\n        super(markupsExtension, id, MarkupsConstants.MARKUP_TYPE_FREEHAND, state, options);\n    }\n}\n","import * as MarkupsConstants from '../MarkupsConstants';\nimport MarkupPen from \"./MarkupPen\";\n\nexport default class MarkupHighlight extends MarkupPen {\n    constructor(markupsExtension, id, state, options = {}) {\n        super(markupsExtension, id, MarkupsConstants.MARKUP_TYPE_HIGHLIGHT, state, options);\n    }\n\n    getDefaultStyle() {\n        const style = super.getDefaultStyle();\n        style[MarkupsConstants.STYLE_PROPERTIES.OPACITY] = MarkupsConstants.DEFAULT_HIGHLIGHT_OPACITY;\n\n        return style;\n    }\n}\n","import GeometryUtils from '../Utils/GeometryUtils';\nimport LodashUtils from '../Utils/LodashUtils';\nimport * as MarkupsConstants from '../MarkupsConstants';\nimport Markup from './Markup';\nimport { getTextSize } from '../MarkupsCommon';\nimport { markupsTypesDictionary } from './MarkupsTypesDictionary';\n\nexport default class MarkupText extends Markup {\n  constructor(markupsExtension, id, state, options = {}) {\n    super(markupsExtension, id, MarkupsConstants.MARKUP_TYPE_CALLOUT, state, options);\n\n    this.registerTranslationHandler();\n    this.registerScaleHandler({ onlyHorizontal: true });\n    this.registerTextInputHandler();\n    if (!options.rotationNotAllowed) {\n      this.registerRotationHandler();\n    }\n  }\n\n  getDefaultState() {\n    return {\n      text: 'Default Text',\n      isFrameUsed: true,\n      frameType: this.options.frameType ? this.options.frameType : MarkupsConstants.MARKUP_TYPE_RECTANGLE\n    };\n  }\n  \n  shouldRenderFrame() {\n    return this.editState.isFrameUsed || this.hasFill();\n  }\n\n  setVisible(isVisible, forceSet) {\n    super.setVisible(isVisible, forceSet);\n\n    if (this.frameMarkup) {\n      this.frameMarkup.setVisible(isVisible, forceSet);\n    } else if (this.shouldRenderFrame() && isVisible) {\n      this.renderFrame();\n    }\n  }\n\n  render(changes = this.editState) {\n    this.markupsExtension.renderer.textRenderer.renderMarkup(this);\n    if (this.shouldRenderFrame()) {\n      this.renderFrame();\n    } else {\n      this.removeFrame();\n\n      // Since there is no geometry changes in this case, we need to trigger the bounding box rendering using setDirty.\n      this.setDirty();\n    }\n  }\n  \n  renderFrame() {\n    if (!this.frameMarkup) {\n      this.frameMarkup = new markupsTypesDictionary[this.editState.frameType](this.markupsExtension, this.id);\n      this.frameMarkup.layer = this.layer;\n      this.frameMarkup.transparent = this.isTransparent();\n      this.frameMarkup.editState.anchors = [new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3(), new THREE.Vector3()];\n    }\n\n    const state = this.frameMarkup.editState;\n    // Copy style\n    state.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS] = this.editState.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS];\n    state.style[MarkupsConstants.STYLE_PROPERTIES.OPACITY] = this.editState.style[MarkupsConstants.STYLE_PROPERTIES.OPACITY];\n    state.style[MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR] = this.editState.style[MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR];\n    state.style[MarkupsConstants.STYLE_PROPERTIES.FILL_OPACITY] = this.editState.style[MarkupsConstants.STYLE_PROPERTIES.FILL_OPACITY];\n\n    if (!this.editState.isFrameUsed) {\n      state.style[MarkupsConstants.STYLE_PROPERTIES.COLOR] = this.editState.style[MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR];\n      state.style[MarkupsConstants.STYLE_PROPERTIES.OPACITY] = this.editState.style[MarkupsConstants.STYLE_PROPERTIES.FILL_OPACITY];\n    } else {\n      state.style[MarkupsConstants.STYLE_PROPERTIES.COLOR] = this.editState.style[MarkupsConstants.STYLE_PROPERTIES.COLOR];\n      state.style[MarkupsConstants.STYLE_PROPERTIES.OPACITY] = 1.0;\n    }\n\n\n    // Set anchors\n    const bbox = this.getWorldBoundingBox();\n    const t = state.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS] / 2;\n    this.frameMarkup.editState.anchors[0].set(bbox.min.x + t, bbox.min.y + t, 0);\n    this.frameMarkup.editState.anchors[1].set(bbox.max.x - t, bbox.min.y + t, 0);\n    this.frameMarkup.editState.anchors[2].set(bbox.max.x - t, bbox.max.y - t, 0);\n    this.frameMarkup.editState.anchors[3].set(bbox.min.x + t, bbox.max.y - t, 0);\n\n    // Copy rotation (translate and scale not needed since they are already included in the bounding box)\n    state.rotation = this.editState.rotation;\n    \n    this.frameMarkup.updateMatrix();\n\n    this.frameMarkup.render();\n  }\n\n  removeFrame() {\n    if (this.frameMarkup) {\n      this.frameMarkup.remove(false);\n      this.frameMarkup = null;\n    }\n  }\n  \n  remove(doDispatchEvent = true) {\n    this.removeFrame();\n    super.remove(doDispatchEvent);\n  }\n\n  changeTransparency(transparent) {\n    if (this.frameMarkup) {\n      this.frameMarkup.transparent = transparent;\n    }\n    super.changeTransparency(transparent);\n  }\n  \n  resetFrameBoundingBox() {\n    if (this.frameMarkup) {\n      this.frameMarkup.rotatedBoundingBox = null;\n      this.frameMarkup.boundingBox = null;\n    }\n  }\n \n  setState(state) {\n    this.resetFrameBoundingBox();\n    \n    super.setState(state);\n  }\n  \n  setEditState(editState, changes, source) {\n    if (changes && changes.style) {\n      const newState = Object.assign({}, editState, changes);\n      // When changing font-size, we want it to grow down, instead of from the middle.\n      const fontToWorldScale = this.markupsExtension.renderer.getFontToWorldScale(); // Font to World conversion\n      const { width } = this.getTextWidthInFontScale();\n\n      const oldStyle = this.getTextStyle(this.editState);\n      const newStyle = this.getTextStyle(newState);\n      oldStyle.width = `${width}px`;\n      newStyle.width = `${width}px`;\n      const oldSize = getTextSize(this.editState.text, oldStyle);\n      const newSize = getTextSize(newState.text, newStyle);\n\n      if (newSize.height !== oldSize.height) {\n        const offsetWorld = (newSize.height - oldSize.height) * fontToWorldScale;\n        const delta = this.getBoundingBoxVerticalTranslation(offsetWorld);\n        \n        if (this.shouldRenderFrame()) {\n          const oldFrameSize = this.calculateFrameSize(this.editState.style[MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE]);\n          const newFrameSize = this.calculateFrameSize(newState.style[MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE]);\n          const deltaFrameSize = newFrameSize - oldFrameSize;\n          const deltaFrameVec = new THREE.Vector3(deltaFrameSize, -deltaFrameSize, 0);\n\n          this._rotateTranslationVector(deltaFrameVec);\n          delta.add(deltaFrameVec);\n        }\n        \n        if (!changes.translation) {\n          const { translation } = this.getEditState();\n          translation.add(delta);\n          changes.translation = translation;\n        } else {\n          changes.translation.add(delta);\n        }\n      }\n\n      changes.isFrameUsed = newState.style[MarkupsConstants.STYLE_PROPERTIES.COLOR] !== MarkupsConstants.COLORS.NO_COLOR;\n    }\n\n    this.resetFrameBoundingBox();\n\n    super.setEditState(editState, changes, source);\n  }\n  \n  getTextWidthInFontScale() {\n    const isSafari = Autodesk.Viewing.isSafari() || Autodesk.Viewing.isIOSDevice();\n    \n    const fontToWorldScale = this.markupsExtension.renderer.getFontToWorldScale(); // Font to World conversion\n    const preciseWidth = this.getWorldBoundingBoxTextOnly().size().x / fontToWorldScale;\n    const width = isSafari ? preciseWidth : (Math.ceil(preciseWidth) || 1); // Safari doesn't need rounded width\n    \n    return { preciseWidth, width};\n  }\n\n  getBoundingBoxVerticalTranslation(offsetWorld) {\n    const delta = new THREE.Vector3(0, -offsetWorld / 2, 0);\n    \n    this._rotateTranslationVector(delta);\n    \n    return delta;\n  }\n\n  _rotateTranslationVector(vec) {\n    const rotation = this.getRotation();\n    if (rotation !== 0) {\n      const eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();\n      GeometryUtils.applyRotation(vec, rotation, new THREE.Vector3(), eyeDirection);\n    }\n  }\n  \n  _rotateBoundingBox(boundingBox) {\n    const rotation = this.getRotation();\n    if (rotation === 0) {\n      return boundingBox;\n    }\n    \n    const center = boundingBox.getCenter();\n    const size = boundingBox.size();\n    const eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();\n    const rotatedBoundingBox = new THREE.Box3();\n    const points = [boundingBox.min, boundingBox.min.clone().add(new THREE.Vector3(size.x, 0, 0)), boundingBox.max, boundingBox.min.clone().add(new THREE.Vector3(0, size.y, 0))];\n    points.forEach((point) => {\n      GeometryUtils.applyRotation(point, rotation, center, eyeDirection);\n      rotatedBoundingBox.expandByPoint(point);\n    });\n\n    return rotatedBoundingBox;\n  }\n\n  _calculateWorldBoundingBoxText() {\n    let boundingBox = new THREE.Box3();\n    const anchors = LodashUtils.cloneDeep(this.editState.anchors);\n\n    anchors.forEach((anchor) => {\n      this.applyScaleAndTranslation(anchor);\n    });\n\n    anchors.forEach((anchor) => {\n      boundingBox.expandByPoint(anchor);\n    });\n\n    // Now, make some text adjustments, so the bounding box will fit exactly to the text.\n    const center = boundingBox.getCenter();\n    const style = this.getTextStyle();\n    const fontToWorldScale = this.markupsExtension.renderer.getFontToWorldScale(); // Font to World conversion\n\n    // If the width of the bounding box is smaller than a single letter width, change the bounding box width to be in the size of a single letter.\n    let textBounds = getTextSize('A', style);\n    if (boundingBox.size().x < textBounds.width * fontToWorldScale) {\n      boundingBox.min.x = center.x;\n      boundingBox.max.x = center.x;\n      boundingBox.expandByVector(new THREE.Vector3((textBounds.width * fontToWorldScale) / 2, 0, 0));\n    }\n\n    const unscaledWidth = Math.ceil(boundingBox.size().x / fontToWorldScale);\n    style.width = `${unscaledWidth}px`;\n\n    // Set the height of the bounding box according to the text measurement.\n    textBounds = getTextSize(this.editState.text, style);\n    boundingBox.min.y = center.y;\n    boundingBox.max.y = center.y;\n    boundingBox.expandByVector(new THREE.Vector3(0, (textBounds.height * fontToWorldScale) / 2, 0));\n    \n    return boundingBox;\n  }\n\n  calculateWorldBoundingBox(rotate) {\n    const boundingBox = this._calculateWorldBoundingBoxText();\n\n    if (this.shouldRenderFrame()) {\n      const frameSize = this.getWorldFrameSize();\n      boundingBox.expandByVector(new THREE.Vector3(frameSize, frameSize, 0));\n    }\n\n    if (rotate) {\n      return this._rotateBoundingBox(boundingBox);\n    }\n    \n    return boundingBox;\n  }\n  \n  calculateFrameSize(fontSize, thickness = this.editState.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS]) {\n    const fontToWorldScale = this.markupsExtension.renderer.getFontToWorldScale(); // Font to World conversion\n    const padding = fontSize * fontToWorldScale / 2;\n\n    if (!this.editState.isFrameUsed) {\n      thickness = 0;\n    } else {\n      if (this.editState.frameType === MarkupsConstants.MARKUP_TYPE_CLOUD) {\n        thickness += this.markupsExtension.renderer.geometryManager.getCloudMinimumRadius(thickness) / 2;\n      }\n    }\n\n    return padding + thickness;\n  }\n  \n  getWorldFrameSize() {\n    return this.calculateFrameSize(this.editState.style[MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE]);\n  }\n  \n  getClientFrameSize() {\n    const frameSize = this.getWorldFrameSize();\n    \n    return this.markupsExtension.renderer.sizeFromWorldToClient(frameSize);\n  }\n  \n  getWorldBoundingBoxTextOnly(rotate) {\n    if (!this.shouldRenderFrame()) {\n      return this.getWorldBoundingBox(rotate).clone();\n    }\n    \n    const boundingBox = this.getWorldBoundingBox(false).clone();\n\n    const frameSize = this.getWorldFrameSize();\n    boundingBox.expandByVector(new THREE.Vector3(-frameSize, -frameSize, 0));\n    \n    if (rotate) {\n      return this._rotateBoundingBox(boundingBox);\n    }\n\n    return boundingBox;\n  }\n  \n  getClientBoundingBoxTextOnly(rotate, normalizeY = true) {\n    const boundingBox = this.getWorldBoundingBoxTextOnly(rotate);\n\n    boundingBox.min = this.markupsExtension.renderer.worldToClient(boundingBox.min);\n    boundingBox.max = this.markupsExtension.renderer.worldToClient(boundingBox.max);\n\n    if (normalizeY) {\n      GeometryUtils.swapBoundingBoxY(boundingBox);\n    }\n    \n    return boundingBox;\n  }\n\n  getTextStyle(editState = this.getEditState()) {\n    const { style } = editState;\n\n    const textStyle = {};\n    textStyle.color = style[MarkupsConstants.STYLE_PROPERTIES.FONT_COLOR];\n    textStyle.fontFamily = style[MarkupsConstants.STYLE_PROPERTIES.FONT_FAMILY];\n    textStyle.opacity = style[MarkupsConstants.STYLE_PROPERTIES.OPACITY] * (this.isTransparent() ? MarkupsConstants.DISABLED_OPACITY : 1.0);\n    textStyle.fontSize = `${style[MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE]}px`;\n    textStyle.fontWeight = style[MarkupsConstants.STYLE_PROPERTIES.FONT_WEIGHT];\n    textStyle.fontStyle = style[MarkupsConstants.STYLE_PROPERTIES.FONT_STYLE];\n    textStyle.whiteSpace = editState.isSingleLine ? 'nowrap' : 'pre-wrap';\n    textStyle.lineHeight = 1;\n    textStyle.backgroundColor = null;\n\n    return textStyle;\n  }\n\n  // Returns minimum size in client coordinates\n  getMinimumSize() {\n    let minSize = super.getMinimumSize();\n\n    const style = this.getTextStyle();\n    // If the width of the bounding box is smaller than a single letter width, change the bounding box width to be in the size of a single letter.\n    let textBounds = getTextSize('A', style);\n    const fontToWorldScale = this.markupsExtension.renderer.getFontToWorldScale(); // Font to World conversion\n    \n    return Math.max(this.markupsExtension.renderer.sizeFromWorldToClient(textBounds.width * fontToWorldScale + 2 * this.getWorldFrameSize()), minSize);\n  }\n\n  isTextMarkup() {\n    return true;\n  }\n\n  isGeometricMarkup() {\n    return false;\n  }\n\n  isWithFillMarkup() {\n    return true;\n  }\n\n  getStartPointForNextMarkup() {\n    return this.getWorldBoundingBox().getCenter().clone();\n  }\n}\n\nMarkupText.singleClickMarkup = true;\n","import GeometryUtils from '../Utils/GeometryUtils';\nimport LodashUtils from '../Utils/LodashUtils';\nimport * as MarkupsConstants from '../MarkupsConstants';\nimport Markup from './Markup';\nimport MarkupText from './MarkupText';\n\nexport default class MarkupDimension extends Markup {\n    constructor(markupsExtension, id, state, options = {}) {\n        super(markupsExtension, id, MarkupsConstants.MARKUP_TYPE_DIMENSION, state, options);\n\n        if (this.markupsExtension.viewer.impl.is2d) {\n            this.registerDimensionEditHandler();\n        }\n\n        this.textMarkup = new MarkupText(markupsExtension, id);\n        this.textMarkup.editState.isFrameUsed = false;\n\n        this.registerTextInputHandler({ singleLine: true, onEmptyTextMarkup: this.onEmptyTextMarkup.bind(this), submitChanges: this.onSubmitChanges.bind(this) });\n\n        this.getTextStyle = this.textMarkup.getTextStyle.bind(this.textMarkup);\n\n        const originalEditStart = this.textInputHandler.editStart;\n        this.textInputHandler.editStart = () => {\n            originalEditStart.bind(this.textInputHandler)();\n            this.onTextMarkupEditStart();\n        };\n\n        const originalEditEnd = this.textInputHandler.editEnd;\n        this.textInputHandler.editEnd = () => {\n            originalEditEnd.bind(this.textInputHandler)();\n            this.onTextMarkupEditEnd();\n        };\n\n        this.textMarkup.textInputHandler = this.textInputHandler;\n    }\n\n    setVisible(isVisible, forceSet) {\n        super.setVisible(isVisible, forceSet);\n        \n        this.textMarkup.setVisible(isVisible, forceSet);\n    }\n\n    setState(state) {\n        super.setState(state);\n        \n        this.textMarkup.rotatedBoundingBox = null;\n        this.textMarkup.boundingBox = null;\n        this.textMarkup.resetFrameBoundingBox();\n    }\n\n    setEditState(editState, changes, source) {\n        this.textMarkup.rotatedBoundingBox = null;\n        this.textMarkup.boundingBox = null;\n        this.textMarkup.resetFrameBoundingBox();\n        \n        super.setEditState(editState, changes, source);\n    }\n\n    createDimension() {\n        if (this.strokeMesh) {\n            this.meshContainer.remove(this.strokeMesh);\n        }\n\n        if (!this.strokeMaterial) {\n            this.editState.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS] *= MarkupsConstants.DIMENSION_THICKNESS_FACTOR;\n            this.strokeMaterial = this.materialManager.addMaterial(this, false);\n            this.editState.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS] /= MarkupsConstants.DIMENSION_THICKNESS_FACTOR;\n        }\n\n        this.meshLine = this.markupsExtension.renderer.geometryManager.getStrokeGeometry(this);\n\n        this.strokeMesh = Markup.createMesh(this.meshLine.geometry, this.strokeMaterial);\n\n        this.meshContainer.add(this.strokeMesh);\n\n        this.setPosition();\n    }\n    \n    calculateWorldBoundingBox(rotate) {\n        const boundingBox = super.calculateWorldBoundingBox(rotate);\n        \n        const textBoundingBox = this.textMarkup.calculateWorldBoundingBox(true);\n        return boundingBox.union(textBoundingBox);\n    }\n\n    renderText() {\n        const { anchors, text, style } = this.getEditState();\n        const textStyle = LodashUtils.cloneDeep(style);\n        textStyle[MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE] *= MarkupsConstants.DIMENSION_FONT_SIZE_FACTOR;\n        this.textMarkup.enabled = this.enabled;\n        this.textMarkup.transparent = this.isTransparent();\n        this.textMarkup.editState.style = textStyle;\n        this.textMarkup.editState.text = text;\n        this.textMarkup.editState.isSingleLine = true;\n\n        const pos = anchors[0].clone().add(anchors[1]).multiplyScalar(0.5);\n        this.applyScaleAndTranslation(pos);\n        this.textMarkup.creationHandler.calculateAnchorsByCenterPoint(pos);\n\n        const cameraRotation = this.markupsExtension.renderer.getCameraRotation();\n        const eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();\n\n        // Modify markup's anchors, so the rotation won't affect the final result, except of the bounding box.\n        const textAnchors = this.textMarkup.editState.anchors;\n        textAnchors.forEach((anchor) => {\n            GeometryUtils.applyRotation(anchor, cameraRotation, pos, eyeDirection);\n        });\n\n        let angle = GeometryUtils.getSignedAngle(this.markupsExtension.renderer.getCameraRightVector(), anchors[1].clone().sub(anchors[0]), this.markupsExtension.renderer.getCameraEyeVector());\n        // Text should always be readable - flip it if it's upside down.\n        if (Math.abs(angle) > Math.PI / 2) {\n            angle += Math.PI;\n        }\n\n        this.textMarkup.editState.rotation = angle - cameraRotation;\n\n        const p1 = textAnchors[1].clone();\n        const p2 = textAnchors[2].clone();\n\n        GeometryUtils.applyRotation([p1, p2], this.textMarkup.editState.rotation, pos, eyeDirection);\n\n        const thickness = this.editState.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS] * MarkupsConstants.DIMENSION_THICKNESS_FACTOR;\n        const tipLength = thickness * MarkupsConstants.DIMENSION_TIP_LENGTH;\n\n        const dir = p2.clone().sub(p1);\n        const textTranslation = dir.clone().normalize().multiplyScalar(tipLength).add(dir.multiplyScalar(0.5));\n\n        textAnchors.forEach((anchor) => {\n            anchor.add(textTranslation);\n        });\n\n        this.textMarkup.render();\n    }\n\n    render(changes = this.editState) {\n        super.render();\n       \n        const { anchors } = changes;\n\n        if (anchors && anchors.length > 1) {\n            this.createDimension();\n        }\n\n        if (!this.strokeMesh) {\n            return;\n        }\n\n        if (changes.style) {\n            this.editState.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS] *= MarkupsConstants.DIMENSION_THICKNESS_FACTOR;\n            const recreateDimension = this.hasThicknessChanged();\n            const newStrokeMaterial = this.materialManager.editMaterial(this.strokeMaterial, this, false);\n            this.editState.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS] /= MarkupsConstants.DIMENSION_THICKNESS_FACTOR;\n\n            if (newStrokeMaterial) {\n                this.strokeMaterial = newStrokeMaterial;\n                this.strokeMesh.material = newStrokeMaterial;\n                if (recreateDimension) {\n                    this.createDimension();\n                }\n            }\n        }\n\n        if (changes.translation) {\n            this.createDimension(); // Due to change in translation, need to update dimension geometry too.\n            this.setPosition();\n        }\n\n        this.renderText();\n\n        this.markupsExtension.renderer.invalidate();\n    }\n\n    isTextMarkup() {\n        return true;\n    }\n\n    isWithFillMarkup() {\n        return true;\n    }\n\n    onEmptyTextMarkup() {\n        this.markupsExtension.markupsManager.actionManager.undo();\n\n        const text = this.creationHandler.getDistance();\n        this.creationHandler.updateEditState({ text });\n        this.creationHandler.submitChanges();\n    }\n\n    onSubmitChanges() {\n        this.textInputHandler.submitChanges();\n        this.hasChanges = true;\n    }\n\n    remove(doDispatchEvent = true) {\n        this.textMarkup.remove(false);\n        super.remove(doDispatchEvent);\n    }\n\n    onTextMarkupEditStart() {\n        let { text } = this.textMarkup.editState;\n\n        if (text[0] === '(' && text[text.length - 1] === ')') {\n            text = text.slice(1, text.length - 1);\n        }\n\n        this.hasChanges = false;\n\n        this.creationHandler.updateEditState({ text });\n    }\n\n    onTextMarkupEditEnd() {\n        let { text } = this.textMarkup.editState;\n\n        if (text[0] === '(' && text[text.length - 1] === ')') {\n            text = text.slice(1, text.length - 1);\n        }\n        if (text !== '') {\n            if (this.hasChanges) {\n                this.markupsExtension.markupsManager.actionManager.undo();\n\n                this.creationHandler.updateEditState({ text: `(${text})` });\n                this.creationHandler.submitChanges();\n            } else if (text !== this.creationHandler.getDistance()) {\n                this.creationHandler.updateEditState({ text: `(${text})` });\n            }\n        }\n    }\n}\n\nMarkupDimension.withSnappingMarkup = true;\n","import * as MarkupsConstants from '../MarkupsConstants';\nimport MarkupLines from './MarkupLines';\n\nexport default class MarkupLine extends MarkupLines {\n    constructor(markupsExtension, id, state, options = {}) {\n        super(markupsExtension, id, MarkupsConstants.MARKUP_TYPE_LINE, state, options);\n    }\n}\n","import * as MarkupsConstants from '../MarkupsConstants';\nimport MarkupGroup from \"./MarkupGroup\";\n\nexport default class MarkupCallout extends MarkupGroup {\n    constructor(markupsExtension, id, type, state, options = {}) {\n        super(markupsExtension, id, type, state, options);\n\n        const textMarkup = this.getTextMarkup();\n        textMarkup.textInputHandler.onEmptyTextMarkup = this.onEmptyTextMarkup.bind(this);\n    }\n\n    getArrowMarkup() {\n        throw new Error('getArrowMarkup should be implemented');\n    }\n\n    getTextMarkup() {\n        throw new Error('getTextMarkup should be implemented');\n    }\n\n    getShapeMarkup() {\n        throw new Error('getShapeMarkup should be implemented');\n    }\n\n    getQuadrant(markup, angle) {\n        const bbox = markup.getWorldBoundingBox(true);\n        const limitAngle = Math.atan2(bbox.size().y, bbox.size().x);\n\n        // Quadrant locations:\n        //\n        //       \\   3   /\n        //        \\     /\n        //         \\   /\n        //     4    \\ /     2\n        //          / \\\n        //         /   \\\n        //        /  1  \\\n        //       /       \\\n        if (angle >= -(Math.PI - limitAngle) && angle < -limitAngle) {\n            return 1;\n        } else if (angle >= -limitAngle && angle < limitAngle) {\n            return 2;\n        } else if (angle >= limitAngle && angle < Math.PI - limitAngle) {\n            return 3;\n        } else {\n            return 4;\n        }\n    }\n\n    getTextQuadrant(angle) {\n        return this.getQuadrant(this.getTextMarkup(), angle);\n    }\n\n    getShapeQuadrant(angle) {\n        return this.getQuadrant(this.getShapeMarkup(), angle);\n    }\n\n    // Returns a vector from closest vertex to the passed point\n    getVectorToClosestPointOnCloud(point) {\n        const text = this.getTextMarkup();\n        const geo = text.frameMarkup.meshLine.sourceGeo;\n        let closestDistance = Infinity;\n        let closestVertex = null;\n\n        // Find closest point on cloud (brute force approach)\n        geo.forEach((vertex) => {\n            const distance = point.distanceToSquared(vertex);\n            if (distance < closestDistance) {\n                closestDistance = distance;\n                closestVertex = vertex;\n            }\n        });\n\n        return point.clone().sub(closestVertex);\n    }\n\n    applyArrowTextConstraint(state) {\n        const arrow = this.getArrowMarkup();\n        const text = this.getTextMarkup();\n        state = state || arrow.getEditState();\n        if (!state.anchors[0] || !state.anchors[1]) {\n            return;\n        } \n        \n        const bbox = text.getWorldBoundingBox(true);\n        const center = bbox.getCenter();\n        const halfThickness = text.editState.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS] / 2;\n        const halfHeight = bbox.size().y / 2 - halfThickness;\n        const halfWidth = bbox.size().x / 2 - halfThickness;\n\n        const origArrowTail = state.anchors[0];\n        const arrowHead = state.anchors[1].clone();\n        arrow.applyScaleAndTranslation(arrowHead);\n\n        const angle = Math.atan2(arrowHead.y - center.y, arrowHead.x - center.x);\n\n        switch (this.getTextQuadrant(angle)) {\n            case 1:\n                origArrowTail.set(center.x, center.y - halfHeight, 0);\n                break;\n            case 2:\n                origArrowTail.set(center.x + halfWidth, center.y, 0);\n                break;\n            case 3:\n                origArrowTail.set(center.x, center.y + halfHeight, 0);\n                break;\n            case 4:\n                origArrowTail.set(center.x - halfWidth, center.y, 0);\n                break;\n        }\n\n        if (text.editState.frameType === MarkupsConstants.MARKUP_TYPE_CLOUD) {\n            const tailPoint = origArrowTail.clone().sub(center);\n            const delta = this.getVectorToClosestPointOnCloud(tailPoint).negate();\n            origArrowTail.add(delta);\n        }\n        arrow.applyInverseScaleAndTranslation(origArrowTail);\n        arrow.creationHandler.updateEditStateAnchors();\n    }\n    \n    applyShapeArrowConstraint(state) {\n        const arrow = this.getArrowMarkup();\n        const shape = this.getShapeMarkup();\n        state = state || arrow.getEditState();\n        if (!state.anchors[0] || !state.anchors[1]) {\n            return;\n        } \n        \n        const bbox = shape.getWorldBoundingBox(true);\n        const center = bbox.getCenter();\n        const halfHeight = bbox.size().y / 2;\n        const halfWidth = bbox.size().x / 2;\n\n        const origArrowHead = state.anchors[1];\n        const arrowTail = state.anchors[0].clone();\n        arrow.applyScaleAndTranslation(arrowTail);\n\n        const dx = arrowTail.x - center.x;\n        const dy = arrowTail.y - center.y;\n        const angle = Math.atan2(dy, dx);\n        let delta;\n\n        const sign = d => d > 0 ? 1 : -1;\n\n        switch (this.getShapeQuadrant(angle)) {\n            case 1:\n                delta = sign(dx) * halfWidth / 3;\n                origArrowHead.set(center.x + delta, center.y - halfHeight, 0);\n                break;\n            case 2:\n                delta = sign(dy) * halfHeight / 3;\n                origArrowHead.set(center.x + halfWidth, center.y + delta, 0);\n                break;\n            case 3:\n                delta = sign(dx) * halfWidth / 3;\n                origArrowHead.set(center.x + delta, center.y + halfHeight, 0);\n                break;\n            case 4:\n                delta = sign(dy) * halfHeight / 3;\n                origArrowHead.set(center.x - halfWidth, center.y + delta, 0);\n                break;\n        }\n\n        arrow.applyInverseScaleAndTranslation(origArrowHead);\n        arrow.creationHandler.updateEditStateAnchors();\n    }\n    \n    applyArrowConstraints(state) {\n        throw new Error('applyArrowTextConstraint must be implemented');\n    }\n\n    applyConstraints(sourceMarkup, prevState, newState) {\n        throw new Error('applyConstraints must be implemented');\n    }\n\n    applyTranslation(sourceMarkup, prevState, newState) {\n        this.markups.forEach(markup => {\n            if (markup === sourceMarkup || !markup.isCompleted()) {\n                return;\n            }\n\n            markup.setLocked(true);\n            if (sourceMarkup.type === MarkupsConstants.MARKUP_TYPE_ARROW) {\n                // For shape and text, apply the same translation\n                let translation = newState.translation.clone().sub(prevState.translation);\n                translation = markup.editState.translation.clone().add(translation);\n                markup.creationHandler.updateEditState({translation});\n            } else { // markup is arrow\n                this.applyArrowConstraints();\n            }\n            markup.setLocked(false);\n        });\n    }\n\n    applyStyle(sourceMarkup, prevState, newState, changes) {\n        this.markups.forEach(markup => {\n            if (markup === sourceMarkup || !markup.isCompleted()) {\n                return;\n            }\n\n            markup.setLocked(true);\n            markup.creationHandler.updateEditState({ style: changes.style });\n            this.applyArrowConstraints();\n            markup.setLocked(false);\n        });\n    }\n\n    applyScale(sourceMarkup, prevState, newState) {\n        this.markups.forEach(markup => {\n            if (markup === sourceMarkup || !markup.isCompleted()) {\n                return;\n            }\n\n            if (markup.type === MarkupsConstants.MARKUP_TYPE_ARROW) {\n                markup.setLocked(true);\n                this.applyArrowConstraints();\n                markup.setLocked(false);\n            }\n        });\n    }\n\n    applyTextChange(sourceMarkup, prevState, newState) {\n        this.applyArrowConstraints();\n    }\n\n    onEmptyTextMarkup() {\n        this.markupsExtension.markupsManager.actionManager.undo();\n\n        const textMarkup = this.getTextMarkup();\n        textMarkup.creationHandler.updateEditState({ text: textMarkup.getDefaultState().text });\n        textMarkup.creationHandler.submitChanges();\n    }\n}\n\nMarkupCallout.withSnappingMarkup = true;\n","import Markup from './Markup';\nimport TranslationHandler from \"../EditHandlers/TranslationHandler\";\nimport ScaleHandler from \"../EditHandlers/ScaleHandler\";\n\nexport default class MarkupGroup extends Markup {\n    constructor(markupsExtension, id, type, state, options) {\n        super(markupsExtension, id, type, state, options);\n    }\n\n    render(changes = this.editState) {\n        // Group is only a container markup - doesn't do any rendering itself\n    }\n\n    intersect(_point) {\n        return false;\n    }\n\n    isGroupMarkup() {\n        return true;\n    }\n    \n    select(selectedMarkup) {\n        this.selected = true;\n        this.enableEdit();\n\n        if (selectedMarkup) {\n            this.setLocked(true);\n            this.markups.forEach(markup => markup !== selectedMarkup && !markup.isSelected() && markup.select());\n            this.setLocked(false);\n        }\n\n        this.setDirty();\n    }\n    \n    setHover(hover, hoveredMarkup) {\n        if (this.hover === hover) return;\n        \n        this.hover = hover;\n\n        if (hoveredMarkup) {\n            this.setLocked(true);\n            this.markups.forEach(markup => markup !== hoveredMarkup && markup.isHovered() !== hover && markup.setHover(hover));\n            this.setLocked(false);\n        }\n\n        this.setDirty();\n    }\n\n    calculateWorldBoundingBox() {\n        const boundingBox = new THREE.Box3();\n\n        this.markups.forEach(markup => {\n            const bbox = markup.getWorldBoundingBox(true);\n            boundingBox.union(bbox);\n        });\n\n        return boundingBox;\n    }\n\n    remove(doDispatchEvent = true) {\n        this.markups.forEach(markup => markup.remove(doDispatchEvent));\n        \n        super.remove(doDispatchEvent);\n    }\n\n    syncGroupMarkups(sourceMarkup, prevState, newState, changes, source) {\n        if (changes.anchors) {\n            this.applyConstraints(sourceMarkup, prevState, newState);\n        }\n        \n        // Translation constraints are only applied when it comes from a mouse movement in the translation handler\n        // This allows creating specific interactions depending on which component of the group was moved\n        if (changes.translation && source instanceof TranslationHandler && source.keyTranslation.length() === 0) {\n            this.applyTranslation(sourceMarkup, prevState, newState);\n        }\n        \n        if (changes.scale && source instanceof ScaleHandler) {\n            this.applyScale(sourceMarkup, prevState, newState);\n        }\n        \n        if (changes.style) {\n            this.applyStyle(sourceMarkup, prevState, newState, changes);\n        }\n        \n        if (changes.text) {\n            this.applyTextChange(sourceMarkup, prevState, newState);\n        }\n    }\n    \n    applyConstraints(sourceMarkup, prevState, newState) {\n      \n    }\n\n    applyTranslation(sourceMarkup, prevState, newState) {\n        \n    }\n    \n    applyStyle(sourceMarkup, prevState, newState, changes) {\n        \n    }\n\n    applyScale(sourceMarkup, prevState, newState) {\n        \n    }\n\n    applyTextChange(sourceMarkup, prevState, newState) {\n        \n    }\n}\n","import * as MarkupsConstants from '../MarkupsConstants';\nimport MarkupCallout from \"./MarkupCallout\";\n\nexport default class MarkupArrowCallout extends MarkupCallout {\n    constructor(markupsExtension, id, state, options = {}) {\n        super(markupsExtension, id, MarkupsConstants.MARKUP_TYPE_ARROW_CALLOUT, state, options);\n    }\n\n    getTextMarkup() {\n        return this.markups[1];\n    }\n\n    getArrowMarkup() {\n        return this.markups[0];\n    }\n\n    applyArrowConstraints(state) {\n        this.applyArrowTextConstraint(state);\n    }\n\n    applyConstraints(sourceMarkup, prevState, newState) {\n        this.markups.forEach(markup => {\n            if (markup === sourceMarkup || !markup.isCompleted()) {\n                return;\n            }\n\n            if (sourceMarkup.type === MarkupsConstants.MARKUP_TYPE_ARROW && sourceMarkup.anchorHandler.activeAnchor === sourceMarkup.getHead()) {\n                sourceMarkup.setLocked(true);\n                this.applyArrowConstraints(newState);\n                sourceMarkup.setLocked(false);\n            }\n        });\n    }\n}\n","import * as MarkupsConstants from '../MarkupsConstants';\nimport MarkupCallout from \"./MarkupCallout\";\n\nexport default class MarkupArrowCloudCallout extends MarkupCallout {\n    constructor(markupsExtension, id, state, options = {}) {\n        super(markupsExtension, id, MarkupsConstants.MARKUP_TYPE_ARROW_CLOUD_CALLOUT, state, options);\n    }\n    \n    getTextMarkup() {\n        return this.markups[2];\n    }\n    \n    getArrowMarkup() {\n        return this.markups[1];\n    }\n\n    getShapeMarkup() {\n        return this.markups[0];\n    }\n    \n    \n    applyArrowConstraints(state) {\n        this.applyArrowTextConstraint(state);\n        this.applyShapeArrowConstraint(state);\n    }\n\n    applyConstraints(sourceMarkup, prevState, newState) {\n        this.markups.forEach(markup => {\n            if (markup === sourceMarkup || !markup.isCompleted()) {\n                return;\n            }\n\n            if (sourceMarkup.type === MarkupsConstants.MARKUP_TYPE_ARROW) {\n                sourceMarkup.setLocked(true);\n                if (markup.type === MarkupsConstants.MARKUP_TYPE_CLOUD) {\n                    this.applyShapeArrowConstraint(newState);\n                } else {\n                    this.applyArrowTextConstraint(newState);\n                }\n                sourceMarkup.setLocked(false);\n            }\n        });\n    }\n}\n","import * as MarkupsConstants from '../MarkupsConstants';\nimport MarkupArrow from './MarkupArrow';\nimport MarkupPolyline from './MarkupPolyline';\nimport MarkupPolycloud from './MarkupPolycloud';\nimport MarkupRectangle from './MarkupRectangle';\nimport MarkupCircle from './MarkupCircle';\nimport MarkupCloud from './MarkupCloud';\nimport MarkupFreehand from './MarkupFreehand';\nimport MarkupHighlight from \"./MarkupHighlight\";\nimport MarkupText from './MarkupText';\nimport MarkupDimension from './MarkupDimension';\nimport MarkupLine from './MarkupLine';\nimport MarkupArrowCallout from './MarkupArrowCallout';\nimport MarkupArrowCloudCallout from './MarkupArrowCloudCallout';\n\nexport const markupsTypesDictionary = {\n    [MarkupsConstants.MARKUP_TYPE_ARROW]: MarkupArrow,\n    [MarkupsConstants.MARKUP_TYPE_POLYLINE]: MarkupPolyline,\n    [MarkupsConstants.MARKUP_TYPE_POLYCLOUD]: MarkupPolycloud,\n    [MarkupsConstants.MARKUP_TYPE_RECTANGLE]: MarkupRectangle,\n    [MarkupsConstants.MARKUP_TYPE_CIRCLE]: MarkupCircle,\n    [MarkupsConstants.MARKUP_TYPE_CLOUD]: MarkupCloud,\n    [MarkupsConstants.MARKUP_TYPE_FREEHAND]: MarkupFreehand,\n    [MarkupsConstants.MARKUP_TYPE_HIGHLIGHT]: MarkupHighlight,\n    [MarkupsConstants.MARKUP_TYPE_ARROW_CALLOUT]: MarkupArrowCallout,\n    [MarkupsConstants.MARKUP_TYPE_ARROW_CLOUD_CALLOUT]: MarkupArrowCloudCallout,\n    [MarkupsConstants.MARKUP_TYPE_CALLOUT]: MarkupText,\n    [MarkupsConstants.MARKUP_TYPE_TEXT]: MarkupText,\n    [MarkupsConstants.MARKUP_TYPE_DIMENSION]: MarkupDimension,\n    [MarkupsConstants.MARKUP_TYPE_LINE]: MarkupLine\n};\n","import { MARKUPS_EVENTS } from './MarkupsEvents';\nimport * as MarkupsConstants from './MarkupsConstants';\nimport RectSelector from './EditHandlers/RectSelector';\nimport { markupsTypesDictionary } from './MarkupTypes/MarkupsTypesDictionary';\n\nconst av = Autodesk.Viewing;\n\nexport default class MarkupsTool {\n    constructor(markupsExtension) {\n        this.markupsExtension = markupsExtension;\n        this.setGlobalManager(markupsExtension.globalManager);\n        this.viewer = markupsExtension.viewer;\n\n        this.names = ['markups'];\n\n        this.isActive = false;\n\n        this.onCameraChangedBinded = this.onCameraChanged.bind(this);\n        this.onEditStartBinded = this.onEditStart.bind(this);\n        this.onEditEndBinded = this.onEditEnd.bind(this);\n        this.onDrawEndBinded = this.onDrawEnd.bind(this);\n        this.onCreationTypeChangedBinded = this.onCreationTypeChanged.bind(this);\n        this.onSelectionChangedBinded = this.onSelectionChanged.bind(this);\n\n        this.rectSelector = new RectSelector(this.markupsExtension);\n\n        this.lastDrawEndTime = -Infinity;\n    }\n\n    getNames() {\n        return this.names;\n    }\n\n    getName() {\n        return this.names[0];\n    }\n\n    getPriority() {\n        return this.markupsExtension.markupsManager.isMarkupSessionOpen() ? 200 : 40;\n    }\n\n    updateToolPriority() {\n        this.markupsExtension.viewer.toolController.rearrangeByPriorities();\n    }\n\n    intersectHandler(markups, handlerName) {\n        if (this.lastMousePos) {\n            for (let i = markups.length - 1; i >= 0; i--) {\n                const markup = markups[i];\n\n                if (markup.isCompleted()) {\n                    const handler = markup[handlerName];\n\n                    if (handler) {\n                        const mousePos = this.lastMousePos.clone();\n                        const intersected = handler.intersect(mousePos);\n\n                        if (intersected || handler.isDragging()) {\n                            return handler.getCursor();\n                        }\n                    }\n                }\n            }\n        }\n\n        return null;\n    }\n\n    getCursor() {\n        const duringCreationMarkup = this.markupsExtension.markupsManager.getDuringCreationMarkup(false);\n        const selectableMarkups = this.markupsExtension.markupsManager.getEnabledMarkups();\n        const activeLayer = this.markupsExtension.markupsManager.getActiveLayer();\n        const hasSelection = this.hasSelection();\n\n        let cursor = null;\n\n        if (this.markupsExtension.markupsManager.isMarkupSessionOpen()) {\n            const inEditMarkups = this.markupsExtension.markupsManager.getInEditMarkups();\n            const editableLinks = activeLayer.getAllLinks();\n\n            cursor = duringCreationMarkup && duringCreationMarkup.creationHandler.getCursor(); // Get cursor of during creation markups.\n\n            cursor = cursor || this.intersectHandler(editableLinks, 'anchorHandler');\n\n            cursor = cursor || this.intersectHandler(inEditMarkups, 'anchorHandler');\n            cursor = cursor || this.intersectHandler(inEditMarkups, 'scaleHandler');\n            cursor = cursor || this.intersectHandler(inEditMarkups, 'rotationHandler');\n            cursor = cursor || this.intersectHandler(inEditMarkups, 'translationHandler');\n            cursor = cursor || this.intersectHandler(inEditMarkups, 'dimensionEditHandler');\n        }\n\n        cursor = cursor || this.intersectHandler(selectableMarkups, 'selectionHandler');\n\n        if (!this.markupsExtension.markupsManager.isMarkupSessionOpen()) {\n            const visibleLinks = this.markupsExtension.markupsManager.getVisibleLinks();\n            cursor = cursor || this.intersectHandler(visibleLinks, 'selectionHandler');\n        }\n\n        const creationType = this.markupsExtension.markupsManager.getMarkupCreationType();\n\n        if (!cursor && creationType === MarkupsConstants.RECT_SELECTOR && !this.isRectSelectorActive()) {\n            cursor = 'auto';\n        }\n\n        cursor = cursor || (creationType && (hasSelection && !this.isRectSelectorActive() ? 'auto' : (MarkupsConstants.MARKUP_CREATION_CURSORS[creationType] || 'crosshair')));\n\n        return cursor;\n    }\n\n    register() {\n        this.snapper = new Autodesk.Viewing.Extensions.Snapping.Snapper(this.viewer, { markupMode: true });\n        this.viewer.toolController.registerTool(this.snapper);\n    }\n\n    deregister() {\n        if (this.snapper) {\n            this.viewer.toolController.deregisterTool(this.snapper);\n            this.snapper = null;\n        }\n    }\n\n    activate(name) {\n        if (name === this.getName() && !this.isActive) {\n            this.isActive = true;\n            this.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangedBinded);\n            this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_EDIT_START, this.onEditStartBinded);\n            this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_EDIT_END, this.onEditEndBinded);\n            this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_DRAWING_END, this.onDrawEndBinded);\n            this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_CREATION_TYPE_CHANGED, this.onCreationTypeChangedBinded);\n            this.addDocumentEventListener('selectionchange', this.onSelectionChangedBinded);\n        }\n    }\n\n    deactivate(name) {\n        if (name === this.getName() && this.isActive) {\n            this.isActive = false;\n            this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangedBinded);\n            this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_EDIT_START, this.onEditStartBinded);\n            this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_EDIT_END, this.onEditEndBinded);\n            this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_DRAWING_END, this.onDrawEndBinded);\n            this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_CREATION_TYPE_CHANGED, this.onCreationTypeChangedBinded);\n            this.removeDocumentEventListener('selectionchange', this.onSelectionChangedBinded);\n            this.onCreationTypeChanged();\n        }\n    }\n\n    onSelectionChanged() {\n        const markups = this.markupsExtension.markupsManager.getSelectedMarkups();\n        markups.forEach((markup) => {\n            if (markup.isTextMarkup() && markup.isInEdit()) {\n                markup.textInputHandler.updateCaretPosition();\n            }\n        });\n    }\n\n    eventToWorld(event) {\n        const pointScreen = { x: event.canvasX, y: event.canvasY };\n        const point = this.markupsExtension.renderer.clientToWorld(pointScreen);\n\n        return point;\n    }\n\n    getSnappedPosition() {\n        if (!this.lastSnapPoint) {\n            if (!this.viewer.impl.is2d && !this.isSnappingAllowed()) {\n                this.lastSnapPoint = this.lastMousePos;\n            } else {\n                const pointScreen = { x: this.originalEvent.canvasX, y: this.originalEvent.canvasY };\n                this.snapper.onMouseMove(pointScreen);\n\n                if (!this.viewer.model.isLeaflet()) {\n                    this.snapper.indicator.render();\n                }\n\n                if (this.snapper.isSnapped()) {\n                    const point = Autodesk.Viewing.MeasureCommon.getSnapResultPosition(this.snapper.getSnapResult(), this.viewer);\n                    this.lastSnapPoint = this.markupsExtension.renderer.documentCameraToMarkupsCamera(point);\n                } else {\n                    this.lastSnapPoint = this.lastMousePos;\n                }\n            }\n        }\n\n        return this.lastSnapPoint.clone();\n    }\n\n    applyHandler(items, handlerName, eventName, button) {\n        for (let i = items.length - 1; i >= 0; i--) {\n            const item = items[i];\n\n            if (item.isCompleted()) {\n                const handler = item[handlerName];\n                if (handler) {\n                    const consume = handler[eventName](this.lastMousePos, button);\n\n                    if (consume) {\n                        return true;\n                    }\n                }\n            }\n        }\n\n        return false;\n    }\n\n    isNavigationToolActive() {\n        return this.viewer.getActiveNavigationTool() !== this.getName();\n    }\n\n    isSnappingAllowed() {\n        const markupCreationType = this.markupsExtension.markupsManager.getMarkupCreationType();\n        return markupCreationType && markupsTypesDictionary[markupCreationType].withSnappingMarkup &&\n                (markupCreationType === MarkupsConstants.MARKUP_TYPE_DIMENSION || !this.viewer.model.isLeaflet());\n    }\n\n    // Currently allow rect selecting only when session is open.\n    isRectSelectorActive() {\n        return this.markupsExtension.markupsManager.isMarkupSessionOpen() && this.markupsExtension.markupsManager.getMarkupCreationType() === MarkupsConstants.RECT_SELECTOR;\n    }\n\n    hasSelection() {\n        const isSessionOpen = this.markupsExtension.markupsManager.isMarkupSessionOpen();\n\n        return (this.markupsExtension.markupsManager.getSelectedMarkups().length > 0) ||\n                (!isSessionOpen &&\n                    (this.markupsExtension.markupsManager.getSelectedLayers().length > 0 ||\n                    this.markupsExtension.markupsManager.getSelectedLinks().length > 0));\n    }\n\n    /**\n     * Input handling\n     */\n    handleMouseEvent(event, button, eventName, clickStart) {\n        if (!this.markupsExtension.isToolEnabled()) {\n            return false;\n        }\n\n        this.lastMousePos = this.eventToWorld(event);\n        this.originalEvent = event;\n\n        this.markupsExtension.renderer.updateRaycaster({ x: event.canvasX, y: event.canvasY });\n\n        const markupCreationType = this.markupsExtension.markupsManager.getMarkupCreationType();\n        const isSessionOpen = this.markupsExtension.markupsManager.isMarkupSessionOpen();\n\n        let consumeEvent;\n        let markup;\n\n        if (!this.markupInEdit) {\n            if (!markupCreationType ||\n                !markupsTypesDictionary[markupCreationType].useTimerBeforeSelection ||\n                (markupsTypesDictionary[markupCreationType].useTimerBeforeSelection && ((performance.now() - this.lastDrawEndTime) > MarkupsConstants.TIMEOUT_TO_SELECT_AFTER_DRAWEND))) {\n                // Select & hover markups.\n                const selectableMarkups = this.markupsExtension.markupsManager.getEnabledMarkups().filter(m => !m.isSelected());\n                consumeEvent = consumeEvent || this.applyHandler(selectableMarkups, 'selectionHandler', eventName, button);\n            }\n        }\n\n        const activeLayer = this.markupsExtension.markupsManager.getActiveLayer();\n\n        // Continue creating existing markup.\n        if (markupCreationType) {\n            markup = this.markupsExtension.markupsManager.getDuringCreationMarkup(false);\n\n            if (markup) {\n                if (!markup.isCompleted()) {\n                    if (consumeEvent) {\n                        // If another markup has been selected, cancel creation.\n                        markup.creationHandler.creationCancel();\n                    } else {\n                        const mousePos = markup.creationHandler.getSnappedPosition();\n\n                        // mousemove event shouldn't be triggered in creation handlers, unless the mouse moved the minimum threshold.\n                        if (eventName === 'handleMouseMove' && !(this.mouseMoved || markup.creationHandler.creationStarted)) {\n                            // Necessary in order to prevent unwanted navigation during creation.\n                            consumeEvent = true;\n                        } else {\n                            consumeEvent = markup.creationHandler[eventName](mousePos, button);\n                        }\n                    }\n                }\n            }\n        }\n\n        // Edit existing markups & link icons, using handlers.\n        if (isSessionOpen) {\n            // Links\n            const editableLinks = activeLayer.getAllLinks();\n            consumeEvent = consumeEvent || this.applyHandler(editableLinks, 'anchorHandler', eventName, button);\n\n            // Markups\n            const inEditMarkups = this.markupsExtension.markupsManager.getInEditMarkups();\n\n            consumeEvent = consumeEvent || this.applyHandler(inEditMarkups, 'scaleHandler', eventName, button);\n            consumeEvent = consumeEvent || this.applyHandler(inEditMarkups, 'anchorHandler', eventName, button);\n            consumeEvent = consumeEvent || this.applyHandler(inEditMarkups, 'rotationHandler', eventName, button);\n            consumeEvent = consumeEvent || this.applyHandler(inEditMarkups, 'translationHandler', eventName, button);\n            consumeEvent = consumeEvent || this.applyHandler(inEditMarkups, 'dimensionEditHandler', eventName, button);\n            consumeEvent = consumeEvent || this.applyHandler(inEditMarkups, 'textInputHandler', eventName, button);\n        }\n\n        // For Dimension markup only, the snapper indicator should be visible even before the creation has started.\n        if (!consumeEvent && eventName === 'handleMouseMove' && this.isSnappingAllowed()) {\n            this.getSnappedPosition();\n        }\n\n        // Selection rect. Currently allow rect selecting only when session is open.\n        if (this.isRectSelectorActive()) {\n            consumeEvent = consumeEvent || this.rectSelector[eventName](this.lastMousePos);\n        }\n\n        // Link icon click & hover.\n        if (!isSessionOpen) {\n            const visibleLinks = this.markupsExtension.markupsManager.getVisibleLinks();\n            consumeEvent = consumeEvent || this.applyHandler(visibleLinks, 'selectionHandler', eventName, button);\n        }\n\n        // Click outside to deselect.\n        if (!consumeEvent && (eventName === 'handleButtonUp' || (eventName === 'handleButtonDown' && markupCreationType && markupsTypesDictionary[markupCreationType].singleClickMarkup))) {\n            if (this.hasSelection() && !this.shiftDown && !this.mouseMoved && !this.isRectSelectorActive()) {\n                this.markupsExtension.markupsManager.deselectAllMarkups();\n                this.markupsExtension.markupsManager.deselectAllLinks();\n\n                if (!isSessionOpen) {\n                    this.markupsExtension.markupsManager.deselectAllLayers(null);\n                }\n\n                consumeEvent = true;\n            }\n        }\n\n        // Create new markup.\n        if (!consumeEvent && clickStart && markupCreationType && !this.isNavigationToolActive()) {\n            markup = this.markupsExtension.markupsManager.getDuringCreationMarkup(true);\n\n            if (markup) {\n                const mousePos = markup.creationHandler.getSnappedPosition();\n                consumeEvent = markup.creationHandler[eventName](mousePos, button);\n\n                if (!consumeEvent) {\n                    markup.creationHandler.creationCancel();\n                }\n            }\n        }\n\n        this.lastSnapPoint = null;\n\n        return consumeEvent;\n    }\n\n    handleButtonDown(event, button) {\n        this.dragging = true;\n        this.buttonDownPos = new THREE.Vector2(event.canvasX, event.canvasY, 0);\n        this.mouseMoved = false;\n        this.buttonDownConsumed = false;\n        this.selectedOnDown = false;\n\n        this.panning = (!Autodesk.Viewing.isMobileDevice() && (this.isRightClick(event) || this.isMiddleClick(event)));\n\n        if (this.panning) {\n            return false;\n        }\n\n        this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.BUTTON_DOWN });\n\n        this.buttonDownConsumed = this.handleMouseEvent(event, button, 'handleButtonDown', true);\n\n        const selectedMarkups = this.markupsExtension.markupsManager.getSelectedMarkups();\n       \n        this.selectedOnDown = selectedMarkups.length > 0;\n\n        return this.buttonDownConsumed;\n    }\n\n    handleButtonUp(event, button) {\n        this.dragging = false;\n        this.buttonDownPos = null;\n        this.buttonUpConsumed = false;\n        this.buttonUpCalled = true;\n\n        if (this.panning || (this.mouseMoved && !this.buttonDownConsumed)) {\n            this.panning = false;\n            this.mouseMoved = false;\n            return false;\n        }\n\n        const consumed = this.handleMouseEvent(event, button, 'handleButtonUp', false);\n\n\n        const selectedMarkups = this.markupsExtension.markupsManager.getSelectedMarkups();\n\n        // In case there is a selected markup, single click should only deselect it, and not start creating a new markup.\n        if (!this.mouseMoved && this.selectedOnDown && !selectedMarkups[0]) {\n            const markup = this.markupsExtension.markupsManager.getDuringCreationMarkup(false);\n            if (markup) {\n                markup.creationHandler.creationCancel();\n            }\n            this.markupsExtension.markupsManager.deselectAllMarkups();\n        }\n\n        this.buttonUpConsumed = consumed;\n        const wasMouseMoved = this.mouseMoved;\n        this.mouseMoved = false;\n\n        return (consumed && wasMouseMoved) || this.isRectSelectorActive();\n    }\n\n    handleDoubleClick(event, button) {\n        const consumed = this.handleMouseEvent(event, button, 'handleDoubleClick', false);\n        const creationToolSelected = this.markupsExtension.markupsManager.isMarkupSessionOpen() && this.markupsExtension.markupsManager.getMarkupCreationType();\n        return consumed || creationToolSelected;\n    }\n\n    handleMouseMove(event) {\n        if (this.panning) {\n            return false;\n        }\n\n        if (this.buttonDownPos && !this.mouseMoved) {\n            this.mouseMoved = new THREE.Vector2(event.canvasX, event.canvasY, 0).distanceTo(this.buttonDownPos) > MarkupsConstants.MIN_CHANGE_DISTANCE;\n        }\n\n        this.markupsExtension.markupsManager.unhoverAllLayers();\n        this.markupsExtension.markupsManager.unhoverAllMarkups();\n\n        const consumed = this.handleMouseEvent(event, null, 'handleMouseMove', false);\n\n        return this.dragging && consumed;\n    }\n\n    handleKeyDown(event, keyCode) {\n        const inEditMarkups = this.markupsExtension.markupsManager.getInEditMarkups();\n\n        let consumeEvent = false;\n\n        const duringCreationMarkup = this.markupsExtension.markupsManager.getDuringCreationMarkup(false);\n\n        if (duringCreationMarkup) {\n            consumeEvent = duringCreationMarkup.creationHandler.handleKeyDown(event, keyCode);\n        } else {\n            this.markupsExtension.markupsManager.openActionGroup();\n            let consumed;\n\n            for (let i = inEditMarkups.length - 1; i >= 0; i--) {\n                const markup = inEditMarkups[i];\n\n                if (markup) {\n                    if (markup.isCompleted()) {\n                        consumed = markup.anchorHandler && markup.anchorHandler.handleKeyDown(event, keyCode);\n\n                        if (!consumed) {\n                            consumed = markup.textInputHandler && markup.textInputHandler.handleKeyDown(event, keyCode);\n                        }\n\n                        if (!consumed) {\n                            consumed = markup.scaleHandler && markup.scaleHandler.handleKeyDown(event, keyCode);\n                        }\n\n                        if (!consumed) {\n                            consumed = markup.rotationHandler && markup.rotationHandler.handleKeyDown(event, keyCode);\n                        }\n\n                        if (!consumed) {\n                            consumed = markup.translationHandler && markup.translationHandler.handleKeyDown(event, keyCode);\n                        }\n\n                        if (!consumed) {\n                            consumed = markup.dimensionEditHandler && markup.dimensionEditHandler.handleKeyDown(event, keyCode);\n                        }\n\n                        if (!consumed) {\n                            consumed = markup.selectionHandler && markup.selectionHandler.handleKeyDown(event, keyCode);\n                        }\n                    }\n                }\n\n                consumeEvent = consumeEvent || consumed;\n            }\n\n            this.markupsExtension.markupsManager.closeActionGroup();\n        }\n\n        const links = this.markupsExtension.markupsManager.getVisibleLinks();\n\n        for (let i = links.length - 1; i >= 0; i--) {\n            const link = links[i];\n\n            consumeEvent = consumeEvent || (link.anchorHandler && link.anchorHandler.handleKeyDown(event, keyCode));\n            consumeEvent = consumeEvent || (link.selectionHandler && link.selectionHandler.handleKeyDown(event, keyCode));\n        }\n\n        if (!consumeEvent) {\n            switch (keyCode) {\n                case Autodesk.Viewing.KeyCode.CONTROL:\n                    this.ctrlDown = true;\n                    break;\n                case Autodesk.Viewing.KeyCode.SHIFT:\n                    this.shiftDown = true;\n                    consumeEvent = true;\n                    break;\n                case Autodesk.Viewing.KeyCode.a:\n                    if (this.ctrlDown) {\n                        if (this.markupsExtension.markupsManager.isMarkupSessionOpen()) {\n                            const layer = this.markupsExtension.markupsManager.getActiveLayer();\n                            layer.selectAllMarkups();\n                            consumeEvent = true;\n                        }\n                    }\n                    break;\n                case Autodesk.Viewing.KeyCode.x:\n                    if (this.ctrlDown) {\n                        this.markupsExtension.cut();\n                        consumeEvent = true;\n                    }\n                    break;\n                case Autodesk.Viewing.KeyCode.c:\n                    if (this.ctrlDown) {\n                        this.markupsExtension.copy();\n                        consumeEvent = true;\n                    }\n                    break;\n                case Autodesk.Viewing.KeyCode.v:\n                    if (this.ctrlDown) {\n                        this.markupsExtension.paste();\n                        consumeEvent = true;\n                    }\n                    break;\n                case Autodesk.Viewing.KeyCode.d: // Duplicate\n                    if (this.ctrlDown) {\n                        this.markupsExtension.copy();\n                        this.markupsExtension.paste();\n                        consumeEvent = true;\n                    }\n                    break;\n                case Autodesk.Viewing.KeyCode.z:\n                    if (this.ctrlDown && !this.shiftDown) {\n                        this.markupsExtension.undo();\n                        consumeEvent = true;\n                    } else if (this.ctrlDown && this.shiftDown) {\n                        this.markupsExtension.redo();\n                        consumeEvent = true;\n                    }\n                    break;\n                case Autodesk.Viewing.KeyCode.y:\n                    if (this.ctrlDown) {\n                        this.markupsExtension.redo();\n                        consumeEvent = true;\n                    }\n                    break;\n                case Autodesk.Viewing.KeyCode.ESCAPE:\n                    if (this.markupsExtension.markupsManager.getSelectedMarkups().length > 0) {\n                        this.markupsExtension.markupsManager.deselectAllMarkups();\n                        consumeEvent = true;\n                    } else if (this.markupsExtension.markupsManager.isMarkupSessionOpen()) {\n                        const layer = this.markupsExtension.markupsManager.getActiveLayer();\n\n                        if (layer.isEmpty()) {\n                            this.markupsExtension.endMarkupSession(false);\n                        } else {\n                            this.markupsExtension.markupsManager.dispatchEvent({\n                                type: MARKUPS_EVENTS.LAYER_DISCARD_PRESSED,\n                                onConfirmCB: () => {\n                                    this.markupsExtension.endMarkupSession(false);\n                                }\n                            });\n                        }\n                        consumeEvent = true;\n                    } else if (this.markupsExtension.markupsManager.getSelectedLayers().length > 0) {\n                        this.markupsExtension.markupsManager.deselectAllLayers();\n                        consumeEvent = true;\n                    }\n                    break;\n                case Autodesk.Viewing.KeyCode.BACKSPACE:\n                case Autodesk.Viewing.KeyCode.DELETE:\n                    this.markupsExtension.markupsManager.deleteInEditMarkups();\n                    break;\n                default:\n                    break;\n            }\n        }\n\n        return consumeEvent;\n    }\n\n    handleSingleClick(event, button) {\n        return this.buttonUpConsumed;\n    }\n\n    handleKeyUp(event, keyCode) {\n        const inEditMarkups = this.markupsExtension.markupsManager.getInEditMarkups();\n        const duringCreationMarkup = this.markupsExtension.markupsManager.getDuringCreationMarkup(false);\n\n        if (duringCreationMarkup) {\n            duringCreationMarkup.creationHandler.handleKeyUp(event, keyCode);\n        } else {\n            this.markupsExtension.markupsManager.openActionGroup();\n\n            for (let i = inEditMarkups.length - 1; i >= 0; i--) {\n                let consumed;\n                const markup = inEditMarkups[i];\n\n                if (markup) {\n                    if (markup.isCompleted()) {\n                        event.isDuringEdit = i < inEditMarkups.length - 1;\n                        consumed = markup.anchorHandler && markup.anchorHandler.handleKeyUp(event, keyCode);\n\n                        if (!consumed) {\n                            consumed = markup.translationHandler && markup.translationHandler.handleKeyUp(event, keyCode);\n                        }\n                    }\n                }\n            }\n\n            this.markupsExtension.markupsManager.closeActionGroup();\n        }\n\n        switch (keyCode) {\n            case Autodesk.Viewing.KeyCode.CONTROL:\n                this.ctrlDown = false;\n                break;\n            case Autodesk.Viewing.KeyCode.SHIFT:\n                this.shiftDown = false;\n                break;\n            default:\n                break;\n        }\n\n        return false;\n    }\n\n    onCameraChanged() {\n        if (this.isSnappingAllowed() && !this.viewer.model.isLeaflet()) {\n            this.snapper.indicator.render();\n        }\n    }\n\n    onCreationTypeChanged() {\n        this.snapper.indicator.clearOverlays();\n    }\n\n    onEditStart() {\n        this.markupInEdit = true;\n        this.snapper.indicator.clearOverlays();\n    }\n\n    onEditEnd() {\n        this.markupInEdit = false;\n        this.snapper.indicator.clearOverlays();\n    }\n\n    onDrawEnd() {\n        this.lastDrawEndTime = performance.now();\n    }\n\n    isMiddleClick(event) {\n        return Autodesk.Viewing.Private.isMiddleClick(event);\n    }\n\n    isRightClick(event) {\n        return Autodesk.Viewing.Private.isRightClick(event, this.viewer.navigation);\n    }\n\n    handleBlur() {\n        this.ctrlDown = false;\n        this.shiftDown = false;\n    }\n\n    // Mobile events\n\n    handleSingleTap(event) {\n        let consumed = this.buttonUpConsumed;\n\n        if (!this.buttonUpCalled) {\n            this.handleButtonDown(event, 0);\n            consumed = this.handleButtonUp(event, 0) || this.buttonUpConsumed;\n        }\n\n        // buttonUpCalled used to fix a bug where LMV sends sometimes both handleButtonUp and handleSingleTap on after the other.\n        this.buttonUpCalled = false;\n\n        return consumed;\n    }\n\n    handleDoubleTap(event) {\n        return this.handleDoubleClick(event, 0);\n    }\n\n    isNavigationJustEnded() {\n        return this.navigationEndTime && Date.now() - this.navigationEndTime < MarkupsConstants.MOBILE_GESTURES_MIN_THRESHOLD_TIME;\n    }\n\n    handleGesture(event) {\n        let consumed;\n\n        switch (event.type) {\n            case 'dragstart':\n                if (this.isNavigationJustEnded()) {\n                    return false;\n                }                \n\n                return this.handleButtonDown(event, 0);\n            case 'dragmove':\n                if (this.isNavigationJustEnded()) {\n                    return false;\n                }\n                return this.handleMouseMove(event);\n            case 'dragend':\n                if (this.isNavigationJustEnded()) {\n                    return false;\n                }\n                consumed = this.handleButtonUp(event, 0);\n                this.buttonUpCalled = false;\n                return consumed;\n            case 'pinchend':\n                this.navigationEndTime = Date.now();\n                break;\n            case 'panend':\n                this.navigationEndTime = Date.now();\n                break;\n\n            default:\n                break;\n        }\n\n        return false;\n    }\n}\n\nav.GlobalManagerMixin.call(MarkupsTool.prototype);","import { MARKUPS_EVENTS } from '../MarkupsEvents';\n\nconst av = Autodesk.Viewing;\n\nexport default class MarkupsUI {\n    constructor(markupsExtension) {\n        this.viewer = markupsExtension.viewer;\n        this.setGlobalManager(markupsExtension.globalManager);\n        this.options = markupsExtension.options;\n        this.markupsExtension = markupsExtension;\n\n        this.createUI();\n    }\n\n    createUI() {\n        const uiClasses = this.options.uiClasses;\n        if (!uiClasses) {\n            return;\n        }\n        \n        const _document = this.getDocument();\n        this.uiContainer = _document.createElement('div');\n        this.uiContainer.id = 'MarkupsUI_Container';\n        this.uiContainer.className = 'MarkupsUI_Container';\n        this.viewer.container.appendChild(this.uiContainer);\n                \n        const ToolbarClass = uiClasses.ToolbarClass;\n        this.toolbar = ToolbarClass && new ToolbarClass(this.markupsExtension, this.uiContainer, this.viewer, this.options);\n\n        const CreationToastClass = uiClasses.CreationToastClass;\n        this.creationToast = CreationToastClass && new CreationToastClass(this.markupsExtension, this.uiContainer, this.viewer, this.options);\n\n        const ContextualMenuClass = uiClasses.ContextualMenuClass;\n        this.contextualMenu = ContextualMenuClass && new ContextualMenuClass(this.markupsExtension, this.uiContainer, this.viewer, this.options);\n\n        const AttachmentsPreviewPanelClass = uiClasses.AttachmentsPreviewPanelClass;\n        this.attachmentsPreviewPanel = AttachmentsPreviewPanelClass && new AttachmentsPreviewPanelClass(this.markupsExtension, this.uiContainer, this.viewer, this.options);\n\n        const MarkupsDialogModalsClass = uiClasses.MarkupsDialogModalsClass;\n        this.MarkupsDialogModals = MarkupsDialogModalsClass && new MarkupsDialogModalsClass(this.markupsExtension, this.uiContainer, this.viewer, this.options);\n\n        if (this.viewer.impl.is2d) {\n            const MarkupsVisibilityButtonClass = uiClasses.MarkupsVisibilityButtonClass;\n            this.markupsVisibilityButton = MarkupsVisibilityButtonClass && new MarkupsVisibilityButtonClass(this.markupsExtension, this.uiContainer, this.viewer, this.options);\n        } else {\n            const ExitMarkupViewClass = uiClasses.ExitMarkupViewClass;\n            this.exitMarkupView = ExitMarkupViewClass && new ExitMarkupViewClass(this.markupsExtension, this.uiContainer, this.viewer, this.options);\n        }\n\n\n        this.registerEventListeners();\n    }\n\n    destroy() {\n        if (this.toolbar) {\n            this.toolbar.destroy();\n            this.toolbar = null;\n        }\n\n        if (this.creationToast) {\n            this.creationToast.destroy();\n            this.creationToast = null;\n        }\n\n        if (this.contextualMenu) {\n            this.contextualMenu.destroy();\n            this.contextualMenu = null;\n        }\n\n        if (this.attachmentsPreviewPanel) {\n            this.attachmentsPreviewPanel.destroy();\n            this.attachmentsPreviewPanel = null;\n        }\n\n        if (this.markupsVisibilityButton) {\n            this.markupsVisibilityButton.destroy();\n            this.markupsVisibilityButton = null;\n        }\n\n        if (this.exitMarkupView) {\n            this.exitMarkupView.destroy();\n            this.exitMarkupView = null;\n        }\n\n        this.unregisterEventListeners();\n\n        if (this.uiContainer) {\n            this.viewer.container.removeChild(this.uiContainer);\n            this.uiContainer = null;\n        }\n\n        this.markupsExtension = null;\n        this.viewer = null;\n        this.options = null;\n    }\n\n    ////////////////////////////////////////////////\n    ///////// Handle LMV navigation buttons ////////\n    ////////////////////////////////////////////////\n\n    registerEventListeners() {\n        this.onSessionStartBinded = this.onSessionStart.bind(this);\n        this.onSessionEndBinded = this.onSessionEnd.bind(this);\n\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_SESSION_START, this.onSessionStartBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_SESSION_END, this.onSessionEndBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LAYER_SELECTED, this.onSessionStartBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LAYER_DESELECTED, this.onSessionEndBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_CREATION_TYPE_CHANGED, this.onSessionStartBinded);\n    }\n\n    unregisterEventListeners() {\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_SESSION_START, this.onSessionStartBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_SESSION_END, this.onSessionEndBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LAYER_SELECTED, this.onSessionStartBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LAYER_DESELECTED, this.onSessionEndBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_CREATION_TYPE_CHANGED, this.onSessionStartBinded);\n    }\n\n    onSessionStart() {\n        this.selectNavigationButton(null);\n\n        if (this.viewer.impl.is2d) {\n            this.handleNavButtonEvents(true);\n        }\n    }\n\n    onSessionEnd() {\n        if (this.viewer.impl.is2d) {\n            this.handleNavButtonEvents(false);\n        }\n\n        this.selectNavigationButton(this.markupsExtension.markupsManager.navigationToolBackup);\n    }\n\n    getNavigationControls() {\n        const LMVtoolbar = this.viewer.getToolbar();\n        const navigationControls = LMVtoolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);\n        return navigationControls._controls;\n    }\n\n    // Add / remove listeners for client event on each navigation toolbar button.\n    handleNavButtonEvents(addEventListener) {\n        this.onNavButtonClickBinded = this.onNavButtonClick.bind(this);\n        const buttons = this.getNavigationControls();\n\n        const handleButtonEvents = (button) => {\n            if (addEventListener) {\n                if (!button.hasEventListener(Autodesk.Viewing.UI.Button.Event.CLICK, this.onNavButtonClickBinded)) {\n                    button.addEventListener(Autodesk.Viewing.UI.Button.Event.CLICK, this.onNavButtonClickBinded);\n                }\n            } else {\n                button.removeEventListener(Autodesk.Viewing.UI.Button.Event.CLICK, this.onNavButtonClickBinded);\n            }\n        };\n\n        buttons.forEach((button) => {\n            handleButtonEvents(button);\n\n            if (button.subMenu) {\n                const subButtons = button.subMenu._controls;\n                subButtons.forEach((subButton) => {\n                    handleButtonEvents(subButton);\n                });\n            }\n        });\n    }\n\n    onNavButtonClick(event) {\n        const buttons = this.getNavigationControls();\n\n        buttons.forEach((button) => {\n            if (button._id !== event.target._id) {\n                button.setState(Autodesk.Viewing.UI.Button.State.INACTIVE);\n            } else if (button.getState() === Autodesk.Viewing.UI.Button.State.INACTIVE) {\n                this.markupsExtension.markupsManager.changeMarkupCreationType(null);\n                button.setState(Autodesk.Viewing.UI.Button.State.ACTIVE); // This is mandatory to actually change the active navigation tool & update icon.\n\n                setTimeout(() => {\n                    this.markupsExtension.markupsManager.navigationToolBackup = this.viewer.getActiveNavigationTool();\n                });\n            }\n        });\n    }\n\n    // Setup active navigation tool on viewer and also activate corresponding button on navigation toolbar.\n    selectNavigationButton(toolName) {\n        const setButtonState = (button) => {\n            const isActive = button._id.toLowerCase().indexOf(toolName) !== -1;\n            button.setState(isActive ? Autodesk.Viewing.UI.Button.State.ACTIVE : Autodesk.Viewing.UI.Button.State.INACTIVE);\n        };\n\n        const buttons = this.getNavigationControls();\n\n        buttons.forEach((button) => {\n            setButtonState(button);\n\n            // Add additional check for group button\n            if (button.subMenu) {\n                button.subMenu._controls.forEach((subButton) => {\n                    setButtonState(subButton);\n                });\n            }\n        });\n    }\n}\n\nav.GlobalManagerMixin.call(MarkupsUI.prototype);","export default class MarkupsLayerData {\n    constructor(guid, resources, attachments, status, metadata) {\n        this.guid = guid;\n        this.resources = resources || [];\n        this.attachments = attachments || [];\n        this.status = status;\n        this.metadata = metadata || {};\n    }\n\n    getSvgResource() {\n        return this.resources[0] && this.resources[0].data;\n    }\n\n    getScreenCaptureResource() {\n        return this.resources[1] && this.resources[1].data;\n    }\n\n    getLinksMetadata() {\n        return this.metadata && this.metadata.markup_metadata && this.metadata.markup_metadata.links;\n    }\n\n    getMetadata() {\n        return this.metadata;\n    }\n}\n","import UpdateMarkupAction from '../Actions/UpdateMarkupAction';\nimport * as MarkupsConstants from '../MarkupsConstants';\n\nexport default class EditHandler {\n    constructor(markupsExtension, link) {\n        this.markupsExtension = markupsExtension;\n        this.viewer = markupsExtension.viewer;\n        this.link = link;\n\n        this.link.syncEditState();\n    }\n\n    getEditState() {\n        return this.link.getEditState();\n    }\n\n    setEditState(editState) {\n        this.link.setEditState(editState);\n    }\n\n    // Use updateEditState whenever there are changes you want to update in the markup's edit state.\n    updateEditState(changes) {\n        this.setEditState(Object.assign({}, this.getEditState(), changes));\n    }\n\n    // Use submitChanges to update the markup with the recent changes of the edit handler.\n    // Using this will change the history of the markups, and will add an undo / redo actions.\n    // Use it only after you committed changes to the editState, using updateEditState.\n    submitChanges() {\n        const action = new UpdateMarkupAction(this.markupsExtension.markupsManager, this.link, this.getEditState());\n        action.execute();\n    }\n\n    isDragging() {\n        return false;\n    }\n\n    getTouchRadiusWorld() {\n        return this.markupsExtension.renderer.sizeFromClientToWorld(MarkupsConstants.TOUCH_RADIUS);\n    }\n\n    getMinChangeDistanceWorld() {\n        return this.markupsExtension.renderer.sizeFromClientToWorld(MarkupsConstants.MIN_CHANGE_DISTANCE);\n    }\n\n    didMouseMove() {\n        return this.markupsExtension.markupsTool.mouseMoved;\n    }\n\n    handleDoubleClick(event, button) {\n    }\n\n    handleButtonDown(event, button) {\n    }\n\n    handleButtonUp(event, button) {\n    }\n\n    handleKeyDown(event, keyCode) {\n    }\n\n    handleKeyUp(event, keyCode) {\n    }\n\n    handleMouseMove(event) {\n    }\n\n    handleGesture(event) {\n    }\n\n    handleResize() {\n    }\n\n    destroy() {\n        this.markupsExtension = null;\n        this.viewer = null;\n        this.link = null;\n    }\n}\n","import { isEqualVectors, applyTranslation } from '../MarkupsCommon';\nimport LinkEditHandler from './LinkEditHandler';\n\nexport default class AnchorHandler extends LinkEditHandler {\n  handleMouseMove(point) {\n    const hovered = this.grabbing || this.intersect(point);\n    this.link.setHover(hovered);\n\n    if (this.grabbing) {\n      this.updatePosition(point);\n\n      return true;\n    }\n\n    return false;\n  }\n\n  handleButtonDown(point, button) {\n    if (!this.grabbing) {\n      this.grabbing = this.intersect(point);\n\n      if (this.grabbing) {\n        this.originalPosition = point.clone();\n        this.lastTranslationPoint = point;\n      }\n\n      return !!this.grabbing;\n    }\n\n    return true;\n  }\n\n  handleButtonUp(point, button) {\n    if (this.grabbing) {\n      this.updatePosition(point);\n\n      if (isEqualVectors(point, this.originalPosition, this.getMinChangeDistanceWorld())) {\n        this.cancelAnchorEditing();\n        return false;\n      } else {\n        this.submitChanges();\n      }\n\n      this.grabbing = false;\n      this.lastTranslationPoint = null;\n\n      return true;\n    }\n\n    return false;\n  }\n\n  handleKeyDown(event, keyCode) {\n    if (this.grabbing) {\n      switch (keyCode) {\n        case Autodesk.Viewing.KeyCode.BACKSPACE:\n        case Autodesk.Viewing.KeyCode.DELETE:\n        case Autodesk.Viewing.KeyCode.ESCAPE:\n          this.cancelAnchorEditing();\n          return true;\n        default:\n          break;\n      }\n    }\n\n    return false;\n  }\n\n  updateEditStatePosition() {\n    this.updateEditState({ position: this.getEditState().position });\n  }\n\n  updatePosition(point) {\n    const translation = point.clone().sub(this.lastTranslationPoint);\n\n    if (!this.link.editState.position) {\n      this.link.editState.position = this.link.getLinkBasePosition();\n    }\n\n    applyTranslation(this.link.editState.position, translation);\n\n    this.lastTranslationPoint = point;\n    this.updateEditStatePosition();\n  }\n\n  cancelAnchorEditing() {\n    this.grabbing = false;\n    this.link.syncEditState();\n    this.updateEditStatePosition();\n  }\n\n  isDragging() {\n    return this.grabbing;\n  }\n\n  intersect(point) {\n    const p = this.markupsExtension.renderer.worldToClient(point);\n    const boundingBox = this.link.getClientBoundingBox();\n\n    return boundingBox.containsPoint(p);\n  }\n\n  getCursor() {\n    if (this.grabbing) {\n      return 'grabbing';\n    } else {\n        return 'grab';\n    }\n  }\n}\n","import LinkEditHandler from './LinkEditHandler';\n\nexport default class SelectionHandler extends LinkEditHandler {\n  intersect(point) {\n    const p = this.markupsExtension.renderer.worldToClient(point);\n    const boundingBox = this.link.getClientBoundingBox();\n\n    return boundingBox.containsPoint(p);\n  }\n\n  handleMouseMove(point) {\n    if (this.markupsExtension.markupsTool.dragging || Autodesk.Viewing.isMobileDevice()) {\n      return false;\n    }\n\n    const intersected = this.intersect(point);\n\n    this.link.setHover(intersected);\n\n    if (intersected) {\n      this.link.layer.setHover(true);\n    }\n\n    return intersected;\n  }\n\n  getCursor() {\n    return 'pointer';\n  }\n\n  handleButtonUp(point, button) {\n    if (!this.didMouseMove() && this.intersect(point)) {\n      this.markupsExtension.markupsManager.deselectAllLinks();\n      this.markupsExtension.markupsManager.selectLink(this.link);\n\n      return true;\n    }\n\n    return false;\n  }\n}\n","import GeometryUtils from '../Utils/GeometryUtils';\nimport LodashUtils from '../Utils/LodashUtils';\nimport * as MarkupsConstants from '../MarkupsConstants';\nimport { MARKUPS_EVENTS } from '../MarkupsEvents';\nimport LinkAnchorHandler from './LinkAnchorHandler';\nimport LinkSelectionHandler from './LinkSelectionHandler';\n\nexport default class Link {\n    constructor(markupsExtension, id, guid, layer, type, state) {\n        this.id = id;\n        this.guid = guid;\n        this.layer = layer;\n        this.type = type;\n        this.markupsExtension = markupsExtension;\n\n        // Whether the link is visible.\n        this.visible = true;\n\n        // Whether the link is selected.\n        this.selected = false;\n\n        this.hover = false;\n\n        // Whether the link has changed recently and needs to be re-rendered.\n        this.dirty = false;\n\n        if (state) {\n            this.state = state;\n        } else {\n            this.state = this.getDefaultState();\n            this.state.style = this.getDefaultStyle();\n        }\n\n        this.editState = {};\n\n        this.registerSelectionHandler();\n        this.registerAnchorHandler();\n    }\n\n    getDefaultState() {\n        return {};\n    }\n\n    getDefaultStyle() {\n        return {};\n    }\n\n    getState() {\n        return this.state;\n    }\n\n    setState(state) {\n        this.state = state;\n    }\n\n    getEditState() {\n        return this.editState;\n    }\n\n    setEditState(editState) {\n        this.editState = editState;\n        this.setDirty(true);\n    }\n\n    syncEditState() {\n        this.setEditState(LodashUtils.cloneDeep(this.getState()));\n    }\n\n    setDirty(dirty) {\n        this.dirty = dirty;\n\n        if (dirty) {\n            this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.LINK_DIRTY, link: this });\n        }\n    }\n\n    isDirty() {\n        return this.dirty;\n    }\n\n    isVisible() {\n        return this.layer.isVisible();\n    }\n\n    getLinkBasePosition() {\n        const layerBoundingBox = this.layer.getClientBoundingBox(true);\n        const posProjected = layerBoundingBox.max.clone().setY(layerBoundingBox.min.y);\n        const upVec = this.markupsExtension.renderer.getCameraUpVector();\n        const rightVec = this.markupsExtension.renderer.getCameraRightVector();\n\n        const linkBoundingBox = this.getClientBoundingBox();\n        const linkSize = linkBoundingBox.size();\n        const verticalOffset = upVec.multiplyScalar(this.markupsExtension.renderer.multiplyByNormaStrokeWidth(linkSize.y / 2));\n        const horizontalOffset = rightVec.multiplyScalar(this.markupsExtension.renderer.multiplyByNormaStrokeWidth(MarkupsConstants.LINK_POSITION_OFFSET + (linkSize.x / 2)));\n\n        // Apply camera rotation.\n        const eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();\n        const cameraRotation = this.markupsExtension.renderer.getCameraRotation();\n        GeometryUtils.applyRotation(posProjected, -cameraRotation, layerBoundingBox.getCenter(), eyeDirection);\n\n        const pos = this.markupsExtension.renderer.clientToWorld(posProjected).sub(verticalOffset).add(horizontalOffset);\n        return pos;\n    }\n\n    getClientBoundingBox() {\n        return this.markupsExtension.renderer.linksRenderer.getLinkBoundingBox(this);\n    }\n\n    getPosition() {\n        if (this.editState.position) {\n            return this.editState.position;\n        } else {\n            return this.getLinkBasePosition();\n        }\n    }\n\n    select() {\n        this.selected = true;\n        this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.LINK_SELECTED, link: this });\n        this.setDirty(true);\n    }\n\n    deselect() {\n        this.selected = false;\n        this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.LINK_DESELECTED, link: this });\n        this.setDirty(true);\n    }\n\n    isSelected() {\n        return this.selected;\n    }\n\n    setHover(hover) {\n        if (this.hover !== hover) {\n            this.hover = hover;\n            this.setDirty(true);\n        }\n    }\n\n    isHovered() {\n        return this.hover;\n    }\n\n    isCompleted() {\n        return true;\n    }\n\n    registerSelectionHandler() {\n        this.selectionHandler = new LinkSelectionHandler(this.markupsExtension, this);\n    }\n\n    registerAnchorHandler() {\n        this.anchorHandler = new LinkAnchorHandler(this.markupsExtension, this);\n    }\n\n    destroy() {\n        if (this.translationHandler) {\n            this.translationHandler.destroy();\n            this.translationHandler = null;\n        }\n\n        this.markupsExtension = null;\n        this.state = null;\n        this.editState = null;\n    }\n}\n","import GeometryUtils from './Utils/GeometryUtils';\nimport Markup from './MarkupTypes/Markup';\nimport * as MarkupsConstants from './MarkupsConstants';\nimport MarkupsLayerData from './MarkupsLayerData';\nimport { MARKUPS_EVENTS } from './MarkupsEvents';\nimport { forAll, getObjectAsList } from './MarkupsCommon';\nimport Link from './Links/Link';\n\nexport default class MarkupsLayer {\n    constructor(markupsExtension, id, layerData) {\n        this.markupsExtension = markupsExtension;\n        this.id = id;\n        this.layerData = (!layerData || layerData instanceof MarkupsLayerData) ? layerData : new MarkupsLayerData(layerData.guid, layerData.resources, layerData.attachments, layerData.status, layerData.metadata);\n\n        this.markups = {};\n        this.links = {};\n\n        this.selected = false;\n        this.visible = false;\n        this.transparent = false;\n        this.hover = false;\n    }\n\n    addMarkup(markup) {\n        this.markups[markup.id] = markup;\n        markup.layer = this;\n\n        markup.setVisible(this.visible, true);\n    }\n\n    deleteMarkup(markup) {\n        const markupId = markup instanceof Markup ? markup.id : markup;\n\n        if (this.markups[markupId]) {\n            markup.deselect();\n\n            delete this.markups[markupId];\n            markup.remove();\n            markup.layer = null;\n\n            this.setDirty();\n        } else {\n            console.warn('deleteMarkup - markup does not exist');\n        }\n    }\n\n    deleteAllMarkups() {\n        forAll(this.markups, (markup) => {\n            this.deleteMarkup(markup);\n        });\n    }\n\n    getMarkupById(markupId) {\n        return this.markups[markupId];\n    }\n\n    isEmpty() {\n        return Object.keys(this.markups).length === 0;\n    }\n\n    addLink(link) {\n        this.links[link.id] = link;\n    }\n\n    deleteLink(link) {\n        const linkId = link instanceof Link ? link.id : link;\n\n        if (this.links[linkId]) {\n            this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.LINK_REMOVED, link });\n            delete this.links[linkId];\n        } else {\n            console.warn('deleteLink - markup does not exist');\n        }\n    }\n\n    deleteAllLinks() {\n        forAll(this.links, (link) => {\n            this.deleteLink(link);\n        });\n    }\n\n    getLinkById(linkId) {\n        return this.links[linkId];\n    }\n\n    getClientBoundingBox(withMargin) {\n        const boundingBox = this.getWorldBoundingBox();\n\n        boundingBox.min = this.markupsExtension.renderer.worldToClient(boundingBox.min);\n        boundingBox.max = this.markupsExtension.renderer.worldToClient(boundingBox.max);\n\n        const eyeDirection = this.markupsExtension.renderer.getCameraEyeVector();\n        const center = boundingBox.getCenter();\n\n        const cameraRotation = this.markupsExtension.renderer.getCameraRotation();\n\n        GeometryUtils.applyRotation(boundingBox.min, cameraRotation, center, eyeDirection);\n        GeometryUtils.applyRotation(boundingBox.max, cameraRotation, center, eyeDirection);\n\n        GeometryUtils.swapBoundingBoxY(boundingBox);\n\n        if (withMargin) {\n            const margin = this.getMarginSize();\n            boundingBox.expandByVector(new THREE.Vector3(margin, margin, 0));\n        }\n\n        boundingBox.min.z = 0;\n        boundingBox.max.z = 0;\n\n        return boundingBox;\n    }\n\n    getMarginSize() {\n        return MarkupsConstants.BOUNDING_BOX_MARGIN;\n    }\n\n    getWorldBoundingBox() {\n        const boundingBox = new THREE.Box3();\n\n        forAll(this.markups, (markup) => {\n            const bbox = markup.getWorldBoundingBox(true);\n            boundingBox.union(bbox);\n        });\n\n        return boundingBox;\n    }\n\n    getRotation() {\n        return 0;\n    }\n\n    getAllMarkups() {\n        return getObjectAsList(this.markups);\n    }\n\n    getAllLinks() {\n        return getObjectAsList(this.links);\n    }\n\n    hasSingleMarkup() {\n        return this.getAllMarkups().length === 1;\n    }\n\n    select() {\n        this.selected = true;\n        this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.LAYER_SELECTED, layer: this });\n        this.setDirty();\n    }\n\n    deselect() {\n        this.selected = false;\n        this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.LAYER_DESELECTED, layer: this });\n        this.setDirty();\n    }\n\n    isSelected() {\n        return this.selected;\n    }\n\n    setHover(hover) {\n        if (this.hover !== hover) {\n            this.hover = hover;\n\n            this.getAllLinks().forEach((link) => {\n                link.setHover(hover);\n            });\n\n            this.setDirty();\n        }\n    }\n\n    isHovered() {\n        return this.hover;\n    }\n\n    unhoverAllMarkups() {\n        const markups = this.getAllMarkups();\n        markups.forEach((markup) => {\n            markup.setHover(false);\n        });\n    }\n\n    setVisible(isVisible) {\n        this.visible = isVisible;\n        forAll(this.markups, (markup) => {\n            markup.setVisible(isVisible);\n        });\n        this.setDirty();\n    }\n\n    isVisible() {\n        return this.visible;\n    }\n\n    setDirty() {\n        this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.LAYER_DIRTY, layer: this });\n    }\n\n    getGuid() {\n        return this.layerData && this.layerData.guid;\n    }\n\n    selectAllMarkups() {\n        this.getAllMarkups().forEach((markup) => {\n            markup.select();\n        });\n    }\n\n    changeTransparency(transparent) {\n        this.transparent = transparent;\n\n        this.getAllMarkups().forEach((markup) => {\n            markup.changeTransparency(transparent);\n        });\n    }\n\n    isTransparent() {\n        return this.transparent;\n    }\n\n    enable() {\n        this.getAllMarkups().forEach((markup) => {\n            markup.enable();\n        });\n    }\n\n    disable() {\n        this.getAllMarkups().forEach((markup) => {\n            markup.disable();\n        });\n    }\n}\n","import * as MarkupsConstants from '../MarkupsConstants';\nimport LinkAttachment from './LinkAttachment';\n\nexport const linkTypesDictionary = {\n    [MarkupsConstants.LINK_TYPE_DOCUMENT_ATTACHMENT]: LinkAttachment\n};\n","import * as MarkupsConstants from '../MarkupsConstants';\nimport Link from './Link';\n\nexport default class LinkAttachment extends Link {\n    constructor(markupsExtension, id, guid, layer, state) {\n        super(markupsExtension, id, guid, layer, MarkupsConstants.LINK_TYPE_DOCUMENT_ATTACHMENT, state);\n    }\n}\n","const applyOffsetToCamera = (viewport, offset) => {\n    if (!viewport || !offset) {\n        return;\n    }\n\n    if ('eye' in viewport) {\n        viewport.eye[0] = (Number(viewport.eye[0]) + offset.x).toString();\n        viewport.eye[1] = (Number(viewport.eye[1]) + offset.y).toString();\n        viewport.eye[2] = (Number(viewport.eye[2]) + offset.z).toString();\n    }\n\n    if ('target' in viewport) {\n        viewport.target[0] = (Number(viewport.target[0]) + offset.x).toString();\n        viewport.target[1] = (Number(viewport.target[1]) + offset.y).toString();\n        viewport.target[2] = (Number(viewport.target[2]) + offset.z).toString();\n    }\n\n    if ('pivotPoint' in viewport) {\n        viewport.pivotPoint[0] = (Number(viewport.pivotPoint[0]) + offset.x).toString();\n        viewport.pivotPoint[1] = (Number(viewport.pivotPoint[1]) + offset.y).toString();\n        viewport.pivotPoint[2] = (Number(viewport.pivotPoint[2]) + offset.z).toString();\n    }\n};\n\nexport const generateSceneMetadata = (viewerState, globalOffset, options) => {\n    const state = JSON.parse(JSON.stringify(viewerState));\n\n    if (globalOffset) {\n        applyOffsetToCamera(state.viewport, globalOffset);\n    }\n\n    state.sheetGUID = options.sheetGUID;\n    state.sheetName = options.sheetName;\n    return state;\n};\n\nexport const getViewportData = (viewer, layerData) => {\n    const { model } = viewer;\n    const globalOffset = model ? model.getData().globalOffset : null;\n\n    const metadata = layerData.metadata.markup_metadata;\n\n    if (globalOffset) {\n        const clonedMarkupData = JSON.parse(JSON.stringify(metadata));\n\n        const { viewport } = clonedMarkupData;\n\n        const invGlobalOffset = { x: -globalOffset.x, y: -globalOffset.y, z: -globalOffset.z };\n        applyOffsetToCamera(viewport, invGlobalOffset);\n\n        return clonedMarkupData;\n    }\n\n    return metadata;\n};\n\nexport const restoreMarkupViewState = async (viewer, layerData, immediate, cb = () => {}) => {\n    if (!layerData) {\n        cb(false);\n        return;\n    }\n\n    const amendedData = getViewportData(viewer, layerData);\n\n    viewer.restoreState(amendedData, null, immediate);\n\n    const doTransition = async () => {\n        if (!immediate) {\n            await Autodesk.Viewing.EventUtils.waitUntilTransitionEnded(viewer);\n        }\n\n        // Fix ALEX-6333\n        // RestoreState will async to update camera's all data. Here force update camera before load markup.\n        const camera = viewer.navigation.getCamera();\n        viewer.navigation.updateCamera();\n        camera.updateMatrixWorld();\n        viewer.impl.sceneUpdated(true);\n\n        cb(true);\n    };\n\n    doTransition();\n\n    await Autodesk.Viewing.EventUtils.waitUntilGeometryLoaded(viewer);\n    viewer.impl.sceneUpdated(true);\n};\n","import { getObjectAsList, applyTranslation } from './MarkupsCommon';\nimport { restoreMarkupViewState } from './MarkupsSceneState';\nimport * as MarkupsConstants from './MarkupsConstants';\n\nexport const stringToSvgNode = (markupString) => {\n    let node;\n\n    try {\n        const domParser = new DOMParser();\n        const doc = domParser.parseFromString(markupString, 'text/xml');\n        node = doc.firstChild;\n    } catch (err) {\n        console.warn('stringToSvgNode failed to generate an HTMLElement from its string representation.');\n    }\n\n    return node;\n};\n\n// Converts a point from legacy markups coordinates to current ones. Relevant for 3D and PDF files\nconst markupsToWorld = (point, viewer, renderer, layerData) => {\n    const isPdf = viewer.model.isPdf(true);\n\n    if (viewer.model.isLeaflet() || isPdf) {\n        let loadOptions;\n        let bounds;\n\n        if (isPdf) {\n            loadOptions = Autodesk.Viewing.PDFUtils.getLeafletLoadOptions(viewer);\n            bounds = Autodesk.Viewing.PDFUtils.getLeafletBoundingBox(viewer);\n        } else {\n            const modelData = viewer.model.getData();\n            loadOptions = modelData.loadOptions.loadOptions;\n            bounds = modelData.bbox;\n        }\n        \n        const { texWidth, texHeight } = loadOptions;\n\n        // https://jira.autodesk.com/browse/BLMV-2853\n        // In case that the DPI of the current document is different than the DPI of the document where the markup has originally created (or edited)\n        // We need to scale the ratio back in order that the markup will appear in the same place.\n        const originalDocumentWidth = (layerData.metadata.markup_metadata &&\n                                        layerData.metadata.markup_metadata.originalDocumentResolution &&\n                                        layerData.metadata.markup_metadata.originalDocumentResolution[0]) || texWidth;\n        const dpiCorrection = texWidth / originalDocumentWidth;\n\n        const wx = (point.x / (texWidth / dpiCorrection)) * bounds.size().x;\n        const wy = (point.y / (texHeight / dpiCorrection)) * bounds.size().y;\n\n        const worldPos = new THREE.Vector3(wx, wy, 0);\n        const worldTopLeft = new THREE.Vector3(bounds.min.x, bounds.max.y, 0);\n        worldPos.add(worldTopLeft);\n\n        if (isPdf) {\n            Autodesk.Viewing.PDFUtils.leafletToPdfWorld(viewer, worldPos);\n        }\n\n        return worldPos;\n    }\n\n    // 3D document\n    if (renderer.documentCamera.isPerspective) {\n        const bb = viewer.impl.getCanvasBoundingClientRect();\n\n        // Factor by PERSPECTIVE_MODE_SCALE because Firefox on Windows machines have problems dealing with very small paths (SVG legacy factor)\n        point.x = ( point.x / MarkupsConstants.PERSPECTIVE_MODE_SCALE * (bb.height * 0.5) + bb.width  * 0.5);\n        point.y = (-point.y / MarkupsConstants.PERSPECTIVE_MODE_SCALE * (bb.height * 0.5) + bb.height * 0.5);\n\n        point = renderer.clientToWorld(point);\n    } else { // Orthographic\n        point.applyMatrix4(renderer.documentCamera.matrixWorld);\n        point.sub(renderer.documentCamera.position);\n\n        // In LMV model is offset by a global offset, we correct this offset when transforming to markups space, so\n        // exported markups don't have the offset.\n        const globalOffset = viewer.model && viewer.model.getData().globalOffset;\n        if (globalOffset) {\n            point.sub(globalOffset);\n        }\n\n        point = renderer.documentCameraToMarkupsCamera(point);\n    }\n\n    return point;\n};\n\nconst sizeFromMarkupsToWorld = (size, viewer, renderer, layerData) => {\n    const a = markupsToWorld(new THREE.Vector3(), viewer, renderer, layerData);\n    const b = markupsToWorld(new THREE.Vector3(size, 0, 0), viewer, renderer, layerData);\n\n    return a.distanceTo(b);\n};\n\nexport const parseMetadata = (svgNode, layerData, viewer, renderer, dataModelVersion) => {\n    const meta = svgNode.childNodes[0].childNodes[0];\n\n    const getMetaAttribute = (attribute) => {\n        return meta.getAttribute(attribute) || meta.getAttribute(attribute.toLowerCase());\n    };\n\n    const type = getMetaAttribute('type') || '';\n\n    const isLegacyMarkup = dataModelVersion < 5;\n    const isLeaflet = viewer.model.isLeaflet();\n    const isPdf = viewer.model.isPdf(true);\n\n    const state = {\n        style: {},\n        anchors: []\n    };\n\n    const output = {\n        type,\n        state\n    };\n\n    const getStyle = (styleObj) => {\n        const source = getObjectAsList(MarkupsConstants.STYLE_PROPERTIES);\n        const style = {};\n\n        for (let i = 0; i < source.length; i++) {\n            const value = styleObj.getAttribute(source[i]);\n\n            if (value) {\n                switch (source[i]) {\n                    case MarkupsConstants.STYLE_PROPERTIES.THICKNESS:\n                        style[source[i]] = parseFloat(value);\n                        break;\n                    case MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE:\n                    case MarkupsConstants.STYLE_PROPERTIES.OPACITY:\n                    case MarkupsConstants.STYLE_PROPERTIES.FILL_OPACITY:\n                        style[source[i]] = parseFloat(value);\n                        break;\n                    case MarkupsConstants.STYLE_PROPERTIES.STROKE_LINEJOIN:\n                        break;\n                    case MarkupsConstants.STYLE_PROPERTIES.FONT_FAMILY:\n                    case MarkupsConstants.STYLE_PROPERTIES.FONT_STYLE:\n                    case MarkupsConstants.STYLE_PROPERTIES.FONT_WEIGHT:\n                    case MarkupsConstants.STYLE_PROPERTIES.COLOR:\n                    case MarkupsConstants.STYLE_PROPERTIES.FONT_COLOR:\n                    case MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR:\n                        style[source[i]] = value;\n                        break;\n                    default:\n                        break;\n                }\n            }\n        }\n\n        if (!style[MarkupsConstants.STYLE_PROPERTIES.FONT_COLOR]) {\n            style[MarkupsConstants.STYLE_PROPERTIES.FONT_COLOR] = style[MarkupsConstants.STYLE_PROPERTIES.COLOR];\n        }\n\n        if (!style[MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR]) {\n            style[MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR] = MarkupsConstants.COLORS.NO_COLOR;\n        }\n\n        // Support legacy markup extension - BLMV-3054.\n        if (style[MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR] === MarkupsConstants.COLORS.NO_COLOR) {\n            style[MarkupsConstants.STYLE_PROPERTIES.FILL_OPACITY] = MarkupsConstants.DEFAULT_FILL_OPACITY;\n        }\n\n        return style;\n    };\n\n    const isClosed = () => {\n        const path = svgNode.childNodes[1] || '';\n        let closed = false;\n\n        if (typeof path !== 'string') {\n            const d = path.getAttribute('d').split(' ');\n            if (d[d.length - 1].toLowerCase() === 'z') {\n                closed = true;\n            }\n        }\n        return closed;\n    };\n\n    const getLocations = () => {\n        const locations = [];\n        const attribute = getMetaAttribute('locations');\n        const locStr = (attribute && attribute.split(' ')) || '';\n\n        for (let i = 0; i < locStr.length; i += 2) {\n            const point = new THREE.Vector3(parseFloat(locStr[i]), parseFloat(locStr[i + 1]), 0);\n            locations.push(point);\n        }\n\n        return locations;\n    };\n\n    const getAttributeVector = (attribute) => {\n        const posVec = new THREE.Vector3();\n        const value = getMetaAttribute(attribute);\n\n        if (value) {\n            const strPos = value.split(' ');\n\n            posVec.x = (strPos[0] && parseFloat(strPos[0])) || 0;\n            posVec.y = (strPos[1] && parseFloat(strPos[1])) || 0;\n            posVec.z = (strPos[2] && parseFloat(strPos[2])) || 0;\n        }\n\n        return posVec;\n    };\n\n    const getPosition = () => {\n        return getAttributeVector('position');\n    };\n\n    const getSize = () => {\n        return getAttributeVector('size');\n    };\n\n    const getRotation = () => {\n        const strRot = getMetaAttribute('rotation');\n        return (strRot && parseFloat(strRot)) || 0;\n    };\n\n    const getText = () => {\n        return getMetaAttribute('text') || '';\n    };\n\n    const getIsFrameUsed = () => {\n        return !!parseInt(getMetaAttribute('isFrameUsed'), 10);\n    };\n\n    const fixScalableShapeAnchors = () => {\n        const halfThickness = state.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS] / 2;\n        state.anchors[0].add(new THREE.Vector3(halfThickness, halfThickness, 0));\n        state.anchors[1].add(new THREE.Vector3(-halfThickness, halfThickness, 0));\n        state.anchors[2].add(new THREE.Vector3(-halfThickness, -halfThickness, 0));\n        state.anchors[3].add(new THREE.Vector3(halfThickness, -halfThickness, 0));\n    };\n    \n    const fixLegacyFontSize = () => {\n        if (Object.prototype.hasOwnProperty.call(state.style, MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE)) {\n            // Fix font size for older markups by converting from world to font\n            const scale = renderer.getFontToWorldScale();\n            state.style[MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE] /= scale;\n        }\n    };\n    \n    const fixLegacyFill = () => {\n        if (!state.isFrameUsed) {\n            state.style[MarkupsConstants.STYLE_PROPERTIES.FILL_OPACITY] = 0;\n        }\n    };\n\n    // Check if belongs to group\n    const groupId = getMetaAttribute('groupId');\n    if (groupId) {\n        state.groupId = groupId;\n        state.groupOrder = parseFloat(getMetaAttribute('groupOrder'));\n    }\n    // Check if it's a group\n    const uuid = getMetaAttribute('uuid');\n    if (uuid) {\n        state.uuid = uuid;\n    }\n\n    state.style = getStyle(meta);\n    state.position = getPosition();\n    state.rotation = getRotation();\n    state.size = getSize();\n    \n    if (!viewer.impl.is2d) {\n        restoreMarkupViewState(viewer, layerData, true);\n    }\n\n    let offset;\n\n    switch (type) {\n        case MarkupsConstants.MARKUP_TYPE_RECTANGLE:\n        case MarkupsConstants.MARKUP_TYPE_CLOUD:\n        case MarkupsConstants.MARKUP_TYPE_CIRCLE:\n            state.anchors[0] = new THREE.Vector3(-state.size.x / 2, -state.size.y / 2, 0);\n            state.anchors[1] = new THREE.Vector3(state.size.x / 2, -state.size.y / 2, 0);\n            state.anchors[2] = new THREE.Vector3(state.size.x / 2, state.size.y / 2, 0);\n            state.anchors[3] = new THREE.Vector3(-state.size.x / 2, state.size.y / 2, 0);\n            if (isLegacyMarkup && type !== MarkupsConstants.MARKUP_TYPE_CLOUD) {\n                fixScalableShapeAnchors(); // Legacy circle/rectangle markups grow inwards\n            }\n            break;\n\n        case MarkupsConstants.MARKUP_TYPE_ARROW:\n        case MarkupsConstants.MARKUP_TYPE_LINE:\n            state.anchors[0] = getAttributeVector('tail');\n            state.anchors[1] = getAttributeVector('head');\n            if (isLegacyMarkup) {\n                state.rotation = 0;\n            }\n            break;\n\n        case MarkupsConstants.MARKUP_TYPE_TEXT:\n        case MarkupsConstants.MARKUP_TYPE_CALLOUT:\n            state.text = getText();\n            state.isFrameUsed = getIsFrameUsed();\n            state.frameType = getMetaAttribute('frameType') || MarkupsConstants.MARKUP_TYPE_RECTANGLE;\n            \n            if (isLegacyMarkup) {\n                fixLegacyFill();\n            }\n            \n            state.anchors[0] = new THREE.Vector3(-state.size.x / 2, -state.size.y / 2, 0);\n            state.anchors[1] = new THREE.Vector3(state.size.x / 2, -state.size.y / 2, 0);\n            state.anchors[2] = new THREE.Vector3(state.size.x / 2, state.size.y / 2, 0);\n            state.anchors[3] = new THREE.Vector3(-state.size.x / 2, state.size.y / 2, 0);\n            break;\n\n        case MarkupsConstants.MARKUP_TYPE_ARROW_CALLOUT:\n        case MarkupsConstants.MARKUP_TYPE_ARROW_CLOUD_CALLOUT:\n            break;\n\n        case MarkupsConstants.MARKUP_TYPE_HIGHLIGHT:\n        case MarkupsConstants.MARKUP_TYPE_FREEHAND:\n            state.anchors = getLocations();\n            break;\n\n        case MarkupsConstants.MARKUP_TYPE_POLYCLOUD:\n        case MarkupsConstants.MARKUP_TYPE_POLYLINE:\n            state.anchors = getLocations();\n            state.closed = isClosed();\n            break;\n\n        case MarkupsConstants.MARKUP_TYPE_DIMENSION:\n            state.anchors[0] = getAttributeVector('firstAnchor');\n            state.anchors[1] = getAttributeVector('secondAnchor');\n\n            offset = getAttributeVector('offset');\n            state.position.sub(offset);\n            state.translation = markupsToWorld(offset, viewer, renderer, layerData).sub(markupsToWorld(new THREE.Vector3(), viewer, renderer, layerData));\n\n            state.text = getText();\n\n            if (isLegacyMarkup) {\n                // Legacy dimension used half the thickness\n                state.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS] /= 2;\n            }\n            \n            state.style[MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE] /= MarkupsConstants.DIMENSION_FONT_SIZE_FACTOR;\n            state.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS] /= MarkupsConstants.DIMENSION_THICKNESS_FACTOR;\n            break;\n\n        default:\n            break;\n    }\n\n    if (isLegacyMarkup || isLeaflet || isPdf) {  // For Leaflet we do it for new markups as well\n        fixLegacyFontSize();\n    }\n\n    // Translate to position.\n    applyTranslation(state.anchors, state.position);\n\n    // Conversion for legacy markups\n    // For Leaflet we do it for new markups as well, to support exporting to PDF with markups included\n    // Also, for Leaflet we have to make sure we support different DPIs from old versions.\n    if ((isLegacyMarkup && viewer.model.is3d()) || isLeaflet || isPdf) {\n        // Get the world position from the legacy markups coordinate system.\n        state.anchors.forEach((anchor) => {\n            anchor.copy(markupsToWorld(anchor, viewer, renderer, layerData));\n        });\n\n        // Convert font and thickness sizes\n        state.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS] = sizeFromMarkupsToWorld(state.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS], viewer, renderer, layerData);\n        state.style[MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE] = sizeFromMarkupsToWorld(state.style[MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE], viewer, renderer, layerData);\n    }\n\n    return output;\n};\n\nexport const getLayerDataModelVersion = (layerMetadata) => {\n    const versionAttr = layerMetadata.getAttribute('data-model-version');\n    return (typeof versionAttr === 'string') ? parseFloat(versionAttr) : 0;\n};\n\nexport const parseMarkupLayer = (svgString, layerData, viewer, renderer) => {\n    try {\n        // data-model-version 6 and up saved as JSON.\n        const metadata = JSON.parse(svgString);\n        return metadata;\n    } catch (e) {\n        // data-model-version 5 and lower saved as SVG.\n        const parentSvgNode = stringToSvgNode(svgString);\n        const children = parentSvgNode.childNodes;\n\n        const markups = [];\n\n        const layerMetadata = children[0].childNodes[0];\n        const dataModelVersion = getLayerDataModelVersion(layerMetadata);\n\n        const viewerStateBackup = !viewer.impl.is2d ? viewer.getState() : null;\n\n        for (let i = 0; i < children.length; i++) {\n            const child = children[i];\n            const metadata = child.childNodes[0].childNodes[0];\n            if (metadata) {\n                const markup = parseMetadata(child, layerData, viewer, renderer, dataModelVersion);\n                markups.push(markup);\n            }\n        }\n        \n        if (viewerStateBackup) {\n            viewer.restoreState(viewerStateBackup, null, true);\n        }\n\n        return markups;\n    }\n};\n","import LodashUtils from './Utils/LodashUtils';\nimport ActionManager from './Utils/ActionManager/ActionManager';\nimport MarkupsLayer from './MarkupsLayer';\nimport Markup from './MarkupTypes/Markup';\nimport { markupsTypesDictionary } from './MarkupTypes/MarkupsTypesDictionary';\nimport { linkTypesDictionary } from './Links/LinkTypesDictionary';\nimport { forAll, getScreenShotOfMarkup, getObjectAsList, restoreGestureValues, setCustomGestureValues, executeAfterTransitionEnded, isSheetNameEqual } from './MarkupsCommon';\nimport { parseMarkupLayer } from './MarkupsDeserializer';\nimport { MARKUPS_EVENTS } from './MarkupsEvents';\nimport AddMarkupAction from './Actions/AddMarkupAction';\nimport { restoreMarkupViewState } from './MarkupsSceneState';\nimport * as MarkupsConstants from './MarkupsConstants';\n\nexport default class MarkupsManager extends Autodesk.Viewing.EventDispatcher {\n    constructor(markupsExtension) {\n        super();\n\n        this.markupsExtension = markupsExtension;\n        this.actionManager = new ActionManager();\n\n        this.registerEvents();\n        this.reset();\n    }\n\n    registerEvents() {\n        this.onHistoryChangedBinded = this.onHistoryChanged.bind(this);\n        this.actionManager.addEventListener(ActionManager.HISTORY_CHANGED_EVENT, this.onHistoryChangedBinded);\n\n        this.onAllMarkupsLoadedBinded = this.onAllMarkupsLoaded.bind(this);\n        this.addEventListener(MARKUPS_EVENTS.ALL_MARKUPS_LOADED, this.onAllMarkupsLoadedBinded);\n\n        this.onMarkupLayerFetchedBinded = this.onMarkupLayerFetched.bind(this);\n        this.addEventListener(MARKUPS_EVENTS.LAYER_FETCHED, this.onMarkupLayerFetchedBinded);\n\n        this.onMarkupResourceFetchedBinded = this.onMarkupResourceFetched.bind(this);\n        this.addEventListener(MARKUPS_EVENTS.LAYER_RESOURCE_FETCHED, this.onMarkupResourceFetchedBinded);\n\n        this.onMarkupLinkSyncedBinded = this.onMarkupLinkSynced.bind(this);\n        this.addEventListener(MARKUPS_EVENTS.LINK_SYNCED, this.onMarkupLinkSyncedBinded);\n\n        this.onLayerSyncedBinded = this.onLayerSynced.bind(this);\n        this.addEventListener(MARKUPS_EVENTS.LAYER_SYNCED, this.onLayerSyncedBinded);\n\n        this.onLayerSyncingBinded = this.onLayerSyncing.bind(this);\n        this.addEventListener(MARKUPS_EVENTS.LAYER_SYNCING, this.onLayerSyncingBinded);\n\n        this.onLayerSelectedBinded = this.onLayerSelected.bind(this);\n        this.addEventListener(MARKUPS_EVENTS.LAYER_SELECTED, this.onLayerSelectedBinded);\n\n        this.onLayerDeselectedBinded = this.onLayerDeselected.bind(this);\n        this.addEventListener(MARKUPS_EVENTS.LAYER_DESELECTED, this.onLayerDeselectedBinded);\n\n        this.onCalibrationEndedBinded = this.onCalibrationEnded.bind(this);\n        this.markupsExtension.viewer.addEventListener(Autodesk.Viewing.MeasureCommon.Events.FINISHED_CALIBRATION_FOR_DIMENSION_EVENT, this.onCalibrationEndedBinded);\n\n        this.onDrawingStartBinded = this.onDrawingStart.bind(this);\n        this.addEventListener(MARKUPS_EVENTS.MARKUP_DRAWING_START, this.onDrawingStartBinded);\n\n        this.onDrawingEndBinded = this.onDrawingEnd.bind(this);\n        this.addEventListener(MARKUPS_EVENTS.MARKUP_DRAWING_END, this.onDrawingEndBinded);\n        this.addEventListener(MARKUPS_EVENTS.MARKUP_DRAWING_CANCEL, this.onDrawingEndBinded);\n    }\n\n    unregisterEvents() {\n        this.actionManager.removeEventListener(ActionManager.HISTORY_CHANGED_EVENT, this.onHistoryChangedBinded);\n        this.removeEventListener(MARKUPS_EVENTS.ALL_MARKUPS_LOADED, this.onAllMarkupsLoadedBinded);\n        this.removeEventListener(MARKUPS_EVENTS.LAYER_FETCHED, this.onMarkupLayerFetchedBinded);\n        this.removeEventListener(MARKUPS_EVENTS.LAYER_RESOURCE_FETCHED, this.onMarkupResourceFetchedBinded);\n        this.removeEventListener(MARKUPS_EVENTS.LINK_SYNCED, this.onMarkupLinkSyncedBinded);\n        this.removeEventListener(MARKUPS_EVENTS.LAYER_SYNCED, this.onLayerSyncedBinded);\n        this.removeEventListener(MARKUPS_EVENTS.LAYER_SYNCING, this.onLayerSyncingBinded);\n        this.markupsExtension.viewer.removeEventListener(Autodesk.Viewing.MeasureCommon.Events.FINISHED_CALIBRATION_FOR_DIMENSION_EVENT, this.onCalibrationEndedBinded);        \n        this.removeEventListener(MARKUPS_EVENTS.MARKUP_DRAWING_START, this.onDrawingStartBinded);\n        this.removeEventListener(MARKUPS_EVENTS.MARKUP_DRAWING_END, this.onDrawingEndBinded);\n        this.removeEventListener(MARKUPS_EVENTS.MARKUP_DRAWING_CANCEL, this.onDrawingEndBinded);\n    }\n\n    createLayer(layerJson) {\n        const layer = new MarkupsLayer(this.markupsExtension, this.nextLayerId, layerJson);\n        this.layers[layer.id] = layer;\n\n        this.nextLayerId += 1;\n\n        this.dispatchEvent({ type: MARKUPS_EVENTS.LAYER_CREATED });\n        return layer;\n    }\n\n    loadLayers(layersJson, ignoreFilters, removeExistingLayers) {\n        if (removeExistingLayers) {\n            this.removeAllLayers([this.getActiveLayer()]);\n\n            if (this.markupsExtension.markupsCache) {\n                this.markupsExtension.markupsCache.cleanCache();\n            }\n        }\n\n        layersJson = layersJson instanceof Array ? layersJson : [layersJson];\n\n        layersJson.forEach((layerJson) => {\n            // Add layer to cache if it's not there\n            if (this.markupsExtension.markupsCache && layerJson.guid && !this.markupsExtension.markupsCache.get(layerJson.guid)) {\n                this.markupsExtension.markupsCache.add(layerJson.guid, layerJson);\n            }\n        });\n\n        const layersFiltered = ignoreFilters ? layersJson : this.markupsExtension.filterManager.filterLayers(layersJson);\n\n        // Remove filtered out layers that currently on canvas.\n        this.getLayersAsList().forEach((layer) => {\n            if (layer !== this.getActiveLayer() && layersFiltered.findIndex(l => l.guid === layer.getGuid()) === -1) {\n                this.removeLayer(layer);\n            }\n        });\n\n        // Add new layers that was added to canvas.\n        layersFiltered.forEach((layerJson) => {\n            if (!this.getLayerByGuid(layerJson.guid)) {\n                const layer = this.createLayer(layerJson);\n\n                if (this.markupsExtension.viewer.impl.is2d) {\n                    layer.setVisible(true);\n                    this.loadMarkupsToLayer(layer);\n                }\n\n                this.loadLinksToLayer(layer);\n            }\n        });\n    }\n\n    removeLayer(layer) {\n        const layerId = layer.id;\n        const layerToDelete = this.layers[layerId];\n\n        if (layerToDelete) {\n            if (this.isMarkupSessionOpen() && layerToDelete === this.getActiveLayer()) {\n                this.endMarkupSession(false);\n            } else if (this.markupsExtension.viewer.model && this.markupsExtension.viewer.model.is3d() && this.isInMarkupView() && this.getVisibleLayers()[0] === layerToDelete) {\n                this.exitMarkupView();\n            }\n\n            this.deselectLayer(layer);\n            layer.deleteAllMarkups();\n            layer.deleteAllLinks();\n            layer.setVisible(false);\n\n            this.dispatchEvent({ type: MARKUPS_EVENTS.LAYER_DELETED, layer });\n            delete this.layers[layerId];\n        } else {\n            console.warn('deleteLayer - layer does not exist');\n        }\n    }\n\n    removeAllLayers(exclude) {\n        this.getLayersAsList().forEach((layer) => {\n            if (!exclude || exclude.indexOf(layer) === -1) {\n                this.removeLayer(layer);\n            }\n        });\n    }\n\n    deleteLayer(layer) {\n        // Delete the layer from backend.\n        this.dispatchEvent({ type: MARKUPS_EVENTS.LAYER_DELETE, layerData: layer.layerData });\n    }\n\n    getLayerById(layerId) {\n        return this.layers[layerId];\n    }\n\n    getLayerByGuid(layerGuid) {\n        if (layerGuid === null || layerGuid === undefined) {\n            return null;\n        }\n\n        return this.getLayersAsList().find(layer => layer.getGuid() === layerGuid);\n    }\n\n    addMarkupToLayer(markup, layer) {\n        if (!this.getLayerById(layer.id)) {\n            this.layers[layer.id] = layer;\n        }\n\n        // If other layer is selected, make new markup transparent.\n        if (this.getSelectedLayers().length > 0 && !layer.isSelected()) {\n            markup.changeTransparency(true);\n        }\n\n        // If other layer is under edit session, make new markup transparent.\n        if ((this.isMarkupSessionOpen() && layer !== this.getActiveLayer()) || !this.isToolEnabled()) {\n            markup.disable();\n        }\n\n        layer.addMarkup(markup);\n        return true;\n    }\n\n    addLinkToLayer(link, layer) {\n        if (!this.getLayerById(layer.id)) {\n            this.layers[layer.id] = layer;\n        }\n\n        layer.addLink(link);\n        return true;\n    }\n\n    createMarkup(type, optionalState, options) {\n        const MarkupClass = markupsTypesDictionary[type];\n\n        if (MarkupClass) {\n            return new MarkupClass(this.markupsExtension, this.nextMarkupId++, optionalState, options);\n        }\n\n        return null;\n    }\n\n    createLink(layer, linkMetadata) {\n        const position = linkMetadata.position ? new THREE.Vector3().copy(linkMetadata.position) : null;\n\n        if (position && this.markupsExtension.viewer.model.isPdf(true)) {\n            Autodesk.Viewing.PDFUtils.leafletToPdfWorld(this.markupsExtension.viewer, position);\n        }\n\n        const link = new linkTypesDictionary[linkMetadata.type](this.markupsExtension, this.nextLinkId, linkMetadata.id, layer, { position });\n        this.nextLinkId += 1;\n        return link;\n    }\n\n    onAllMarkupsLoaded({ amount }) {\n        console.log('All markups have been loaded. Amount: ' + amount);\n    }\n\n    onMarkupLayerFetched({ layerData }) {\n        this.markupsExtension.filterManager.filterLayers([layerData]).forEach((data) => {\n            const layer = this.createLayer(data);\n\n            if (this.markupsExtension.viewer.impl.is2d) {\n                layer.setVisible(true);\n            }\n        });\n    }\n\n    onMarkupResourceFetched({ layerData }) {\n        if (this.markupsExtension.viewer.impl.is2d) {\n            const layer = this.getLayerByGuid(layerData.guid);\n\n            if (layer) {\n                this.loadMarkupsToLayer(layer);\n            }\n        }\n    }\n\n    onMarkupLinkSynced({ documentAttachment, layerData }) {\n        const layer = this.getLayerByGuid(layerData.guid);\n\n        if (layer) {\n            if (documentAttachment && documentAttachment.status === MarkupsConstants.MARKUP_ATTACHMENT_DELETEING &&\n               layerData.attachments.length === 0) {\n                    layer.deleteAllLinks();\n               }\n            this.loadLinksToLayer(layer);\n        }\n    }\n\n    onDrawingStart() {\n        const duringCreationMarkup = this.getDuringCreationMarkup(false);\n        this.polySaveDisabled = duringCreationMarkup && duringCreationMarkup.inEdit &&\n            (duringCreationMarkup.type === MarkupsConstants.MARKUP_TYPE_POLYLINE ||\n            duringCreationMarkup.type === MarkupsConstants.MARKUP_TYPE_POLYCLOUD);\n\n            this.dispatchEvent({ type: MARKUPS_EVENTS.LAYER_READY_TO_SAVE, readyToSave: this.getReadyToSave() });\n    }\n\n    onDrawingEnd() {\n        this.polySaveDisabled = false;\n\n        this.dispatchEvent({ type: MARKUPS_EVENTS.LAYER_READY_TO_SAVE, readyToSave: this.getReadyToSave() });\n    }\n\n    getReadyToSave() {\n        const activeLayer = this.getActiveLayer();\n        let isEmpty;\n        let hasEmptyText;\n\n        if (activeLayer) {\n            isEmpty = activeLayer.isEmpty();\n\n            if (!isEmpty) {\n                // Don't allow saving empty text.\n                hasEmptyText = activeLayer.getAllMarkups().some((markup) => {\n                    return markup.isTextMarkup() && markup.textInputHandler.isEmpty();\n                });\n            }\n        }\n\n        // For mobile, disable save button if the layer is empty.\n        // For web, enable the save button in case of an empty layer, what will trigger a deletion of the layer (in case the user has permissions)\n        const emptynessCondition = this.markupsExtension.options.isMobileApp ?\n                                    !isEmpty :\n                                    (!isEmpty || (isEmpty && this.markupsExtension.permissionManager.canDeleteMarkup(activeLayer.layerData)));\n        const ready = activeLayer && emptynessCondition && !this.polySaveDisabled && !hasEmptyText;\n\n        return !!ready;\n    }\n\n    removeMarkupFromLayer(markup) {\n        const layer = markup.layer;\n\n        if (layer) {\n            this.duringCreationMarkup = null;\n\n            markup.deselect();\n            markup.disableEdit();\n            layer.deleteMarkup(markup);\n\n            return true;\n        } else {\n            console.warn('removeMarkupFromLayer - markup does not exist');\n            return false;\n        }\n    }\n\n    getMarkupById(markupId) {\n        let markup = null;\n\n        forAll(this.layers, (l) => {\n            const m = l.getMarkupById(markupId);\n\n            if (m) {\n                markup = m;\n            }\n        });\n\n        return markup;\n    }\n\n    getSelectedMarkups() {\n        return this.getMarkupsByProperty('selected', true);\n    }\n\n    getUnselectedMarkups() {\n        return this.getMarkupsByProperty('selected', false);\n    }\n\n    getSelectedLayers() {\n        return this.getLayersByProperty('selected', true);\n    }\n\n    getUnselectedLayers() {\n        return this.getLayersByProperty('selected', false);\n    }\n\n    getSelectedLayer() {\n        return this.getSelectedLayers()[0];\n    }\n\n    getVisibleLayers() {\n        return this.getLayersByProperty('visible', true);\n    }\n\n    getVisibleMarkups() {\n        return this.getMarkupsByProperty('visible', true);\n    }\n\n    getEnabledMarkups() {\n        return this.getMarkupsByProperty('enabled', true).filter(markup => !markup.layer || markup.layer.isVisible());\n    }\n\n    getDisabledMarkups() {\n        return this.getMarkupsByProperty('enabled', false);\n    }\n\n    getVisibleLinks() {\n        const visibleLayers = this.getVisibleLayers();\n        const res = [];\n        visibleLayers.forEach((layer) => {\n            const links = layer.getAllLinks();\n            links.forEach((link) => {\n                res.push(link);\n            });\n        });\n\n        return res;\n    }\n\n    getDirtyLinks() {\n        return this.getLinksByProperty('dirty', true);\n    }\n\n    getSelectedLinks() {\n        return this.getLinksByProperty('selected', true);\n    }\n\n    getInEditMarkups() {\n        const inEditMarkups = this.getMarkupsByProperty('inEdit', true);\n\n        if (this.duringCreationMarkup && inEditMarkups.indexOf(this.duringCreationMarkup) === -1) {\n            inEditMarkups.push(this.duringCreationMarkup);\n        }\n\n        return inEditMarkups;\n    }\n\n    getMarkupsByProperty(key, value) {\n        const markups = [];\n\n        forAll(this.layers, (l) => {\n            forAll(l.markups, (m) => {\n                if (m[key] === value) {\n                    markups.push(m);\n                }\n            });\n        });\n\n        return markups;\n    }\n\n    getLayersByProperty(key, value) {\n        const layers = [];\n\n        forAll(this.layers, (l) => {\n            if (l[key] === value) {\n                layers.push(l);\n            }\n        });\n\n        return layers;\n    }\n\n    getLinksByProperty(key, value) {\n        const links = [];\n\n        forAll(this.layers, (l) => {\n            forAll(l.links, (m) => {\n                if (m[key] === value) {\n                    links.push(m);\n                }\n            });\n        });\n\n        return links;\n    }\n\n    selectMarkup(markup) {\n        markup = markup instanceof Markup ? markup : this.getMarkupById(markup);\n\n        if (markup) {\n            markup.select();\n        } else {\n            console.warn('selectMarkup - markup does not exist');\n        }\n    }\n\n    deselectMarkup(markup) {\n        markup = markup instanceof Markup ? markup : this.getMarkupById(markup);\n\n        if (markup) {\n            markup.deselect();\n        } else {\n            console.warn('selectMarkup - markup does not exist');\n        }\n    }\n\n    deselectAllMarkups(exclude) {\n        const selectedMarkups = this.getSelectedMarkups();\n        selectedMarkups.forEach((markup) => {\n            if ((!exclude || exclude.indexOf(markup) === -1) && markup.isSelected()) {\n                markup.deselect();\n            }\n        });\n    }\n\n    unhoverAllLayers() {\n        const layers = this.getLayersAsList();\n        layers.forEach((layer) => {\n            layer.setHover(false);\n        });\n    }\n\n    unhoverAllMarkups() {\n        const markups = this.getAllMarkups();\n        markups.forEach((markup) => {\n            markup.setHover(false);\n        });\n    }\n\n    enableAllMarkups() {\n        this.getAllMarkups().forEach((markup) => {\n            markup.enable();\n        });\n    }\n\n    disableAllMarkups() {\n        this.getAllMarkups().forEach((markup) => {\n            markup.disable();\n        });\n    }\n\n    lockNavigation() {\n        if (!this.lockSettings) {\n            this.lockSettings = this.markupsExtension.viewer.getNavigationLockSettings();\n            this.markupsExtension.viewer.setNavigationLockSettings({\n                orbit: false, pan: false, zoom: false, roll: false, fov: false, gotoview: false, walk: false\n            });\n            this.markupsExtension.viewer.navigation.setIsLocked(true);\n        }\n\n        this.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_VIEW_ENTERED });\n    }\n\n    unlockNavigation() {\n        if (this.lockSettings) {\n            this.markupsExtension.viewer.setNavigationLockSettings(this.lockSettings);\n            this.markupsExtension.viewer.setNavigationLock(false);\n            this.markupsExtension.viewer.toolController.setIsLocked(false);\n            this.lockSettings = null;\n        }\n    }\n\n    loadLayerIfHidden(layerGuid) {\n        let layer = layerGuid instanceof MarkupsLayer ? layerGuid : this.getLayerByGuid(layerGuid);\n\n        // In case the layer is hidden because of a filter, load it and then select it.\n        if (!layer && this.markupsExtension.markupsCache) {\n            let layerData = this.markupsExtension.markupsCache.get(layerGuid);\n\n            if (layerData) {\n                const sheetNameInMarkup = layerData.metadata.markup_metadata.sheetName;\n\n                // Different sheet - don't load layer here.\n                if (!isSheetNameEqual(this.markupsExtension.options.sheetName, sheetNameInMarkup)) {\n                    layerData = null;\n                }\n            }\n\n            if (layerData) {\n                this.loadLayers([layerData], true);\n                layer = this.getLayerByGuid(layerGuid);\n            }\n        }\n\n        return layer;\n    }\n\n    selectLayer(layerGuid, focus, immediate, cb = () => {}) {\n        const layer = this.loadLayerIfHidden(layerGuid);\n        const onSelectionDone = cb.bind(this);\n\n        if (layer) {\n            const wasSelected = layer.isSelected();\n            this.deselectAllLayers([layer]);\n            this.exitMarkupView([layer]);\n\n            if (this.markupsExtension.viewer.impl.is2d) {\n                layer.select();\n\n                if (focus) {\n                    const marginBackup = {\n                        horizontal: this.markupsExtension.viewer.navigation.FIT_TO_VIEW_HORIZONTAL_MARGIN,\n                        vertical: this.markupsExtension.viewer.navigation.FIT_TO_VIEW_VERTICAL_MARGIN\n                    };\n            \n                    // Change global bounds margins.\n                    this.markupsExtension.viewer.navigation.FIT_TO_VIEW_HORIZONTAL_MARGIN = MarkupsConstants.SELECTION_ZOOM_MARGIN;\n                    this.markupsExtension.viewer.navigation.FIT_TO_VIEW_VERTICAL_MARGIN = MarkupsConstants.SELECTION_ZOOM_MARGIN;\n\n                    const boundingBox = layer.getWorldBoundingBox();\n                    this.markupsExtension.viewer.navigation.fitBounds(immediate, boundingBox);\n                    \n                    // Restore global bounds margins.\n                    this.markupsExtension.viewer.navigation.FIT_TO_VIEW_HORIZONTAL_MARGIN = marginBackup.horizontal;\n                    this.markupsExtension.viewer.navigation.FIT_TO_VIEW_VERTICAL_MARGIN = marginBackup.vertical;\n                }\n\n                onSelectionDone();\n            } else {\n                this.loadMarkupsToLayer(layer);\n                layer.select();\n                this.navigationToolBackup = this.markupsExtension.viewer.getActiveNavigationTool();\n                this.markupsExtension.viewer.setActiveNavigationTool(this.markupsExtension.markupsTool.getName());\n\n                restoreMarkupViewState(this.markupsExtension.viewer, layer.layerData, immediate || wasSelected, () => {\n                    if (layer.isSelected()) {\n                        layer.setVisible(true);\n                        this.lockNavigation();\n                    }\n\n                    onSelectionDone();\n                });\n            }\n        } else {\n            this.dispatchEvent({ type: MARKUPS_EVENTS.LAYER_SELECTED_FROM_DIFFERENT_SHEET, layerGuid });\n            const cache = this.markupsExtension.cache; // Must get the cache because when loading sheet, extension will be gone\n            cache.layerToSelect = this.loadRelevantSheet(layerGuid);\n        }\n    }\n\n    deselectLayer(layer) {\n        layer = layer instanceof MarkupsLayer ? layer : this.getLayerByGuid(layer);\n\n        if (layer) {\n            if (layer.isSelected()) {\n                layer.deselect();\n\n                if (layer.layerData) {\n                    // In case layer was hidden before selection, hide it.\n                    if (this.markupsExtension.filterManager.filterLayers([layer.layerData]).length === 0) {\n                        this.removeLayer(layer);\n                    }\n                }\n            }\n        } else {\n            console.warn('deselectLayer - layer does not exist');\n        }\n    }\n\n    deselectAllLayers(exclude) {\n        const selectedLayers = this.getSelectedLayers();\n        selectedLayers.forEach((layer) => {\n            if ((!exclude || exclude.indexOf(layer) === -1) && layer.isSelected()) {\n                this.deselectLayer(layer);\n            }\n        });\n    }\n\n    loadRelevantSheet(layerGuid) {\n        const doLoadSheet = (key, value) => {\n            for (let i = 0; i < this.markupsExtension.sheetList.length; i++) {\n                const s = this.markupsExtension.sheetList[i];\n                const sheet = s.search({[key]: value})[0];\n\n                if (sheet) {\n                    if (this.markupsExtension.options.loadDocumentCallback) {\n                        this.markupsExtension.options.loadDocumentCallback(sheet);\n                    } else {\n                        this.markupsExtension.viewer.loadDocumentNode(this.markupsExtension.viewer.model.getDocumentNode().getDocument(),\n                            sheet,\n                            { loadAsHidden: false, applyRefPoint: false, keepCurrentModels: false });    \n                    }\n                                        \n                    return layerGuid;\n                }\n            }\n\n            console.warn(`loadRelevantSheet - Sheet not found (by ${key})`);\n            return null;\n        };\n\n        const doLoadSheetByName = () => {\n            const sheetNameInMarkup = layer.metadata.markup_metadata.sheetName;\n\n            // Same sheet.\n            if (!sheetNameInMarkup || isSheetNameEqual(this.sheetName, sheetNameInMarkup)) {\n                return;\n            }\n\n            // Different name - switch sheet.\n            return doLoadSheet('name', sheetNameInMarkup);\n        };\n\n        const layer = this.markupsExtension.markupsCache.get(layerGuid);\n\n        if (!layer) {\n            console.warn('loadRelevantSheet - Cant find selected layer.');\n            return null;\n        }\n\n        if (!this.markupsExtension.options.hasMultiSheet) {\n            console.warn('loadRelevantSheet - Something weird just happened. This method shouldnt be called on Plans folder.');\n            return;\n        }\n\n        return doLoadSheetByName();\n    }\n\n    isInMarkupView() {\n        const visibleLayers = this.getVisibleLayers();\n        return !this.isMarkupSessionOpen() && visibleLayers.length > 0;\n    }\n\n    exitMarkupView(exclude) {\n        if (this.markupsExtension.viewer.impl.is2d || !this.isInMarkupView()) {\n            return;\n        }\n        \n        let visibleLayers = this.getVisibleLayers();\n        if (exclude) {\n            visibleLayers = visibleLayers.filter(layer => exclude.indexOf(layer) === -1);\n        }\n        \n        if (visibleLayers.length === 0) {\n            return;\n        }\n        \n        visibleLayers.forEach((layer) => {\n            this.deselectLayer(layer);\n            layer.setVisible(false);\n        });\n\n        this.unlockNavigation();\n        this.markupsExtension.viewer.setActiveNavigationTool(this.navigationToolBackup);\n\n        const sectionExt = this.markupsExtension.viewer.getExtension('Autodesk.Section');\n\n        if (sectionExt && sectionExt.getSectionPlanes().length === 1) {\n            sectionExt.setSectionFromPlane(null);\n        } else {\n            this.markupsExtension.viewer.impl.setCutPlaneSet('__set_view', undefined);\n        }\n\n        this.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_VIEW_EXITED });\n    }\n\n    changeAllLayersTransparency(isTransparent, exclude) {\n        if (this.markupsExtension.isToolEnabled()) {\n            const layers = this.getLayersAsList();\n            layers.forEach((layer) => {\n                if ((!exclude || exclude.indexOf(layer) === -1)) {\n                    layer.changeTransparency(isTransparent);\n                }\n            });\n        }\n    }\n\n    onLayerSynced({ layerData, layer }) {\n        layer = layer || this.getLayerByGuid(layerData.guid);\n\n        if (layer) {\n            // Verify there is no markup session active currently, before enabling the layer.\n            if (!this.isMarkupSessionOpen()) {\n                layer.enable();\n\n                const selectedLayer = this.getSelectedLayer();\n\n                if ((selectedLayer && selectedLayer !== layer) || !this.markupsExtension.isToolEnabled()) {\n                    layer.changeTransparency(true);\n                }\n            }\n\n            if (this.markupsExtension.filterManager.filterLayers([layerData]).length === 0) {\n                this.removeLayer(layer);\n            }\n        }\n        \n        if (this.markupsExtension.options.onMarkupsSyncCallback) {\n            this.markupsExtension.options.onMarkupsSyncCallback({ count: this.markupsExtension.markupsCache.length() });\n        }\n    }\n\n    onLayerSyncing({ layerData, layer }) {\n        layer = layer || this.getLayerByGuid(layerData.guid);\n\n        if (layer) {\n            if (this.markupsExtension.viewer.impl.is2d) {\n                layer.deselect();\n            }\n\n            layer.disable();\n        }\n    }\n\n    selectLink(link) {\n        if (link) {\n            link.select();\n        } else {\n            console.warn('selectLink - link does not exist');\n        }\n    }\n\n    deselectLink(link) {\n        if (link) {\n            link.deselect();\n        } else {\n            console.warn('deselectLink - link does not exist');\n        }\n    }\n\n    deselectAllLinks() {\n        const selectedLinks = this.getSelectedLinks();\n        selectedLinks.forEach((link) => {\n            this.deselectLink(link);\n        });\n    }\n\n    getDuringCreationMarkup(create) {\n        if (!this.duringCreationMarkup && create) {\n            const type = this.getMarkupCreationType();\n            const markup = this.createMarkup(type);\n\n            if (markup) {\n                markup.setVisible(true);\n                markup.enableEdit();\n                this.duringCreationMarkup = markup;\n            }\n        }\n\n        return this.duringCreationMarkup;\n    }\n\n    getActiveLayer() {\n        return this.activeLayer;\n    }\n\n    setActiveLayer(layer) {\n        layer = layer instanceof MarkupsLayer ? layer : this.getLayerById(layer);\n        this.activeLayer = layer;\n    }\n\n    isMarkupSessionOpen() {\n        return this.sessionOpen;\n    }\n\n    changeMarkupCreationType(creationType = MarkupsConstants.DEFAULT_MARKUP) {\n        executeAfterTransitionEnded(this.markupsExtension.viewer, () => {\n            const duringCreationMarkup = this.getDuringCreationMarkup(false);\n\n            if (duringCreationMarkup) {\n                duringCreationMarkup.creationHandler.onEscape();\n            }\n\n            this.markupCreationType = creationType;\n            this.markupsExtension.viewer.setActiveNavigationTool(creationType ? this.markupsExtension.markupsTool.getName() : this.navigationToolBackup);\n\n            this.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_CREATION_TYPE_CHANGED, creationType });\n\n            if (creationType && !this.isMarkupSessionOpen() && creationType !== MarkupsConstants.RECT_SELECTOR) {\n                this.startMarkupSession();\n            }\n        });\n    }\n\n    getMarkupCreationType() {\n        return this.markupCreationType;\n    }\n\n    setToolEnabled(enable) {\n        this.toolEnabled = enable;\n\n        if (!enable) {\n            this.deselectAllLayers();\n            this.deselectAllLinks();\n            this.disableAllMarkups();\n        } else {\n            this.enableAllMarkups();\n        }\n        \n        // Solving a bug that happens in Safari and Edge. \n        // In those browsers, Rendering the MarkupsToolbar just after creating a new issue\n        // Causing the markups toolbar to render without it's buttons:\n        // https://jira.autodesk.com/browse/BLMV-3152\n        // Another render of the toolbar solves the problem.\n        if (Autodesk.Viewing.isSafari() || Autodesk.Viewing.isIE11) {\n            setTimeout(() => {\n                if (this.markupsExtension.markupsUI) {\n                    this.markupsExtension.markupsUI.toolbar.renderToolbar();\n                }\n            }, 1);\n        }\n\n        this.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_TOOL_ENABLED_CHANGED, enable });\n    }\n\n    isToolEnabled() {\n        return this.toolEnabled;\n    }\n\n    startMarkupSession(creationType, layer) {\n        if (!this.isToolEnabled()) {\n            return false;\n        }\n\n        this.deselectAllLayers(layer && [layer]);\n        this.exitMarkupView([layer]);\n        this.deselectAllLinks();\n\n        this.sessionOpen = true;\n\n        this.markupsExtension.markupsTool.updateToolPriority();\n\n        layer = layer || this.createLayer();\n        layer.setVisible(true);\n        this.setActiveLayer(layer);\n\n        this.navigationToolBackup = this.markupsExtension.viewer.getActiveNavigationTool();\n        this.markupsExtension.viewer.setActiveNavigationTool(this.markupsExtension.markupsTool.getName());\n\n        if (!this.markupsExtension.viewer.impl.is2d) {\n            this.lockNavigation();\n        }\n\n        if (creationType || !this.getMarkupCreationType()) {\n            this.changeMarkupCreationType(creationType);\n        }\n\n        this.getAllMarkups().forEach((markup) => {\n            if (markup.layer !== layer) {\n                markup.disable();\n            }\n        });\n\n        this.creationStatusType = this.markupsExtension.options.defaultMarkupStatus || MarkupsConstants.MARKUP_STATUS_PRIVATE;\n\n        this.contextMenu = this.markupsExtension.viewer.contextMenu;\n        this.markupsExtension.viewer.setContextMenu(null);\n        \n        this.markupsExtension.viewer.impl.pauseHighlight(true);\n        this.markupsExtension.viewer.impl.disableSelection(true);\n\n        setCustomGestureValues(this.markupsExtension.viewer);\n\n        this.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_SESSION_START, layer });\n\n        return true;\n    }\n\n    endMarkupSession(save) {\n        if (!this.isMarkupSessionOpen()) {\n            return;\n        }\n\n        const layer = this.getActiveLayer();\n        let deleteLayer = false;\n\n        if (save && layer.isEmpty()) {\n            if (layer.layerData) {\n                // In case the layer already saved in the backend, trying to save it when it's empty is prohibited.\n                // So the options are to delete it, or undo the changes.\n                this.dispatchEvent({ type: MARKUPS_EVENTS.LAYER_DELETE_EMPTY_PRESSED, onConfirmCB: () => this.deleteLayer(layer) });\n                return;\n            } else {\n                deleteLayer = true;\n            }\n\n            // Don't allow saving an empty layer.\n            save = false;\n        }\n\n        this.sessionOpen = false;\n\n        if (!save) {\n            this.exitMarkupView();\n        }\n        \n        if (this.markupsExtension.markupsTool) this.markupsExtension.markupsTool.updateToolPriority();\n        this.changeMarkupCreationType(null);\n        this.setActiveLayer(null);\n\n        if (this.duringCreationMarkup) {\n            this.duringCreationMarkup.creationHandler.creationCancel();\n        }\n\n        this.deselectAllMarkups();\n\n        this.enableAllMarkups();\n        this.unhoverAllMarkups();\n\n        if (!save) {\n            while (!this.actionManager.isUndoStackEmpty()) {\n                this.undo();\n            }\n        }\n\n        this.actionManager.clear();\n\n        // If the layer is empty - remove it.\n        // If the layer is new, and the user wants to discard it - just remove the layer.\n        const removeLayer = layer.isEmpty() || (!save && !layer.getGuid());\n\n        if (deleteLayer) {\n            this.deleteLayer(layer);\n        } else if (removeLayer) {\n            this.removeLayer(layer);\n        }\n\n        layer.deselect();\n\n        this.markupsExtension.viewer.setContextMenu(this.contextMenu);\n        \n        this.markupsExtension.viewer.impl.pauseHighlight(false);\n        this.markupsExtension.viewer.impl.disableSelection(false);\n\n        restoreGestureValues(this.markupsExtension.viewer);\n        \n        this.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_SESSION_END, layer, save });\n    }\n\n    editLayer(layerGuid, focus, selectAllMarkups, immediate) {\n        if (!this.isToolEnabled()) {\n            return;\n        }\n\n        const layer = this.loadLayerIfHidden(layerGuid);\n\n        if (layer) {\n            if (this.markupsExtension.permissionManager.canEditMarkup(layer.layerData)) {\n                this.selectLayer(layer, focus, immediate, () => {\n                    this.startMarkupSession(MarkupsConstants.DEFAULT_MARKUP, layer);\n                    if (selectAllMarkups) {\n                        // Currently, mobile devices don't support multi selection of markups.\n                        if (!Autodesk.Viewing.isMobileDevice()) {\n                            layer.selectAllMarkups();\n                        }\n                    }\n                });\n            } else {\n                console.warn('editLayer - Cant edit layer, permissions not valid.');\n            }\n        } else {\n            this.dispatchEvent({ type: MARKUPS_EVENTS.LAYER_EDITED_FROM_DIFFERENT_SHEET, layerGuid });\n            const cache = this.markupsExtension.cache; // Must get the cache because when loading sheet, extension will be gone\n            cache.layerToEdit = this.loadRelevantSheet(layerGuid);\n        }\n    }\n\n    onLayerSelected({ layer }) {\n        this.changeAllLayersTransparency(true, [layer]);\n    }\n\n    onLayerDeselected() {\n        if (!this.getSelectedLayer()) {\n            this.changeAllLayersTransparency(false);\n        }\n    }\n\n    deleteMarkup(markup) {\n        markup = markup instanceof Markup ? markup : this.getMarkupById(markup);\n\n        if (markup) {\n            markup.creationHandler.deleteMarkup();\n        } else {\n            console.warn('deleteMarkup - markup does not exist');\n        }\n    }\n\n    deleteInEditMarkups() {\n        this.markupsToDelete = this.getInEditMarkups();\n\n        this.openActionGroup();\n\n        this.markupsToDelete.forEach((markup) => {\n            this.deleteMarkup(markup);\n        });\n\n        this.closeActionGroup();\n    }\n\n    undo() {\n        if (this.duringCreationMarkup) {\n            this.duringCreationMarkup.creationHandler.onEscape(false);\n        } else {\n            this.actionManager.undo();\n        }\n    }\n\n    redo() {\n        this.actionManager.redo();\n    }\n\n    isActionGroupOpen() {\n        return this.actionManager.isGroupOpen;\n    }\n    \n    openActionGroup() {\n        this.actionManager.openActionGroup();\n    }\n\n    closeActionGroup() {\n        this.actionManager.closeActionGroup();\n    }\n\n    copy() {\n        this.markupsToCopy = this.getSelectedMarkups();\n        this.pasteOffset = 1;\n    }\n\n    paste() {\n        this.deselectAllMarkups();\n\n        this.openActionGroup();\n\n        this.markupsToCopy.forEach((markup) => {\n            this.duplicateMarkup(markup);\n        });\n\n        this.closeActionGroup();\n\n        this.pasteOffset += 1;\n    }\n\n    cut() {\n        this.copy();\n        this.deleteInEditMarkups();\n    }\n\n    duplicateMarkup(markup) {\n        const getTranslationVector = () => {\n            const rightVec = this.markupsExtension.renderer.getCameraRightVector();\n            const upVec = this.markupsExtension.renderer.getCameraUpVector();\n            const translationSize = this.markupsExtension.renderer.multiplyByNormaStrokeWidth(MarkupsConstants.PASTE_OFFSET * this.pasteOffset);\n            return rightVec.sub(upVec).normalize().multiplyScalar(translationSize);\n        };\n        \n        const addToLayer = (markup) => {\n            markup.completed = true;\n            const layer = this.activeLayer ? this.activeLayer : this.createLayer();\n            const action = new AddMarkupAction(this, markup, layer);\n            action.execute();\n        };\n        \n        // Markups without translationHandler can't be duplicated. aka dimension markup.\n        // Also, group components will be added by the group parent.\n        if (markup.translationHandler && !markup.belongsToGroup()) {\n            const newState = LodashUtils.cloneDeep(markup.getState());\n            // Translate\n            const translationVec = getTranslationVector();\n            newState.translation.add(translationVec);\n            \n            const newMarkup = this.createMarkup(markup.type, newState);\n            \n            addToLayer(newMarkup);\n            newMarkup.select();\n        } else if (markup.isGroupMarkup()) {\n            const newState = LodashUtils.cloneDeep(markup.getState());\n            // Translate\n            const translationVec = getTranslationVector();\n            \n            newState.uuid = THREE.Math.generateUUID(); // Can't use same id for different group\n            newState.componentsState = markup.markups.map((component) => {\n                const state = LodashUtils.cloneDeep(component.getState());\n                state.translation.add(translationVec);\n                return state;\n            });\n\n            const newMarkup = this.createMarkup(markup.type, newState);\n\n            addToLayer(newMarkup);\n            newMarkup.markups.forEach(markup => addToLayer(markup));\n            newMarkup.select();\n        }\n    }\n\n    loadMarkupsToLayer(layer) {\n        const svgString = layer.layerData && layer.layerData.getSvgResource();\n\n        if (!svgString || !layer.isEmpty()) {\n            return;\n        }\n        \n        const addToLayer = (markup) => {\n            markup.completed = true;\n            this.addMarkupToLayer(markup, layer);\n            markup.setDirty();\n        };\n\n        const svgMetadata = parseMarkupLayer(svgString, layer.layerData, this.markupsExtension.viewer, this.markupsExtension.renderer);\n\n        svgMetadata.forEach((markupMetadata) => {\n            if (markupMetadata.state.groupId) {\n                return; // Group components will be added by the group parent\n            }\n            if (markupMetadata.state.uuid) {\n                // It's a group, find its corresponding components\n                markupMetadata.state.componentsState = svgMetadata.filter(metadata => markupMetadata.state.uuid === metadata.state.groupId).map(metadata => metadata.state);\n            }\n            \n            const newMarkup = this.createMarkup(markupMetadata.type, markupMetadata.state);\n\n            if (newMarkup) {\n                addToLayer(newMarkup);\n                \n                if (newMarkup.isGroupMarkup()) {\n                    newMarkup.markups.forEach(markup => addToLayer(markup));\n                }\n            }\n        });\n    }\n\n    createLinkMetadata(layerData) {\n        const { metadata } = layerData;\n        metadata.markup_metadata = metadata.markup_metadata || {};\n        metadata.markup_metadata.links = metadata.markup_metadata.links || [];\n\n        layerData.attachments.forEach((docAttachment) => {\n            // Only one link per attachment type.\n            if (!metadata.markup_metadata.links.some(link => (link.id === docAttachment.attributes.issue_id && link.type === docAttachment.attributes.attachment_type))) {\n                metadata.markup_metadata.links.push({\n                    id: docAttachment.attributes.issue_id,\n                    type: docAttachment.attributes.attachment_type,\n                    position: null\n                });\n            }\n        });\n    }\n\n    loadLinksToLayer(layer) {\n        this.createLinkMetadata(layer.layerData);\n        const links = layer.layerData.getLinksMetadata();\n\n        if (!links) {\n            return;\n        }\n\n        links.forEach((linkMetadata) => {\n            // Checks if a link is already loaded to the layer, Will not recreate it in this case.\n            if (layer.getAllLinks().find(link => link.guid === linkMetadata.id)) {\n                return;\n            }\n\n            if (layer.layerData.attachments.some(attachment => attachment.attributes.issue_id === linkMetadata.id)) {\n                const newLink = this.createLink(layer, linkMetadata);\n                this.addLinkToLayer(newLink, layer);\n                newLink.setDirty(true);\n            }\n        });\n    }\n\n    changeStyleProperty(key, value, dontSubmit) {\n        // Transform color to its true value if needed.\n        if (typeof value === 'string') {\n            value = MarkupsConstants.COLORS[value.toUpperCase()] || value;\n        }\n        \n        if (key === MarkupsConstants.STYLE_PROPERTIES.THICKNESS) {\n            value *= this.markupsExtension.renderer.getNormaStrokeWidth(); // The input thickness is just a factor, so multiply by the norma.\n        }\n\n        this.creationStyleProperties[key] = value;\n\n        if (key === MarkupsConstants.STYLE_PROPERTIES.COLOR && value !== MarkupsConstants.COLORS.NO_COLOR) {\n            this.creationStyleProperties[MarkupsConstants.STYLE_PROPERTIES.LAST_COLOR] = value;\n        }\n        \n        if (this.isMarkupSessionOpen()) {\n            this.openActionGroup();\n\n            this.getSelectedMarkups().forEach((markup) => {\n                markup.creationHandler.changeStyleProperty(key, value, dontSubmit);\n            });\n\n            this.closeActionGroup();\n        }\n\n        this.dispatchEvent({ type: MARKUPS_EVENTS.MARKUP_STYLE_PROPERTY_CHANGED, styleProperty: key, value });\n    }\n\n    getStyleProperty(key) {\n        return this.creationStyleProperties[key];\n    }\n\n    onCalibrationEnded() {\n        this.markupsExtension.setToolEnabled(true);\n        this.startMarkupSession(MarkupsConstants.MARKUP_TYPE_DIMENSION);\n    }\n\n    onHistoryChanged(event) {\n        const { actionGroup } = event;\n\n        actionGroup.forEach((a) => {\n            a.markup.setDirty();\n        });\n\n        // In order to centralize all the events in one place, the events from actionManager will pass threw markupsManager's event dispatcher.\n        this.dispatchEvent(event);\n        this.dispatchEvent({ type: MARKUPS_EVENTS.LAYER_READY_TO_SAVE, readyToSave: this.getReadyToSave() });\n    }\n\n    getLayersAsList() {\n        return getObjectAsList(this.layers);\n    }\n\n    getAllMarkups() {\n        const markups = [];\n\n        forAll(this.layers, (layer) => {\n            markups.push(...getObjectAsList(layer.markups));\n        });\n\n        return markups;\n    }\n\n    generateScreenCapture(layer) {\n        return new Promise((resolve) => {\n            setTimeout(() => {\n                getScreenShotOfMarkup(this.markupsExtension.viewer, (img) => {\n                    resolve(img);\n                }, layer);\n            }, 100);\n        });\n    }\n\n    changeCreationStatusType(status) {\n        this.creationStatusType = status;\n    }\n\n    getCreationStatusType() {\n        return this.creationStatusType;\n    }\n    \n    setDefaultCreationStyleProperties() {\n        this.creationStyleProperties = {};\n        this.changeStyleProperty(MarkupsConstants.STYLE_PROPERTIES.LAST_COLOR, MarkupsConstants.DEFAULT_COLOR);\n        this.changeStyleProperty(MarkupsConstants.STYLE_PROPERTIES.COLOR, MarkupsConstants.DEFAULT_COLOR);\n        this.changeStyleProperty(MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR, MarkupsConstants.DEFAULT_FILL_COLOR);\n        this.changeStyleProperty(MarkupsConstants.STYLE_PROPERTIES.THICKNESS, MarkupsConstants.DEFAULT_THICKNESS);\n        this.changeStyleProperty(MarkupsConstants.STYLE_PROPERTIES.OPACITY, MarkupsConstants.DEFAULT_OPACITY);\n        this.changeStyleProperty(MarkupsConstants.STYLE_PROPERTIES.FILL_OPACITY, MarkupsConstants.DEFAULT_FILL_OPACITY);\n        this.changeStyleProperty(MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE, MarkupsConstants.DEFAULT_FONT_SIZE_IN_PIXELS);\n        this.changeStyleProperty(MarkupsConstants.STYLE_PROPERTIES.FONT_WEIGHT, MarkupsConstants.DEFAULT_FONT_WEIGHT);\n        this.changeStyleProperty(MarkupsConstants.STYLE_PROPERTIES.FONT_FAMILY, MarkupsConstants.DEFAULT_FONT_FAMILY);\n        this.changeStyleProperty(MarkupsConstants.STYLE_PROPERTIES.FONT_STYLE, MarkupsConstants.DEFAULT_FONT_STYLE);\n        this.changeStyleProperty(MarkupsConstants.STYLE_PROPERTIES.FONT_COLOR, MarkupsConstants.DEFAULT_FONT_COLOR);\n    }\n\n    reset() {\n        this.nextMarkupId = 0;\n        this.nextLinkId = 0;\n        this.nextLayerId = 0;\n        this.sessionOpen = false;\n        this.layers = {};\n        this.selectedLayers = [];\n        this.duringCreationMarkup = null;\n        this.activeLayer = null;\n        this.markupCreationType = null;\n        this.markupsToCopy = [];\n        this.pasteOffset = 1;\n        this.toolEnabled = true;\n        this.contextMenu = null;\n        this.actionManager.clear();\n        this.creationStyleProperties = {};\n    }\n\n    destroy() {\n        this.removeAllLayers();\n        this.unlockNavigation();\n        this.unregisterEvents();\n        this.reset();\n        this.clearListeners();\n        this.markupsExtension = null;\n        this.actionManager = null;\n    }\n}\n","import { MARKUPS_EVENTS } from './MarkupsEvents';\nimport GeometryUtils from './Utils/GeometryUtils';\nimport * as MarkupsConstants from './MarkupsConstants';\nimport { forAll } from './MarkupsCommon';\nimport './FrameRenderer.css';\n\nconst av = Autodesk.Viewing;\n\nexport default class FrameRenderer {\n    constructor(markupsExtension) {\n        this.markupsExtension = markupsExtension;\n        this.setGlobalManager(markupsExtension.globalManager);\n        this.viewer = this.markupsExtension.viewer;\n        this.container = this.viewer.appendOrderedElementToViewer('markup-frames-container');\n        this.container.className = 'markup-frames-container';\n\n        this.markupFrames = {};\n        this.layerFrames = {};\n        this.anchors = {};\n        this.segments = {};\n        \n        this.rotationAxis = new THREE.Vector3(0, 0, 1);\n\n        this.registerEventListeners();\n    }\n\n    registerEventListeners() {\n        this.onMarkupDirtyBinded = this.onMarkupDirty.bind(this);\n        this.onLayerDirtyBinded = this.onLayerDirty.bind(this);\n        this.onLayerDeletedBinded = this.onLayerDeleted.bind(this);\n        this.onMarkupRemovedBinded = this.onMarkupRemoved.bind(this);\n        this.renderAllBinded = this.renderAll.bind(this);\n        this.onRectSelectorUpdatedBinded = this.onRectSelectorUpdated.bind(this);\n\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_DIRTY, this.onMarkupDirtyBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LAYER_DIRTY, this.onLayerDirtyBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_REMOVED, this.onMarkupRemovedBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LAYER_DELETED, this.onLayerDeletedBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_SESSION_START, this.renderAllBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_SESSION_END, this.renderAllBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.RECT_SELECTOR_UPDATED, this.onRectSelectorUpdatedBinded);\n        this.viewer.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.renderAllBinded);\n    }\n\n    unregisterEventListeners() {\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_DIRTY, this.onMarkupDirtyBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LAYER_DIRTY, this.onLayerDirtyBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_REMOVED, this.onMarkupRemovedBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LAYER_DELETED, this.onLayerDeletedBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_SESSION_START, this.renderAllBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_SESSION_END, this.renderAllBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.RECT_SELECTOR_UPDATED, this.onRectSelectorUpdatedBinded);\n        this.viewer.removeEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.renderAllBinded);\n    }\n\n    renderAll() {\n        const markups = this.markupsExtension.markupsManager.getAllMarkups();\n        this.renderMarkups(markups);\n\n        const layers = this.markupsExtension.markupsManager.getLayersAsList();\n        this.renderLayers(layers);\n    }\n\n    onMarkupDirty({ markup }) {\n        this.renderMarkups([markup]);\n    }\n\n    onLayerDirty({ layer }) {\n        this.renderLayerSelectionFrame(layer);\n    }\n\n    renderLayers(layers) {\n        layers.forEach((layer) => {\n            this.renderLayerSelectionFrame(layer);\n        });\n    }\n\n    renderMarkups(markups) {\n        markups.forEach((markup) => {\n            if (!markup.belongsToGroup()) {\n                this.renderMarkupSelectionFrame(markup);\n            }\n            this.renderTransformAnchors(markup);\n\n            if (markup.layer) {\n                this.renderLayerSelectionFrame(markup.layer);\n            }\n        });\n    }\n\n    renderFrame(frame, entity, withFill) {\n        const _document = this.getDocument();\n        if (!frame) {\n            frame = _document.createElement('div');\n            frame.className = 'markup-selection-frame-container';\n            this.container.appendChild(frame);\n\n            const frameFill = _document.createElement('div');\n            frameFill.className = 'markup-selection-frame fill';\n            frameFill.style.width = `${MarkupsConstants.FRAME_SIZE_SCALE}px`;\n            frameFill.style.height = `${MarkupsConstants.FRAME_SIZE_SCALE}px`;\n\n            if (Autodesk.Viewing.isIOSDevice()) {\n                frameFill.className += ' ios';\n            }\n\n            frame.appendChild(frameFill);\n            frame.fillElement = frameFill;\n\n            for (let i = 0; i < 4; i++) {\n                const frameBorder = _document.createElement('div');\n                frameBorder.className = 'markup-selection-frame border';\n                frameBorder.style.width = `${MarkupsConstants.FRAME_SIZE_SCALE}px`;\n                frameBorder.style.height = `${MarkupsConstants.FRAME_SIZE_SCALE}px`;\n\n                if (Autodesk.Viewing.isIOSDevice()) {\n                    frameBorder.className += ' ios';\n                }\n\n                frame.appendChild(frameBorder);\n                frame[`border_${i}`] = frameBorder;\n            }\n        }\n\n        if (!frame.classList.contains('visible')) {\n            frame.classList.add('visible');\n            frame.offsetHeight; // Force update DOM.\n        }\n\n        if (withFill && !frame.fillElement.classList.contains('visible')) {\n            frame.fillElement.classList.add('visible');\n            frame.fillElement.offsetHeight; // Force update DOM.\n        } else if (!withFill && frame.fillElement.classList.contains('visible')) {\n            frame.fillElement.classList.remove('visible');\n            frame.fillElement.offsetHeight; // Force update DOM.\n        }\n\n        const boundingBox = entity.getClientBoundingBox(true);\n        const center = boundingBox.getCenter();\n        center.x -= MarkupsConstants.FRAME_SIZE_SCALE / 2;\n        center.y -= MarkupsConstants.FRAME_SIZE_SCALE / 2;\n        const size = boundingBox.size();\n\n        const rotate = GeometryUtils.radiansToDegrees(entity.getRotation() + this.markupsExtension.renderer.getCameraRotation()) || 0;\n\n        if (withFill) {\n            frame.fillElement.style.transform = `translate(${center.x}px, ${center.y}px) rotate(${rotate}deg) scale(${size.x / MarkupsConstants.FRAME_SIZE_SCALE}, ${size.y / MarkupsConstants.FRAME_SIZE_SCALE})`;\n        }\n\n        frame['border_0'].style.transform = `translate(${center.x}px, ${center.y}px) rotate(${rotate}deg) translate(0px, ${size.y / 2}px) scale(${size.x / MarkupsConstants.FRAME_SIZE_SCALE}, ${1 / MarkupsConstants.FRAME_SIZE_SCALE})`;\n        frame['border_1'].style.transform = `translate(${center.x}px, ${center.y}px) rotate(${rotate}deg) translate(0px, ${-size.y / 2}px) scale(${size.x / MarkupsConstants.FRAME_SIZE_SCALE}, ${1 / MarkupsConstants.FRAME_SIZE_SCALE})`;\n        frame['border_2'].style.transform = `translate(${center.x}px, ${center.y}px) rotate(${rotate}deg) translate(${size.x / 2}px, 0px) scale(${1 / MarkupsConstants.FRAME_SIZE_SCALE}, ${size.y / MarkupsConstants.FRAME_SIZE_SCALE})`;\n        frame['border_3'].style.transform = `translate(${center.x}px, ${center.y}px) rotate(${rotate}deg) translate(${-size.x / 2}px, 0px) scale(${1 / MarkupsConstants.FRAME_SIZE_SCALE}, ${size.y / MarkupsConstants.FRAME_SIZE_SCALE})`;\n\n        return frame;\n    }\n\n    renderMarkupSelectionFrame(markup) {\n        const frame = this.markupFrames[markup.id];\n\n        const hovered = markup.isHovered();\n        const selected = markup.isSelected();\n\n        if ((selected || hovered) && markup.layer) {\n            this.markupFrames[markup.id] = this.renderFrame(frame, markup, selected);\n        } else if (frame && frame.classList.contains('visible')) {\n            frame.classList.remove('visible');\n            frame.offsetHeight; // Force update DOM.\n        }\n    }\n\n    renderLayerSelectionFrame(layer) {\n        const frame = this.layerFrames[layer.id];\n\n        const hovered = layer.isHovered();\n        const selected = layer.isSelected();\n        const visible = layer.isVisible();\n\n        if ((selected || hovered) && visible && !this.markupsExtension.markupsManager.isMarkupSessionOpen()) {\n            this.layerFrames[layer.id] = this.renderFrame(frame, layer, false);\n        } else if (frame && frame.classList.contains('visible')) {\n            this.container.removeChild(frame);\n            delete this.layerFrames[layer.id]; // Need to delete layer element because of Safari bug where it doesn't get updated.\n        }\n    }\n\n    _renderScaleAnchors(markup) {\n        if (!markup.scaleHandler) {\n            return;\n        }\n\n        if (markup.isInEdit()) {\n            const scaleAnchors = markup.scaleHandler.getScaleAnchors();\n            const pivot = markup.getClientCenter();\n            scaleAnchors.forEach((anchor, i) => {\n                const name = `${markup.id}_scale_${i}`;\n\n                const rotation = markup.getRotation() + this.markupsExtension.renderer.getCameraRotation();\n                GeometryUtils.applyRotation(anchor.pos, rotation, pivot, this.rotationAxis);\n                const isActive = markup.scaleHandler.isDragging() && anchor.id === markup.scaleHandler.scaleAnchor.id;\n                this.createAnchorElement(name, anchor.pos, isActive, rotation, 'rectangle');\n            });\n        } else {\n            for (let i = 0; i < 8; i++) {\n                const name = `${markup.id}_scale_${i}`;\n\n                if (this.anchors[name] && this.anchors[name].classList.contains('visible')) {\n                    this.anchors[name].classList.remove('visible');\n                }\n            }\n        }\n    }\n    \n    _renderRotationAnchor(markup) {\n        if (!markup.rotationHandler) {\n            return;\n        }\n\n        const name = `${markup.id}_rotation_anchor`;\n\n        if (markup.isInEdit()) {\n            const rotationAnchorPos = markup.rotationHandler.getRotationAnchor();\n            const isActive = markup.rotationHandler.isDragging();\n            this.createAnchorElement(name, rotationAnchorPos, isActive);\n\n            const boundingBox = markup.getClientBoundingBox(true);\n            const p = boundingBox.getCenter().add(new THREE.Vector3(0, boundingBox.size().y / 2, 0));\n            const pivot = boundingBox.getCenter();\n            const rotation = markup.getRotation() + this.markupsExtension.renderer.getCameraRotation();\n\n            GeometryUtils.applyRotation(p, rotation, pivot, this.rotationAxis);\n\n            this.createSegment(name, p, rotationAnchorPos);\n        } else if (this.anchors[name] && this.anchors[name].classList.contains('visible')) {\n            this.anchors[name].classList.remove('visible');\n            this.segments[name].classList.remove('visible');\n        }\n    }\n    \n    _renderAnchors(markup) {\n        if (!markup.anchorHandler) {\n            return;\n        }\n        \n        const getExistingAnchors = nameStart => Object.keys(this.anchors).filter(k => k.indexOf(nameStart) === 0);\n        const getExistingSegments = nameStart => Object.keys(this.segments).filter(k => k.indexOf(nameStart) === 0);\n        \n        const removeAnchorVisibility = (name) => {\n            const anchor = this.anchors[name];\n            if (anchor && anchor.classList.contains('visible')) {\n                anchor.classList.remove('visible');\n            }\n        };\n        \n        const removeSegmentVisibility = (name) => {\n            const segment = this.segments[name];\n            if (segment && segment.classList.contains('visible')) {\n                segment.classList.remove('visible');\n            }\n\n        };\n        \n        const baseName = `${markup.id}_anchor`;\n        const anchors = markup.anchorHandler.getAnchors();\n        if (markup.isInEdit()) {\n            const pivot = markup.getClientCenter();\n\n            const applyTransform = (anchor) => {\n                markup.applyScaleAndTranslation(anchor);\n                anchor = this.markupsExtension.renderer.worldToClient(anchor);\n                GeometryUtils.applyRotation(anchor, markup.getRotation(), pivot, this.rotationAxis);\n                \n                return anchor;\n            };\n            \n            let prevAnchor = null, anchor = null;\n            \n            for (let i = 0; i < anchors.length; i++) {\n                const name = `${baseName}_${i}`;\n                anchor = applyTransform(anchors[i].clone());\n                const isActive = anchors[i] === markup.anchorHandler.activeAnchor;\n                if (markup.isAnchorHandlingAllowed(anchors[i])) {\n                    this.createAnchorElement(name, anchor, isActive);\n                }\n\n                if (markup.showPath() && i > 0) {\n                    this.createSegment(name, prevAnchor, anchor);\n                }\n                \n                prevAnchor = anchor;\n            }\n\n            if (markup.showPath() && markup.editState.closed) { // Add last segment\n                const name = `${baseName}_${anchors.length}`;\n                const firstAnchor = applyTransform(anchors[0].clone());\n                this.createSegment(name, anchor, firstAnchor);\n            }\n            \n            // Remove anchors and segments no longer in use (can happen during undo)\n            const existingAnchors = getExistingAnchors(baseName);\n            const existingSegments = getExistingSegments(baseName);\n            \n            for (let i = anchors.length; i < existingAnchors.length; i++) {\n                removeAnchorVisibility(`${baseName}_${i}`);\n            }\n            \n            const end = markup.editState.closed ? existingSegments.length : existingSegments.length + 1;\n            for (let i = anchors.length; i < end; i++) {\n                removeSegmentVisibility(`${baseName}_${i}`);\n            }\n        } else {\n            for (let i = 0; i <= anchors.length; i++) {  // Include length to remove last segment when closed\n                const name = `${baseName}_${i}`;\n                removeAnchorVisibility(name);\n                removeSegmentVisibility(name);\n            }\n        }        \n    }\n\n    renderTransformAnchors(markup) {\n        if (!markup.isCompleted()) {\n            return;\n        }\n        \n        this._renderScaleAnchors(markup);\n        \n        this._renderRotationAnchor(markup);\n\n        this._renderAnchors(markup);\n    }\n\n    createAnchorElement(name, position, isActive, rotation = 0, className = '') {\n        let anchorElement = this.anchors[name];\n\n        const _document = this.getDocument();\n        if (!anchorElement) {\n            anchorElement = _document.createElement('div');\n            anchorElement.className = 'markup-anchor ' + className;\n            const diameter = `${MarkupsConstants.ANCHOR_RADIUS * 2}px`;\n            anchorElement.style.width = diameter;\n            anchorElement.style.height = diameter;\n            this.container.appendChild(anchorElement);\n            this.anchors[name] = anchorElement;\n\n            const anchorFill = _document.createElement('div');\n            anchorFill.className = 'markup-anchor-fill ' + className;\n            anchorElement.appendChild(anchorFill);\n            anchorElement.anchorFill = anchorFill;\n        }\n\n        if (!anchorElement.classList.contains('visible')) {\n            anchorElement.classList.add('visible');\n        }\n\n        if (isActive && !anchorElement.anchorFill.classList.contains('visible')) {\n            anchorElement.anchorFill.classList.add('visible');\n        } else if (!isActive && anchorElement.anchorFill.classList.contains('visible')) {\n            anchorElement.anchorFill.classList.remove('visible');\n        }\n\n        const rotate = GeometryUtils.radiansToDegrees(rotation);\n\n        anchorElement.style.transform = `translate(${position.x - MarkupsConstants.ANCHOR_RADIUS}px, ${position.y - MarkupsConstants.ANCHOR_RADIUS}px) rotate(${rotate}deg)`;\n    }\n\n    createSegment(name, p1, p2) {\n        let segmentElement = this.segments[name];\n\n        const _document = this.getDocument();\n        if (!segmentElement) {\n            segmentElement = _document.createElement('div');\n            segmentElement.className = 'markup-selection-frame segment border';\n            segmentElement.style.width = `${MarkupsConstants.FRAME_SIZE_SCALE}px`;\n            segmentElement.style.height = `${MarkupsConstants.FRAME_SIZE_SCALE}px`;\n            this.container.appendChild(segmentElement);\n            this.segments[name] = segmentElement;\n        }\n\n        if (!segmentElement.classList.contains('visible')) {\n            segmentElement.classList.add('visible');\n        }\n\n        const center = p1.clone().add(p2).multiplyScalar(0.5);\n        center.x -= MarkupsConstants.FRAME_SIZE_SCALE / 2;\n        center.y -= MarkupsConstants.FRAME_SIZE_SCALE / 2;\n        const length = p1.distanceTo(p2);\n\n        const rotate = GeometryUtils.getSignedAngle(p2.clone().sub(p1), this.markupsExtension.renderer.getCameraUpVector(), this.markupsExtension.renderer.getCameraEyeVector());\n\n        segmentElement.style.transform = `translate(${center.x}px, ${center.y}px) rotate(${GeometryUtils.radiansToDegrees(rotate + this.markupsExtension.renderer.getCameraRotation())}deg) scale(${1 / MarkupsConstants.FRAME_SIZE_SCALE}, ${length / MarkupsConstants.FRAME_SIZE_SCALE})`;\n    }\n\n    onLayerDeleted({ layer }) {\n        const name = layer.id;\n        const layerElement = this.layerFrames[name];\n\n        if (layerElement) {\n            this.container.removeChild(layerElement);\n        }\n\n        delete this.layerFrames[name];\n    }\n\n    onMarkupRemoved({ markup }) {\n        const name = markup.id;\n        const markupElement = this.markupFrames[name];\n\n        if (markupElement) {\n            this.container.removeChild(markupElement);\n        }\n\n        delete this.markupFrames[name];\n\n        if (markup.layer && markup.layer.isEmpty()) {\n            this.onLayerDeleted(markup);\n        }\n    }\n\n    onRectSelectorUpdated({ bounds }) {\n        const _document = this.getDocument();\n        if (!this.rectSelectorFrame) {\n            this.rectSelectorFrame = _document.createElement('div');\n            this.rectSelectorFrame.className = 'rect-selector-frame';\n            this.container.appendChild(this.rectSelectorFrame);\n        }\n\n        const visible = !bounds.isEmpty();\n\n        if (visible && !this.rectSelectorFrame.classList.contains('visible')) {\n            this.rectSelectorFrame.classList.add('visible');\n            this.rectSelectorFrame.offsetHeight; // Force update DOM.\n        } else if (!visible && this.rectSelectorFrame.classList.contains('visible')) {\n            this.rectSelectorFrame.classList.remove('visible');\n            this.rectSelectorFrame.offsetHeight; // Force update DOM.\n        }\n\n        const boundsProjected = bounds.clone();\n\n        boundsProjected.min = this.markupsExtension.renderer.worldToClient(boundsProjected.min);\n        boundsProjected.max = this.markupsExtension.renderer.worldToClient(boundsProjected.max);\n        const size = boundsProjected.size();\n\n        this.rectSelectorFrame.style.width = `${Math.abs(size.x)}px`;\n        this.rectSelectorFrame.style.height = `${Math.abs(size.y)}px`;\n\n        this.rectSelectorFrame.style.transformOrigin = 'top left';\n        this.rectSelectorFrame.style.transform = `translate(${boundsProjected.min.x}px, ${boundsProjected.min.y}px) scale(${Math.sign(size.x)}, ${Math.sign(size.y)})`;\n    }\n\n    destroy() {\n        this.unregisterEventListeners();\n\n        forAll(this.markupFrames, (frame) => {\n            this.container.removeChild(frame);\n        });\n        this.markupFrames = null;\n\n        forAll(this.layerFrames, (frame) => {\n            this.container.removeChild(frame);\n        });\n        this.layerFrames = null;\n\n        forAll(this.anchors, (anchor) => {\n            this.container.removeChild(anchor);\n        });\n        this.anchors = null;\n\n        forAll(this.segments, (segment) => {\n            this.container.removeChild(segment);\n        });\n        this.segments = null;\n\n        this.markupsExtension = null;\n        this.viewer = null;\n    }\n}\n\nav.GlobalManagerMixin.call(FrameRenderer.prototype);\n","import { MARKUPS_EVENTS } from '../MarkupsEvents';\nimport { forAll } from '../MarkupsCommon';\nimport './LinksRenderer.css';\n\nconst av = Autodesk.Viewing;\n\nexport default class LinksRenderer {\n    constructor(markupsExtension) {\n        this.markupsExtension = markupsExtension;\n        this.setGlobalManager(markupsExtension.globalManager);\n        this.viewer = this.markupsExtension.viewer;\n        this.container = this.viewer.appendOrderedElementToViewer('markup-links-container');\n        this.container.className = 'markup-links-container';\n\n        this.links = {};\n        this.linksSizeCache = {};\n\n        this.registerEventListeners();\n    }\n\n    registerEventListeners() {\n        this.onLinkDirtyBinded = this.onLinkDirty.bind(this);\n        this.onMarkupDirtyBinded = this.onMarkupDirty.bind(this);\n        this.renderAllLinksBinded = this.renderAllLinks.bind(this);\n        this.onLinkDeletedBinded = this.onLinkDeleted.bind(this);\n\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LINK_DIRTY, this.onLinkDirtyBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_DIRTY, this.onMarkupDirtyBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LINK_SYNCED, this.renderAllLinksBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LINK_REMOVED, this.onLinkDeletedBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_SESSION_START, this.renderAllLinksBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_SESSION_END, this.renderAllLinksBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LAYER_SELECTED, this.renderAllLinksBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LAYER_DESELECTED, this.renderAllLinksBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_VIEW_EXITED, this.renderAllLinksBinded);\n        \n        this.viewer.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.renderAllLinksBinded);\n    }\n\n    unregisterEventListeners() {\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LINK_DIRTY, this.onLinkDirtyBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_DIRTY, this.onMarkupDirtyBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LINK_SYNCED, this.renderAllLinksBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LINK_REMOVED, this.onLinkDeletedBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_SESSION_START, this.renderAllLinksBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_SESSION_END, this.renderAllLinksBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LAYER_SELECTED, this.renderAllLinksBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LAYER_DESELECTED, this.renderAllLinksBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_VIEW_EXITED, this.renderAllLinksBinded);\n\n        this.viewer.removeEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.renderAllLinksBinded);\n    }\n\n    onMarkupDirty({ markup }) {\n        if (markup.layer) {\n            forAll(markup.layer.links, (link) => {\n                this.renderLink(link);\n            });\n        }\n    }\n\n    onLinkDirty({ link }) {\n        this.renderLink(link);\n    }\n\n    renderLink(link) {\n        if (link.layer.isEmpty()) {\n            return;\n        }\n\n        const name = `${link.layer.id}_link_${link.id}`;\n\n        if (link.isVisible()) {\n            const isSelected = link.isSelected();\n            const isHovered = link.isHovered();\n            const isActiveLayer = this.markupsExtension.markupsManager.getActiveLayer() === link.layer;\n            const count = link.layer.layerData.attachments.length;\n            const transparent = (this.markupsExtension.markupsManager.isMarkupSessionOpen() && !isActiveLayer)\n                                || (this.markupsExtension.markupsManager.getSelectedLayers().length > 0 && !link.layer.isSelected())\n                                || !this.markupsExtension.isToolEnabled();\n            this.createLinkElement(name, link, isSelected, isActiveLayer, isHovered, count, transparent);\n        } else if (this.links[name]) {\n            this.links[name].classList.remove('visible');\n        }\n\n        link.setDirty(false);\n    }\n\n    renderAllLinks() {\n        const { layers } = this.markupsExtension.markupsManager;\n\n        forAll(layers, (layer) => {\n            forAll(layer.links, (link) => {\n                this.renderLink(link);\n            });\n        });\n\n        this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.LINK_RENDERED });\n    }\n\n    createLinkElement(name, link, isSelected, isActiveLayer, isHovered, count, transparent) {\n        let anchorElement = this.links[name];\n\n        const _document = this.getDocument();\n        if (!anchorElement) {\n            anchorElement = _document.createElement('div');\n            anchorElement.className = 'link';\n\n            const icon = _document.createElement('div');\n            icon.className = 'link-document-attachment';\n            anchorElement.appendChild(icon);\n\n            this.container.appendChild(anchorElement);\n            this.links[name] = anchorElement;\n        }\n\n        if (!anchorElement.classList.contains('visible')) {\n            anchorElement.classList.add('visible');\n        }\n\n        if (transparent && !anchorElement.classList.contains('transparent')) {\n            anchorElement.classList.add('transparent');\n        } else if (!transparent && anchorElement.classList.contains('transparent')) {\n            anchorElement.classList.remove('transparent');\n        }\n\n        if (isSelected && !anchorElement.classList.contains('selected')) {\n            anchorElement.classList.add('selected');\n        } else if (!isSelected && anchorElement.classList.contains('selected')) {\n            anchorElement.classList.remove('selected');\n        }\n\n        if (isHovered && !anchorElement.classList.contains('hover')) {\n            anchorElement.classList.add('hover');\n        } else if (!isHovered && anchorElement.classList.contains('hover')) {\n            anchorElement.classList.remove('hover');\n        }\n\n        if (isActiveLayer && !anchorElement.classList.contains('editable')) {\n            anchorElement.classList.add('editable');\n        } else if (!isActiveLayer && anchorElement.classList.contains('editable')) {\n            anchorElement.classList.remove('editable');\n        }\n\n        const text = count > 99 ? '99+' : count;\n        anchorElement.firstChild.innerText = text;\n\n        if (!this.linksSizeCache[text]) {\n            this.linksSizeCache[text] = anchorElement.firstChild.getBoundingClientRect();\n        }\n\n        // Calculate link's icon bounding box.\n        // First we calculate the boundingBox just for the size, without the correct position. It's necessary for link.getPosition().\n        const boundingBox = new THREE.Box3();\n        const linkHalfSize = new THREE.Vector3(this.linksSizeCache[text].width / 2, this.linksSizeCache[text].height / 2, 0);\n        boundingBox.expandByPoint(new THREE.Vector3());\n        boundingBox.expandByVector(linkHalfSize);\n        anchorElement.boundingBox = boundingBox;\n        const pos = link.getPosition();\n\n        const position = this.markupsExtension.renderer.worldToClient(pos);\n\n        anchorElement.style.transform = `translate(${Math.round(position.x - (this.linksSizeCache[text].width / 2))}px, ${Math.round(position.y - (this.linksSizeCache[text].height / 2))}px)`;\n\n        // Now, after we got the right position, we can update the bounding box with the true position.\n        boundingBox.makeEmpty();\n        boundingBox.expandByPoint(position);\n        boundingBox.expandByVector(linkHalfSize);\n    }\n\n    getLinkBoundingBox(link) {\n        const name = `${link.layer.id}_link_${link.id}`;\n        const anchorElement = this.links[name];\n        if (!anchorElement) {\n            return new THREE.Box3();\n        }\n\n        return anchorElement.boundingBox;\n    }\n\n    onLinkDeleted({ link }) {\n        const name = `${link.layer.id}_link_${link.id}`;\n        const linkElement = this.links[name];\n\n        if (linkElement) {\n            this.container.removeChild(linkElement);\n        }\n\n        delete this.links[name];\n    }\n\n    destroy() {\n        this.unregisterEventListeners();\n\n        forAll(this.links, (link) => {\n            this.container.removeChild(link);\n        });\n        this.links = null;\n\n        this.markupsExtension = null;\n        this.viewer = null;\n    }\n}\n\nav.GlobalManagerMixin.call(LinksRenderer.prototype);\n","import * as MarkupsConstants from \"../MarkupsConstants\";\nimport * as MESHLINE from \"./MeshLine\";\n\nexport default class MarkupsMaterialManager {\n    constructor(markupsExtension) {\n        this.markupsExtension = markupsExtension;\n        this.viewer = markupsExtension.viewer;\n        this.materials = {};\n    }\n\n    _getHashName(type, style, isFill, isTransparent) {\n        let name = type;\n\n        if (isFill) {\n            name += '|f';\n            if (style[MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR]) {\n                name += '|c' + style[MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR];\n            }\n            if (style[MarkupsConstants.STYLE_PROPERTIES.FILL_OPACITY] !== undefined) {\n                name += '|o' + style[MarkupsConstants.STYLE_PROPERTIES.FILL_OPACITY] * (isTransparent ? MarkupsConstants.DISABLED_OPACITY : 1.0);\n            }\n        } else {\n            if (style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS]) {\n                name += '|t' + style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS];\n            }\n            if (style[MarkupsConstants.STYLE_PROPERTIES.COLOR]) {\n                name += '|c' + style[MarkupsConstants.STYLE_PROPERTIES.COLOR];\n            }\n            if (style[MarkupsConstants.STYLE_PROPERTIES.OPACITY] !== undefined) {\n                name += '|o' + style[MarkupsConstants.STYLE_PROPERTIES.OPACITY] * (isTransparent ? MarkupsConstants.DISABLED_OPACITY : 1.0);\n            }\n        }\n        return name;\n    }\n\n    _setResolution(material, resolution) {\n        if (material.uniforms && material.uniforms.resolution) {\n            material.uniforms.resolution.value.set(resolution.width, resolution.height);\n        }\n    }\n\n    getMaterial(type, style, isFill) {\n        const name = this._getHashName(type, style, isFill);\n\n        if (this.materials[name]) {\n            return this.materials[name];\n        }\n\n        return null;\n    }\n\n    _setFillBlending(material) {\n        material.blending = material.opacity < 1 ? THREE.NoBlending : THREE.NormalBlending;\n    }\n    \n    _setStrokeBlending(material) {\n        if (material.uniforms.opacity.value < 1) {\n            material.blending = THREE.CustomBlending;\n            // Take color from source (the markup being shaded). This is akin to NoBlending for the RGB component.\n            material.blendDst = THREE.ZeroFactor;\n            material.blendSrc = THREE.OneFactor;\n            material.blendEquation = THREE.AddEquation;\n            if (!Autodesk.Viewing.isIE11) {\n                // Note: IE11 doesn't support MaxEquation, so use just Add, but don't use AA to avoid\n                // rendering artifacts\n                //\n                // Take the max alpha between source and destination,\n                // so that AA areas that overlap the markup are shaded with the markup opacity\n                // If the fill opacity is larger than the stroke opacity, the fill part that overlaps the stroke will\n                // affect the alpha in those areas, though. So this is a limitation of the current approach.\n                material.blendEquationAlpha = THREE.MaxEquation;\n            }\n        } else {\n            material.blending = THREE.NormalBlending;\n        }\n    }\n    \n    _createStrokeMaterial(style, needsMiter, isTransparent) {\n        const resolution = this.markupsExtension.renderer.getResolution();\n        \n        const matOpt = {\n            color: new THREE.Color(style[MarkupsConstants.STYLE_PROPERTIES.COLOR]),\n            opacity: style[MarkupsConstants.STYLE_PROPERTIES.OPACITY] * (isTransparent ? MarkupsConstants.DISABLED_OPACITY : 1.0),\n            resolution: new THREE.Vector2(resolution.width, resolution.height),\n            lineWidth: style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS],\n            side: THREE.FrontSide,\n            miter: needsMiter\n        };\n\n        const material = new MESHLINE.MeshLineMaterial(matOpt);\n        this._setStrokeBlending(material);\n        \n        return material;\n    }\n\n    _createFillMaterial(style, isTransparent) {\n        const matOpt = {\n            color: new THREE.Color(style[MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR]),\n            transparent: true,\n            opacity: style[MarkupsConstants.STYLE_PROPERTIES.FILL_OPACITY] * (isTransparent ? MarkupsConstants.DISABLED_OPACITY : 1.0),\n            side: THREE.DoubleSide,\n            wireframe: false\n        };\n\n        const material = new THREE.MeshBasicMaterial(matOpt);\n        this._setFillBlending(material);\n        \n        return material;\n    }\n\n    _editStrokeMaterial(material, style, isTransparent) {\n        material.uniforms.color.value.setStyle(style[MarkupsConstants.STYLE_PROPERTIES.COLOR]);\n        material.uniforms.lineWidth.value = style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS];\n        material.uniforms.opacity.value = style[MarkupsConstants.STYLE_PROPERTIES.OPACITY] * (isTransparent ? MarkupsConstants.DISABLED_OPACITY : 1.0);\n        this._setStrokeBlending(material);\n    }\n\n    _editFillMaterial(material, style, isTransparent) {\n        material.color.setStyle(style[MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR]);\n        material.opacity = style[MarkupsConstants.STYLE_PROPERTIES.FILL_OPACITY] * (isTransparent ? MarkupsConstants.DISABLED_OPACITY : 1.0);\n        material.needsUpdate = true;\n        this._setFillBlending(material);\n    }\n    \n    hasThicknessChanged(material, newMaterial) {\n        return material && newMaterial &&\n            material.uniforms && newMaterial.uniforms &&\n            material.uniforms.lineWidth.value !== newMaterial.uniforms.lineWidth.value;\n    }\n\n    addMaterial(markup, isFill) {\n        const type = markup.type;\n        const style = markup.editState.style;\n        const isTransparent = markup.isTransparent();\n        \n        const name = this._getHashName(type, style, isFill, isTransparent);\n\n        if (!this.materials[name]) {\n            const material = isFill ? this._createFillMaterial(style, isTransparent) : this._createStrokeMaterial(style, markup.needsMiter(), isTransparent);\n            material.depthWrite = false;\n            material.depthTest = false;\n            material.transparent = true;\n            material.refCount = 1;\n            material.name = name;\n            this.materials[name] = material;\n        } else {\n            this.materials[name].refCount++;\n        }\n\n        return this.materials[name];\n    }\n\n    removeMaterial(material) {\n        if (!this.materials[material.name]) {\n            console.error('Trying to remove a non-existing material');\n            return;\n        }\n\n        material.refCount--;\n        if (material.refCount === 0) {\n            material.dispose();\n            material.needsUpdate = true;\n            delete this.materials[material.name];\n        }\n    }\n\n    editMaterial(material, markup, isFill) {\n        if (!this.materials[material.name]) {\n            console.error('Trying to edit a non-existing material');\n            return;\n        }\n\n        const type = markup.type;\n        const style = markup.editState.style;\n        const isTransparent = markup.isTransparent();\n        \n        const newName = this._getHashName(type, style, isFill, isTransparent);\n        if (newName === material.name) {\n            return; // No change being done\n        }\n\n        // Cases:\n        // 1. Material is used only by one mesh and new style doesn't exist already: can edit in place\n        // 2. Material with new style already exists: use new material instead of current one\n        // 3. This material is in use in more than one place: create a new material so changes don't affect the other usages        \n        \n        if (material.refCount === 1 && !this.materials[newName]) {  // Can edit in place\n            if (isFill) {\n                this._editFillMaterial(material, style, isTransparent);\n            } else {\n                this._editStrokeMaterial(material, style, isTransparent);\n            }\n            \n            delete this.materials[material.name];\n            material.name = newName;\n            this.materials[newName] = material;\n            material.needsUpdate = true;\n            \n            return material;\n        }\n        \n        this.removeMaterial(material);\n        \n        return this.addMaterial(markup, isFill);\n    }\n\n    destroy() {\n        for (const key in this.materials) {\n            this.materials[key].dispose();\n            this.materials[key].needsUpdate = true;\n        }\n\n        this.materials = {};\n    }\n\n    updateScreenSize(resolution) {\n        for (const key in this.materials) {\n            this._setResolution(this.materials[key], resolution);\n        }\n    }\n}\n","import html2canvas from 'html2canvas';\nimport { MARKUPS_EVENTS } from '../MarkupsEvents';\nimport { forAll, getObjectAsList } from '../MarkupsCommon';\nimport GeometryUtils from '../Utils/GeometryUtils';\nimport * as MarkupsConstants from '../MarkupsConstants';\nimport './TextRenderer.css';\n\nconst av = Autodesk.Viewing;\n\nexport default class TextRenderer {\n    constructor(markupsExtension) {\n        this.markupsExtension = markupsExtension;\n        this.setGlobalManager(markupsExtension.globalManager);\n        this.viewer = this.markupsExtension.viewer;\n        this.container = this.viewer.appendOrderedElementToViewer('markup-text-container');\n        this.container.className = 'markup-text-container';\n\n        this.labels = {};\n        this.textMarkups = {};\n        this.textSizeCache = {};\n\n        this.registerEventListeners();\n    }\n\n    registerEventListeners() {\n        this.onMarkupRemovedBinded = this.onMarkupRemoved.bind(this);\n        this.onCameraChangedBinded = this.onCameraChanged.bind(this);\n        this.onMarkupVisibilityChangedBinded = this.onMarkupVisibilityChanged.bind(this);\n        this.onResizeBinded = this.onResize.bind(this);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_VISIBILITY_CHANGED, this.onMarkupVisibilityChangedBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_REMOVED, this.onMarkupRemovedBinded);\n        this.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangedBinded);\n        this.viewer.addEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.onResizeBinded);\n    }\n\n    unregisterEventListeners() {\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_VISIBILITY_CHANGED, this.onMarkupVisibilityChangedBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_REMOVED, this.onMarkupRemovedBinded);\n        this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangedBinded);\n        this.viewer.removeEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.onResizeBinded);\n    }\n\n    onCameraChanged() {\n        this.renderTextMarkups();\n    }\n\n    onResize() {\n        this.viewer.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, () => {\n            this.onCameraChanged();\n        }, { once: true });\n    }\n\n    renderTextMarkups() {\n        forAll(this.textMarkups, (markup) => {\n            this.renderMarkup(markup);\n        });\n    }\n\n    updateLabelPositionAndSize(label, markup) {\n        // If a style property didn't change, we don't want to reassign it.\n        // Unnecessary style assignments cause layout thrashing and slows down the render.\n        function assignStyleProperty(key, value) {\n            if (label.styleCache[key] !== value) {\n                label.style[key] = value;\n                label.styleCache[key] = value;\n            }\n        }\n\n        const { text } = markup.getEditState();\n        const textStyle = markup.getTextStyle();\n        const fontToWorldScale = this.markupsExtension.renderer.getFontToWorldScale();\n        const fontToClient = this.markupsExtension.renderer.sizeFromWorldToClient(fontToWorldScale);\n        const clientBoundingBox = markup.getClientBoundingBoxTextOnly();\n        \n        const clientCenter = clientBoundingBox.getCenter();\n        const clientSize = clientBoundingBox.size();\n        const rotate = GeometryUtils.radiansToDegrees(markup.getRotation() + this.markupsExtension.renderer.getCameraRotation());\n\n        // Browsers tend to round the values of font-size and line-height.\n        // Every browser has its own logic to round the values, so each one has its own result.\n        // The problem is, that because of this clamping, we get unwanted jumps for tall text labels,\n        // while zooming in and out.\n        // To solve it, we trim the font size by our own (floor function),\n        // and in order to add the rest of the trimmed font size, we scale the label with what's left.\n        // For browsers other than Safari it's easier, because we can just scale the text without changing the font-size at all.\n        // in Safari, font scaling result in really low res result.\n        if (Autodesk.Viewing.isSafari() || Autodesk.Viewing.isIOSDevice()) {\n            const preciseSize = parseFloat(textStyle.fontSize) * fontToClient;\n            const roundedSize = Math.floor(preciseSize) || 1;\n            const scale = preciseSize / roundedSize;\n\n            const width = clientSize.x / scale;\n            textStyle.width = `${width}px`;\n            textStyle.fontSize = `${roundedSize}px`;\n\n            Object.keys(textStyle).forEach((key) => {\n                assignStyleProperty(key, textStyle[key]);\n            });\n            \n            label.style.transform = `translate(${clientCenter.x}px, ${clientCenter.y}px)\n                                    translate(-50%, -50%)\n                                    rotate(${rotate}deg)\n                                    scale(${scale})`;\n        } else {\n            const { preciseWidth, width } = markup.getTextWidthInFontScale();\n            textStyle.width = `${width}px`;    // In font scale\n           \n            Object.keys(textStyle).forEach((key) => {\n                assignStyleProperty(key, textStyle[key]);\n            });\n            \n            const widthDiff = (preciseWidth - width) * fontToClient; // Compensation due to rounding (in client scale)\n            \n            label.style.transform = `translate(${clientCenter.x - widthDiff/2}px, ${clientCenter.y}px)\n                                    translate(-50%, -50%)\n                                    rotate(${rotate}deg)\n                                    scale(${fontToClient})`;\n        }\n\n        if (!markup.textInputHandler.textboxActive) {\n            label.innerText = text ? text : '';\n        }\n    }\n\n    renderMarkup(markup) {\n        if (!markup.editState.anchors[0]) {\n            return;\n        }\n        \n        let label = this.labels[markup.id];\n\n        const _document = this.getDocument();\n        if (!label) {\n            label = _document.createElement('div');\n            label.className = 'markup-text';\n            label.id = markup.id;\n            const { text } = markup.getEditState();\n            label.innerText = text ? text : '';\n            label.styleCache = {};\n            this.container.appendChild(label);\n            this.labels[markup.id] = label;\n            this.textMarkups[markup.id] = markup;\n        }\n\n        if (markup.isVisible() && !label.classList.contains('visible')) {\n            label.classList.add('visible');\n        } else if (!markup.isVisible() && label.classList.contains('visible')) {\n            label.classList.remove('visible');\n        }\n        \n        if (markup.editState.isSingleLine && !label.classList.contains('single-line')) {\n            label.classList.add('single-line');\n        }\n\n        if (markup.isVisible()) {\n            this.updateLabelPositionAndSize(label, markup);\n        }\n    }\n\n    getLabel(markup) {\n        return this.labels[markup.id];\n    }\n\n    onMarkupVisibilityChanged({ markup, visible }) {\n        if (markup.type === MarkupsConstants.MARKUP_TYPE_CALLOUT) {\n            this.renderMarkup(markup);\n        }\n    }\n\n    onMarkupRemoved({ markup }) {\n        const name = markup.id;\n        const markupElement = this.labels[name];\n\n        if (markupElement) {\n            this.container.removeChild(markupElement);\n        }\n\n        delete this.labels[name];\n        delete this.textMarkups[name];\n    }\n\n    isEmpty() {\n        return Object.keys(this.labels).length === 0;\n    }\n\n    renderTextToCanvas(canvas, camera, scale, afterCloneBeforeRender, afterCloneAfterRender, cb) {\n        // In case there are not text markups on canvas, just return the original canvas.\n        if (this.isEmpty()) {\n            cb(canvas);\n            return;\n        }\n\n        const visibleTextMarkupsIds = {};\n\n        // Because this operation is async, we need to make sure that we render all the text markups that were visible at this point.\n        getObjectAsList(this.textMarkups).forEach((markup) => {\n            if (markup.isVisible()) {\n                visibleTextMarkupsIds[markup.id] = true;\n            }\n        });\n\n        const options = {\n            backgroundColor: null,\n            logging: false,\n            scale,\n            onclone: (doc) => {\n                afterCloneBeforeRender();\n\n                const documentCameraBackup = this.markupsExtension.renderer.documentCamera;\n                const markupsCameraBackup = this.markupsExtension.renderer.markupsCamera;\n                this.markupsExtension.renderer.documentCamera = camera;\n                this.markupsExtension.renderer.markupsCamera = camera;\n\n                const container = doc.getElementsByClassName('markup-text-container')[0];\n                const labels = container.children;\n\n                // All the labels here are clones of the original labels.\n                // The changes made here are relevant only for the canvas rendering.\n                for (let i = 0; i < labels.length; i++) {\n                    const label = labels[i];\n\n                    if (visibleTextMarkupsIds[label.id]) {\n                        const markup = this.textMarkups[label.id];\n                        if (!label.classList.contains('visible')) {\n                            label.classList.add('visible');\n                        }\n\n                        label.styleCache = {};\n                        this.updateLabelPositionAndSize(label, markup);\n                    } else if (label.classList.contains('visible')) {\n                        label.classList.remove('visible');\n                    }\n                }\n\n                this.markupsExtension.renderer.documentCamera = documentCameraBackup;\n                this.markupsExtension.renderer.markupsCamera = markupsCameraBackup;\n\n                afterCloneAfterRender();\n            }\n        };\n\n        html2canvas(this.container, options).then((res) => {\n            const _document = this.getDocument();\n            const textCanvas = _document.createElement('canvas');\n            textCanvas.width = res.width;\n            textCanvas.height = res.height;\n            const ctx = textCanvas.getContext('2d');\n\n            // Flip text vertically.\n            ctx.translate(0, textCanvas.height);\n            ctx.scale(1, -1);\n            ctx.drawImage(res, 0, 0);\n\n            // Copy the image contents to the canvas\n            const canvasCtx = canvas.getContext('2d');\n            canvasCtx.globalCompositeOperation = 'source-over';\n            canvasCtx.drawImage(textCanvas, 0, 0);\n            cb(canvas);\n        });\n    }\n\n    destroy() {\n        this.unregisterEventListeners();\n\n        forAll(this.labels, (label) => {\n            this.container.removeChild(label);\n        });\n\n        this.labels = null;\n        this.textMarkups = null;\n        this.textSizeCache = null;\n\n        this.markupsExtension = null;\n        this.viewer = null;\n    }\n}\n\nav.GlobalManagerMixin.call(TextRenderer.prototype);","import GeometryUtils from './GeometryUtils';\n\nconst CameraUtils = {};\n\n// Same as viewer.worldToClient, but with a camera as argument.\nCameraUtils.worldToClient = (viewer, point, camera) => {\n    var p = new THREE.Vector4(point.x, point.y, point.z, 1);\n    p.applyMatrix4(camera.matrixWorldInverse);\n    p.applyMatrix4(camera.projectionMatrix);\n\n    // Don't want to mirror values with negative z (behind camera)\n    if (p.w > 0) {\n        p.x /= p.w;\n        p.y /= p.w;\n        p.z /= p.w;\n    }\n\n    return viewer.impl.viewportToClient(p.x, p.y);\n};\n\nCameraUtils.getCameraEyeVector = (camera) => {\n    return camera.target.clone().sub(camera.position).normalize();\n};\n\nCameraUtils.getCameraRightVector = (camera) => {\n    const eye = CameraUtils.getCameraEyeVector(camera);\n    return new THREE.Vector3().crossVectors(eye, camera.up).normalize();\n};\n\nCameraUtils.getCameraUpVector = (camera) => {\n    const right = CameraUtils.getCameraRightVector(camera);\n    const eye = CameraUtils.getCameraEyeVector(camera);\n    return new THREE.Vector3().crossVectors(right, eye).normalize();\n};\n\nCameraUtils.getCameraRotation = (camera) => {\n    return GeometryUtils.getSignedAngle(CameraUtils.getCameraUpVector(camera), new THREE.Vector3(0, 1, 0), CameraUtils.getCameraEyeVector(camera));\n};\n\nexport default CameraUtils;","import FrameRenderer from './FrameRenderer';\nimport LinksRenderer from './Links/LinksRenderer';\nimport { MARKUPS_EVENTS } from './MarkupsEvents';\nimport * as MarkupsConstants from './MarkupsConstants';\nimport MarkupsMaterialManager from './RendererHelpers/MarkupsMaterialManager';\nimport MarkupsGeometryManager from './RendererHelpers/MarkupsGeometryManager';\nimport TextRenderer from './RendererHelpers/TextRenderer';\nimport LodashUtils from './Utils/LodashUtils';\nimport { insertInSortedArray } from './MarkupsCommon';\nimport CameraUtils from './Utils/CameraUtils';\n\nconst avp = Autodesk.Viewing.Private;\nconst ShaderPass = avp.ShaderPass;\nconst CopyShader = avp.CopyShader;\n\nexport default class MarkupsRenderer {\n    constructor(markupsExtension) {\n        this.markupsExtension = markupsExtension;\n        this.viewer = this.markupsExtension.viewer;\n        this.viewer.impl.updateCameraMatrices();\n\n        this.viewer.navigation.updateCamera();\n        this.documentCamera = this.viewer.navigation.getCamera();\n        this.documentCamera.updateMatrixWorld();\n\n        this.textRenderer = new TextRenderer(this.markupsExtension);\n        this.frameRenderer = new FrameRenderer(this.markupsExtension);\n        this.linksRenderer = new LinksRenderer(this.markupsExtension);\n        this.materialManager = new MarkupsMaterialManager(this.markupsExtension);\n        this.geometryManager = new MarkupsGeometryManager(this.markupsExtension);\n\n        this.is3d = this.viewer.model.is3d();\n\n        this.raycaster = new THREE.Raycaster();\n        \n        this.size = {\n            width: this.viewer.canvas.clientWidth,\n            height: this.viewer.canvas.clientHeight\n        };\n        \n        if (this.is3d) {\n            this.viewSize = MarkupsConstants.WORLD_3D_SIZE;\n            this.markupsCamera = new THREE.OrthographicCamera(0, this.viewSize, this.viewSize, 0, 0, 1);\n            this.markupsCamera.position.set(0, 0, 1);\n            this.markupsCamera.target = new THREE.Vector3(0, 0, 0);\n        } else {\n            this.markupsCamera = this.viewer.navigation.getCamera();\n        }\n        \n        this.markups = [];\n\n        this.renderer = this.viewer.impl.renderer();\n        this.glrenderer = this.viewer.impl.glrenderer();\n        this.copyPass = new ShaderPass(CopyShader);\n        this.copyPass.material.depthWrite = false;\n        this.copyPass.material.depthTest = false;\n        this.copyPass.material.transparent = true;\n\n        this._tmpScene = new THREE.Scene();\n        this._black = new THREE.Color(0, 0, 0);\n\n        this.absoluteRightVec = new THREE.Vector3(1, 0, 0);\n        this.absoluteUpVec = new THREE.Vector3(0, 1, 0);\n        this.absoluteEyeVec = new THREE.Vector3(0, 0, 1);\n\n        this.tmpMatrix = new THREE.Matrix4();\n        this.frustum = new THREE.Frustum();\n        \n        this.setMMtoUnitConversion();\n        this.setNormaStrokeWidth();\n        this.setNormaTextSize();\n\n        this.registerEventListeners();\n        this.updateCameraAndMaterialParameters();\n    }\n\n    registerEventListeners() {\n        this.onRenderBinded = this.onRender.bind(this);\n        this.onResizeBinded = this.onResize.bind(this);\n        this.invalidateBinded = this.invalidate.bind(this);\n        this.onCameraChangedBinded = this.onCameraChanged.bind(this);\n        this.viewer.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.onRenderBinded);\n        this.viewer.addEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.onResizeBinded);\n        this.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangedBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_REMOVED, this.invalidateBinded);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_DRAWING_CANCEL, this.invalidateBinded);\n    }\n\n    removeEventListeners() {\n        this.viewer.removeEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.onRenderBinded);\n        this.viewer.removeEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.onResizeBinded);\n        this.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangedBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_REMOVED, this.invalidateBinded);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_DRAWING_CANCEL, this.invalidateBinded);\n    }\n\n    onCameraChanged() {\n        this.eyeVector = null;\n        this.upVector = null;\n        this.rightVector = null;\n    }\n    \n    getResolution() {\n        const pixelRatio = this.glrenderer.getPixelRatio();\n        \n        return {\n            width: this.size.width * pixelRatio,\n            height: this.size.height * pixelRatio\n        };\n    }\n\n    supportsInt32Index() {\n        return !!this.glrenderer.supportsElementIndexUint();\n    }\n    \n    disposeTmpTarget() {\n        if (this._tmpTarget) {\n            this._tmpTarget.dispose();\n            this._tmpTarget = null;\n        }\n    }\n    \n    createTempRenderTarget(resolution = this.getResolution()) {\n        this.disposeTmpTarget();\n   \n        if (resolution.width === 0 || resolution.height === 0) {\n            return false;\n        }\n        \n        this._tmpTarget = new THREE.WebGLRenderTarget(resolution.width, resolution.height,\n            {\n                minFilter: THREE.LinearFilter,\n                magFilter: THREE.LinearFilter,\n                format: THREE.RGBAFormat,\n                stencilBuffer: false,\n                depthBuffer: false\n            });\n        this._tmpTarget.generateMipmaps = false;\n        \n        return true;\n    }\n\n    onRender() {\n        this.render();\n    }\n\n    onResize(e) {\n        this.size.width = e.width;\n        this.size.height = e.height;\n        \n        this.updateCameraAndMaterialParameters();\n    }\n    \n    updateCameraAndMaterialParameters() {\n        if (this.is3d) {\n            const aspect = this.size.width / (this.size.height || 1); // In case height is 0.\n            const newRight = this.viewSize * aspect;\n            const delta = this.markupsCamera.right - newRight;\n\n            this.markupsCamera.position.x += delta / 2;\n            this.markupsCamera.target.x += delta / 2;\n            this.markupsCamera.right = newRight;\n\n            this.markupsCamera.updateProjectionMatrix();\n            this.markupsCamera.updateMatrixWorld();\n        }\n\n        const resolution = this.getResolution();\n\n        if (this._tmpTarget) {  // Resize only if it already exists\n            this.createTempRenderTarget(resolution);\n        }\n\n        this.materialManager.updateScreenSize(resolution);\n    }\n\n    // A null target means render to screen\n    render(target = this.renderer.getFinalTarget(), camera = this.markupsCamera) {\n        //\n        // Markups can have a combination of fill and stroke, each one with a different opacity. To avoid the overlapping parts\n        // of a transparent markup having darker areas (because of the alpha values being blended) we render them to a \n        // temporary target first, with blending off. Afterwards the result is blended with the final image.\n        // In order to render correctly we must take into account the following:\n        // \n        //          Fill            Stroke          How to render\n        //      ----------------------------------------------------\n        //         Opaque          Opaque           Normally\n        //         Transparent     Opaque           Fill with temp target, stroke normally\n        //         Transparent     Transparent      Both with temp target\n        //         None            Opaque           Normally\n        //         None            Transparent      With temp target\n        //\n\n        // TODO: Improve performance by simplifying the check in isInsideCamera.\n        this.tmpMatrix.multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse);\n        this.frustum.setFromMatrix(this.tmpMatrix);\n\n        const isInsideCamera = (box) => {\n            const topRight = box.max;\n            const topLeft = box.max.clone().setX(box.min.x);\n            const bottomLeft = box.min;\n            const bottomRight = box.min.clone().setX(box.max.x);\n            return this.frustum.containsPoint(topRight) || this.frustum.containsPoint(topLeft) || this.frustum.containsPoint(bottomLeft) || this.frustum.containsPoint(bottomRight) || this.frustum.intersectsBox(box);\n        };\n\n        const is2DBoxIntersection = (box1, box2) => {\n            return !(box2.max.x < box1.min.x || box2.min.x > box1.max.x ||\n                box2.max.y < box1.min.y || box2.min.y > box1.max.y);\n        };\n        \n        const normalMeshes = [];\n        const transparentMeshes = [], transparentProperties = [];\n                \n        const flushNormalMeshes = () => {\n            if (normalMeshes.length === 0) return;\n            \n            this._tmpScene.add(...normalMeshes);\n\n            this.glrenderer.render(this._tmpScene, camera, target);\n\n            this._tmpScene.children.length = 0;\n            normalMeshes.length = 0;\n        };\n\n        const flushTransparentMeshes = () => {\n            if (transparentMeshes.length === 0) return;\n\n            this._tmpScene.add(...transparentMeshes);\n\n            this.glrenderer.setClearColor(this._black, 0.0);\n            this.glrenderer.clearTarget(this._tmpTarget, true, false, false);\n\n            this.glrenderer.render(this._tmpScene, camera, this._tmpTarget);\n            this.copyPass.render(this.glrenderer, target, this._tmpTarget);\n\n            this._tmpScene.children.length = 0;\n            transparentMeshes.length = 0;\n            transparentProperties.length = 0;\n        };\n        \n        this.markups.forEach((markup) => {\n            const meshContainer = markup.meshContainer;\n            if (!meshContainer.visible || meshContainer.children.length === 0) {\n                return;\n            }\n\n            if (!this.is3d) { // No point in checking in 3D since the camera is fixed\n                const bbox = markup.getWorldBoundingBox(true);\n                if (!isInsideCamera(bbox)) {\n                    return;\n                }\n            }\n                      \n            const fillMesh = markup.fillMesh;\n            const strokeMesh = markup.strokeMesh;\n            const hasTransparentFill = fillMesh && fillMesh.material.opacity < 1;\n            const hasTransparentStroke = strokeMesh.material.uniforms.opacity.value < 1;\n            \n            const normalRender = !hasTransparentFill && !hasTransparentStroke;\n            if (normalRender) {\n                flushTransparentMeshes();\n                normalMeshes.push(meshContainer);\n            } else {\n                if (!this._tmpTarget) { // Create only if needed\n                    if (!this.createTempRenderTarget()) {\n                        return;\n                    }\n                }\n                \n                flushNormalMeshes();\n                \n                if ((hasTransparentFill || !fillMesh) && hasTransparentStroke) {\n                    const currentBBox = markup.getWorldBoundingBox(true);\n                    if (transparentProperties.some(prop => {\n                            if (markup.isTransparent() && prop.isTransparent) {\n                                return false;\n                            }\n                            \n                            return is2DBoxIntersection(currentBBox, prop.bbox);\n                    })) {\n                        flushTransparentMeshes();\n                    }\n                    \n                    transparentMeshes.push(meshContainer);\n                    transparentProperties.push({\n                        bbox: currentBBox,\n                        isTransparent: markup.isTransparent()\n                    });\n                } else {\n                    flushTransparentMeshes();\n                    \n                    this._tmpScene.add(meshContainer);\n                    \n                    // Fill to tmpTarget                   \n                    meshContainer.remove(strokeMesh);\n\n                    this.glrenderer.setClearColor(this._black, 0.0);\n                    this.glrenderer.clearTarget(this._tmpTarget, true, false, false);\n\n                    this.glrenderer.render(this._tmpScene, camera, this._tmpTarget);\n                    this.copyPass.render(this.glrenderer, target, this._tmpTarget);\n                    \n                    // Stroke as normal\n                    meshContainer.remove(fillMesh);\n                    meshContainer.add(strokeMesh);\n\n                    this.glrenderer.render(this._tmpScene, camera, target);\n\n                    // Restore mesh container (adding back in the correct order)\n                    meshContainer.add(fillMesh);\n                    meshContainer.add(strokeMesh);\n\n                    this._tmpScene.remove(meshContainer);\n                }\n            }            \n        });\n\n        flushNormalMeshes();\n        flushTransparentMeshes();\n    }\n\n    getCameraEyeVector() {\n        if (!this.eyeVector) {\n            this.eyeVector = CameraUtils.getCameraEyeVector(this.markupsCamera);\n        }\n\n        return this.eyeVector.clone();\n    }\n\n    getCameraRightVector() {\n        if (!this.rightVector) {\n            this.rightVector = CameraUtils.getCameraRightVector(this.markupsCamera);\n        }\n\n        return this.rightVector.clone();\n    }\n\n    getCameraUpVector() {\n        if (!this.upVector) {\n            this.upVector = CameraUtils.getCameraUpVector(this.markupsCamera);\n        }\n\n        return this.upVector.clone();\n    }\n\n    getCameraRotation() {\n        return CameraUtils.getCameraRotation(this.markupsCamera);\n    }\n\n    worldToClient(point, camera = this.markupsCamera) {\n        const containerBounds = this.viewer.navigation.getScreenViewport();\n        const p = point.clone().project(camera);\n\n        return new THREE.Vector3(( p.x + 1) / 2 * containerBounds.width, (-p.y + 1) / 2 * containerBounds.height, 0);\n    }\n\n    clientToWorld(point, camera = this.markupsCamera) {\n        const containerBounds = this.viewer.navigation.getScreenViewport();\n        const p = new THREE.Vector3();\n\n        p.x = ((point.x / containerBounds.width) * 2) - 1;\n        p.y = -(((point.y / containerBounds.height) * 2) - 1);\n\n        const result = p.unproject(camera);\n        result.z = 0;\n        return result;\n    }\n\n    sizeFromWorldToClient(size) {\n        const a = this.worldToClient(new THREE.Vector3());\n        const b = this.worldToClient(new THREE.Vector3(size, 0, 0));\n\n        return a.distanceTo(b);\n    }\n\n    sizeFromClientToWorld(size) {\n        const a = this.clientToWorld(new THREE.Vector3());\n        const b = this.clientToWorld(new THREE.Vector3(size, 0, 0));\n\n        return a.distanceTo(b);\n    }\n\n    multiplyByNormaStrokeWidth(size) {\n        return this.normaStrokeWidth * size;\n    }\n\n    documentCameraToMarkupsCamera(point) {\n        if (!this.is3d) {\n            point.z = 0;\n            return point; // in 2D, both cameras are the same.\n        }\n\n        const p = this.worldToClient(point, this.documentCamera);\n        return this.clientToWorld(p);\n    }\n    \n    _fromMMtoWorldUnits(value) {\n        if (this.is3d) {\n            return 1;\n        }\n        \n        const model = this.viewer.model;\n\n        // Prefer page units (model might be in meters while the page units are in inches or mm). If not available take model units\n        // If that is also not available (i.e. raster image) use a default of mm for a 1 to 1 conversion\n        let units = model.getMetadata('page_dimensions', 'page_units', null) || model.getMetadata('page_dimensions', 'model_units', 'mm');\n\n        let worldUnits = Autodesk.Viewing.Private.convertUnits('mm', units, 1, value);\n\n        if (model.isLeaflet()) {\n            const bounds = this.viewer.impl.getFitBounds(true);\n            const worldWidth = bounds.size().x;\n            const pageWidth = model.getMetadata('page_dimensions', 'page_width');\n            worldUnits *= worldWidth / pageWidth;\n        }\n        \n        return worldUnits;\n    }\n\n    _calcNormaSize(defaultValue, maxSizePercentange) {\n        let norma = this.mmToWorldUnitFactor * defaultValue;\n\n        const bounds = this.viewer.impl.getFitBounds(true);\n        const worldWidth = bounds.size().x;\n        const worldHeight = bounds.size().y;\n            \n        const diagonal = Math.sqrt(worldWidth * worldWidth + worldHeight * worldHeight);\n        norma = Math.min(norma, diagonal * maxSizePercentange);\n        \n        return norma;\n    }\n\n    setMMtoUnitConversion() {\n        this.mmToWorldUnitFactor = this._fromMMtoWorldUnits(1);\n    }\n    \n    setNormaStrokeWidth() {\n        if (this.is3d) {\n            this.normaStrokeWidth = MarkupsConstants.NORMA_3D;\n        } else {\n            this.normaStrokeWidth = this._calcNormaSize(MarkupsConstants.DEFAULT_STROKE_IN_MM, MarkupsConstants.MAX_NORMA_PERCENTAGE);\n        }\n    }\n    \n    setNormaTextSize() {\n        if (this.is3d) {\n            this.normaTextSize = MarkupsConstants.NORMA_TEXT_3D;\n        } else {\n            this.normaTextSize = this._calcNormaSize(MarkupsConstants.DEFAULT_FONT_SIZE_IN_MM, MarkupsConstants.MAX_NORMA_TEXT_PERCENTAGE);\n        }\n    }\n\n    getNormaStrokeWidth() {\n        return this.normaStrokeWidth;\n    }\n    \n    // We defined the baseline font size in px, and what it's value should be in mm, so that we can perform this\n    // conversion, and have a consistent experience among documents with different scales\n    getFontToWorldScale() {\n        return this.normaTextSize / MarkupsConstants.DEFAULT_FONT_SIZE_IN_PIXELS;\n    }\n\n    addToScene(markup) {\n        const hasCreationDate = m => m.layer && m.layer.layerData && m.layer.layerData.metadata && m.layer.layerData.metadata.created_at;\n        \n        const comparer = (a, b) => {\n            if (!hasCreationDate(a)) return 1;  // It's a markup we just added by pushing to the array and should be left untouched at the end \n            \n            const dateA = Date.parse(a.layer.layerData.metadata.created_at); // The array element\n            const dateB = Date.parse(b.layer.layerData.metadata.created_at); // The element being inserted\n\n            // First priority - oldest first\n            if (dateA > dateB) return 1;\n            if (dateA < dateB) return -1;\n                        \n            // Second priority - id\n            if (a.id > b.id) return 1;\n            if (a.id < b.id) return -1;\n            \n            return 0;\n        };\n\n        if (hasCreationDate(markup)) {\n            insertInSortedArray(markup, this.markups, comparer);\n        } else {    // Newly created markups don't have a layer yet\n            this.markups.push(markup);\n        }\n    }\n\n    removeFromScene(markup) {\n        LodashUtils.remove(this.markups, m => m === markup);\n    }\n\n    invalidate() {\n        this.markupsExtension.viewer.impl.invalidate(false, false, true);\n    }\n\n    updateRaycaster(mouse) {\n        const containerBounds = this.viewer.navigation.getScreenViewport();\n        const x = ( mouse.x / containerBounds.width ) * 2 - 1;\n        const y = -( mouse.y / containerBounds.height ) * 2 + 1;\n\n        this.raycaster.ray.origin.set(x, y, (this.markupsCamera.near + this.markupsCamera.far) / (this.markupsCamera.near - this.markupsCamera.far)).unproject(this.markupsCamera);\n        this.raycaster.ray.direction.set(0, 0, -1);\n    }\n\n    destroy() {\n        this.removeEventListeners();\n\n        if (this.frameRenderer) {\n            this.frameRenderer.destroy();\n            this.frameRenderer = null;\n        }\n\n        if (this.linksRenderer) {\n            this.linksRenderer.destroy();\n            this.linksRenderer = null;\n        }\n\n        if (this.textRenderer) {\n            this.textRenderer.destroy();\n            this.textRenderer = null;\n        }\n\n        if (this.materialManager) {\n            this.materialManager.destroy();\n            this.materialManager = null;\n        }\n\n        if (this.geometryManager) {\n            this.geometryManager.destroy();\n            this.geometryManager = null;\n        }\n        \n        this.disposeTmpTarget();\n        \n        this.invalidate();\n\n        this.markupsExtension = null;\n        this.viewer = null;\n    }\n}\n","export default function toInteger(dirtyNumber) {\n  if (dirtyNumber === null || dirtyNumber === true || dirtyNumber === false) {\n    return NaN;\n  }\n\n  var number = Number(dirtyNumber);\n\n  if (isNaN(number)) {\n    return number;\n  }\n\n  return number < 0 ? Math.ceil(number) : Math.floor(number);\n}","export default function requiredArgs(required, args) {\n  if (args.length < required) {\n    throw new TypeError(required + ' argument' + (required > 1 ? 's' : '') + ' required, but only ' + args.length + ' present');\n  }\n}","import toInteger from \"../_lib/toInteger/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\nvar MILLISECONDS_IN_HOUR = 3600000;\nvar MILLISECONDS_IN_MINUTE = 60000;\nvar DEFAULT_ADDITIONAL_DIGITS = 2;\nvar patterns = {\n  dateTimeDelimiter: /[T ]/,\n  timeZoneDelimiter: /[Z ]/i,\n  timezone: /([Z+-].*)$/\n};\nvar dateRegex = /^-?(?:(\\d{3})|(\\d{2})(?:-?(\\d{2}))?|W(\\d{2})(?:-?(\\d{1}))?|)$/;\nvar timeRegex = /^(\\d{2}(?:[.,]\\d*)?)(?::?(\\d{2}(?:[.,]\\d*)?))?(?::?(\\d{2}(?:[.,]\\d*)?))?$/;\nvar timezoneRegex = /^([+-])(\\d{2})(?::?(\\d{2}))?$/;\n/**\n * @name parseISO\n * @category Common Helpers\n * @summary Parse ISO string\n *\n * @description\n * Parse the given string in ISO 8601 format and return an instance of Date.\n *\n * Function accepts complete ISO 8601 formats as well as partial implementations.\n * ISO 8601: http://en.wikipedia.org/wiki/ISO_8601\n *\n * If the argument isn't a string, the function cannot parse the string or\n * the values are invalid, it returns Invalid Date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * - The previous `parse` implementation was renamed to `parseISO`.\n *\n *   ```javascript\n *   // Before v2.0.0\n *   parse('2016-01-01')\n *\n *   // v2.0.0 onward\n *   parseISO('2016-01-01')\n *   ```\n *\n * - `parseISO` now validates separate date and time values in ISO-8601 strings\n *   and returns `Invalid Date` if the date is invalid.\n *\n *   ```javascript\n *   parseISO('2018-13-32')\n *   //=> Invalid Date\n *   ```\n *\n * - `parseISO` now doesn't fall back to `new Date` constructor\n *   if it fails to parse a string argument. Instead, it returns `Invalid Date`.\n *\n * @param {String} argument - the value to convert\n * @param {Object} [options] - an object with options.\n * @param {0|1|2} [options.additionalDigits=2] - the additional number of digits in the extended year format\n * @returns {Date} the parsed date in the local time zone\n * @throws {TypeError} 1 argument required\n * @throws {RangeError} `options.additionalDigits` must be 0, 1 or 2\n *\n * @example\n * // Convert string '2014-02-11T11:30:30' to date:\n * var result = parseISO('2014-02-11T11:30:30')\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert string '+02014101' to date,\n * // if the additional number of digits in the extended year format is 1:\n * var result = parseISO('+02014101', { additionalDigits: 1 })\n * //=> Fri Apr 11 2014 00:00:00\n */\n\nexport default function parseISO(argument, dirtyOptions) {\n  requiredArgs(1, arguments);\n  var options = dirtyOptions || {};\n  var additionalDigits = options.additionalDigits == null ? DEFAULT_ADDITIONAL_DIGITS : toInteger(options.additionalDigits);\n\n  if (additionalDigits !== 2 && additionalDigits !== 1 && additionalDigits !== 0) {\n    throw new RangeError('additionalDigits must be 0, 1 or 2');\n  }\n\n  if (!(typeof argument === 'string' || Object.prototype.toString.call(argument) === '[object String]')) {\n    return new Date(NaN);\n  }\n\n  var dateStrings = splitDateString(argument);\n  var date;\n\n  if (dateStrings.date) {\n    var parseYearResult = parseYear(dateStrings.date, additionalDigits);\n    date = parseDate(parseYearResult.restDateString, parseYearResult.year);\n  }\n\n  if (isNaN(date) || !date) {\n    return new Date(NaN);\n  }\n\n  var timestamp = date.getTime();\n  var time = 0;\n  var offset;\n\n  if (dateStrings.time) {\n    time = parseTime(dateStrings.time);\n\n    if (isNaN(time) || time === null) {\n      return new Date(NaN);\n    }\n  }\n\n  if (dateStrings.timezone) {\n    offset = parseTimezone(dateStrings.timezone);\n\n    if (isNaN(offset)) {\n      return new Date(NaN);\n    }\n  } else {\n    var dirtyDate = new Date(timestamp + time); // js parsed string assuming it's in UTC timezone\n    // but we need it to be parsed in our timezone\n    // so we use utc values to build date in our timezone.\n    // Year values from 0 to 99 map to the years 1900 to 1999\n    // so set year explicitly with setFullYear.\n\n    var result = new Date(0);\n    result.setFullYear(dirtyDate.getUTCFullYear(), dirtyDate.getUTCMonth(), dirtyDate.getUTCDate());\n    result.setHours(dirtyDate.getUTCHours(), dirtyDate.getUTCMinutes(), dirtyDate.getUTCSeconds(), dirtyDate.getUTCMilliseconds());\n    return result;\n  }\n\n  return new Date(timestamp + time + offset);\n}\n\nfunction splitDateString(dateString) {\n  var dateStrings = {};\n  var array = dateString.split(patterns.dateTimeDelimiter);\n  var timeString; // The regex match should only return at maximum two array elements.\n  // [date], [time], or [date, time].\n\n  if (array.length > 2) {\n    return dateStrings;\n  }\n\n  if (/:/.test(array[0])) {\n    dateStrings.date = null;\n    timeString = array[0];\n  } else {\n    dateStrings.date = array[0];\n    timeString = array[1];\n\n    if (patterns.timeZoneDelimiter.test(dateStrings.date)) {\n      dateStrings.date = dateString.split(patterns.timeZoneDelimiter)[0];\n      timeString = dateString.substr(dateStrings.date.length, dateString.length);\n    }\n  }\n\n  if (timeString) {\n    var token = patterns.timezone.exec(timeString);\n\n    if (token) {\n      dateStrings.time = timeString.replace(token[1], '');\n      dateStrings.timezone = token[1];\n    } else {\n      dateStrings.time = timeString;\n    }\n  }\n\n  return dateStrings;\n}\n\nfunction parseYear(dateString, additionalDigits) {\n  var regex = new RegExp('^(?:(\\\\d{4}|[+-]\\\\d{' + (4 + additionalDigits) + '})|(\\\\d{2}|[+-]\\\\d{' + (2 + additionalDigits) + '})$)');\n  var captures = dateString.match(regex); // Invalid ISO-formatted year\n\n  if (!captures) return {\n    year: null\n  };\n  var year = captures[1] && parseInt(captures[1]);\n  var century = captures[2] && parseInt(captures[2]);\n  return {\n    year: century == null ? year : century * 100,\n    restDateString: dateString.slice((captures[1] || captures[2]).length)\n  };\n}\n\nfunction parseDate(dateString, year) {\n  // Invalid ISO-formatted year\n  if (year === null) return null;\n  var captures = dateString.match(dateRegex); // Invalid ISO-formatted string\n\n  if (!captures) return null;\n  var isWeekDate = !!captures[4];\n  var dayOfYear = parseDateUnit(captures[1]);\n  var month = parseDateUnit(captures[2]) - 1;\n  var day = parseDateUnit(captures[3]);\n  var week = parseDateUnit(captures[4]);\n  var dayOfWeek = parseDateUnit(captures[5]) - 1;\n\n  if (isWeekDate) {\n    if (!validateWeekDate(year, week, dayOfWeek)) {\n      return new Date(NaN);\n    }\n\n    return dayOfISOWeekYear(year, week, dayOfWeek);\n  } else {\n    var date = new Date(0);\n\n    if (!validateDate(year, month, day) || !validateDayOfYearDate(year, dayOfYear)) {\n      return new Date(NaN);\n    }\n\n    date.setUTCFullYear(year, month, Math.max(dayOfYear, day));\n    return date;\n  }\n}\n\nfunction parseDateUnit(value) {\n  return value ? parseInt(value) : 1;\n}\n\nfunction parseTime(timeString) {\n  var captures = timeString.match(timeRegex);\n  if (!captures) return null; // Invalid ISO-formatted time\n\n  var hours = parseTimeUnit(captures[1]);\n  var minutes = parseTimeUnit(captures[2]);\n  var seconds = parseTimeUnit(captures[3]);\n\n  if (!validateTime(hours, minutes, seconds)) {\n    return NaN;\n  }\n\n  return hours * MILLISECONDS_IN_HOUR + minutes * MILLISECONDS_IN_MINUTE + seconds * 1000;\n}\n\nfunction parseTimeUnit(value) {\n  return value && parseFloat(value.replace(',', '.')) || 0;\n}\n\nfunction parseTimezone(timezoneString) {\n  if (timezoneString === 'Z') return 0;\n  var captures = timezoneString.match(timezoneRegex);\n  if (!captures) return 0;\n  var sign = captures[1] === '+' ? -1 : 1;\n  var hours = parseInt(captures[2]);\n  var minutes = captures[3] && parseInt(captures[3]) || 0;\n\n  if (!validateTimezone(hours, minutes)) {\n    return NaN;\n  }\n\n  return sign * (hours * MILLISECONDS_IN_HOUR + minutes * MILLISECONDS_IN_MINUTE);\n}\n\nfunction dayOfISOWeekYear(isoWeekYear, week, day) {\n  var date = new Date(0);\n  date.setUTCFullYear(isoWeekYear, 0, 4);\n  var fourthOfJanuaryDay = date.getUTCDay() || 7;\n  var diff = (week - 1) * 7 + day + 1 - fourthOfJanuaryDay;\n  date.setUTCDate(date.getUTCDate() + diff);\n  return date;\n} // Validation functions\n// February is null to handle the leap year (using ||)\n\n\nvar daysInMonths = [31, null, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\n\nfunction isLeapYearIndex(year) {\n  return year % 400 === 0 || year % 4 === 0 && year % 100;\n}\n\nfunction validateDate(year, month, date) {\n  return month >= 0 && month <= 11 && date >= 1 && date <= (daysInMonths[month] || (isLeapYearIndex(year) ? 29 : 28));\n}\n\nfunction validateDayOfYearDate(year, dayOfYear) {\n  return dayOfYear >= 1 && dayOfYear <= (isLeapYearIndex(year) ? 366 : 365);\n}\n\nfunction validateWeekDate(_year, week, day) {\n  return week >= 1 && week <= 53 && day >= 0 && day <= 6;\n}\n\nfunction validateTime(hours, minutes, seconds) {\n  if (hours === 24) {\n    return minutes === 0 && seconds === 0;\n  }\n\n  return seconds >= 0 && seconds < 60 && minutes >= 0 && minutes < 60 && hours >= 0 && hours < 25;\n}\n\nfunction validateTimezone(_hours, minutes) {\n  return minutes >= 0 && minutes <= 59;\n}","import requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name toDate\n * @category Common Helpers\n * @summary Convert the given argument to an instance of Date.\n *\n * @description\n * Convert the given argument to an instance of Date.\n *\n * If the argument is an instance of Date, the function returns its clone.\n *\n * If the argument is a number, it is treated as a timestamp.\n *\n * If the argument is none of the above, the function returns Invalid Date.\n *\n * **Note**: *all* Date arguments passed to any *date-fns* function is processed by `toDate`.\n *\n * @param {Date|Number} argument - the value to convert\n * @returns {Date} the parsed date in the local time zone\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // Clone the date:\n * const result = toDate(new Date(2014, 1, 11, 11, 30, 30))\n * //=> Tue Feb 11 2014 11:30:30\n *\n * @example\n * // Convert the timestamp to date:\n * const result = toDate(1392098430000)\n * //=> Tue Feb 11 2014 11:30:30\n */\n\nexport default function toDate(argument) {\n  requiredArgs(1, arguments);\n  var argStr = Object.prototype.toString.call(argument); // Clone the date\n\n  if (argument instanceof Date || typeof argument === 'object' && argStr === '[object Date]') {\n    // Prevent the date to lose the milliseconds when passed to new Date() in IE10\n    return new Date(argument.getTime());\n  } else if (typeof argument === 'number' || argStr === '[object Number]') {\n    return new Date(argument);\n  } else {\n    if ((typeof argument === 'string' || argStr === '[object String]') && typeof console !== 'undefined') {\n      // eslint-disable-next-line no-console\n      console.warn(\"Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule\"); // eslint-disable-next-line no-console\n\n      console.warn(new Error().stack);\n    }\n\n    return new Date(NaN);\n  }\n}","import { isWithinInterval, parseISO, endOfDay, startOfDay } from 'date-fns';\nimport { MARKUPS_EVENTS } from './MarkupsEvents';\nimport { isSheetNameEqual } from './MarkupsCommon';\nimport * as MarkupsConstants from './MarkupsConstants';\n\nexport default class FilterManager {\n    constructor(markupsExtension, options) {\n        this.markupsExtension = markupsExtension;\n        this.options = options;\n        this.filters = this.markupsExtension.cache.filters || this.getInitialFilters();\n    }\n\n    getInitialFilters() {\n        return {\n            createdByFilter: [],\n            createdAtStartFilter: null,\n            createdAtEndFilter: null,\n            showPrivateFilter: true,\n            showPublishedFilter: true,\n            showArchivedFilter: false,\n            toggleMarkupViewFilter: true\n        };\n    }\n\n    updateFilters(filters) {\n        this.markupsExtension.cache.filters = this.filters = Object.assign({}, this.filters, filters);\n        this.markupsExtension.loadLayers();\n        this.markupsExtension.markupsManager.dispatchEvent({ type: MARKUPS_EVENTS.FILTER_CHANGED, filters: this.filters });\n    }\n\n    filterLayers(layerList, filterForPanel) {\n        if (!filterForPanel && this.filters.hideAllMarkups) {\n            return [];\n        }\n\n        return layerList.filter((layer) => {\n            return (\n                this.filterByVersion(layer) &&\n                this.filterBySheet(layer, filterForPanel && this.filters.toggleMarkupViewFilter) &&\n                this.filterByDate(layer) &&\n                this.filterPrivate(layer) &&\n                this.filterPublished(layer) &&\n                this.filterArchived(layer) &&\n                this.filterCreator(layer) &&\n                this.filterDeleted(layer)\n                );\n        });\n    }\n\n    isDateInRange(dateTime, fromData, toData) {\n        // Parse the date with a startOfDay/endOfDay, in order to ignore the exact hour of the creation.\n        const dateTimeISO = parseISO(dateTime);\n        const fromDate = startOfDay(fromData);\n        const toDate = endOfDay(toData);\n\n        return isWithinInterval(dateTimeISO, {start: fromDate, end: toDate});\n    }\n\n    filterByDate(layer) {\n        if (this.filters.createdAtStartFilter && this.filters.createdAtEndFilter) {\n            return this.isDateInRange(layer.metadata.created_at, this.filters.createdAtStartFilter, this.filters.createdAtEndFilter);\n        }\n\n        return true;\n    }\n\n    filterBySheet(layer, allSheets) {\n        if (allSheets || !this.options.hasMultiSheet) {\n            return true;\n        }\n\n        const sheetName = layer.metadata.markup_metadata && layer.metadata.markup_metadata.sheetName;\n\n        return (this.options.sheetName && sheetName) ? isSheetNameEqual(this.options.sheetName, sheetName) : true;\n    }\n    \n    filterDeleted(layer) {\n        return layer.status !== MarkupsConstants.MARKUP_STATUS_DELETE_SUCCEED;\n    }\n\n    filterPrivate(layer) {\n        return this.filters.showPrivateFilter || layer.metadata.status !== MarkupsConstants.MARKUP_STATUS_PRIVATE;\n    }\n\n    filterPublished(layer) {\n        return this.filters.showPublishedFilter || layer.metadata.status !== MarkupsConstants.MARKUP_STATUS_PUBLISHED;\n    }\n\n    filterArchived(layer) {\n        return this.filters.showArchivedFilter || layer.metadata.status !== MarkupsConstants.MARKUP_STATUS_ARCHIVED;\n    }\n\n    filterCreator(layer) {\n        if (!this.filters.createdByFilter || this.filters.createdByFilter.length === 0) {\n            return true;\n        }\n\n        return this.filters.createdByFilter.some((creator) => {\n            return layer.metadata.created_by === creator.value;\n        });\n    }\n\n    filterByVersion(layer) {\n        // Show only layers that were created on the current version or from previous versions.\n        // If i'm now watching V1 of a document, I shouldn't see markups that were created on V2 of that document.\n        const startVersion = layer.metadata.starting_version;\n        return this.options.documentVersion >= startVersion;\n    }\n\n    destroy() {\n        this.filters = null;\n        this.options = null;\n    }\n}\n","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name isWithinInterval\n * @category Interval Helpers\n * @summary Is the given date within the interval?\n *\n * @description\n * Is the given date within the interval? (Including start and end.)\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * - The function was renamed from `isWithinRange` to `isWithinInterval`.\n *   This change was made to mirror the use of the word \"interval\" in standard ISO 8601:2004 terminology:\n *\n *   ```\n *   2.1.3\n *   time interval\n *   part of the time axis limited by two instants\n *   ```\n *\n *   Also, this function now accepts an object with `start` and `end` properties\n *   instead of two arguments as an interval.\n *   This function now throws `RangeError` if the start of the interval is after its end\n *   or if any date in the interval is `Invalid Date`.\n *\n *   ```javascript\n *   // Before v2.0.0\n *\n *   isWithinRange(\n *     new Date(2014, 0, 3),\n *     new Date(2014, 0, 1), new Date(2014, 0, 7)\n *   )\n *\n *   // v2.0.0 onward\n *\n *   isWithinInterval(\n *     new Date(2014, 0, 3),\n *     { start: new Date(2014, 0, 1), end: new Date(2014, 0, 7) }\n *   )\n *   ```\n *\n * @param {Date|Number} date - the date to check\n * @param {Interval} interval - the interval to check\n * @returns {Boolean} the date is within the interval\n * @throws {TypeError} 2 arguments required\n * @throws {RangeError} The start of an interval cannot be after its end\n * @throws {RangeError} Date in interval cannot be `Invalid Date`\n *\n * @example\n * // For the date within the interval:\n * isWithinInterval(new Date(2014, 0, 3), {\n *   start: new Date(2014, 0, 1),\n *   end: new Date(2014, 0, 7)\n * })\n * //=> true\n *\n * @example\n * // For the date outside of the interval:\n * isWithinInterval(new Date(2014, 0, 10), {\n *   start: new Date(2014, 0, 1),\n *   end: new Date(2014, 0, 7)\n * })\n * //=> false\n *\n * @example\n * // For date equal to interval start:\n * isWithinInterval(date, { start, end: date }) // => true\n *\n * @example\n * // For date equal to interval end:\n * isWithinInterval(date, { start: date, end }) // => true\n */\n\nexport default function isWithinInterval(dirtyDate, dirtyInterval) {\n  requiredArgs(2, arguments);\n  var interval = dirtyInterval || {};\n  var time = toDate(dirtyDate).getTime();\n  var startTime = toDate(interval.start).getTime();\n  var endTime = toDate(interval.end).getTime(); // Throw an exception if start date is after end date or if any date is `Invalid Date`\n\n  if (!(startTime <= endTime)) {\n    throw new RangeError('Invalid interval');\n  }\n\n  return time >= startTime && time <= endTime;\n}","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name startOfDay\n * @category Day Helpers\n * @summary Return the start of a day for the given date.\n *\n * @description\n * Return the start of a day for the given date.\n * The result will be in the local timezone.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the original date\n * @returns {Date} the start of a day\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // The start of a day for 2 September 2014 11:55:00:\n * const result = startOfDay(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 02 2014 00:00:00\n */\n\nexport default function startOfDay(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  date.setHours(0, 0, 0, 0);\n  return date;\n}","import toDate from \"../toDate/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name endOfDay\n * @category Day Helpers\n * @summary Return the end of a day for the given date.\n *\n * @description\n * Return the end of a day for the given date.\n * The result will be in the local timezone.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the original date\n * @returns {Date} the end of a day\n * @throws {TypeError} 1 argument required\n *\n * @example\n * // The end of a day for 2 September 2014 11:55:00:\n * const result = endOfDay(new Date(2014, 8, 2, 11, 55, 0))\n * //=> Tue Sep 02 2014 23:59:59.999\n */\n\nexport default function endOfDay(dirtyDate) {\n  requiredArgs(1, arguments);\n  var date = toDate(dirtyDate);\n  date.setHours(23, 59, 59, 999);\n  return date;\n}","import * as MarkupsConstants from './MarkupsConstants';\n\nexport default class MarkupsPermissionManager {\n    constructor(options = {}) {\n        this.options = options;\n    }\n\n    canPublishMarkup(layerData) {\n        // Layer hasn't been saved yet.\n        if (!layerData || !layerData.guid) {\n            return false;\n        }\n\n        // Already published.\n        if (!layerData.metadata.status === MarkupsConstants.MARKUP_STATUS_PUBLISHED) {\n            return false;\n        }\n\n        return !(!this.options.userId ||\n            !layerData.metadata.permitted_statuses ||\n            layerData.metadata.permitted_statuses.indexOf(MarkupsConstants.MARKUP_STATUS_PUBLISHED) === -1);\n    }\n\n    canArchiveMarkup(layerData) {\n        // Layer hasn't been saved yet.\n        if (!layerData || !layerData.guid) {\n            return false;\n        }\n\n        // Already published.\n        if (!layerData.metadata.status === MarkupsConstants.MARKUP_STATUS_ARCHIVED) {\n            return false;\n        }\n\n        return !(!this.options.userId ||\n            !layerData.metadata.permitted_statuses ||\n            layerData.metadata.permitted_statuses.indexOf(MarkupsConstants.MARKUP_STATUS_ARCHIVED) === -1);\n    }\n\n    canEditMarkup(layerData) {\n        // During initial creation - allow editing.\n        if (!layerData) {\n            return true;\n        }\n\n        // Layer hasn't been saved yet.\n        if (!layerData.guid) {\n            return false;\n        }\n\n        const editableStatuses = [MarkupsConstants.MARKUP_STATUS_PRIVATE, MarkupsConstants.MARKUP_STATUS_PUBLISHED];\n\n        if (!this.options.userId || editableStatuses.indexOf(layerData.metadata.status) === -1) {\n            return false;\n        }\n\n        // Can't edit markup when viewing a previous document version\n        if (this.options.documentVersion < this.options.currentRawDocumentVersion) {\n            return false;\n        }\n\n        // Admin or creator can delete any markups\n        return (this.options.isAdmin || this.options.userId === layerData.metadata.created_by);\n    }\n\n    canDeleteMarkup(layerData) {\n        // Layer hasn't been saved yet.\n        if (!layerData || !layerData.guid) {\n            return false;\n        }\n\n        const deletableStatuses = [MarkupsConstants.MARKUP_STATUS_OPEN, MarkupsConstants.MARKUP_STATUS_PRIVATE];\n\n        if (!this.options.userId || deletableStatuses.indexOf(layerData.metadata.status) === -1) {\n            return false;\n        }\n\n        // Admin or creator can delete any markups\n        return (this.options.isAdmin || this.options.userId === layerData.metadata.created_by);\n    }\n\n    canEditMarkupAttachment(layerData, docAttachment) {\n        // Layer hasn't been saved yet.\n        if (!layerData || !layerData.guid) {\n            return false;\n        }\n\n        // Cannot edit any attachments of closed markup.\n        if (layerData.metadata.status === MarkupsConstants.MARKUP_STATUS_CLOSED || layerData.metadata.status === MarkupsConstants.MARKUP_STATUS_ARCHIVED) {\n            return false;\n        }\n\n        if (this.options.documentVersion !== this.options.currentRawDocumentVersion) {\n            return false;\n        }\n\n        if (!this.options.userId) {\n            // No userId, won't allow to edit a markup at all.\n            return false;\n        }\n\n        // Rule number 1, admin can edit any attachments.\n        if (this.options.isAdmin) {\n            return true;\n        }\n\n        // Rule number 2, only attachment author can edit the attachment.\n        return !docAttachment || (docAttachment && this.options.userId === docAttachment.attributes.created_by);\n    }\n\n    canCreateMarkup() {\n        if (this.options.documentVersion !== this.options.currentRawDocumentVersion) {\n            return false;\n        }\n\n        return true;\n    }\n\n    destroy() {\n        this.options = null;\n    }\n}\n","import LodashUtils from './Utils/LodashUtils';\nimport ActionManager from './Utils/ActionManager/ActionManager';\nimport { MARKUPS_EVENTS } from './MarkupsEvents';\nimport * as MarkupsConstants from './MarkupsConstants';\n\nconst av = Autodesk.Viewing;\nconst _window = av.getGlobal();\n\nexport default class MarkupMobileCallbacks {\n    constructor(markupsExtension) {\n        this.markupsExtension = markupsExtension;\n        this.registerEventListeners();\n    }\n\n    static send(callbackName, dataObj) {\n        const iosBridge = _window.webkit && _window.webkit.messageHandlers.callbackHandler;\n\n        const iosSend = iosBridge ? (messageName, data) => {\n            iosBridge.postMessage({ command: messageName, data });\n        } : null;\n\n        const androidSend = _window.JSINTERFACE;\n\n        const dataAsString = typeof dataObj === 'object' ? JSON.stringify(dataObj) : dataObj;\n\n        if (iosSend) {\n            if (dataAsString !== undefined) {\n                iosSend(callbackName, dataAsString);\n            } else {\n                iosSend(callbackName);\n            }\n        } else if (androidSend) {\n            if (androidSend[callbackName]) {\n                if (dataAsString !== undefined) {\n                    androidSend[callbackName](dataAsString);\n                } else {\n                    androidSend[callbackName]();\n                }\n            }\n        }\n    }\n\n    static correctPixelRatio(boundingBox) {\n        // iOS gets their coordinates in points, while Android in pixels.\n        // Android need to fix the result according to devicePixelRatio.\n        if (Autodesk.Viewing.isAndroidDevice()) {\n            boundingBox.min.multiplyScalar(window.devicePixelRatio);\n            boundingBox.max.multiplyScalar(window.devicePixelRatio);\n        }\n\n        return boundingBox;\n    }\n\n    registerEventListeners() {\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LAYER_DESELECTED, this.onLayerDeselected);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_DESELECTED, this.onMarkupDeselected);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LAYER_SELECTED_FROM_DIFFERENT_SHEET, this.onLayerSelectedDifferentSheet);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LAYER_EDITED_FROM_DIFFERENT_SHEET, this.onLayerEditDifferentSheet);\n\n        this.markupsExtension.markupsManager.addEventListener(ActionManager.HISTORY_CHANGED_EVENT, this.onHistoryChanged);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_SESSION_START, this.onMarkupSessionStart);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_SESSION_END, this.onMarkupSessionEnd);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_DRAWING_START, this.onMarkupDrawingStart);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_DRAWING_END, this.onMarkupDrawingEnd);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_DRAWING_CANCEL, this.onMarkupDrawingCancel);\n\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LINK_SELECTED, this.onLinkSelected);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LINK_DESELECTED, this.onLinkDeselected);\n\n        this.onLayerReadyToSaveChangedBinded = this.onLayerReadyToSaveChanged.bind(this);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LAYER_READY_TO_SAVE, this.onLayerReadyToSaveChangedBinded);\n\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_VIEW_ENTERED, this.onMarkupViewEntered);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_VIEW_EXITED, this.onMarkupViewExited);\n\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.TEXT_EDITING_STARTED, this.onTextEditingStarted);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.TEXT_EDITING_ENDED, this.onTextEditingEnded);\n\n        // Contextual menu\n        this.updateContextualMenuBinded = this.updateContextualMenu.bind(this);\n        this.hideContextualMenuBinded = this.hideContextualMenu.bind(this);\n\n        this.updateContextualMenuDebouncedShort = LodashUtils.debounce(this.updateContextualMenuBinded, 10);\n        this.updateContextualMenuDebouncedLong = LodashUtils.debounce(this.updateContextualMenuBinded, 200);\n\n        this.markupsExtension.markupsManager.addEventListener(ActionManager.HISTORY_CHANGED_EVENT, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_SELECTED, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LAYER_DIRTY, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LAYER_SYNCED, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LAYER_SELECTED, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_EDIT_END, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_TOOL_ENABLED_CHANGED, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.LAYER_DESELECTED, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_DESELECTED, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_EDIT_START, this.hideContextualMenuBinded);\n\n        this.markupsExtension.viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.updateContextualMenuDebouncedLong);\n    }\n\n    unregisterEventListeners() {\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LAYER_DESELECTED, this.onLayerDeselected);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_DESELECTED, this.onMarkupDeselected);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LAYER_SELECTED_FROM_DIFFERENT_SHEET, this.onLayerSelectedDifferentSheet);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LAYER_EDITED_FROM_DIFFERENT_SHEET, this.onLayerEditDifferentSheet);\n        \n        this.markupsExtension.markupsManager.removeEventListener(ActionManager.HISTORY_CHANGED_EVENT, this.onHistoryChanged);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_SESSION_START, this.onMarkupSessionStart);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_SESSION_END, this.onMarkupSessionEnd);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_DRAWING_START, this.onMarkupDrawingStart);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_DRAWING_END, this.onMarkupDrawingEnd);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_DRAWING_CANCEL, this.onMarkupDrawingCancel);\n\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LINK_SELECTED, this.onLinkSelected);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LINK_DESELECTED, this.onLinkDeselected);\n\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LAYER_READY_TO_SAVE, this.onLayerReadyToSaveChangedBinded);\n\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_VIEW_ENTERED, this.onMarkupViewEntered);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_VIEW_EXITED, this.onMarkupViewExited);\n\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.TEXT_EDITING_STARTED, this.onTextEditingStarted);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.TEXT_EDITING_ENDED, this.onTextEditingEnded);\n\n        this.markupsExtension.markupsManager.removeEventListener(ActionManager.HISTORY_CHANGED_EVENT, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_SELECTED, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LAYER_DIRTY, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LAYER_SYNCED, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LAYER_SELECTED, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_EDIT_END, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_TOOL_ENABLED_CHANGED, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.LAYER_DESELECTED, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_DESELECTED, this.updateContextualMenuDebouncedShort);\n        this.markupsExtension.markupsManager.removeEventListener(MARKUPS_EVENTS.MARKUP_EDIT_START, this.hideContextualMenuBinded);\n\n        this.markupsExtension.viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.updateContextualMenuDebouncedLong);\n        \n        this.updateContextualMenuDebouncedShort.cancel();\n        this.updateContextualMenuDebouncedLong.cancel();\n    }\n\n    // Callbacks //\n\n    markupToolLoaded() {\n        MarkupMobileCallbacks.send('onMarkupToolLoaded');\n    }\n\n    onMarkupSessionStart() {\n        MarkupMobileCallbacks.send('onMarkupSessionStart');\n    }\n\n    onMarkupSessionEnd() {\n        MarkupMobileCallbacks.send('onMarkupSessionEnd');\n    }\n\n    onMarkupDrawingStart({ markup }) {\n        MarkupMobileCallbacks.send('onMarkupDrawingStart', markup.type);\n    }\n\n    onMarkupDrawingEnd({ markup }) {\n        MarkupMobileCallbacks.send('onMarkupDrawingEnd', markup.type);\n    }\n\n    onMarkupDrawingCancel({ markup }) {\n        MarkupMobileCallbacks.send('onMarkupDrawingCancel', markup.type);\n    }\n\n    onLayerSelectedDifferentSheet({ layerGuid }) {\n        MarkupMobileCallbacks.send('onLayerSelectedDifferentSheet', layerGuid);\n    }\n\n    onLayerEditDifferentSheet({ layerGuid }) {\n        MarkupMobileCallbacks.send('onLayerEditDifferentSheet', layerGuid);\n    }\n\n    onLayerSelected({ layer }) {\n        const guid = layer.getGuid();\n\n        if (guid) {\n            const dataObj = {\n                guid,\n                boundingBox: MarkupMobileCallbacks.correctPixelRatio(layer.getClientBoundingBox(true))\n            };\n\n            MarkupMobileCallbacks.send('onLayerSelected', dataObj);\n        }\n    }\n\n    onLayerDeselected({ layer }) {\n        const guid = layer.getGuid();\n\n        if (guid) {\n            MarkupMobileCallbacks.send('onLayerDeselected', guid);\n        }\n    }\n\n    onMarkupSelected({ markup }) {\n        const dataObj = {\n            id: markup.id,\n            layerGuid: (markup.layer && markup.layer.getGuid()) || '', // Needed for Android ugly fix.\n            type: markup.type,\n            style: markup.editState.style,\n            boundingBox: MarkupMobileCallbacks.correctPixelRatio(markup.getClientBoundingBox(true, true))\n        };\n\n        MarkupMobileCallbacks.send('onMarkupSelected', dataObj);\n    }\n\n    onMarkupDeselected({ markup }) {\n        MarkupMobileCallbacks.send('onMarkupDeselected', markup.id);\n    }\n\n    onHistoryChanged({ hasUndo, hasRedo }) {\n        const dataObj = {\n            enableUndo: hasUndo,\n            enableRedo: hasRedo\n        };\n\n        MarkupMobileCallbacks.send('onMarkupHistoryChanged', dataObj);\n    }\n\n    onLayerReadyToSaveChanged({ readyToSave }) {\n        MarkupMobileCallbacks.send('onLayerReadyToSaveChanged', readyToSave);\n    }\n\n    postLayer(metadata, resources, requestId) {\n        const dataObj = {\n            metadata,\n            resources: {\n                [MarkupsConstants.MARKUP_RESOURCE_TYPE_SVG]: resources[0],\n                [MarkupsConstants.MARKUP_RESOURCE_TYPE_SCREEN_CAPTURE]: resources[1],\n            },\n            requestId\n        };\n\n        MarkupMobileCallbacks.send('onPostLayer', dataObj);\n    }\n\n    updateLayer(originalGuid, metadata, resources, requestId) {\n        const dataObj = {\n            originalGuid,\n            metadata,\n            resources: {\n                [MarkupsConstants.MARKUP_RESOURCE_TYPE_SVG]: resources[0],\n                [MarkupsConstants.MARKUP_RESOURCE_TYPE_SCREEN_CAPTURE]: resources[1],\n            },\n            requestId\n        };\n\n        MarkupMobileCallbacks.send('onUpdateLayer', dataObj);\n    }\n\n    deleteLayer(guid, requestId) {\n        const dataObj = {\n            guid,\n            requestId\n        };\n\n        MarkupMobileCallbacks.send('onDeleteLayer', dataObj);\n    }\n\n    publishLayer(guid, requestId) {\n        const dataObj = {\n            guid,\n            requestId\n        };\n\n        MarkupMobileCallbacks.send('onPublishLayer', dataObj);\n    }\n\n    archiveLayer(guid, closeVersion, requestId) {\n        const dataObj = {\n            guid,\n            closeVersion,\n            requestId\n        };\n\n        MarkupMobileCallbacks.send('onArchiveLayer', dataObj);\n    }\n\n    onLinkSelected({ link }) {\n        const dataObj = {\n            type: link.type,\n            layerGuid: link.layer.layerData.guid,\n            boundingBox: link.getClientBoundingBox()\n        };\n\n        MarkupMobileCallbacks.send('onLinkSelected', dataObj);\n    }\n\n    onLinkDeselected({ link }) {\n        const dataObj = {\n            type: link.type,\n            layerGuid: link.layer.layerData.guid\n        };\n\n        MarkupMobileCallbacks.send('onLinkDeselected', dataObj);\n    }\n\n    // Used to update contextual menu position.\n    updateContextualMenu() {\n        const duringCreation = this.markupsExtension.markupsManager.getDuringCreationMarkup();\n\n        if (!duringCreation) {\n            const markup = this.markupsExtension.markupsManager.getSelectedMarkups()[0];\n\n            if (markup) {\n                this.onMarkupSelected({ markup });\n                return;\n            } else if (!this.markupsExtension.markupsManager.isMarkupSessionOpen()) {\n                const layer = this.markupsExtension.markupsManager.getSelectedLayer();\n\n                if (layer) {\n                    this.onLayerSelected({ layer });\n                    return;\n                }\n            }\n        }\n\n        this.hideContextualMenu();\n    }\n\n    hideContextualMenu() {\n        MarkupMobileCallbacks.send('onHideContextualMenu');\n    }\n\n    onMarkupViewExited() {\n        MarkupMobileCallbacks.send('onMarkupViewExited');\n    }\n\n    onMarkupViewEntered() {\n        MarkupMobileCallbacks.send('onMarkupViewEntered');\n    }\n\n    onTextEditingStarted() {\n        MarkupMobileCallbacks.send('onTextEditingStarted');\n    }\n\n    onTextEditingEnded() {\n        MarkupMobileCallbacks.send('onTextEditingEnded');\n    }\n\n    destroy() {\n        this.unregisterEventListeners();\n\n        this.iosSend = null;\n        this.androidSend = null;\n        this.send = null;\n    }\n}\n","export default class CacheObject {\n    constructor() {\n        this.cache = {};\n        this.currentUrn = 'default';\n    }\n    \n    setCurrentUrn(urn) {\n        this.currentUrn = urn;\n        this.cache[urn] = this.cache[urn] || {};\n    }\n\n    add(id, item, urn = this.currentUrn) {\n        this.cache[urn][id] = item;\n    }\n\n    remove(id, urn = this.currentUrn) {\n        delete this.cache[urn][id];\n    }\n\n    get(id, urn = this.currentUrn) {\n        return this.cache[urn][id];\n    }\n\n    getAsList(urn = this.currentUrn) {\n        const list = [];\n\n        Object.keys(this.cache[urn]).forEach((key) => {\n            list.push(this.cache[urn][key]);\n        });\n\n        return list;\n    }\n\n    getCache(urn = this.currentUrn) {\n        return this.cache[urn];\n    }\n\n    cleanCache(urn = this.currentUrn) {\n        Object.keys(this.cache[urn]).forEach((key) => {\n            this.remove(key);\n        });\n    }\n\n    length(urn = this.currentUrn) {\n        return Object.keys(this.cache[urn]).length;\n    }\n\n    isEmpty(urn = this.currentUrn) {\n        return this.length(urn) === 0;\n    }\n}\n","export default class MarkupServiceBase {\n    constructor(markupsExtension, options) {\n        this.markupsExtension = markupsExtension;\n        this.options = options || {};\n    }\n\n    async postLayer(metadata, additionalHeaders) {\n        console.log('postLayer');\n\n        return new Promise((resolve, reject) => {\n        });\n    }\n\n    publishLayer(markupId) {\n        console.log('publishLayer');\n\n        return new Promise((resolve, reject) => {\n        });\n    }\n\n    archiveLayer(markupId, closeVersion) {\n        console.log('archiveLayer');\n\n        return new Promise((resolve, reject) => {\n        });\n    }\n\n    updateLayer(guid, metadata, additionalHeaders = []) {\n        console.log('updateLayer');\n\n        return new Promise((resolve, reject) => {\n        });\n    }\n\n    deleteLayer(layerId) {\n        console.log('deleteLayer');\n\n        return new Promise((resolve, reject) => {\n        });\n    }\n\n    postDocumentAttachment(docAttachment, additionalHeaders) {\n        console.log('postDocumentAttachment');\n\n        return new Promise((resolve, reject) => {\n        });\n    }\n\n    deleteDocumentAttachment(docAttachmentId) {\n        console.log('deleteDocumentAttachment');\n\n        return new Promise((resolve, reject) => {\n        });\n    }\n\n    renameDocumentAttachment(docAttachmentId, newName) {\n        console.log('renameDocumentAttachment');\n\n        return new Promise((resolve, reject) => {\n        });\n    }\n\n    requestMarkups(pageLimit, offset, additionalHeaders, statuses) {\n        console.log('requestMarkups');\n\n        return new Promise((resolve, reject) => {\n        });\n    }\n\n    getAttachment(urn, isBinaryData, additionalHeaders) {\n        console.log('getAttachment');\n\n        return new Promise((resolve, reject) => {\n        });\n    }\n\n    cancelRequests() {\n        console.log('cancelRequests');\n    }\n}\n","import * as MarkupsConstants from '../MarkupsConstants';\nimport MarkupServiceBase from './MarkupsServiceBase';\nconst throttle = require(\"lodash/throttle\");\n\nconst NumberOfRetries = 5;\nconst RetryDelay = 500; // ms\nconst MaxRequestInBatch = 25; // According to https://wiki.autodesk.com/display/FDPA/API+Endpoints#APIEndpoints-BatchGetDownloadURLs\nconst BatchRequestThrottleDuration = 30; // ms\n\nexport default class MarkupServiceWeb extends MarkupServiceBase {\n    constructor(markupsExtension, options) {\n        super(markupsExtension, options);\n\n        // Which type to use: markups or issues\n        const type = 'markup';\n        this.issueType = this.ISSUES_TYPE[type];\n        // End Points\n        var config = this.ENV_TABLE[options.env] || this.ENV_TABLE['Development'];\n        this.ISSUE_SERVICE_URL = config.ISSUE_SERVICE;\n        this.OBJECT_STORAGE_SERVICE_URL = config.OBJECT_STORAGE;\n\n        // Additional properties related to issue service JSON API call.\n        // ??? consider to leverage an existing JSON API JS client\n        // ??? to manage all calls, but right now do straightforward RESTful handling.\n        this.maxPageLimit = 200; // Now, issue service can return 200 items at once.\n\n        // Record all ongoing request, then can cancel them if no longer needed.\n        this.xhrReq = [];\n\n        this.signedS3Requests = {};\n\n        this.headers = [\n            {\n                name: 'x-ads-acm-namespace',\n                value: this.options.acmNamespace\n            },\n            {\n                name: 'x-ads-acm-check-groups',\n                value: 'true'\n            }\n        ];\n\n        if (this.options.acmScopes) {\n            this.headers.push({\n                name: 'x-ads-acm-scopes',\n                value: this.options.acmScopes\n            });\n        }\n\n        this.flushSignedS3DownloadRequestsThrottled = throttle(() => {\n            this.flushSignedS3DownloadRequests();\n        }, BatchRequestThrottleDuration);\n    }\n\n    get ENV_TABLE() {\n        return {\n            Local: {\n                ISSUE_SERVICE: 'https://developer-dev.api.autodesk.com/issues-dev/v1/',\n                OBJECT_STORAGE: 'https://developer-dev.api.autodesk.com/oss/v2/'\n            },\n            Development: {\n                ISSUE_SERVICE: 'https://developer-stg.api.autodesk.com/issues-dev/v1/',\n                OBJECT_STORAGE: 'https://developer-stg.api.autodesk.com/oss/v2/'\n            },\n            Qa: {\n                ISSUE_SERVICE: 'https://developer-stg.api.autodesk.com/issues-qa/v1/',\n                OBJECT_STORAGE: 'https://developer-stg.api.autodesk.com/oss/v2/'\n            },\n            Staging: {\n                ISSUE_SERVICE: 'https://developer-stg.api.autodesk.com/issues-stg/v1/',\n                OBJECT_STORAGE: 'https://developer-stg.api.autodesk.com/oss/v2/'\n            },\n            Production: {\n                ISSUE_SERVICE: 'https://developer.api.autodesk.com/issues/v1/',\n                OBJECT_STORAGE: 'https://developer.api.autodesk.com/oss/v2/'\n            }\n        };\n    }\n\n\n    get ISSUES_TYPE() {\n        return {\n            issue: {\n                value: 'issues',\n                endpoint: '/issues'\n            },\n\n            markup: {\n                value: 'markups',\n                endpoint: '/markups'\n            },\n\n            area_markup: {\n                value: 'areas',\n                endpoint: '/areas'\n            },\n\n            area_status: {\n                value: 'area_statuses',\n                endpoint: '/area-statuses'\n            }\n        };\n    }\n\n    // This is the endpoint to get generic attachment for either a makrup\n    // or an issue.\n    // Note: this attachment is used for user explicitly attach any documents\n    // to a markup/issue. There is another concept of 'attachment' inside of\n    // markup which is part of markup data.\n    // So, I will refer to this attachment as DocumentAttachment to eliminate\n    // any misread.\n    get ATTACHMENT() {\n        return {\n            value: 'attachments',\n            endpoint: '/attachments'\n        };\n    }\n\n\n    /**\n     * This is a dummy check that the must have value is set\n     * so that service is ready to call\n    */\n    checkValidation() {\n        var token = this.getAccessToken();\n        this.valid = !!token && !!this.options.issueProject && !!this.issueType;\n\n        return this.valid;\n    }\n\n    // Wait \"duration\" ms and then resolve.\n    wait(duration) {\n        return new Promise(resolve => {\n            setTimeout(resolve, duration);\n        });\n    }\n\n    // Given a direct OSS URL, returns a signedURL for  upload.\n    // https://wiki.autodesk.com/display/FDPA/API+Endpoints#APIEndpoints-GetUploadURL/s\n    //\n    // url - original OSS url\n    getSignedS3UploadUrl(url) {\n        return new Promise((resolve, reject) => {\n            url += \"/signeds3upload\";\n\n            const callbacks = this.getAjaxCallback(resolve, reject, true);\n            const xhr = this.createRequest('GET', url, 'application/vnd.api+json', callbacks, false, false);\n            xhr.responseType = 'json';\n            this.injectHeaders(xhr, this.headers);\n            xhr.send();\n        });\n    }\n\n    // Instead of triggering an HTTP request for each objectKey individually, we aggregate the requests\n    // into a single batch request. The max number of objectKeys per batch request is 25 (MaxRequestInBatch):\n    // https://wiki.autodesk.com/display/FDPA/API+Endpoints#APIEndpoints-BatchGetDownloadURLs\n    getSignedS3DownloadUrl(bucketId, objectKey) {\n        return new Promise((resolve, reject) => {\n            if (!this.signedS3Requests[bucketId]) {\n                this.signedS3Requests[bucketId] = {};\n            }\n\n            this.signedS3Requests[bucketId][objectKey] = { resolve, reject };\n\n            if (Object.keys(this.signedS3Requests[bucketId]).length === MaxRequestInBatch) {\n                this.flushSignedS3DownloadRequests();\n            } else {\n                this.flushSignedS3DownloadRequestsThrottled();\n            }\n        });\n    }\n\n    flushSignedS3DownloadRequests() {\n        Object.keys(this.signedS3Requests).forEach(bucketId => {\n            const url = `${this.OBJECT_STORAGE_SERVICE_URL}buckets/${bucketId}/objects/batchsigneds3download?useCdn=true`;\n\n            const bucketIdRequests = this.signedS3Requests[bucketId];\n\n            const callbacks = {\n                onLoad: (event) => {\n                    const response = event.currentTarget.response;\n\n                    if (event.currentTarget.status === 200) {\n                        Object.keys(response.results).forEach(objectKey => {\n                            const res = response.results[objectKey];\n\n                            if (res.status === 'complete') {\n                                bucketIdRequests[objectKey].resolve(res.url);\n                            } else {\n                                // The specific objectKey has an error - reject it.\n                                bucketIdRequests[objectKey].reject(res);\n                            }\n                        });\n                    } else {\n                        // In case of any status other than 200 for this batch request, it means that the entire request is illegible or problematic.\n                        // In that case, we'll reject all of the sub requests.\n                        // https://wiki.autodesk.com/display/FDPA/API+Endpoints#APIEndpoints-BatchGetDownloadURLs\n                        Object.keys(response.results).forEach(objectKey => {\n                            bucketIdRequests[objectKey].reject(event);\n                        });\n                    }\n                },\n            };\n\n            const xhr = this.createRequest('POST', url, 'application/json', callbacks, false, true);\n            xhr.responseType = 'json';\n            this.injectHeaders(xhr, this.headers);\n\n            const body = { requests: Object.keys(bucketIdRequests).map(objectKey => { return { objectKey }; }) };\n            const bodyString = JSON.stringify(body);\n\n            xhr.send(bodyString);\n        });\n\n        // Remove sent requests from the queue.\n        this.signedS3Requests = {};\n    }\n\n    // When an upload to OSS is done, we must call the completeUpload API - otherwise, it won't be visible.\n    // https://wiki.autodesk.com/display/FDPA/API+Endpoints#APIEndpoints-CompleteUpload\n    completeUpload(url, uploadKey, resolve, reject) {\n        url += \"/signeds3upload\";\n\n        const callbacks = this.getAjaxCallback(resolve, reject, true);\n        const xhr = this.createRequest('POST', url, 'application/json', callbacks, false, false);\n        xhr.responseType = 'json';\n        this.injectHeaders(xhr, this.headers);\n        xhr.send(JSON.stringify({ uploadKey }));\n    }\n\n    // // Helper function for retrying requests.\n    async sendWithRetry(func, args) {\n        for (let i = 0; i < NumberOfRetries; i++) {\n            try {\n                const result = await func.apply(this, args);\n                return result;\n            } catch (e) {\n                console.error(e);\n\n                if (NumberOfRetries === i + 1) {\n                    throw e;\n                } else {\n                    console.warn('Request failed - Retrying...');\n                    await this.wait(RetryDelay);\n                }\n            }\n        }\n    }\n\n    /**\n     *\n     *\n     * @param {Array} [additionalHeaders] - Additional headers with items {name:String, value:String}\n     * @returns {Promise}\n     */\n    _requestMarkups(pageLimit, offset, additionalHeaders, statuses) {\n        if (!this.checkValidation()) {\n            return Promise.reject('Service is unavailable.');\n        }\n\n        if (!pageLimit) {\n            pageLimit = this.maxPageLimit;\n        }\n        if (!offset) {\n            offset = 0;\n        }\n\n        return new Promise((resolve, reject) => {\n            if (!this.options.documentUrn) {\n                return reject();\n            }\n\n            // Add page limit and offset query parameters for JSON API usage.\n            var url = [this.ISSUE_SERVICE_URL, 'containers/', this.options.issueProject, this.issueType.endpoint].join('');\n            url = [url, '?page[limit]=' + pageLimit + '&page[offset]=' + offset].join('');\n\n            if (this.options.documentUrn) {\n                // If specify document urn, then request issues filtered by this urn.\n                var doc = encodeURIComponent(this.options.documentUrn);\n                url = [url, '&filter[target_urn]=', doc].join('');\n            }\n\n            url = [url, '&include=attachments'].join('');\n\n            if (statuses) {\n                url = [url, '&filter[status]=', statuses].join('');\n            }\n\n            // Sort the results by its created time in descent order\n            // TODO: as the request goes more complex, need to consider to\n            // refactor this to use a JSON API library to better manage\n            // different request paramters.\n            url = [url, '&sort=-created_at'].join('');\n\n            var callbacks = this.getAjaxCallback(resolve, reject);\n\n            var xhr = this.createRequest('GET', url, 'application/vnd.api+json', callbacks, false, true);\n            this.injectHeaders(xhr, additionalHeaders);\n            xhr.send();\n        });\n    }\n\n    requestMarkups(...args) {\n        return this.sendWithRetry(this._requestMarkups, args);\n    }\n\n    /**\n     *\n     *\n     * @param {Object}\n     * @param {Array} [additionalHeaders] - Additional headers with items {name:String, value:String}\n     * @returns {Promise}\n     */\n    postMarkups(metadata, additionalHeaders) {\n        if (!this.checkValidation()) {\n            return Promise.reject('Service is unavailable.');\n        }\n\n        return new Promise((resolve, reject) => {\n            var url = [this.ISSUE_SERVICE_URL, 'containers/', this.options.issueProject, this.issueType.endpoint].join('');\n            var callbacks = this.getAjaxCallback(resolve, reject);\n            var xhr = this.createRequest('POST', url, 'application/vnd.api+json', callbacks, false, false);\n\n            this.injectHeaders(xhr, additionalHeaders);\n\n            var body = {\n                data: {\n                    type: this.issueType.value,\n                    attributes: metadata\n                }\n            };\n\n            xhr.send(JSON.stringify(body));\n        }).then(this.parseResponse);\n    }\n\n    fetchOSSBucketForAttachment(attachment) {\n        return new Promise((resolve, reject) => {\n            this.fetchLocationForNewOssAttachment([], {\n                onLoad: (event) => {\n                    var xhr = event.currentTarget;\n                    if (xhr.status === 201 || xhr.status === 200) {\n                        // interprete  response and pare oss bucket and key\n                        // Then fill in attachment.ossPath\n                        var bucketData = JSON.parse(xhr.responseText);\n                        attachment.ossPath = bucketData.data.attributes.urn;\n                        resolve();\n                    } else {\n                        reject('Failed fetching OSS Bucket');\n                    }\n                },\n                onError: reject,\n                onTimeout: reject,\n            });\n        });\n    }\n\n    uploadAttachment(attachment) {\n        // At this point, oss bucket and key should all be fetched.\n        var bucketData = this.extractOssBucketAndId(attachment.ossPath);\n        var bucketId = bucketData[0];\n        var bucketKey = bucketData[1];\n\n        return this.postAttachment(bucketKey, attachment.data, bucketId);\n\n    }\n\n    async _postLayer(metadata, markupResources, originalMarkupGuid) {\n        // Post markup steps,\n        // 1. Fetch OSS bucket location.\n        // 2. Upload attachment to the OSS bucket.\n        // 3. Post markup object.\n\n        var fetchOSSBucketForAttachments = () => {\n            if (markupResources.length === 0) {\n                return Promise.resolve();\n            }\n\n            // This is an array of promise\n            var pa = markupResources.map((attachment) => {\n                return this.fetchOSSBucketForAttachment(attachment);\n            });\n\n            return Promise.all(pa);\n        };\n\n        var uploadAttachments = () => {\n            if (markupResources.length === 0) {\n                return Promise.resolve();\n            }\n\n            var pa = markupResources.map((attachment) => {\n                return this.uploadAttachment(attachment);\n            });\n\n            return Promise.all(pa);\n        };\n\n        var postMarkup = () => {\n            markupResources.forEach((attachment) => {\n                metadata.resource_urns[attachment.type] = attachment.ossPath;\n            });\n\n            if (originalMarkupGuid) {\n                return this.updateLayer(originalMarkupGuid, metadata);\n            }\n\n            return this.postMarkups(metadata, []);\n        };\n\n        await fetchOSSBucketForAttachments();\n        await uploadAttachments();\n        const result = await postMarkup();\n        return result;\n    }\n\n    postLayer(...args) {\n        return this.sendWithRetry(this._postLayer, args);\n    }\n\n    parseResponse(result) {\n        try {\n            const attachObj = JSON.parse(result);\n            const attachData = attachObj.data;\n\n            return Promise.resolve(attachData);\n        } catch (e) {\n            return Promise.reject(e);\n        }\n    }\n\n    _publishLayer(markupId) {\n        if (!this.checkValidation()) {\n            return Promise.reject('Service is unavailable.');\n        }\n\n        return new Promise((resolve, reject) => {\n            var url = [this.ISSUE_SERVICE_URL, 'containers/', this.options.issueProject, this.issueType.endpoint, '/', markupId].join('');\n            var callbacks = this.getAjaxCallback(resolve, reject);\n            var xhr = this.createRequest('PATCH', url, 'application/vnd.api+json', callbacks, false, false);\n\n            var body = {\n                data: {\n                    type: this.issueType.value,\n                    id: markupId,\n                    attributes: {\n                        status: MarkupsConstants.MARKUP_STATUS_PUBLISHED\n                    }\n                }\n            };\n\n            xhr.send(JSON.stringify(body));\n        }).then(this.parseResponse);\n    }\n\n    publishLayer(...args) {\n        return this.sendWithRetry(this._publishLayer, args);\n    }\n\n    _archiveLayer(markupId, closeVersion) {\n        if (!this.checkValidation()) {\n            return Promise.reject('Service is unavailable.');\n        }\n\n        return new Promise((resolve, reject) => {\n            var url = [this.ISSUE_SERVICE_URL, 'containers/', this.options.issueProject, this.issueType.endpoint, '/', markupId].join('');\n            var callbacks = this.getAjaxCallback(resolve, reject);\n            var xhr = this.createRequest('PATCH', url, 'application/vnd.api+json', callbacks, false, false);\n\n            var body = {\n                data: {\n                    type: this.issueType.value,\n                    id: markupId,\n                    attributes: {\n                        close_version: closeVersion,\n                        status: MarkupsConstants.MARKUP_STATUS_ARCHIVED\n                    }\n                }\n            };\n\n            xhr.send(JSON.stringify(body));\n        }).then(this.parseResponse);\n    }\n\n    archiveLayer(...args) {\n        return this.sendWithRetry(this._archiveLayer, args);\n    }\n\n    fetchLocationForNewOssAttachment(additionalHeaders, callbacks) {\n        if (!this.checkValidation()) {\n            return Promise.reject('Service is unavailable.');\n        }\n\n        var url = [this.ISSUE_SERVICE_URL, 'containers/', this.options.issueProject, '/oss_objects'].join('');\n        var xhr = this.createRequest('POST', url, 'application/vnd.api+json', callbacks, false, false);\n        this.injectHeaders(xhr, additionalHeaders);\n\n        var body = {\n            data: {\n                type: 'oss_objects'\n            }\n        };\n\n        xhr.send(JSON.stringify(body));\n\n        return null;\n    }\n\n    async _getAttachment(urn, isBinaryData) {\n        if (!this.checkValidation()) {\n            return Promise.reject('Service is unavailable.');\n        }\n        const dataParts = this.extractOssBucketAndId(urn);\n\n        let url;\n        let isSigned = false;\n\n        try {\n            url = await this.getSignedS3DownloadUrl(dataParts[0], dataParts[1]);\n            isSigned = true;\n        } catch (e) {\n            // In case that we couldn't get the signed URL for some reason, try to use the original URL.\n            // If it's under 10MB it should work - so we got lucky.\n            console.warn(\"Fallback to direct OSS download.\", e);\n            url = [this.OBJECT_STORAGE_SERVICE_URL, 'buckets/', dataParts[0], '/objects/', dataParts[1]].join('');\n        }\n\n        return new Promise((resolve, reject) => {\n            const callbacks = this.getAjaxCallback(resolve, reject, isBinaryData);\n\n            const xhr = this.createRequest('GET', url, null, callbacks, isSigned, true);\n\n            if (isBinaryData) {\n                xhr.responseType = 'arraybuffer';\n            }\n\n            this.injectHeaders(xhr, this.headers);\n\n            xhr.send();\n        });\n    }\n\n    getAttachment(...args) {\n        return this.sendWithRetry(this._getAttachment, args);\n    }\n\n    async postAttachment(objectKey, fileData, bucketId) {\n        if (!this.checkValidation()) {\n            return Promise.reject('Service is unavailable.');\n        }\n\n        const originalUrl = [this.OBJECT_STORAGE_SERVICE_URL, 'buckets/', bucketId, '/objects/', objectKey].join('');\n        let url = originalUrl;\n        let uploadKey;\n        let isSigned = false;\n\n        try {\n            const res = await this.getSignedS3UploadUrl(url);\n            url = res.urls[0];\n            uploadKey = res.uploadKey;\n            isSigned = true;\n        } catch (e) {\n            // In case that we couldn't get the signed URL for some reason, try to use the original URL.\n            // If it's under 10MB it should work - so we got lucky.\n            console.warn(\"Fallback to direct OSS upload.\", e);\n        }\n\n        return new Promise((resolve, reject) => {\n            const callbacks = {\n                onLoad: (event) => {\n                    // Upload attachment successfully.\n                    const xhr = event.currentTarget;\n                    if (xhr.status === 200 || xhr.status === 201) {\n                        if (isSigned) {\n                            this.completeUpload(originalUrl, uploadKey, resolve, reject);\n                        } else {\n                            resolve();\n                        }\n\n                    } else {\n                        reject('Failed uploading attachment');\n                    }\n                },\n                onError: reject,\n                onTimeout: reject,\n            };\n\n            const xhr = this.createRequest('PUT', url, 'text/plain', callbacks, isSigned, false);\n\n            this.injectHeaders(xhr, this.headers);\n            xhr.send(fileData);\n\n        });\n    }\n\n    updateLayer(markupId, updateMarkupAttrs, additionalHeaders = []) {\n        if (!this.checkValidation()) {\n            return Promise.reject('Service is unavailable.');\n        }\n\n        return new Promise((resolve, reject) => {\n            var url = [this.ISSUE_SERVICE_URL, 'containers/', this.options.issueProject, this.issueType.endpoint, '/', markupId].join('');\n            var callbacks = this.getAjaxCallback(resolve, reject);\n\n            var xhr = this.createRequest('PATCH', url, 'application/vnd.api+json', callbacks, false, false);\n            this.injectHeaders(xhr, additionalHeaders);\n\n            var body = {\n                data: {\n                    type: this.issueType.value,\n                    id: markupId,\n                    attributes: updateMarkupAttrs || {}\n                }\n            };\n\n            xhr.send(JSON.stringify(body));\n\n        }).then(this.parseResponse);\n    }\n\n    _deleteLayer(layerId) {\n        if (!this.checkValidation()) {\n            return Promise.reject('Service is unavailable');\n        }\n\n        return new Promise((resolve, reject) => {\n            var url = [this.ISSUE_SERVICE_URL, 'containers/', this.options.issueProject, this.ISSUES_TYPE.markup.endpoint + '/', layerId].join('');\n            var callbacks = this.getAjaxCallback(resolve, reject);\n            var xhr = this.createRequest('DELETE', url, 'application/vnd.api+json', callbacks, false, false);\n\n            // no body\n            xhr.send();\n        });\n    }\n\n    deleteLayer(...args) {\n        return this.sendWithRetry(this._deleteLayer, args);\n    }\n\n    _postDocumentAttachment(docAttachment, additionalHeaders) {\n        if (!this.checkValidation()) {\n            return Promise.reject('Service is unavailable.');\n        }\n\n        return new Promise((resolve, reject) => {\n            var url = [this.ISSUE_SERVICE_URL, 'containers/', this.options.issueProject, this.ATTACHMENT.endpoint].join('');\n            var callbacks = this.getAjaxCallback(resolve, reject);\n            var xhr = this.createRequest('POST', url, 'application/vnd.api+json', callbacks, false, false);\n\n            this.injectHeaders(xhr, additionalHeaders);\n\n            var body = {\n                data: {\n                    type: this.ATTACHMENT.value,\n                    attributes: docAttachment.attributes\n                }\n            };\n\n            xhr.send(JSON.stringify(body));\n        }).then(this.parseResponse);\n    }\n\n    postDocumentAttachment(...args) {\n        return this.sendWithRetry(this._postDocumentAttachment, args);\n    }\n\n    _deleteDocumentAttachment(docAttachmentId) {\n        if (!this.checkValidation()) {\n            return Promise.reject('Service is unavailable');\n        }\n\n        return new Promise((resolve, reject) => {\n            var url = [this.ISSUE_SERVICE_URL, 'containers/', this.options.issueProject, this.ATTACHMENT.endpoint + '/', docAttachmentId].join('');\n            var callbacks = this.getAjaxCallback(resolve, reject);\n            var xhr = this.createRequest('DELETE', url, 'application/vnd.api+json', callbacks, false, false);\n\n            // no body\n            xhr.send();\n        });\n    }\n\n    deleteDocumentAttachment(...args) {\n        return this.sendWithRetry(this._deleteDocumentAttachment, args);\n    }\n\n    _renameDocumentAttachment(docAttachmentId, newName) {\n        if (!this.checkValidation()) {\n            return Promise.reject('Service is unavailable');\n        }\n\n        return new Promise((resolve, reject) => {\n            var url = [this.ISSUE_SERVICE_URL, 'containers/', this.options.issueProject, this.ATTACHMENT.endpoint + '/', docAttachmentId].join('');\n            var callbacks = this.getAjaxCallback(resolve, reject);\n            var xhr = this.createRequest('PATCH', url, 'application/vnd.api+json', callbacks, false, false);\n\n            var body = {\n                data: {\n                    type: this.ATTACHMENT.value,\n                    id: docAttachmentId,\n                    attributes: {\n                        name: newName\n                    }\n                }\n            };\n\n            // no body\n            xhr.send(JSON.stringify(body));\n        }).then(this.parseResponse);\n    }\n\n    renameDocumentAttachment(...args) {\n        return this.sendWithRetry(this._renameDocumentAttachment, args);\n    }\n\n    /**\n     * Extracts the bucket id and the attachment id from an OSS URN.\n     * @param {String} ossUrn\n     * @returns {Array} With values: [ <bucket_id>, <attachment_id> ]\n     */\n    extractOssBucketAndId(ossUrn) {\n        var dataParts = ossUrn.split('/'); // Returns 2 array with 2 elements [ <stuff + bucket_id>, <attachment_id> ]\n        var bucketId = dataParts[0]; // Something like 'urn:adsk.objects:os.object:issues'\n        var tmpArray = bucketId.split(':'); // We need to get 'issues' at the end.\n        dataParts[0] = tmpArray[tmpArray.length - 1];\n        return dataParts;\n    }\n\n    cancelRequests() {\n        // Start cancel all pending xhr calls.\n        var count = this.xhrReq.length;\n\n        for (var i = count - 1; i >= 0; i--) {\n            if (this.xhrReq[i]) {\n                this.xhrReq[i].abort();\n            }\n        }\n\n        this.xhrReq = [];\n    }\n\n    removeXhr(xhr) {\n        var idx = this.xhrReq.indexOf(xhr);\n\n        if (idx > -1) {\n            this.xhrReq.splice(idx, 1);\n        }\n    }\n\n    addXhr(xhr) {\n        this.xhrReq.push(xhr);\n    }\n\n    getAccessToken() {\n        if (!this.markupsExtension.options.getAccessToken) {\n            return;\n        }\n\n        let token;\n\n        // getAccessToken calls a synched function in docs-ui-web: https://git.autodesk.com/BIM360/docs-ui-web/blob/055ec7debc3ac81107f13863c59f042bb53d04a2/src/javascripts/services/token_service.js#L36\n        // It makes sure that only after the CB is called with an updated token, the rest of the code wil be called.\n        // If there is no need to update the token, the current token will be returned.\n        this.markupsExtension.options.getAccessToken((t, exp) => {\n            token = t;\n        });\n        // Will be called only after the updated token is updated:\n        return token;\n    }\n\n    /**\n     * Returns an object compatible with our AJAX callbacks mechanism.\n     * Internal usage only.\n     *\n     * @param {Function} resolve\n     * @param {Function} reject\n     * @param {Boolean} [isBinaryData] Whether the response is to be binary or not (defaults to not-binary)\n     * @returns {{onLoad: Function, onError: Function, onTimeout: Function}}\n     */\n    getAjaxCallback(resolve, reject, isBinaryData) {\n        return {\n            onLoad: (event) => {\n                if (event.currentTarget.status === 201 ||\n                    event.currentTarget.status === 200 ||\n                    event.currentTarget.status === 204\n                ) {\n                    resolve(isBinaryData ? event.currentTarget.response\n                        : event.currentTarget.responseText);\n                } else {\n                    reject(event);\n                }\n            },\n            onError: reject,\n            onTimeout: reject,\n        };\n    }\n\n    /**\n     * Creates a request object to communicate with the issues endpoint.\n     * Returned value is ready to initiate async operation through it's send() method\n     * (it hasn't been called yet)\n     *\n     * @param {String} operation - POST, GET, DELETE\n     * @param {String} url - REST endpoint\n     * @param {String} contentType - Content type header\n     * @param {Object} callbacks - {onLoad:Function, onError:Function, onTimeout:Function}\n     * @param {boolean} noAuthorization - Whether authorization headers should be added.\n     * @param {boolean} cancelable - Whether the request can be canceled manually or not.\n     * @returns {XMLHttpRequest}\n     */\n    createRequest(operation, url, contentType, callbacks, noAuthorization, cancelable) {\n        var xhr = new XMLHttpRequest();\n        xhr.open(operation, url, true);\n\n        if (contentType) {\n            xhr.setRequestHeader('Content-Type', contentType);\n        }\n\n        if (!noAuthorization) {\n            var token = this.getAccessToken();\n            xhr.setRequestHeader('Authorization', 'Bearer ' + token);\n        }\n\n        xhr.setRequestHeader('Access-Control-Allow-Origin', '*');\n\n        xhr.onload = (...args) => { this.removeXhr(xhr); callbacks.onLoad(...args); };\n        xhr.onerror = (...args) => { this.removeXhr(xhr); callbacks.onError(...args); };\n        xhr.ontimeout = (...args) => { this.removeXhr(xhr); callbacks.onTimeout(...args); };\n\n        // Don't call any callback intentionally, so in case of an abort there won't be any fallback or retry mechanism.\n        // onabort is being called ONLY when calling xhr.abort() directly: https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequestEventTarget/onabort\n        xhr.onabort = () => { this.removeXhr(xhr); };\n\n        if (cancelable) {\n            this.addXhr(xhr);\n        }\n\n        return xhr;\n    }\n\n    /**\n     * Injects additional RequestHeaders before dispatching the async op to the issue endpoint.\n     *\n     * @param {XMLHttpRequest} xhr\n     * @param {Array} additionalHeaders - Additional headers with items {name:String, value:String}\n     */\n    injectHeaders(xhr, additionalHeaders) {\n        if (additionalHeaders) {\n            additionalHeaders.forEach((headerInfo) => {\n                xhr.setRequestHeader(headerInfo.name, headerInfo.value);\n            });\n        }\n    }\n}\n","import { v4 as getUUID } from 'uuid';\nimport MarkupServiceBase from './MarkupsServiceBase';\n\nexport default class MarkupServiceMobile extends MarkupServiceBase {\n    constructor(markupsExtension, options) {\n        super(markupsExtension, options);\n\n        this.pendingRequests = {};\n    }\n\n    requestMarkups() {\n        // For mobile apps, the flow of requesting markups is simpler than in MarkupsServiceWeb.\n        // Once the native app gets `markupToolLoaded` callback, it should handle the connection with the backend,\n        // and just send us the completed markups using `loadLayers` API.\n        this.markupsExtension.mobileCallbacks.markupToolLoaded();\n\n        // This Promise won't get resolved by purpose.\n        return new Promise((resolve, reject) => {});\n    }\n\n    postLayer(metadata, resources, originalMarkupGuid) {\n        const requestId = getUUID();\n\n        if (originalMarkupGuid) {\n            this.markupsExtension.mobileCallbacks.updateLayer(originalMarkupGuid, metadata, resources, requestId);\n        } else {\n            this.markupsExtension.mobileCallbacks.postLayer(metadata, resources, requestId);\n        }\n\n        return this.returnDelayedPromise(requestId);\n    }\n\n    // Used to update metadata only.\n    updateLayer(originalMarkupGuid, metadata) {\n        const requestId = getUUID();\n\n        this.markupsExtension.mobileCallbacks.updateLayer(originalMarkupGuid, metadata);\n\n        return this.returnDelayedPromise(requestId);\n    }\n\n    deleteLayer(guid) {\n        const requestId = getUUID();\n\n        this.markupsExtension.mobileCallbacks.deleteLayer(guid, requestId);\n\n        return this.returnDelayedPromise(requestId);\n    }\n\n    publishLayer(guid) {\n        const requestId = getUUID();\n\n        this.markupsExtension.mobileCallbacks.publishLayer(guid, requestId);\n\n        return this.returnDelayedPromise(requestId);\n    }\n\n    archiveLayer(guid, closeVersion) {\n        const requestId = getUUID();\n\n        this.markupsExtension.mobileCallbacks.archiveLayer(guid, closeVersion, requestId);\n\n        return this.returnDelayedPromise(requestId);\n    }\n\n    // NOT YET IMPLEMENTED\n    postDocumentAttachment(docAttachment, additionalHeaders) {\n        const requestId = getUUID();\n\n        // this.markupsExtension.mobileCallbacks.postDocumentAttachment(docAttachment, additionalHeaders);\n\n        return this.returnDelayedPromise(requestId);\n    }\n\n    // NOT YET IMPLEMENTED\n    deleteDocumentAttachment(docAttachmentId) {\n        const requestId = getUUID();\n\n        // this.markupsExtension.mobileCallbacks.deleteDocumentAttachment(docAttachmentId);\n\n        return this.returnDelayedPromise(requestId);\n    }\n\n    // NOT YET IMPLEMENTED\n    renameDocumentAttachment(docAttachmentId, newName) {\n        const requestId = getUUID();\n\n        // this.markupsExtension.mobileCallbacks.renameDocumentAttachment(docAttachmentId, newName);\n\n        return this.returnDelayedPromise(requestId);\n    }\n\n    //\n    // Private methods.\n    //\n\n    cancelRequests() {\n        Object.keys(this.pendingRequests).forEach((requestId) => {\n            this.pendingRequests[requestId].reject();\n            delete this.pendingRequests[requestId];\n        });\n    }\n\n    // A generic method to return a delayed promise.\n    // It is used to wait for the mobile app to return us a result from a backend request.\n    returnDelayedPromise(requestId) {\n        const delayedPromise = {};\n\n        const p = new Promise((resolve, reject) => {\n            delayedPromise.resolve = resolve;\n            delayedPromise.reject = reject;\n        });\n\n        this.pendingRequests[requestId] = delayedPromise;\n\n        return p;\n    }\n\n    // Called after the mobile app completed a request from the backend.\n    // In case of failure, it is called with isSuccess: false.\n    onRequestCompleted(result, isSuccess, requestId) {\n        if (!this.pendingRequests[requestId]) {\n            return;\n        }\n        \n        if (isSuccess) {\n            this.pendingRequests[requestId].resolve(result);\n        } else {\n            this.pendingRequests[requestId].reject();\n        }\n\n        delete this.pendingRequests[requestId];\n    }\n}\n","import LodashUtils from './Utils/LodashUtils';\nimport { getObjectAsList, applyTranslation } from './MarkupsCommon';\nimport { restoreMarkupViewState } from './MarkupsSceneState';\nimport * as MarkupsConstants from './MarkupsConstants';\n\nconst removeUnnecessaryProperties = (state, isGroup) => {\n    delete state.scale;\n    delete state.translation;\n    \n    if (isGroup) {\n        delete state.style;\n        delete state.position;\n        delete state.size;\n        delete state.rotation;\n    }\n};\n\nexport const leafletWorldToMarkups = (point, viewer) => {\n    let loadOptions;\n    let bounds;\n\n    if (viewer.model.isPdf(true)) {\n        Autodesk.Viewing.PDFUtils.pdfToLeafletWorld(viewer, point);\n        loadOptions = Autodesk.Viewing.PDFUtils.getLeafletLoadOptions(viewer);\n        bounds = Autodesk.Viewing.PDFUtils.getLeafletBoundingBox(viewer);\n    } else {\n        const modelData = viewer.model.getData();\n        loadOptions = modelData.loadOptions.loadOptions;\n        bounds = modelData.bbox;\n    }\n\n    const { texWidth, texHeight } = loadOptions;\n\n    const worldPos = point;\n    const worldTopLeft = new THREE.Vector3(bounds.min.x, bounds.max.y, 0);\n\n    worldPos.sub(worldTopLeft);\n    point.x = (worldPos.x * texWidth) / bounds.size().x;\n    point.y = (worldPos.y * texHeight) / bounds.size().y;\n\n    return point;\n};\n\nconst leafletSizeFromWorldToMarkups = (size, viewer) => {\n    const a = leafletWorldToMarkups(new THREE.Vector3(), viewer);\n    const b = leafletWorldToMarkups(new THREE.Vector3(size, 0, 0), viewer);\n\n    return a.distanceTo(b);\n};\n\nconst convertAnchorsToMarkupSpecificNodeNames = (state) => {\n    const anchors = {};\n\n    switch (state.type) {\n        case MarkupsConstants.MARKUP_TYPE_RECTANGLE:\n        case MarkupsConstants.MARKUP_TYPE_CLOUD:\n        case MarkupsConstants.MARKUP_TYPE_CIRCLE:\n            break;\n        case MarkupsConstants.MARKUP_TYPE_ARROW:\n        case MarkupsConstants.MARKUP_TYPE_LINE:\n            anchors.tail = state.anchors[0];\n            anchors.head = state.anchors[1];\n            break;\n        case MarkupsConstants.MARKUP_TYPE_DIMENSION:\n            anchors.firstAnchor = state.anchors[0];\n            anchors.secondAnchor = state.anchors[1];\n            break;\n        case MarkupsConstants.MARKUP_TYPE_HIGHLIGHT:\n        case MarkupsConstants.MARKUP_TYPE_FREEHAND:\n        case MarkupsConstants.MARKUP_TYPE_POLYCLOUD:\n        case MarkupsConstants.MARKUP_TYPE_POLYLINE:\n            anchors.locations = state.anchors;\n            break;\n        case MarkupsConstants.MARKUP_TYPE_ARROW_CALLOUT:\n            //TODO\n            break;\n        case MarkupsConstants.MARKUP_TYPE_TEXT:\n        case MarkupsConstants.MARKUP_TYPE_CALLOUT:\n            //TODO\n            break;\n    }\n\n    state.anchors = anchors;\n};\n\nconst createSvgElement = (type, _document) => {\n    return _document.createElementNS('http://www.w3.org/2000/svg', type);\n};\n\nconst addSvgMetadata = (svg, metadata, _document) => {\n    var metadataNode = _document.createElementNS('http://www.w3.org/2000/svg', 'metadata');\n    var dataVersionNode = _document.createElement('markup_document');\n\n    metadataNode.appendChild(dataVersionNode);\n\n    // NOTE: We could iterate over the properties, but we don't because these are the only ones supported\n    dataVersionNode.setAttribute('data-model-version', metadata['data-model-version']); // Version. For example: \"1\"\n\n    svg.insertBefore(metadataNode, svg.firstChild);\n    return metadataNode;\n};\n\nconst createMarkupPathSvg = (closed, _document) => {\n    var svg = createSvgElement('g', _document);\n    svg.setAttribute('cursor', 'inherit');\n    svg.setAttribute('pointer-events', 'none');\n\n    var path = createSvgElement('path', _document);\n    path.setAttribute('id', 'markup');\n\n    if (closed) {\n        path.setAttribute('d', 'M 0 0 z');\n    } else {\n        path.setAttribute('d', 'M 0 0');\n    }\n\n    svg.appendChild(path);\n\n    return svg;\n};\n\nconst addMarkupMetadata = (shape, metadata, _document) => {\n    var metadataNode = _document.createElementNS('http://www.w3.org/2000/svg', 'metadata');\n    var dataVersionNode = _document.createElement('markup_element');\n\n    metadataNode.appendChild(dataVersionNode);\n\n    Object.keys(metadata).forEach((key) => {\n        dataVersionNode.setAttribute(key, metadata[key]);\n    });\n\n    shape.insertBefore(metadataNode, shape.firstChild);\n    return metadataNode;\n};\n\nconst svgNodeToString = (domNode) => {\n    let result = '';\n    try {\n        var xmlSerializer = new XMLSerializer();\n        result = xmlSerializer.serializeToString(domNode);\n    } catch (err) {\n        console.error('svgNodeToString failed to generate string representation of domNode.');\n    }\n\n    return result;\n};\n\nconst flattenObject = (obj) => {\n    const flattenObj = {};\n\n    Object.keys(obj).forEach((key) => {\n        if (typeof obj[key] === 'object' && !Array.isArray(obj[key])) {\n            Object.keys(obj[key]).forEach((k) => {\n                flattenObj[k] = obj[key][k];\n            });\n        } else {\n            flattenObj[key] = obj[key];\n        }\n    });\n\n    return flattenObj;\n};\n\nconst convertCoordinatesToStrings = (state) => {\n    Object.keys(state).forEach((key) => {\n        if (Array.isArray(state[key])) {\n            const arr = state[key];\n            const coordinates = [];\n\n            arr.forEach((item) => {\n                coordinates.push(item.x);\n                coordinates.push(item.y);\n            });\n\n            state[key] = coordinates.join(' ');\n        } else if (typeof state[key] === 'object') {\n            const obj = state[key];\n            const coordinates = [];\n\n            coordinates.push(obj.x);\n            coordinates.push(obj.y);\n\n            state[key] = coordinates.join(' ');\n        }\n    });\n};\n\nexport const generateSVGData = (layer, viewer, renderer) => {\n    const _document = viewer.getDocument();\n    var svg = createSvgElement('svg', _document);\n    addSvgMetadata(svg, { 'data-model-version': '5' }, _document);\n\n    const markups = getObjectAsList(layer.markups);\n\n    const viewerStateBackup = !viewer.impl.is2d ? viewer.getState() : null;\n\n    const isLeaflet = viewer.model.isLeaflet();\n    const isPdf = viewer.model.isPdf(true);\n\n    markups.forEach((markup) => {\n        const state = LodashUtils.cloneDeep(markup.getState());\n\n        if (!viewer.impl.is2d) {\n            restoreMarkupViewState(viewer, layer.layerData, true);\n        }\n\n        state.anchors.forEach((anchor) => {\n            markup.applyScaleAndTranslation(anchor);\n            if (isLeaflet || isPdf)\n                anchor.copy(leafletWorldToMarkups(anchor, viewer));\n        });\n\n        // Store size and position, then reverse translate the anchors\n        if (markup.type !== MarkupsConstants.MARKUP_TYPE_ARROW &&\n            markup.type !== MarkupsConstants.MARKUP_TYPE_DIMENSION &&\n            !markup.isGroupMarkup()) {\n            let boundingBox;\n\n            if (markup.type === MarkupsConstants.MARKUP_TYPE_CALLOUT) {\n                // To conform with old style\n                state.isFrameUsed = state.isFrameUsed ? 1 : 0;\n                // Store size without frame size\n                boundingBox = markup.getWorldBoundingBoxTextOnly();\n            } else {\n                boundingBox = markup.getWorldBoundingBox();\n            }\n\n            let size = boundingBox.size();\n\n            let center = boundingBox.getCenter();\n\n            if (isLeaflet || isPdf) {\n                center.copy(leafletWorldToMarkups(center, viewer));\n                size.x = leafletSizeFromWorldToMarkups(size.x, viewer);\n                size.y = leafletSizeFromWorldToMarkups(size.y, viewer);\n            }\n\n            state.size = `${size.x} ${size.y}`;\n            state.position = `${center.x} ${center.y}`;\n            \n            applyTranslation(state.anchors, center.clone().negate());\n        }\n\n        if (markup.type === MarkupsConstants.MARKUP_TYPE_DIMENSION) {\n            if (isLeaflet || isPdf) {\n                state.translation.copy(leafletWorldToMarkups(state.translation, viewer).sub(leafletWorldToMarkups(new THREE.Vector3(), viewer)));\n            }\n            state.offset = `${state.translation.x} ${state.translation.y} ${state.translation.z}`;\n            state.style[MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE] *= MarkupsConstants.DIMENSION_FONT_SIZE_FACTOR;\n            state.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS] *= MarkupsConstants.DIMENSION_THICKNESS_FACTOR;\n        }\n        \n        if (isLeaflet || isPdf) {\n            state.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS] = leafletSizeFromWorldToMarkups(state.style[MarkupsConstants.STYLE_PROPERTIES.THICKNESS], viewer);\n            state.style[MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE] = leafletSizeFromWorldToMarkups(state.style[MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE], viewer);\n            state.style[MarkupsConstants.STYLE_PROPERTIES.FONT_SIZE] *= renderer.getFontToWorldScale();\n        }\n\n        state.type = markup.type;\n\n        // Support legacy markup extension - BLMV-3054.\n        // Also support export of cloud callout without fill - BLMV-3523.\n        if (state.style[MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR] === MarkupsConstants.COLORS.NO_COLOR || markup.options.fillNotAllowed) {\n            state.style[MarkupsConstants.STYLE_PROPERTIES.FILL_OPACITY] = 0;\n            state.style[MarkupsConstants.STYLE_PROPERTIES.FILL_COLOR] = MarkupsConstants.COLORS.NO_COLOR;\n        }\n\n        removeUnnecessaryProperties(state, markup.isGroupMarkup());\n\n        convertAnchorsToMarkupSpecificNodeNames(state);\n\n        const flatState = flattenObject(state);\n\n        convertCoordinatesToStrings(flatState);\n\n        const layerSVG = createMarkupPathSvg(flatState.closed, _document);\n        addMarkupMetadata(layerSVG, flatState, _document);\n        svg.appendChild(layerSVG);\n    });\n\n    if (viewerStateBackup) {\n        viewer.restoreState(viewerStateBackup, null, true);\n    }\n\n    const output = svgNodeToString(svg);\n\n    return output;\n};\n\n// Not in use for now.\nexport const generateJsonData = (layer) => {\n    const data = [];\n    const markups = getObjectAsList(layer.markups);\n\n    markups.forEach((markup) => {\n        const state = LodashUtils.cloneDeep(markup.getState());\n\n        removeUnnecessaryProperties(state, markup.isGroupMarkup());\n\n        data.push({\n            type: markup.type,\n            state,\n            dataModelVersion: 6\n        });\n    });\n\n    return JSON.stringify(data);\n};\n","import LodashUtils from '../Utils/LodashUtils';\nimport MarkupServiceWeb from './MarkupServiceWeb';\nimport MarkupServiceMobile from './MarkupsServiceMobile';\nimport * as MarkupsConstants from '../MarkupsConstants';\nimport { isTrueValue, forAll, getObjectAsList, isSheetNameEqual } from '../MarkupsCommon';\nimport { MARKUPS_EVENTS } from '../MarkupsEvents';\nimport { generateSceneMetadata } from '../MarkupsSceneState';\nimport { generateSVGData } from '../MarkupsSerializer';\nimport MarkupsLayerData from '../MarkupsLayerData';\n\nconst {MARKUP_ERRORS} = MarkupsConstants;\n\nexport default class MarkupsServiceOperator {\n    reset(markupsExtension) {\n        this.markupsExtension = markupsExtension;\n        this.markupsManager = markupsExtension.markupsManager;\n        this.markupsCache = markupsExtension.markupsCache;\n        this.viewer = markupsExtension.viewer;\n        this.options = this.markupsExtension.options;\n\n        // Keep track on how many save processes are active.\n        this.savingCounter = 0;\n\n        const isMobileApp = markupsExtension.options.isMobileApp;\n\n        const serviceClass = this.options.serviceClass || MarkupServiceWeb;\n        this.service = isMobileApp ? new MarkupServiceMobile(this.markupsExtension, this.options) : new serviceClass(this.markupsExtension, this.options);\n\n        this.errorHandler = this.options.errorHandler || function () { };\n\n        this.onSessionEndedBinded = this.onSessionEnded.bind(this);\n        this.markupsManager.addEventListener(MARKUPS_EVENTS.MARKUP_SESSION_END, this.onSessionEndedBinded);\n\n        this.onLayerDeletedBinded = this.onLayerDeleted.bind(this);\n        this.markupsManager.addEventListener(MARKUPS_EVENTS.LAYER_DELETE, this.onLayerDeletedBinded);\n\n        this.onDocumentAttachmentCreationStartBinded = this.onDocumentAttachmentCreationStart.bind(this);\n        this.markupsManager.addEventListener(MARKUPS_EVENTS.DOCUMENT_ATTACHMENT_CREATION_START, this.onDocumentAttachmentCreationStartBinded);\n\n        this.renameDocumentAttachmentBinded = this.renameDocumentAttachment.bind(this);\n        this.markupsManager.addEventListener(MARKUPS_EVENTS.DOCUMENT_ATTACHMENT_RENAME, this.renameDocumentAttachmentBinded);\n\n        this.deleteDocumentAttachmentBinded = this.deleteDocumentAttachment.bind(this);\n        this.markupsManager.addEventListener(MARKUPS_EVENTS.DOCUMENT_ATTACHMENT_DELETE, this.deleteDocumentAttachmentBinded);\n\n        this.onPublishLayerBinded = this.onPublishLayer.bind(this);\n        this.markupsManager.addEventListener(MARKUPS_EVENTS.LAYER_PUBLISH, this.onPublishLayerBinded);\n\n        this.onArchiveLayerBinded = this.onArchiveLayer.bind(this);\n        this.markupsManager.addEventListener(MARKUPS_EVENTS.LAYER_ARCHIVE, this.onArchiveLayerBinded);\n    }\n\n    onSessionEnded({ layer, save }) {\n        if (save && !layer.isEmpty()) {\n            this.saveLayer(layer);\n        }\n    }\n\n    onLayerDeleted({ layerData }) {\n        if (layerData) {\n            this.deleteLayer(layerData);\n        }\n    }\n\n    onPublishLayer({ layerData }) {\n        if (layerData) {\n            this.publishLayer(layerData);\n        }\n    }\n\n    onArchiveLayer({ layerData }) {\n        if (layerData) {\n            this.archiveLayer(layerData);\n        }\n    }\n\n    fetchMarkups() {\n        const urn = this.options.documentUrn;\n        this.numOfMarkupsLoaded = 0;\n\n        const maxPageLimit = this.getMaxPageLimit();\n        let offset = 0;\n        const data = { layersData: [], relatedResources: [] };\n\n        const markupStatusFilter = MarkupsConstants.DEFAULT_STATUSES_TO_LOAD;\n\n        const requestFuncRecursive = () => {\n            return this.requestMarkups(data, maxPageLimit, offset, markupStatusFilter)\n                .then((result) => {\n                    if (result && result.nextReq) {\n                        offset += maxPageLimit;\n                        return requestFuncRecursive();\n                    }\n                }).catch((e) => {\n                    console.warn('requestMarkups failed or canceled.');\n                });\n        };\n\n        requestFuncRecursive().then(() => this.getMetadata(data, urn)).catch(e => e);\n    }\n\n    requestMarkups(data, pageLimit, offset, statuses = MarkupsConstants.DEFAULT_STATUSES_TO_LOAD) {\n        return this.service.requestMarkups(pageLimit, offset, null, statuses).then((result) => {\n            try {\n                const resultObj = JSON.parse(result);\n                data.layersData.push(...resultObj.data);\n\n                const included = resultObj.included;\n                if (included && Array.isArray(included)) {\n                    data.relatedResources.push(...included);\n                }\n\n                return Promise.resolve({\n                    nextReq: resultObj.links.next\n                });\n            } catch (e) {\n                return Promise.reject(e);\n            }\n        }, () => {\n            return Promise.reject();\n        });\n    }\n\n    getMetadata({ relatedResources, layersData }, urn) {\n        // Prioritize downloading current sheet's markups first\n        const predicate = l => isSheetNameEqual(l.attributes.markup_metadata.sheetName, this.options.sheetName);\n\n        const currentSheetLayersData = LodashUtils.remove(layersData, predicate);\n\n        layersData = currentSheetLayersData.concat(layersData);\n\n        layersData.forEach((data) => {\n            const metadata = data.attributes;\n\n            // In case of some bad markup data, do a pre-process to filter out any objects that don't have markup_metadata\n            if (!metadata.markup_metadata) {\n                return;\n            }\n\n            const startVersion = metadata.starting_version;\n\n            // Filter by version.\n            if (this.options.documentVersion < startVersion) {\n                return;\n            }\n\n            metadata.tags = metadata.tags || {};\n            const resourceEmbed = isTrueValue(metadata.tags.resourceEmbed);\n\n            // If layerData already in cache, don't add it again.\n            const cachedLayerData = this.markupsCache.get(data.id);\n\n            const layerData = cachedLayerData || new MarkupsLayerData();\n\n            if (!cachedLayerData) {\n                layerData.guid = data.id;\n                layerData.status = MarkupsConstants.MARKUP_STATUS_OPEN;\n                layerData.metadata = metadata;\n\n                if (metadata.close_version > 0) {\n                    layerData.status = MarkupsConstants.MARKUP_STATUS_CLOSED;\n                }\n\n                // If the resources are embedded to markup object, then can retrieve it right away.\n                const resources = metadata.resource_urns;\n\n                if (resources) {\n                    const markupSvgData = this.createEmptyResourceObject(MarkupsConstants.MARKUP_RESOURCE_TYPE_SVG, resourceEmbed, resources);\n\n                    if (markupSvgData) {\n                        layerData.resources.push(markupSvgData);\n                    }\n\n                    const markupScreenCapture = this.createEmptyResourceObject(MarkupsConstants.MARKUP_RESOURCE_TYPE_SCREEN_CAPTURE, resourceEmbed, resources);\n\n                    if (markupScreenCapture) {\n                        layerData.resources.push(markupScreenCapture);\n                    }\n                }\n\n                this.markupsCache.add(layerData.guid, layerData, urn);\n            }\n\n            this.notify({ type: MARKUPS_EVENTS.LAYER_FETCHED, layerData });\n\n            this.getAttachment(layerData);\n        });\n\n        if (!this.fetchedAllMarkups && this.numOfMarkupsLoaded === this.markupsCache.length()) {\n            this.fetchedAllMarkups = true;\n            this.notify({ type: MARKUPS_EVENTS.ALL_MARKUPS_LOADED, amount: this.numOfMarkupsLoaded });\n        }\n\n        this.getUserProfiles();\n        this.getProjectUsers();\n        this.getRevisions();\n        this.getAttachedDocumentData(relatedResources);\n\n        this.notify({ type: MARKUPS_EVENTS.LAYER_METADATA_FETCHED });\n\n        return Promise.resolve();\n    }\n\n    notify(event) {\n        if (this.markupsManager) {\n            try {\n                this.markupsManager.dispatchEvent(event);\n            } catch (error) {\n                console.warn(error);\n                // Dispatch can fail if a sheet is being changed during loading.\n            }\n        }\n    }\n\n    getAttachment(layerData) {\n        const pa = layerData.resources.map((resource) => {\n            let result = null;\n\n            // If data already there, then it is either a embed resource or it is already downloaded and cached.\n            if (resource.data) {\n                result = { layerData, resourceType: resource.type };\n                this.onGetAttachment(result);\n\n                return Promise.resolve(result);\n            }\n\n            // The thumbnail is in base64 format so not a binary.\n            const ossDataType = MarkupsConstants.ATTACHMENT_DATA_TYPE_TEXT;\n\n            // OSS data type is to determine whether the attachment is binary or not.\n            var isBinaryData = ossDataType === MarkupsConstants.ATTACHMENT_DATA_TYPE_BINARY;\n\n            return this.service.getAttachment(resource.ossPath, isBinaryData).then((resourceData) => {\n                if (!resourceData) {\n                    return Promise.resolve(null);\n                }\n\n                resource.data = resourceData;\n                result = { layerData, resourceType: resource.type };\n                this.onGetAttachment(result);\n\n                return Promise.resolve(result);\n            }).catch((e) => {\n                // Request fail or canceled by demand.\n            });\n        });\n\n        return Promise.all(pa);\n    }\n\n    onGetAttachment(layerAndAttachType) {\n        const { layerData, resourceType } = layerAndAttachType;\n\n        if (resourceType === MarkupsConstants.MARKUP_RESOURCE_TYPE_SVG) {\n            this.numOfMarkupsLoaded += 1;\n\n            this.notify({ type: MARKUPS_EVENTS.LAYER_RESOURCE_FETCHED, layerData });\n\n            if (!this.fetchedAllMarkups && this.numOfMarkupsLoaded === this.markupsCache.length()) {\n                this.fetchedAllMarkups = true;\n                this.notify({ type: MARKUPS_EVENTS.ALL_MARKUPS_LOADED, amount: this.numOfMarkupsLoaded });\n            }\n        }\n\n        if (resourceType === MarkupsConstants.MARKUP_RESOURCE_TYPE_SCREEN_CAPTURE) {\n            this.notify({ type: MARKUPS_EVENTS.LAYER_THUMBNAIL_FETCHED, layerData });\n        }\n    }\n\n    createEmptyResourceObject(resourceType, resourceEmbed, resources) {\n        if (resources[resourceType]) {\n            const markupResource = {\n                type: resourceType,\n                data: null,\n                id: null,\n                ossPath: null\n            };\n\n            if (!resourceEmbed) {\n                markupResource.ossPath = resources[resourceType];\n            } else {\n                markupResource.data = resources[resourceType];\n            }\n            return markupResource;\n        }\n\n        return null;\n    }\n\n    getAttachedDocumentData(attachments) {\n        if (!attachments || !Array.isArray(attachments) || attachments.length === 0) {\n            return;\n        }\n\n        if (!this.options.getAttachedDocumentCallback) {\n            return;\n        }\n\n        const layerDatas = this.markupsCache.getAsList();\n\n        const filteredAttachments = attachments.filter((at) => {\n            return layerDatas.some(layerData => at.attributes && at.type === MarkupsConstants.LINK_TYPE_ATTACHMENTS && layerData.guid === at.attributes.issue_id);\n        });\n\n        if (filteredAttachments.length > 0) {\n            this.options.getAttachedDocumentCallback(filteredAttachments, (response) => {\n                layerDatas.forEach((layerData) => {\n                    if (response) {\n                        layerData.attachments.push(...response.filter((res) => {\n                            return (res.attributes.issue_id === layerData.guid && layerData.attachments.findIndex(attachment => attachment.id === res.id) === -1);\n                        }));\n\n                        layerData.attachments.forEach((documentAttachment) => {\n                            this.notify({ type: MARKUPS_EVENTS.LINK_SYNCED, layerData, documentAttachment });\n                        });\n                    }\n                });\n            });\n        }\n    }\n\n    getUserProfiles() {\n        // client must provide the callback function\n        if (!this.options.getUserProfileCallback) {\n            return;\n        }\n\n\n        forAll(this.markupsCache.getCache(), (layerData) => {\n            const oxygenId = layerData.metadata.created_by;\n\n            if (oxygenId && !layerData.userName) {\n                this.options.getUserProfileCallback(oxygenId, (userInfo) => {\n                    // Now only take user name out of the profile\n                    if (userInfo && userInfo.name) {\n                        layerData.userName = userInfo.name;\n                        this.notify({ type: MARKUPS_EVENTS.LAYER_METADATA_FETCHED });\n                    }\n                });\n            }\n        });\n    }\n\n    getProjectUsers() {\n        // client must provide the callback function\n        if (!this.options.getProjectUsersCallback) {\n            return;\n        }\n\n        const callback = this.options.getProjectUsersCallback;\n\n        callback((users) => {\n            this.notify({ type: MARKUPS_EVENTS.PROJECT_USERS_FETCHED, users });\n        });\n    }\n\n    /**\n     * [getRevision: get revision number to an internal wip version on the given document]\n     */\n    getRevisions() {\n        if (!this.options.getRevisionCallback) {\n            return;\n        }\n\n        // Assume the returned version object is an array that contains\n        // map from internal wip version to the revision number.\n        this.options.getRevisionCallback(this.options.documentUrn, (versions) => {\n            forAll(this.markupsCache.getCache(), (layerData) => {\n                if (!layerData || !layerData.metadata) {\n                    return;\n                }\n\n                const internalVersion = layerData.metadata.starting_version;\n                layerData.metadata.tags.starting_revision = versions[internalVersion];\n            });\n\n            this.notify({ type: MARKUPS_EVENTS.LAYER_METADATA_FETCHED });\n        });\n    }\n\n    generateMarkupDescription(layer) {\n        const description = [];\n\n        layer.getAllMarkups().forEach((markup) => {\n            if (markup.type === MarkupsConstants.MARKUP_TYPE_TEXT || markup.type === MarkupsConstants.MARKUP_TYPE_CALLOUT) {\n                description.push(markup.state.text);\n            }\n        });\n\n        return description.join('.\\n');\n    }\n\n    generateMetadata(status, layer) {\n        const metadata = {};\n\n        metadata.target_urn = this.options.documentUrn;\n        metadata.starting_version = this.options.documentVersion;\n        metadata.resource_urns = {};\n\n        const sceneState = this.viewer.getState();\n        const globalOffset = this.viewer.model ? this.viewer.model.getData().globalOffset : null;\n\n        metadata.markup_metadata = generateSceneMetadata(sceneState, globalOffset, this.options);\n        metadata.markup_metadata.links = getObjectAsList(layer.links).map((link) => {\n                const position = link.state.position && link.state.position.clone();\n\n                if (position && this.markupsExtension.viewer.model.isPdf(true)) {\n                    Autodesk.Viewing.PDFUtils.pdfToLeafletWorld(this.markupsExtension.viewer, position);\n                }\n\n                return {\n                id: link.guid,\n                type: link.type,\n                position\n            };\n        });\n\n        metadata.description = this.generateMarkupDescription(layer);\n\n        // [Ugly Revision]: record the revision label\n        metadata.tags = {\n            starting_revision: this.options.documentRevision || this.options.documentVersion\n        };\n\n        // Add collection urn in if specified.\n        if (this.options.collectionUrn) {\n            metadata.collection_urn = this.options.collectionUrn;\n        }\n\n        // Add user name as a tag to markup object, it is a tricky way of quickly getting user's display name\n        // when retrieving from server.\n        if (this.options.userName) {\n            metadata.tags.userName = this.options.userName;\n        }\n\n        metadata.status = status;\n\n        // https://jira.autodesk.com/browse/BLMV-2918\n        // Update originalDocumentResolution when saving / updating a markup, in order to make sure that the markup will\n        // maintain the same position for different DPIs of the same document.\n        if (this.viewer.model.isLeaflet()) {\n            const modelData = this.viewer.model.getData();\n            const { loadOptions } = modelData.loadOptions;\n            metadata.markup_metadata.originalDocumentResolution = [loadOptions.texWidth, loadOptions.texHeight];\n        }\n\n        return metadata;\n    }\n\n    saveLayer(layer) {\n        const urn = this.options.documentUrn;\n        const isNew = !layer.layerData;\n        const tmpId = `${layer.id}_tmp`;\n        const layerData = isNew ? new MarkupsLayerData() : layer.layerData;\n        let tmpLayerData;\n\n        // 2. Generate markup object\n        const metadata = this.generateMetadata(isNew ? this.markupsExtension.getCreationStatusType() : layerData.metadata.status, layer);\n\n        // 3. Get markups data\n        const svgResource = {\n            type: MarkupsConstants.MARKUP_RESOURCE_TYPE_SVG,\n            data: generateSVGData(layer, this.markupsExtension.viewer, this.markupsExtension.renderer),\n            id: null,\n            ossPath: null\n        };\n\n        // screen capture\n        const screenCaptureData = {\n            type: MarkupsConstants.MARKUP_RESOURCE_TYPE_SCREEN_CAPTURE,\n            data: null,\n            id: null,\n            ossPath: null\n        };\n\n        const resources = [svgResource, screenCaptureData];\n\n        layerData.status = MarkupsConstants.MARKUP_STATUS_SAVING;\n        layerData.originalCreationTime = isNew ? new Date().toISOString() : metadata.created_at;\n        layer.layerData = layerData;\n\n        if (isNew) {\n            tmpLayerData = LodashUtils.cloneDeep(layerData);\n            tmpLayerData.metadata = metadata;\n            tmpLayerData.resources = resources;\n            this.markupsCache.add(tmpId, tmpLayerData, urn);\n        }\n        this.notify({ type: MARKUPS_EVENTS.LAYER_SYNCING, layerData, layer });\n\n        this.savingCounter++;\n\n        this.markupsManager.generateScreenCapture(layer).then((img) => {\n            resources[1].data = img;\n\n            if (!isNew) {\n                layerData.resources = resources;\n            }\n\n            this.notify({ type: MARKUPS_EVENTS.LAYER_SYNCING, layerData, layer });\n\n            this.service.postLayer(metadata, resources, isNew ? undefined : layer.getGuid()).then((result) => {\n                const guid = result.id;\n                layerData.guid = guid;\n                layerData.metadata = result.attributes;\n                layerData.resources = resources;\n                layerData.attachments = layerData.attachments || [];\n                layerData.status = MarkupsConstants.MARKUP_STATUS_SAVE_SUCCEED;\n                this.markupsCache.add(guid, layerData, urn);\n                layerData.userName = layerData.metadata.tags.userName;\n            }).catch((e) => {\n                if (isNew) {\n                    layer.layerData = null;\n                } else {\n                    layerData.status = MarkupsConstants.MARKUP_STATUS_SAVE_FAILED;\n                }\n\n                this.errorHandler(Autodesk.Viewing.i18n.translate('Failed to save markup'), MARKUP_ERRORS.MARKUP_SAVE_FAILED, e);\n                console.error('Failed to save markup', layerData, e);\n            }).finally(() => {\n                this.markupsCache.remove(tmpId, urn);\n                this.notify({ type: MARKUPS_EVENTS.LAYER_SYNCED, layerData, layer });\n                this.savingCounter--;\n            });\n        }).catch(() => {\n            this.savingCounter--;\n        });\n    }\n\n    // ////////////////////////////////////////////////////////////////////// //\n    // Start: Common private method\n    // ////////////////////////////////////////////////////////////////////// //\n\n    onDocumentAttachmentCreationStart({ documentAttachments, layerData }) {\n        if (documentAttachments.length === 0) {\n            return;\n        }\n\n        // TODO: at the moment, support save one at a time.\n        if (documentAttachments.length > 1) {\n            console.error('Dont save multiple attachments at a time.');\n            return;\n        }\n\n        documentAttachments.forEach((at) => {\n            at.attributes.issue_id = layerData.guid;\n            at.attributes.attachment_type = MarkupsConstants.LINK_TYPE_DOCUMENT_ATTACHMENT;\n        });\n\n        const documentAttachment = documentAttachments[0];\n\n        this.notify({ type: MARKUPS_EVENTS.LINK_SYNCING, documentAttachment, layerData });\n        this.service.postDocumentAttachment(documentAttachment).then((attachment) => {\n            if (attachment && attachment.attributes && attachment.attributes.issue_id) {\n                documentAttachment.attributes = attachment.attributes;\n                documentAttachment.id = attachment.id;\n                layerData.attachments.splice(0, 0, documentAttachment);\n                this.markupsManager.createLinkMetadata(layerData);\n            }\n\n            this.notify({ type: MARKUPS_EVENTS.LINK_SYNCED, documentAttachment, layerData });\n        }).catch((e) => {\n            this.notify({ type: MARKUPS_EVENTS.LINK_SYNCED, documentAttachment, layerData });\n            this.errorHandler(Autodesk.Viewing.i18n.translate('Failed to create markup attachment'), MARKUP_ERRORS.MARKUP_ATTACHMENT_CREATE_FAILED, e);\n            console.error('Failed to create markup attachment', e);\n        });\n    }\n\n    // ////////////////////////////////////////////////////////////////////// //\n    // End: Common private method\n    // ////////////////////////////////////////////////////////////////////// //\n\n    deleteDocumentAttachment({ documentAttachment, layerData }) {\n        documentAttachment.status = MarkupsConstants.MARKUP_ATTACHMENT_DELETEING;\n\n        this.notify({ type: MARKUPS_EVENTS.LINK_SYNCING, documentAttachment, layerData });\n\n        this.service.deleteDocumentAttachment(documentAttachment.id).then(() => {\n            const docAttachments = layerData.attachments;\n            const index = docAttachments.indexOf(documentAttachment);\n\n            if (index > -1) {\n                docAttachments.splice(index, 1);\n            }\n            this.notify({ type: MARKUPS_EVENTS.LINK_SYNCED, documentAttachment, layerData });\n        }).catch((e) => {\n            this.errorHandler(Autodesk.Viewing.i18n.translate('Failed to delete markup attachment'), MARKUP_ERRORS.MARKUP_ATTACHMENT_DELETE_FAILED, e);\n            this.notify({ type: MARKUPS_EVENTS.LINK_SYNCED, documentAttachment, layerData });\n        });\n    }\n\n    renameDocumentAttachment({ documentAttachment, newName, layerData }) {\n        documentAttachment.status = MarkupsConstants.MARKUP_ATTACHMENT_RENAMING;\n        documentAttachment.tmpName = newName;\n\n        this.notify({ type: MARKUPS_EVENTS.LINK_SYNCING, documentAttachment, layerData });\n\n        this.service.renameDocumentAttachment(documentAttachment.id, newName).then((attachData) => {\n            documentAttachment.attributes = attachData.attributes;\n\n            documentAttachment.status = undefined;\n            documentAttachment.tmpName = undefined;\n            this.notify({ type: MARKUPS_EVENTS.LINK_SYNCED, documentAttachment, layerData });\n          }).catch((e) => {\n            // If rename failed, the name of the attachment will still stay the old one.\n            documentAttachment.status = undefined;\n            documentAttachment.tmpName = undefined;\n            this.errorHandler(Autodesk.Viewing.i18n.translate('Failed to rename markup attachment'), MARKUP_ERRORS.MARKUP_ATTACHMENT_RENAME_FAILED, e);\n            this.notify({ type: MARKUPS_EVENTS.LINK_SYNCED, documentAttachment, layerData });\n        });\n    }\n\n    updateLinkPosition(markupGuid, linkId, pos) {\n        const position = pos.clone();\n\n        if (this.markupsExtension.viewer.model.isPdf(true)) {\n            Autodesk.Viewing.PDFUtils.pdfToLeafletWorld(this.markupsExtension.viewer, position);\n        }\n\n        const metadata = {\n            markup_metadata: {\n                links: [{\n                    id: linkId,\n                    position\n                }]\n            }\n        };\n\n        return this.service.updateLayer(markupGuid, metadata).then((attachData) => {\n              return Promise.resolve(attachData);\n          }, (e) => {\n            this.errorHandler(Autodesk.Viewing.i18n.translate('Failed to update markup attachment'), MARKUP_ERRORS.MARKUP_ATTACHMENT_UPDATE_FAILED, e);\n            return Promise.reject('Failed to change the link position: ' + linkId);\n          });\n      }\n\n    deleteLayer(layerData) {\n        if (!layerData.guid) {\n            // In case the argument is layer's guid.\n            layerData = this.markupsCache.get(layerData);\n        }\n\n        layerData.status = MarkupsConstants.MARKUP_STATUS_DELETING;\n\n        this.notify({ type: MARKUPS_EVENTS.LAYER_SYNCING, layerData });\n        \n        const urn = this.options.documentUrn;\n\n        return this.service.deleteLayer(layerData.guid).then((result) => {\n                this.markupsCache.remove(layerData.guid, urn);\n                layerData.status = MarkupsConstants.MARKUP_STATUS_DELETE_SUCCEED;\n                this.notify({ type: MARKUPS_EVENTS.LAYER_SYNCED, layerData });\n                return Promise.resolve(true);\n            }, (e) => {\n              // Failed to delete the document.\n              layerData.status = MarkupsConstants.MARKUP_STATUS_DELETE_FAILED;\n              this.notify({ type: MARKUPS_EVENTS.LAYER_SYNCED, layerData });\n              this.errorHandler(Autodesk.Viewing.i18n.translate('Failed to delete markup'), MARKUP_ERRORS.MARKUP_DELETE_FAILED, e);\n              return Promise.reject('Failed to delete markup: ' + layerData.guid);\n            });\n    }\n\n    // WARNING - for develop usage only!!!\n    deleteAllLayers() {\n        this.markupsCache.getAsList().forEach((layer) => {\n            this.deleteLayer(layer);\n        });\n    }\n\n    publishLayer(layerData) {\n        if (!layerData.guid) {\n            // In case the argument is layer's guid.\n            layerData = this.markupsCache.get(layerData);\n        }\n\n        const prevStatus = layerData.status;\n        layerData.status = MarkupsConstants.MARKUP_STATUS_PUBLISHING;\n\n        this.notify({ type: MARKUPS_EVENTS.LAYER_SYNCING, layerData });\n        this.service.publishLayer(layerData.guid).then((updatedMetadata) => {\n                // Update local markup data\n                layerData.status = prevStatus;\n                layerData.metadata = updatedMetadata.attributes;\n                this.notify({ type: MARKUPS_EVENTS.LAYER_SYNCED, layerData });\n                return Promise.resolve();\n            }).catch((e) => {\n                // Fail to publish layer\n                layerData.status = prevStatus;\n                this.errorHandler(Autodesk.Viewing.i18n.translate('Failed to publish markup'), MARKUP_ERRORS.MARKUP_PUBLISH_FAILED, e);\n                this.notify({ type: MARKUPS_EVENTS.LAYER_SYNCED, layerData });\n            });\n    }\n\n    archiveLayer(layerData) {\n        if (!layerData.guid) {\n            // In case the argument is layer's guid.\n            layerData = this.markupsCache.get(layerData);\n        }\n\n        const prevStatus = layerData.status;\n        layerData.status = MarkupsConstants.MARKUP_STATUS_ARCHIVING;\n\n        this.notify({ type: MARKUPS_EVENTS.LAYER_SYNCING, layerData });\n        this.service.archiveLayer(layerData.guid, this.options.currentRawDocumentVersion).then((updatedMetadata) => {\n                layerData.status = prevStatus;\n                layerData.metadata = updatedMetadata.attributes;\n\n                this.notify({ type: MARKUPS_EVENTS.LAYER_SYNCED, layerData });\n\n                return Promise.resolve();\n            }).catch((e) => {\n                // Fail to archive layer\n                layerData.status = prevStatus;\n                this.errorHandler(Autodesk.Viewing.i18n.translate('Failed to archive markup'), MARKUP_ERRORS.MARKUP_ARCHIVE_FAILED, e);\n                this.notify({ type: MARKUPS_EVENTS.LAYER_SYNCED, layerData });\n            });\n    }\n\n    cancelRequests() {\n        this.service.cancelRequests();\n    }\n\n    terminate() {\n        this.cancelRequests();\n\n        this.markupsExtension = null;\n        this.markupsManager = null;\n        this.service = null;\n    }\n\n    getMaxPageLimit() {\n        return this.service.maxPageLimit;\n    }\n}\n","import MarkupsTool from './MarkupsTool';\nimport MarkupsUI from './UI/MarkupsUI';\nimport MarkupsManager from './MarkupsManager';\nimport MarkupsRenderer from './MarkupsRenderer';\nimport FilterManager from './FilterManager';\nimport MarkupsPermissionManager from './MarkupsPermissionManager';\nimport MarkupMobileCallbacks from './MarkupsMobileCallbacks';\nimport * as MarkupsConstants from './MarkupsConstants';\nimport { MARKUPS_EVENTS } from './MarkupsEvents';\nimport CacheObject from \"./CacheObject\";\nimport MarkupsServiceOperator from \"./Service/MarkupsServiceOperator\";\nimport { markupsOverlayRenderer } from \"./MarkupsCommon\";\n\nconst namespace = AutodeskNamespace('Autodesk.BIM360.Markups');\n\nexport default class MarkupsExtension extends Autodesk.Viewing.Extension {\n    constructor(viewer, options = {}) {\n        super(viewer, options);\n        this.viewer = viewer;\n        this.options = options;\n\n        this.onModelLoadedBinded = this.onModelLoaded.bind(this);\n    }\n\n    onModelLoaded(event) {\n        // It is possible that a model has been loaded as hidden, and it's not the viewer's main model.\n        if (!this.viewer.model || this.initialized) {\n            return;\n        }\n\n        this.initCache();\n\n        const model = event.model;\n        const node = model.getDocumentNode();\n        \n        if (node) {\n            this.sheetList = node.getRootNode().search({type: 'geometry'});\n            this.options.sheetGUID = node.guid();\n            this.options.sheetName = node.name();\n            this.options.fileName = node.findViewableParent().name();\n        } else {\n            this.sheetList = [];\n        }\n\n        this.markupsManager = new MarkupsManager(this);\n\n        this.filterManager = new FilterManager(this, this.options);\n\n        this.permissionManager = new MarkupsPermissionManager(this.options);\n\n        this.markupsTool = new MarkupsTool(this);\n\n        this.viewer.toolController.registerTool(this.markupsTool);\n\n        const prevLock = this.viewer.toolController.setIsLocked(false);\n        this.viewer.toolController.activateTool(this.markupsTool.getName());\n        this.viewer.toolController.setIsLocked(prevLock);\n\n        this.renderer = new MarkupsRenderer(this);\n\n        this.markupsManager.setDefaultCreationStyleProperties(); // Needs renderer to set default thickness\n\n        if (!this.options.isMobileApp) {\n            this.markupsUI = new MarkupsUI(this);\n            this.initMarkupsPanel();\n        } else {\n            this.mobileCallbacks = new MarkupMobileCallbacks(this);\n        }\n        \n        this.initServiceOperator();\n        \n        this.selectInitialLayer();\n\n        this.initialized = true;\n    }\n\n    initCache() {\n        if (!Object.prototype.hasOwnProperty.call(this.cache, 'markupsCache')) {\n            this.cache.markupsCache = new CacheObject();\n        }\n\n        this.markupsCache = this.cache.markupsCache;\n        \n        if (this.markupsCache.currentUrn !== this.options.documentUrn) {\n            this.cache.layerToSelect = null;\n            this.cache.layerToEdit = null;\n            this.cache.filters = null;\n        }\n\n        this.cache.markupsCache.setCurrentUrn(this.options.documentUrn);\n\n    }\n\n    initServiceOperator() {\n        if (!this.serviceOperator) {\n            this.serviceOperator = new MarkupsServiceOperator();\n        }\n        \n        this.serviceOperator.reset(this);\n        this.serviceOperator.fetchMarkups();\n    }\n\n    initMarkupsPanel() {\n        if (this.options.panelContainer && this.options.uiClasses && this.options.uiClasses.MarkupPanelClass) {\n            if (!this.cache.markupsPanel) {\n                this.cache.markupsPanel = new this.options.uiClasses.MarkupPanelClass;\n                this.cache.markupsPanel.reset(this);\n            } else {\n                this.cache.markupsPanel.reset(this);\n            }\n        }\n    }\n    \n    selectInitialLayer() {\n        // Wait until the camera will be initialized before selecting a layer.\n        setTimeout(async () => {\n            await Autodesk.Viewing.EventUtils.waitUntilTransitionEnded(this.viewer);\n\n            if (this.cache.layerToSelect) {\n                this.selectLayer(this.cache.layerToSelect, true, true);\n                this.cache.layerToSelect = null;\n            }\n\n            if (this.cache.layerToEdit) {\n                this.editLayer(this.cache.layerToEdit, true, true, true);\n                this.cache.layerToEdit = null;\n            }\n        });\n    }\n\n    async load() {\n        this.cache = this.getCache();\n\n        await this.viewer.loadExtension('Autodesk.Snapping');\n\n        if (this.viewer.model) {\n            this.onModelLoaded({ model: this.viewer.model });\n        } else {\n            this.viewer.addEventListener(Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT, this.onModelLoadedBinded);\n        }\n        \n        return true;\n    }\n\n    unload() {\n        this.viewer.removeEventListener(Autodesk.Viewing.MODEL_ROOT_LOADED_EVENT, this.onModelLoadedBinded);\n\n        if (this.mobileCallbacks) {\n            this.mobileCallbacks.destroy();\n            this.mobileCallbacks = null;\n        }\n\n        if (this.markupsUI) {\n            this.markupsUI.destroy();\n            this.markupsUI = null;\n        }\n\n        if (this.renderer) {\n            this.renderer.destroy();\n            this.renderer = null;\n        }\n\n        if (this.markupsTool) {\n            this.viewer.toolController.deregisterTool(this.markupsTool);\n            this.markupsTool = null;\n        }\n\n        if (this.markupsManager) {\n            this.markupsManager.destroy();\n            this.markupsManager = null;\n        }\n\n        if (this.filterManager) {\n            this.filterManager.destroy();\n            this.filterManager = null;\n        }\n\n        if (this.permissionManager) {\n            this.permissionManager.destroy();\n            this.permissionManager = null;\n        }\n\n        if (this.serviceOperator) {\n            this.serviceOperator.terminate();\n            this.serviceOperator = null;\n        }\n\n        this.markupsCache = null;\n        this.initialized = false;\n\n        return true;\n    }\n\n    /**\n     * Public interface\n     */\n\n    startMarkupSession(creationType, layer) {\n        this.markupsManager.startMarkupSession(creationType, layer);\n    }\n\n    endMarkupSession(save) {\n        this.markupsManager.endMarkupSession(save);\n    }\n\n    setToolEnabled(enable) {\n        this.markupsManager.setToolEnabled(enable);\n    }\n\n    isToolEnabled() {\n        return this.markupsManager.isToolEnabled();\n    }\n\n    editLayer(layer, focus, selectAllMarkups, immediate) {\n        this.markupsManager.editLayer(layer, focus, selectAllMarkups, immediate);\n    }\n\n    changeMarkupCreationType(creationType, startSession) {\n        if (this.markupsManager.isMarkupSessionOpen() || startSession) {\n            this.markupsManager.changeMarkupCreationType(creationType);\n        }\n    }\n\n    // Removes the markup for the canvas.\n    deleteMarkup(markup) {\n        this.markupsManager.deleteMarkup(markup);\n    }\n\n    deleteInEditMarkups() {\n        this.markupsManager.deleteInEditMarkups();\n    }\n\n    undo() {\n        this.markupsManager.undo();\n    }\n\n    redo() {\n        this.markupsManager.redo();\n    }\n\n    copy() {\n        this.markupsManager.copy();\n    }\n\n    paste() {\n        this.markupsManager.paste();\n    }\n\n    cut() {\n        this.markupsManager.cut();\n    }\n\n    selectMarkup(markup) {\n        this.markupsManager.selectMarkup(markup);\n    }\n\n    deselectMarkup(markup) {\n        this.markupsManager.deselectMarkup(markup);\n    }\n\n    deselectAllMarkups(exclude) {\n        this.markupsManager.deselectAllMarkups(exclude);\n    }\n\n    deselectAllLayers(exclude) {\n        this.markupsManager.deselectAllLayers(exclude);\n    }\n\n    exitMarkupView() {\n        this.markupsManager.exitMarkupView();\n    }\n    \n    getSelectedMarkups() {\n        return this.markupsManager.getSelectedMarkups();\n    }\n\n    getSelectedLayer() {\n        return this.markupsManager.getSelectedLayer();\n    }\n\n    getVisibleMarkups() {\n        return this.markupsManager.getVisibleMarkups();\n    }\n\n    selectLayer(layer, focus, immediate) {\n        this.markupsManager.selectLayer(layer, focus, immediate);\n    }\n\n    deselectLayer(layer) {\n        this.markupsManager.deselectLayer(layer);\n    }\n\n    getStyleProperty(key) {\n        return this.markupsManager.getStyleProperty(key);\n    }\n\n    changeStyleProperty(key, value, dontSubmit) {\n        this.markupsManager.changeStyleProperty(key, value, dontSubmit);\n    }\n\n    loadLayers(layersJson = this.markupsCache && this.markupsCache.getAsList(),\n               ignoreFilters = false,\n               removeExistingLayers = false) {\n        this.markupsManager.loadLayers(layersJson, ignoreFilters, removeExistingLayers);\n    }\n\n    // Remove layer from canvas.\n    removeLayer(layer) {\n        this.markupsManager.removeLayer(layer);\n    }\n\n    changeCreationStatusType(status) {\n        this.markupsManager.changeCreationStatusType(status);\n    }\n\n    getCreationStatusType() {\n        return this.markupsManager.getCreationStatusType();\n    }\n\n    updateFilters(filters) {\n        this.filterManager.updateFilters(filters);\n    }\n}\n\n// Register the extension with the extension manager.\nAutodesk.Viewing.theExtensionManager.registerExtension('Autodesk.BIM360.Markups', MarkupsExtension);\n\nnamespace.Constants = Object.assign({}, MarkupsConstants);\nnamespace.Events = Object.assign({}, MARKUPS_EVENTS);\nnamespace.markupsOverlayRenderer = markupsOverlayRenderer;\n"],"sourceRoot":""}