{"version":3,"sources":["webpack://Autodesk.Extensions.[name]/webpack/bootstrap","webpack://Autodesk.Extensions.[name]/./extensions/NPR/NPRRenderContextExtension.js","webpack://Autodesk.Extensions.[name]/./extensions/NPR/NPRRenderOptionsPanel.js","webpack://Autodesk.Extensions.[name]/./extensions/NPR/NPRLocales.js","webpack://Autodesk.Extensions.[name]/./extensions/NPR/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","getResourceUrl","Autodesk","Viewing","Private","ShaderPass","CelShader","RenderContextPostProcessExtension","av","NPRRenderContextExtension","renderContext","viewer","this","_pencilMap","_graphiteMaps","_pencilBackgroundMap","preloadPostProcessStyle","style","undefined","THREE","ImageUtils","crossOrigin","file","loadTexture","wrapS","wrapT","RepeatWrapping","postProcPass","uniforms","setPostProcessParameter","token","changePostProcessParameter","impl","fireRenderOptionChanged","invalidate","_settings","settings","setPostProcShaded","depthTargetSupported","isPostProcShaded","idbuffer","isWeakDevice","initPostPipeline","sao","antialias","console","error","queryPostProcessParameter","logger","warning","load","setNoDepthNoBlend","unload","dispose","postProcessEdgesOn","getOrder","shouldRenderAfterOverlays","constructor","GlobalManagerMixin","TAB_ID","NPRRenderOptionsPanel","extension","title","PANEL_ID","id","UI","SettingsPanel","container","heightAdjustment","width","setGlobalManager","globalManager","classList","add","addTab","className","selectTab","postProcessList","postProcess","addDropDownMenu","event","detail","styleVal","Math","floor","parseFloat","enable","edgesCheckbox","setDisabled","grayscaleCheckbox","brightnessSlider","contrastSlider","preserveColorCheckbox","levelsSlider","repeatsSlider","rotationSlider","outlineRadiusSlider","outlineNoiseCheckbox","postProcessDropdown","getControl","edgesToggle","addCheckbox","checked","grayscaleToggle","brightness","addSlider","step","contrast","preserveColorToggle","levels","repeats","rotation","outlineNoiseToggle","outlineRadius","locales","en","cs","de","es","fr","it","ja","ko","pl","ru","tr","nl","sv","da","no","Extension","NPRExtension","options","_configButtonId","_panel","hasUI","GuiViewer3D","openPanel","_initButtonConfig","extendLocalization","nprRenderContextExtension","renderer","postShadingManager","registerPostProcessingExtension","viewerSettingsPanel","removeConfigButton","uninitialize","removePostProcessingExtension","onToolbarCreated","setVisible","setParameter","param","settingsPanel","getSettingsPanel","addConfigButton","addEventListener","SETTINGS_PANEL_CREATED_EVENT","once","theExtensionManager","registerExtension"],"mappings":"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","file":"NPR/NPR.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 856);\n","/**\n * NPR related functions are moved to an extension\n * to keep default LMV render context unadulterated, and\n * to help customers to implement their own postprocess extensions.\n * This is achieved by extending RenderContextPostProcessExtension.\n */\n\nconst POSTPROC_STYLE_OFF = 0;\nconst POSTPROC_STYLE_EDGING = 1;\nconst POSTPROC_STYLE_CEL = 2;\nconst POSTPROC_STYLE_GRAPHITE = 3;\nconst POSTPROC_STYLE_PENCIL = 4;\n\nconst getResourceUrl = Autodesk.Viewing.Private.getResourceUrl;\nconst ShaderPass = Autodesk.Viewing.Private.ShaderPass;\nconst CelShader = Autodesk.Viewing.Private.CelShader;\nconst RenderContextPostProcessExtension = Autodesk.Viewing.Private.RenderContextPostProcessExtension;\n\nconst av = Autodesk.Viewing;\n\nvar NPRRenderContextExtension = function (renderContext, viewer) {\n    RenderContextPostProcessExtension.call(this, renderContext, viewer);\n\n    // Initialize private variables\n    var _pencilMap = null;\n    var _graphiteMaps = [];\n    var _pencilBackgroundMap = null;\n\n    this.preloadPostProcessStyle = function (style) {\n        if (style == undefined) {\n            // if no argument given, load them all\n            this.preloadPostProcessStyle(\"graphite\");\n            this.preloadPostProcessStyle(\"pencil\");\n            return;\n        }\n        switch (style) {\n            case \"graphite\":\n                if (_graphiteMaps[0] === undefined) { // TODO better way to test? Note it differs from the one below\n                    // LMV-2820 fix - we are in control of the URL, so to have Ninja function, we allow load from \"another\" site.\n                    THREE.ImageUtils.crossOrigin = '';\n                    for (var i = 0; i < 8; i++) {\n                        var file = getResourceUrl(\"extensions/NPR/res/postprocess/Graphite\" + (i + 1) + \".png\");\n                        _graphiteMaps[i] = THREE.ImageUtils.loadTexture(file);\n                        //_graphiteMaps[i] = THREE.ImageUtils.loadTexture(\"http://localhost:8000/build/res/postprocess/Graphite\" + (i+1) + \".png\"); \n                        _graphiteMaps[i].wrapS = _graphiteMaps[i].wrapT = THREE.RepeatWrapping;\n                    }\n                    this.postProcPass.uniforms['tGraphite1'].value = _graphiteMaps[0];\n                    this.postProcPass.uniforms['tGraphite2'].value = _graphiteMaps[1];\n                    this.postProcPass.uniforms['tGraphite3'].value = _graphiteMaps[2];\n                    this.postProcPass.uniforms['tGraphite4'].value = _graphiteMaps[3];\n                    this.postProcPass.uniforms['tGraphite5'].value = _graphiteMaps[4];\n                    this.postProcPass.uniforms['tGraphite6'].value = _graphiteMaps[5];\n                    this.postProcPass.uniforms['tGraphite7'].value = _graphiteMaps[6];\n                    this.postProcPass.uniforms['tGraphite8'].value = _graphiteMaps[7];\n                }\n                break;\n            case \"pencil\":\n                if (_pencilMap === null) { // TODO better way to test?\n                    // LMV-2820 fix - we are in control of the URL, so to have Ninja function, we allow load from \"another\" site.\n                    THREE.ImageUtils.crossOrigin = '';\n                    _pencilMap = THREE.ImageUtils.loadTexture(getResourceUrl(\"extensions/NPR/res/postprocess/ColorPencil_02.png\"));\n                    _pencilMap.wrapS = _pencilMap.wrapT = THREE.RepeatWrapping;\n                    _pencilBackgroundMap = THREE.ImageUtils.loadTexture(getResourceUrl(\"extensions/NPR/res/postprocess/paper2.jpg\"));\n                    _pencilBackgroundMap.wrapS = _pencilBackgroundMap.wrapT = THREE.RepeatWrapping;\n\n                    this.postProcPass.uniforms['tFill'].value = _pencilMap;\n                    this.postProcPass.uniforms['tPaper'].value = _pencilBackgroundMap;\n                }\n                break;\n        }\n    };\n\n    // returns 1 (or some other error code) on failure, 0 on success\n    this.setPostProcessParameter = function (token, value) {\n        this.changePostProcessParameter(token, value);\n\n        this.viewer.impl.fireRenderOptionChanged();\n        this.viewer.impl.invalidate(true);\n    };\n\n\n    this.changePostProcessParameter = function (token, value) {\n        let _settings = this.renderContext.settings;\n\n        switch (token) {\n            case \"style\":\n                this.setPostProcShaded(false);\n                this.postProcPass.uniforms['style'].value = POSTPROC_STYLE_OFF;\n                if (this.renderContext.depthTargetSupported()) {\n                    // put this code back in if we can't run with mobile\n                    // if _isWeakDevice, I guess we can't use? Needs ID buffer and normals/depths.\n                    // if ( _isWeakDevice ) {\n                    //     // sorry, not available on mobile - needs ID buffer and normal/depth buffer\n                    //     return 1;\n                    // } else {\n                    // load any textures that haven't been loaded.\n                    this.preloadPostProcessStyle(value);\n                    switch (value) {\n                        case \"edging\":\n                            this.setPostProcShaded(true);\n                            this.postProcPass.uniforms['style'].value = POSTPROC_STYLE_EDGING;\n                            break;\n                        case \"cel\":\n                            this.setPostProcShaded(true);\n                            this.postProcPass.uniforms['style'].value = POSTPROC_STYLE_CEL;\n                            break;\n                        case \"graphite\":\n                            this.setPostProcShaded(true);\n                            this.postProcPass.uniforms['style'].value = POSTPROC_STYLE_GRAPHITE;\n                            break;\n                        case \"pencil\":\n                            this.setPostProcShaded(true);\n                            this.postProcPass.uniforms['style'].value = POSTPROC_STYLE_PENCIL;\n                            break;\n                    }\n                    if (this.isPostProcShaded()) {\n                        _settings.idbuffer = true;\n                    } else {\n                        _settings.idbuffer = !this.renderContext.isWeakDevice(); // TODO are these good conditions?\n                    }\n\n                    this.renderContext.initPostPipeline(_settings.sao, _settings.antialias);\n                }\n                break;\n\n            case \"edges\":\n                this.postProcPass.uniforms['idEdges'].value = value ? 1 : 0;\n                this.postProcPass.uniforms['normalEdges'].value = value ? 1 : 0;\n                this.postProcPass.uniforms['depthEdges'].value = value ? 1 : 0;\n                // turning off edges means we can use considerably less memory and fragment shading evaluations,\n                // i.e., we can use normal-resolution off-screen targets, not 2x2 larger\n                this.renderContext.initPostPipeline(_settings.sao, _settings.antialias);\n                break;\n            case \"idEdges\":\n                this.postProcPass.uniforms['idEdges'].value = value ? 1 : 0;\n                this.renderContext.initPostPipeline(_settings.sao, _settings.antialias);\n                break;\n            case \"normalEdges\":\n                this.postProcPass.uniforms['normalEdges'].value = value ? 1 : 0;\n                this.renderContext.initPostPipeline(_settings.sao, _settings.antialias);\n                break;\n            case \"depthEdges\":\n                this.postProcPass.uniforms['depthEdges'].value = value ? 1 : 0;\n                this.renderContext.initPostPipeline(_settings.sao, _settings.antialias);\n                break;\n            case \"brightness\":\n                this.postProcPass.uniforms['brightness'].value = value;\n                break;\n            case \"contrast\":\n                this.postProcPass.uniforms['contrast'].value = value;\n                break;\n            case \"grayscale\":\n                this.postProcPass.uniforms['grayscale'].value = value ? 1 : 0;\n                break;\n            case \"preserveColor\":\n                this.postProcPass.uniforms['preserveColor'].value = value ? 1 : 0;\n                break;\n            case \"levels\":\n                this.postProcPass.uniforms['levels'].value = value;\n                break;\n            case \"repeats\":\n                this.postProcPass.uniforms['repeats'].value = value;\n                break;\n            case \"rotation\":    // 0.0 to 1.0, around circle (e.g. 0.5 == pi radians, 1.0 == 2*pi)\n                this.postProcPass.uniforms['rotation'].value = value;\n                break;\n            case \"outlineRadius\":\n                this.postProcPass.uniforms['outlineRadius'].value = value;\n                break;\n            case \"outlineNoise\":\n                this.postProcPass.uniforms['outlineNoise'].value = value ? 1 : 0;\n                break;\n            default:\n                console.error(\"setPostProcessParameter: parameter '\" + token + \"' is not valid.\");\n        }\n\n        return 0;\n    };\n\n    // TODO what's a better return value if undefined? Or just issue a warning? Should there be a separate query function?\n    this.queryPostProcessParameter = function (token, value) {\n        if (this.postProcPass.uniforms[token] !== 'undefined') {\n            return this.postProcPass.uniforms[token].value;\n        } else {\n            logger.warning(\"queryPostProcessParameter: parameter '\" + token + \"' is not valid\");\n            return value;\n        }\n    };\n\n    this.load = function () {\n        this.postProcPass = new ShaderPass(CelShader);\n        this.renderContext.setNoDepthNoBlend(this.postProcPass);\n\n        // Initialize the NPR related resources\n        this.preloadPostProcessStyle();\n    };\n\n    this.unload = function () {\n\n        this.changePostProcessParameter('style', null);\n        \n        // Need to do some cleanup here, once user deactive the extension\n        // Can we remove all those resources to safe a little bit memory\n        for (let texture of _graphiteMaps) {\n            texture.dispose();\n        }\n\n        _graphiteMaps = [];\n\n        RenderContextPostProcessExtension.prototype.unload.call(this);\n    };\n\n    this.postProcessEdgesOn = function () {\n        return (\n            this.isPostProcShaded() &&\n                (this.postProcPass.uniforms[\"idEdges\"].value !== 0 ||\n                this.postProcPass.uniforms[\"normalEdges\"].value !== 0 ||\n                this.postProcPass.uniforms[\"depthEdges\"].value !== 0)\n        );\n    };\n\n    this.getOrder = function () {\n        return 10;\n    };\n\n    this.shouldRenderAfterOverlays = function() {\n        return false;\n    };\n};\n\nNPRRenderContextExtension.prototype = Object.create(RenderContextPostProcessExtension.prototype);\nNPRRenderContextExtension.prototype.constructor = NPRRenderContextExtension;\nav.GlobalManagerMixin.call(NPRRenderContextExtension.prototype);\n\nexport { NPRRenderContextExtension };","\n'use strict';\n\n\nconst TAB_ID = 'configTab';\nconst TAB_LABEL = 'Configuration';\nconst POST_PROCESS_LABEL = 'Postprocess Style';\nconst DISPLAY_EDGES  = 'Display edges';\nconst DISPLAY_EDGES_DESC = 'Controls whether edge lines should be drawn around objects';\nconst GRAYSCALE = 'Grayscale';\nconst GRAYSCALE_DESC = 'Converts the rendering to grayscale with no color';\nconst BRIGHTNESS = 'Brightness';\nconst CONTRAST = 'Contrast';\nconst PRESERVE_COLOR ='Preserve Color';\nconst PRESERVE_COLOR_DESC = 'Maintains the hue by pulling the color back into gamut if its too high';\nconst LEVELS = 'Levels';\nconst REPEATS = 'Repeats';\nconst ROTATION = 'Rotation';\nconst OUTLINE_RADIUS = 'Outline Radius';\nconst OUTLINE_NOISE = 'Outline Noise';\nconst OUTLINE_NOISE_DESC = 'Adds an outline noise to the edges';\n\nvar NPRRenderOptionsPanel = function(viewer, extension, title) {\n    const PANEL_ID = 'adsk_npr_renderoptions_panel_' + viewer.id;\n    const opts = { heightAdjustment: 90, width: 460 };\n    Autodesk.Viewing.UI.SettingsPanel.call(this, viewer.container, PANEL_ID, title, opts);\n    this.setGlobalManager(viewer.globalManager);\n    this.container.classList.add('viewer-settings-panel');\n    this.viewer = viewer;\n\n    // Add a default tab called Render Options\n    this.addTab(TAB_ID, TAB_LABEL, { className: 'config' });\n    this.selectTab(TAB_ID);\n\n    // DropDown \"Postprocess Style\"\n    let postProcessList = ['none', 'edging', 'cel', 'graphite', 'pencil'];\n\n    this.postProcess = this.addDropDownMenu(TAB_ID, POST_PROCESS_LABEL, postProcessList, 0 , (event) => {\n      var value = event.detail.value;\n\n      // load them all up, since someone is fiddling with style\n      extension.preloadPostProcessStyle();\n      extension.setPostProcessParameter(\"style\", postProcessList[value]);\n\n      var styleVal = Math.floor(parseFloat(value));\n      var enable = (styleVal != 0.0);\n      this.edgesCheckbox.setDisabled(!enable);\n      this.grayscaleCheckbox.setDisabled(!enable);\n      this.brightnessSlider.setDisabled(!enable);\n      this.contrastSlider.setDisabled(!enable);\n      this.preserveColorCheckbox.setDisabled(!enable);\n      this.levelsSlider.setDisabled(styleVal !== 2.0);\n      this.repeatsSlider.setDisabled(styleVal < 3.0);\n      this.rotationSlider.setDisabled(styleVal < 3.0);\n      this.outlineRadiusSlider.setDisabled(!enable);\n      this.outlineNoiseCheckbox.setDisabled(!enable);\n    });\n    this.postProcessDropdown = this.getControl(this.postProcess);\n\n    // Checkbox \"Display Edges\"\n    this.edgesToggle = this.addCheckbox(TAB_ID, DISPLAY_EDGES, true, (checked) => {\n      extension.setPostProcessParameter(\"edges\", checked);\n    }, DISPLAY_EDGES_DESC );\n    this.edgesCheckbox = this.getControl(this.edgesToggle);\n\n    // Checkbox \"Gray Scale\"\n    this.grayscaleToggle = this.addCheckbox(TAB_ID, GRAYSCALE, true, (checked) => {\n      extension.setPostProcessParameter(\"grayscale\", checked);\n    }, GRAYSCALE_DESC );\n    this.grayscaleCheckbox = this.getControl(this.grayscaleToggle);\n\n    // Slider \"Brightness\"\n    this.brightness =  this.addSlider(TAB_ID, BRIGHTNESS,\n      -1.0, 1.0, 0.0,\n      (event) => {\n          var value = event.detail.value;\n          extension.setPostProcessParameter('brightness', parseFloat(value));\n      },\n      { step: 0.01 }\n    ); \n    this.brightnessSlider = this.getControl(this.brightness);\n\n    // Slider \"Contrast\"\n    this.contrast =  this.addSlider(TAB_ID, CONTRAST,\n      -1.0, 1.0, 0.0,\n      (event) => {\n          var value = event.detail.value;\n          extension.setPostProcessParameter('contrast', parseFloat(value));\n      },\n      { step: 0.01 }\n    );\n    this.contrastSlider = this.getControl(this.contrast);\n\n    // Checkbox \"Preserve Color\"\n    this.preserveColorToggle =  this.addCheckbox(TAB_ID, PRESERVE_COLOR, true, (checked) => {\n      extension.setPostProcessParameter(\"preserveColor\", checked);\n    }, PRESERVE_COLOR_DESC );\n    this.preserveColorCheckbox = this.getControl(this.preserveColorToggle);\n\n    // Slider \"Levels\"\n    this.levels = this.addSlider(TAB_ID, LEVELS, 2.0, 2.99, 0,\n      (event) => {\n        var value = event.detail.value;\n        extension.setPostProcessParameter(\"levels\", 2 * parseFloat(value));\n      }, { step: 0.01 }\n    );\n    this.levelsSlider = this.getControl(this.levels);\n\n    // Slider \"Repeats\"\n    this.repeats = this.addSlider(TAB_ID, REPEATS, 3.0, 5.0, 3.0,\n      (event) => {\n        var value = event.detail.value;\n        // \"graphite\" value ranges from 3.0 - 3.99;\n        // \"pencil\" value ranges from 4.0 - 5.0;\n        extension.setPostProcessParameter(\"repeats\", parseFloat(value));\n    }, { step: 0.01 });\n    this.repeatsSlider = this.getControl(this.repeats);\n\n    // Slider \"Rotation\"\n    this.rotation =  this.addSlider(TAB_ID, ROTATION,\n      0.0, 1.0, 0.0,\n      (event) => {\n          var value = event.detail.value;\n          extension.setPostProcessParameter(\"rotation\", parseFloat(value));\n      },\n      { step: 0.01 }\n    );\n    this.rotationSlider = this.getControl(this.rotation);\n\n    // Checkbox \"Preserve Color\"\n    this.outlineNoiseToggle =  this.addCheckbox(TAB_ID, OUTLINE_NOISE, false, (checked) => {\n      extension.setPostProcessParameter(\"outlineNoise\", checked);\n    }, OUTLINE_NOISE_DESC );\n    this.outlineNoiseCheckbox = this.getControl(this.outlineNoiseToggle);\n\n    // Slider \"Rotation\"\n    this.outlineRadius =  this.addSlider(TAB_ID, OUTLINE_RADIUS,\n      1.0, 3.0, 1.0,\n      (event) => {\n          var value = event.detail.value;\n          extension.setPostProcessParameter(\"outlineRadius\", parseFloat(value));\n      },\n      { step: 0.01 }\n    );\n    this.outlineRadiusSlider = this.getControl(this.outlineRadius);\n}\n\nNPRRenderOptionsPanel.prototype = Object.create(Autodesk.Viewing.UI.SettingsPanel.prototype);\nNPRRenderOptionsPanel.prototype.constructor = NPRRenderOptionsPanel;\n\nexport { NPRRenderOptionsPanel };","/**\n * Include each locale json file and return it in an object\n * that can be consumed by i18n\n */\n\nimport json_en from '../../res/locales/en/nobundle-npr.loc.json';\n\nimport json_en_GB from '../../res/locales/en-GB/nobundle-npr.loc.json';\nimport json_cs from '../../res/locales/cs/nobundle-npr.loc.json';\nimport json_de from '../../res/locales/de/nobundle-npr.loc.json';\nimport json_es from '../../res/locales/es/nobundle-npr.loc.json';\nimport json_fr from '../../res/locales/fr/nobundle-npr.loc.json';\nimport json_fr_CA from '../../res/locales/fr-CA/nobundle-npr.loc.json';\nimport json_it from '../../res/locales/it/nobundle-npr.loc.json';\nimport json_ja from '../../res/locales/ja/nobundle-npr.loc.json';\nimport json_ko from '../../res/locales/ko/nobundle-npr.loc.json';\nimport json_pl from '../../res/locales/pl/nobundle-npr.loc.json';\nimport json_pt_BR from '../../res/locales/pt-BR/nobundle-npr.loc.json';\nimport json_ru from '../../res/locales/ru/nobundle-npr.loc.json';\nimport json_tr from '../../res/locales/tr/nobundle-npr.loc.json';\nimport json_zh_HANS from '../../res/locales/zh-HANS/nobundle-npr.loc.json';\nimport json_zh_HANT from '../../res/locales/zh-HANT/nobundle-npr.loc.json';\nimport json_zh_HK from '../../res/locales/zh-HK/nobundle-npr.loc.json';\nimport json_nl from '../../res/locales/nl/nobundle-npr.loc.json';\nimport json_sv from '../../res/locales/sv/nobundle-npr.loc.json';\nimport json_da from '../../res/locales/da/nobundle-npr.loc.json';\nimport json_no from '../../res/locales/no/nobundle-npr.loc.json';\n\nexport const locales = {\n    en: json_en,\n    \n    \"en-GB\": json_en_GB,\n    cs: json_cs,\n    de: json_de,\n    es: json_es,\n    fr: json_fr,\n    \"fr-CA\": json_fr_CA,\n    it: json_it,\n    ja: json_ja,\n    ko: json_ko,\n    pl: json_pl,\n    \"pt-BR\": json_pt_BR,\n    ru: json_ru,\n    tr: json_tr,\n    \"zh-HANS\": json_zh_HANS,\n    \"zh-HANT\": json_zh_HANT,\n    \"zh-HK\": json_zh_HK,\n    nl: json_nl,\n    sv: json_sv,\n    da: json_da,\n    no: json_no,\n};\n","import { NPRRenderContextExtension } from './NPRRenderContextExtension';\nimport { NPRRenderOptionsPanel } from './NPRRenderOptionsPanel';\nimport { locales } from './NPRLocales';\n\nconst SETTINGS_BUTTON_LABEL = 'Non-Photorealistic Rendering';\n\nconst Extension = Autodesk.Viewing.Extension;\n\n/**\n * Provides UI controls for NPR settings\n * \n * The extension id is: `Autodesk.NPR`\n * \n * @example\n *    viewer.loadExtension('Autodesk.NPR');\n * \n * @memberof Autodesk.Viewing.Extensions.NPR\n * @see {@link Autodesk.Viewing.Extension} for common inherited methods.\n * @constructor\n * @param {Autodesk.Viewing.Viewer3D} viewer - Viewer instance.\n * @param {Object} options - Not used.\n */\nexport function NPRExtension(viewer, options) {\n    Extension.call(this, viewer, options);\n    this.viewer = viewer;\n    this._configButtonId = null;\n    this._panel = null;\n    this.hasUI = Autodesk.Viewing.GuiViewer3D && viewer instanceof Autodesk.Viewing.GuiViewer3D;\n    this.openPanel = this.openPanel.bind(this);\n    this._initButtonConfig = this._initButtonConfig.bind(this);\n};\n\nNPRExtension.prototype = Object.create(Autodesk.Viewing.Extension.prototype);\nNPRExtension.prototype.constructor = NPRExtension;\n\n/**\n * Load the NPR extension.\n * It will fail to load when running a headless viewer.\n */\nNPRExtension.prototype.load = function () {\n    this.extendLocalization(locales);\n    this.nprRenderContextExtension = new NPRRenderContextExtension(this.viewer.impl.renderer(), this.viewer);\n    this.nprRenderContextExtension.load();\n    this.viewer.impl.renderer().postShadingManager().registerPostProcessingExtension(this.nprRenderContextExtension);\n    return true;\n};\n\n/**\n * Unload the NPR extension.\n */\nNPRExtension.prototype.unload = function () {        \n    if (this._configButtonId !== null) {\n      this.viewer.viewerSettingsPanel.removeConfigButton(this._configButtonId);\n      this._configButtonId = null;   \n    }\n    if (this._panel) {\n      this._panel.uninitialize();\n      this._panel = null;\n    }\n    if (this.nprRenderContextExtension) {\n        this.viewer.impl.renderer().postShadingManager().removePostProcessingExtension(this.nprRenderContextExtension);\n        this.viewer.impl.invalidate(true,true,true);\n        this.nprRenderContextExtension = null;\n    }\n    return true;\n};\n\n/**\n * Invoked by the viewer when the toolbar UI is available. \n * Adds a button to the Settings panel.\n *\n * @alias Autodesk.Viewing.Extensions.NPRExtension#onToolbarCreated\n */\nNPRExtension.prototype.onToolbarCreated = function() {   \n    this._initButtonConfig();\n}\n\n/**\n * Opens the NPR Render Options panel.\n *\n * @alias Autodesk.Viewing.Extensions.NPRExtension#openPanel\n */\nNPRExtension.prototype.openPanel = function() {\n    if (!this._panel) {\n        this._panel = new NPRRenderOptionsPanel(this.viewer, this.nprRenderContextExtension, SETTINGS_BUTTON_LABEL);\n    }\n    this._panel.setVisible(true);\n}\n\n/**\n * Changes post-processing setting parameters. The supported param/value combinations are:\n * \n * - \"style\": either \"edging\", \"cel\", \"graphite\", \"pencil\" or `null` to turn post-processing off.\n * - \"edges\": `boolean`\n * - \"idEdges\": `boolean`\n * - \"normalEdges\": `boolean` \n * - \"depthEdges\": `boolean`\n * - \"brightness\": `Number`\n * - \"contrast\": `Number`\n * - \"grayscale\": `boolean`\n * - \"preserveColor\": `boolean`\n * - \"levels\": `Number`\n * - \"repeats\": `Number`\n * - \"rotation\": `Number` between 0 and 1, around circle (e.g. 0.5 == pi radians, 1.0 == 2*pi)\n *\n * Fires event {@link RENDER_OPTION_CHANGED_EVENT}.\n *\n * @param {string} param - Either \"style\", \"edges\", \"idEdges\", \"normalEdges\", \"depthEdges\", \"brightness\", \n *                         \"contrast\", \"grayscale\", \"preserveColor\", \"levels\", \"repeats\" or \"rotation\".\n * @param {*} value - type depends on the specified `param`.\n *\n * @alias Autodesk.Viewing.Extensions.NPRExtension#setParameter\n */\nNPRExtension.prototype.setParameter = function(param, value) {\n    this.nprRenderContextExtension.setPostProcessParameter(param, value);\n}\n\n/**\n * Adds a button to the Settings Panel.\n * @private\n */\nNPRExtension.prototype._initButtonConfig = function() {   \n    var settingsPanel = this.viewer.getSettingsPanel();\n    if (!settingsPanel) {\n        this.addEventListener(av.SETTINGS_PANEL_CREATED_EVENT, this._initButtonConfig, {once: true});\n        return;\n    }\n    this._configButtonId = settingsPanel.addConfigButton(SETTINGS_BUTTON_LABEL, this.openPanel);\n};\n\n\n/**\n * Register the extension with the extension manager.\n */\nAutodesk.Viewing.theExtensionManager.registerExtension('Autodesk.NPR', NPRExtension);\n"],"sourceRoot":""}